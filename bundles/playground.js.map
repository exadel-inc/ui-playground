{"version":3,"file":"playground.js","mappings":"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","sources":["webpack:///webpack/runtime/load script","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/bind.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/events/target.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/utils.js","webpack:///../src/plugins/editor/ace/utils.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/amd define","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/ensure chunk","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/functions.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/types.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/path.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/format.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/bool-attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/environment/export-ns.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/events/misc.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/array.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/memoize.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/memoize.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/compare.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/traversing.js","webpack:///../node_modules/@exadel/esl/modules/esl-traversing-query/core/esl-traversing-query.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/listener.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/api.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/listen.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/class.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/keys.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/prop.js","webpack:///../node_modules/@exadel/esl/modules/esl-base-element/core/esl-base-element.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-wrapper.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/raf.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/decorate.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select-renderer.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/json-attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/uid.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/environment/device-detector.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/delayed-task.js","webpack:///../node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/copy.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/ready.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/ready.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/rtl.js","webpack:///../node_modules/@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-item.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-list.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select-dropdown.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/merge.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-dpr.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-breakpoint.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/env-shortcuts.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-const.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-base.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-condition.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-containers.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-query.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule-list.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image-iobserver.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/sanitize.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image-strategies.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image.js","webpack:///../node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-placeholder.js","webpack:///../node_modules/@exadel/esl/modules/esl-trigger/core/esl-trigger.js","webpack:///../node_modules/@exadel/esl/modules/esl-alert/core/esl-alert.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/fixes/ie-fixes.js","webpack:///../src/core/base/model.ts","webpack:///../node_modules/@exadel/esl/modules/esl-utils/abstract/observable.js","webpack:///../src/core/base/root.ts","webpack:///../src/core/base/plugin.ts","webpack:///../src/core/preview/preview.ts","webpack:///../src/plugins/header/snippets/snippets.ts","webpack:///../src/plugins/header/options/option/option.ts","webpack:///../src/plugins/header/options/options.ts","webpack:///../src/plugins/header/header.ts","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/promise.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/debounce.js","webpack:///../src/plugins/editor/editor.ts","webpack:///../src/utils/warning-msg.ts","webpack:///../src/plugins/settings/setting.ts","webpack:///../src/plugins/settings/settings.ts","webpack:///../src/settings/text-setting/text-setting.ts","webpack:///../src/utils/token-list-utils.ts","webpack:///../src/settings/select-setting/select-setting.ts","webpack:///../src/settings/bool-setting/bool-setting.ts","webpack:///../src/settings/slider-setting/slider-setting.ts","webpack:///./src/playground.ts","webpack:///../src/core/registration.ts","webpack:///../src/plugins/registration.ts","webpack:///../src/settings/registration.ts"],"sourcesContent":["var inProgress = {};\n// data-webpack is not used as build has no uniqueName\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { getPropertyDescriptor } from '../misc/object/utils';\n/** Decorator \"bind\" allows to bind prototype method context to class instance */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function bind(target, propertyKey, descriptor) {\n    // Validation check\n    if (!descriptor || (typeof descriptor.value !== 'function')) {\n        throw new TypeError('Only class methods can be decorated via @bind');\n    }\n    // Original function\n    const originalFn = descriptor.value;\n    return descriptor = {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: function getBound() {\n            const proto = Object.getPrototypeOf(this);\n            const desc = getPropertyDescriptor(proto, propertyKey);\n            const isProtoCall = !desc || desc.get !== getBound;\n            return isProtoCall ? originalFn : (this[propertyKey] = originalFn.bind(this));\n        },\n        set(value) {\n            Object.defineProperty(this, propertyKey, {\n                value,\n                writable: true,\n                configurable: true,\n                enumerable: descriptor.enumerable\n            });\n        }\n    };\n}\n","/**\n * Synthetic implementation of EventTarget\n * Replicates behavior of native event\n * Doesn't give explicit access to callback storage\n */\nexport class SyntheticEventTarget {\n    constructor() {\n        this._listeners = {};\n    }\n    hasEventListener(type = 'change', minCount = 0) {\n        var _a;\n        if (typeof type !== 'string')\n            return this.hasEventListener('change', type || 0);\n        return ((_a = this._listeners[type]) === null || _a === void 0 ? void 0 : _a.length) > minCount;\n    }\n    addEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.addEventListener('change', type);\n        validateEventListenerType(callback);\n        if (this._listeners[type] && this._listeners[type].includes(callback))\n            return;\n        if (this._listeners[type])\n            this._listeners[type].push(callback);\n        else\n            Object.assign(this._listeners, { [type]: [callback] });\n    }\n    removeEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.removeEventListener('change', type);\n        validateEventListenerType(callback);\n        if (!this._listeners[type])\n            return;\n        this._listeners[type] = this._listeners[type].filter((cb) => cb !== callback);\n    }\n    dispatchEvent(e) {\n        var _a;\n        const target = () => this; // use get due IE specific\n        Object.defineProperty(e, 'target', { get: target, enumerable: true });\n        Object.defineProperty(e, 'currentTarget', { get: target, enumerable: true });\n        Object.defineProperty(e, 'srcElement', { get: target, enumerable: true });\n        (_a = this._listeners[e.type]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => {\n            if (typeof listener === 'function')\n                listener.call(this, e);\n            else\n                listener.handleEvent.call(listener, e);\n        });\n        return e.defaultPrevented;\n    }\n    /** @deprecated alias for `addEventListener` */\n    addListener(cb) {\n        this.addEventListener(cb);\n    }\n    /** @deprecated alias for `removeEventListener` */\n    removeListener(cb) {\n        this.removeEventListener(cb);\n    }\n}\nfunction validateEventListenerType(callback) {\n    if (!callback || typeof callback !== 'function' && typeof callback.handleEvent !== 'function') {\n        throw Error('Callback should be a function or EventListenerObject');\n    }\n}\n","/** @returns first defined param */\nexport function defined(...params) {\n    for (const param of params) {\n        if (param !== undefined)\n            return param;\n    }\n}\n/** Finds the closest property descriptor */\nexport function getPropertyDescriptor(o, prop) {\n    let proto = o;\n    while (proto) {\n        const desc = Object.getOwnPropertyDescriptor(proto, prop);\n        if (desc)\n            return desc;\n        proto = Object.getPrototypeOf(proto);\n    }\n}\nexport function extractValues(obj, filter) {\n    if (!obj)\n        return [];\n    const desc = [];\n    for (const key in obj) {\n        if (filter(obj[key], key))\n            desc.push(obj[key]);\n    }\n    return desc;\n}\n","/** Config interface to define inner {@link https://ace.c9.io/ Ace} editor's settings */\nexport interface EditorConfig {\n  /** Editor's appearance theme */\n  theme: string;\n  /** Position of the vertical line for wrapping */\n  printMarginColumn: number;\n  /** Limit of characters before wrapping */\n  wrap?: number | boolean;\n  /** Editor's default amount of lines (height) */\n  minLines? : number;\n  /** Editor's max amount of lines (height) */\n  maxLines? : number;\n}\n\n/** Enum to match themes to {@link https://github.com/ajaxorg/ace/tree/master/src/theme Ace styles}. */\nexport enum AceTheme {\n  /** Light editor theme */\n  Light = 'ace/theme/chrome',\n  /** Dark editor theme */\n  Dark = 'ace/theme/tomorrow_night',\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + (chunkId === 956 ? \"ace-editor\" : chunkId) + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t271: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk\"] = self[\"webpackChunk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","/** Function that does nothing */\nexport const noop = () => undefined;\n/** Function that returns the first argument */\nexport const identity = (arg) => arg;\n/** Resolves {@link PropertyProvider} function to the value */\nexport const resolveProperty = (val, origin) => typeof val === 'function' ? val.call(origin, origin) : val;\n","/** Checks that passed value is object, but not a callable-object (function) */\nexport const isObject = (obj) => !!obj && typeof obj === 'object';\n/** Checks that passed value is an object or function */\nexport const isObjectLike = (obj) => isObject(obj) || typeof obj === 'function';\n/** Checks if the passed value is primitive */\nexport const isPrimitive = (obj) => obj === null ||\n    typeof obj === 'undefined' ||\n    typeof obj === 'string' ||\n    typeof obj === 'number' ||\n    typeof obj === 'boolean' ||\n    typeof obj === 'symbol';\n/** Checks that passed object is prototype of some class */\nexport const isPrototype = (obj) => Object.hasOwnProperty.call(obj, 'constructor');\n/** Checks that passed object is array-like */\nexport const isArrayLike = (value) => {\n    if (!value || typeof value !== 'object')\n        return false;\n    if (Array.isArray(value))\n        return true;\n    if (typeof value.length !== 'number' || value.length < 0)\n        return false;\n    return !value.length || Object.hasOwnProperty.call(value, value.length - 1);\n};\n","import { isObjectLike } from './types';\n/** @returns PathKeyDef from the PathDef */\nconst toKeyDef = (key) => typeof key === 'object' ? key : { key };\n/** Parses path to full {@link PathKeyDef} array */\nexport const parseKeys = (path) => {\n    if (Array.isArray(path))\n        return path.map(toKeyDef);\n    return parseKeysPath(path || '.');\n};\n/** Parses string path to full {@link PathKeyDef} array */\nconst parseKeysPath = (path) => {\n    let start = 0;\n    const parts = [];\n    while (start < path.length) {\n        let end = start = start + +(path[start] === '.'); // skip initial '.'\n        if (path[start] === '[') { // handle index syntax\n            end = ++start; // start bracket ignored\n            while (end < path.length && path[end] !== ']')\n                ++end;\n            const key = path.substring(start, end);\n            const isIndex = !key || Math.floor(+key) === +key;\n            parts.push({ key, isIndex });\n            start = ++end; // skip end bracket\n        }\n        else { // handle simple key\n            while (end < path.length && path[end] !== '[' && path[end] !== '.')\n                ++end;\n            const key = path.substring(start, end);\n            parts.push({ key });\n            start = end;\n        }\n    }\n    return parts;\n};\n/**\n * Gets object property using \"path\" key\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param data - object\n * @param path - key path. string or {@link PathKey} array\n * @param defaultValue - default\n * @returns specified object property\n */\nexport const getByPath = (data, path, defaultValue) => {\n    const keys = parseKeys(path);\n    const result = keys.reduce((curr, { key }) => {\n        if (isObjectLike(curr))\n            return curr[key];\n        return undefined;\n    }, data);\n    return typeof result === 'undefined' ? defaultValue : result;\n};\n/**\n * Gets object property using \"path\" with a keys separated by `.`\n * @see getByPath\n */\nexport const get = (data, path, defaultValue) => getByPath(data, (path || '').split('.'), defaultValue);\n/**\n * Sets object property using \"path\" key\n * Creates empty object if sub-key value is not presented.\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax and collection creation):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param target - object\n * @param path - key path. string or {@link PathKey} array\n * @param value - value of property\n * @returns original object\n */\nexport const setByPath = (target, path, value) => {\n    const keys = parseKeys(path);\n    const depth = keys.length - 1;\n    keys.reduce((cur, { key, isIndex, isIndexed }, pos) => {\n        if (isIndex && !key)\n            key = cur.length || 0; // a[] only\n        if (pos !== depth && isObjectLike(cur[key]))\n            return cur[key]; // key already presented\n        if (isIndexed === undefined && pos !== depth)\n            isIndexed = keys[pos + 1].isIndex;\n        return cur[key] = (pos === depth) ? value : (isIndexed ? [] : {});\n    }, target);\n    return target;\n};\n/**\n * Sets object property using \"path\" with a keys separated by `.`\n * @see setByPath\n */\nexport const set = (target, path, value) => setByPath(target, (path || '').split('.'), value);\n","import { get } from './object';\n/** Converts string to kebab-case notation */\nexport const toKebabCase = (str) => {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\\s_]+/g, '-').toLowerCase();\n};\n/** Converts string to camelCase notation */\nexport const toCamelCase = (str) => {\n    return str.trim().replace(/[\\s-,_]+([a-zA-Z0-9]?)/g, (match, word) => word.toUpperCase());\n};\n/** Makes the first non-indent (space, tab, newline) letter in the string capitalized */\nexport const capitalize = (str) => {\n    let i = 0;\n    while (i < str.length && (str[i] === ' ' || str[i] === '\\t' || str[i] === '\\n'))\n        i++;\n    return str.slice(0, i) + str.charAt(i).toUpperCase() + str.slice(i + 1);\n};\n/** Unwraps string from parenthesis */\nexport const unwrapParenthesis = (str) => {\n    return str.trim().replace(/^\\((.*)\\)$/, '$1').trim();\n};\n/** Parses `null` and `undefined` as an empty string */\nexport const parseString = (val) => String(val !== null && val !== void 0 ? val : '');\n/** Parses string representation of the boolean value */\nexport const parseBoolean = (val) => val !== null && val !== 'false';\n/**\n * Parses number with the ability to pass an alternative fallback for NaN.\n * Note: falsy values except 0 are treated as NaN\n */\nexport const parseNumber = (str, nanValue) => {\n    if (str === 0)\n        return 0;\n    const value = +(str || NaN);\n    return isNaN(value) ? nanValue : value;\n};\n/**\n * Common function that returns coefficient aspect ratio\n * Supported formats: w:h, w/h, coefficient\n * @example\n * `16:9`, `16/9`, `1.77`\n * @param str - string to parse\n * @returns aspect ratio coefficient\n */\nexport function parseAspectRatio(str) {\n    const [w, h] = str.split(/[:/]/);\n    if (typeof h !== 'undefined')\n        return +w / +h;\n    return +w || 0;\n}\n/** Evaluates passed string or returns `defaultValue` */\nexport function evaluate(str, defaultValue) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-implied-eval\n        return str ? (new Function(`return ${str}`))() : defaultValue;\n    }\n    catch (e) {\n        console.warn('Cannot parse value ', str, e);\n        return defaultValue;\n    }\n}\n/** Default RegExp to match replacements in the string for the {@link format} function */\nexport const DEF_FORMAT_MATCHER = /{[{%]?([\\w.]+)[%}]?}/g;\n/** Replaces `{key}` patterns in the string from the source object */\nexport function format(str, source, matcher = DEF_FORMAT_MATCHER) {\n    return str.replace(matcher, (match, key) => {\n        const val = get(source, key);\n        return val === undefined ? match : val;\n    });\n}\n","/** @returns if attribute presented */\nexport function hasAttr($el, name) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    return $el.hasAttribute(name);\n}\nexport function getAttr($el, name, fallback = null) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    const value = $el.getAttribute(name);\n    return value === null ? fallback : value;\n}\n/** Set attribute */\nexport function setAttr($el, name, value) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    if (value === undefined || value === null || value === false) {\n        $el.removeAttribute(name);\n    }\n    else {\n        $el.setAttribute(name, value === true ? '' : value);\n    }\n}\n","import { identity } from '../misc/functions';\nimport { parseString, toKebabCase } from '../misc/format';\nimport { getAttr, setAttr } from '../dom/attr';\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value.\n * Maps string type property.\n * @param config - mapping configuration. See {@link AttrDescriptor}\n */\nexport const attr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        function get() {\n            const val = getAttr(this, attrName);\n            if (val === null && 'defaultValue' in config)\n                return config.defaultValue;\n            return (config.parser || parseString)(val);\n        }\n        function set(value) {\n            setAttr(this, attrName, (config.serializer || identity)(value));\n        }\n        Object.defineProperty(target, propName, config.readonly ? { get } : { get, set });\n    };\n};\n","import { hasAttr, setAttr } from '../dom/attr';\nimport { toKebabCase } from '../misc/format';\nfunction buildConditionalDescriptor(attrName, readOnly) {\n    function get() {\n        return hasAttr(this, attrName);\n    }\n    function set(value) {\n        setAttr(this, attrName, !!value);\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element boolean (marker) attribute state.\n * Maps boolean type property.\n * @param config - mapping configuration. See {@link BoolAttrDescriptor}\n */\nexport const boolAttr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildConditionalDescriptor(attrName, !!config.readonly));\n    };\n};\n","const NS_NAME = 'ESL';\n/**\n * Nested declaration helper\n */\nfunction define(root, name, value) {\n    name.split('.').reduce((obj, key, index, parts) => {\n        if (parts.length === index + 1) {\n            return (obj[key] = obj[key] || value);\n        }\n        const type = typeof obj[key];\n        if (type !== 'undefined' && type !== 'object' && type !== 'function') {\n            throw new Error(`Can not define ${value} on ${name}`);\n        }\n        return (obj[key] = obj[key] || {});\n    }, root);\n}\n/**\n * Method to manually declare key in library namespace\n * See {@link ExportNs} decorator for details\n */\nexport const exportNs = (name, module) => {\n    if (!(NS_NAME in window))\n        return;\n    define(window[NS_NAME], name, module);\n};\n/**\n * Decorator to declare function or class in a global ns\n * @param name - key path to declare in ESL global ns\n * NOTE: path parts should be separated by dots\n * @example\n * ```ts\n * @Export('Package.Component')\n * ```\n * NOTE: in case declaration contains components-packages, their origins will be mixed with declaration in a Runtime\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function ExportNs(name) {\n    return (module) => exportNs(name || module.name, module);\n}\n/** Declare ESL global */\nExportNs.declare = () => {\n    if ('ESL' in window)\n        return;\n    Object.defineProperty(window, 'ESL', { value: {} });\n};\n","/** Checks if the passed event is {@link MouseEvent} */\nexport const isMouseEvent = (event) => window.MouseEvent && event instanceof MouseEvent;\n/** Checks if the passed event is {@link TouchEvent} */\nexport const isTouchEvent = (event) => window.TouchEvent && event instanceof TouchEvent;\n/** Checks if the passed event is {@link PointerEvent} */\nexport const isPointerEvent = (event) => window.PointerEvent && event instanceof PointerEvent;\nconst PASSIVE_EVENTS = ['wheel', 'mousewheel', 'touchstart', 'touchmove'];\n/**\n * @returns true if the passed event should be passive by default\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n */\nexport const isPassiveByDefault = (event) => PASSIVE_EVENTS.includes(event);\n/** Gets the original CustomEvent source in case event bubbles from Shadow DOM */\nexport const getCompositeTarget = (e) => {\n    const targets = (e.composedPath && e.composedPath());\n    return targets ? targets[0] : e.target;\n};\n/** @returns touch point coordinates of {@link TouchEvent} or {@link PointerEvent} */\nexport const getTouchPoint = (event) => {\n    const source = isTouchEvent(event) ? event.changedTouches[0] : event;\n    return {\n        x: source.pageX,\n        y: source.pageY\n    };\n};\n/** @returns element offset point coordinates */\nexport const getOffsetPoint = (el) => {\n    const props = el.getBoundingClientRect();\n    const y = props.top + window.scrollY;\n    const x = props.left + window.scrollX;\n    return { x, y };\n};\n/**\n * Dispatches custom event.\n * Event bubbles and is cancelable by default, use `eventInit` to override that.\n * @param el - EventTarget to dispatch event\n * @param eventName - name of the event to dispatch\n * @param eventInit - object that specifies characteristics of the event. See {@link CustomEventInit}\n */\nexport const dispatchCustomEvent = (el, eventName, eventInit) => {\n    const init = Object.assign({\n        bubbles: true,\n        composed: true,\n        cancelable: true\n    }, eventInit || {});\n    return el.dispatchEvent(new CustomEvent(eventName, init));\n};\n","import { identity } from './functions';\nimport { isArrayLike } from './object';\n/** Split array into tuples */\nexport const tuple = (arr) => arr.reduce((acc, el) => {\n    if (acc.length === 0 || acc[acc.length - 1].length >= 2)\n        acc.push([]);\n    acc[acc.length - 1].push(el);\n    return acc;\n}, []);\n/** Flat array - unwraps one level of nested arrays */\nexport const flat = (arr) => arr.reduce((acc, el) => el ? acc.concat(el) : acc, []);\n/** Wraps passed object or primitive to array */\nexport const wrap = (arr) => {\n    if (arr === undefined || arr === null)\n        return [];\n    if (Array.isArray(arr))\n        return arr;\n    return [arr];\n};\nexport function unwrap(value) {\n    return isArrayLike(value) ? value[0] : value;\n}\n/** Makes array values unique */\nexport const uniq = (arr) => {\n    if (arr.length < 2)\n        return arr.slice(0);\n    const result = [];\n    const set = new Set();\n    arr.forEach((item) => set.add(item));\n    set.forEach((item) => result.push(item));\n    return result;\n};\nexport function range(n, filler = identity) {\n    const arr = Array(n);\n    let i = 0;\n    while (i < n)\n        arr[i] = filler(i++);\n    return arr;\n}\n/**\n * @returns object with a criteria value as a key and an array of original items that belongs to the current criteria value\n */\nexport const groupBy = (array, group) => {\n    return array.reduce((obj, el) => {\n        const key = group(el);\n        obj[key] ? obj[key].push(el) : obj[key] = [el];\n        return obj;\n    }, {});\n};\n","/**\n * Memoization decorator function. Caches the original function result according to hash generated from arguments.\n * In case the hash function returns `undefined` value will not be memoized.\n * @see MemoHashFn Hash function signature.\n */\nexport function memoizeFn(fn, hashFn = defaultArgsHashFn) {\n    function memo(...args) {\n        const key = hashFn(...args);\n        if (key !== null && typeof key !== 'string') {\n            console.warn(`Can't cache value for ${fn.name} call.`);\n            return fn.apply(this, args);\n        }\n        if (!memo.cache.has(key)) {\n            memo.cache.set(key, fn.apply(this, args));\n        }\n        return memo.cache.get(key);\n    }\n    memo.cache = new Map();\n    memo.clear = () => memo.cache.clear();\n    memo.has = (...args) => {\n        const key = hashFn(...args);\n        return key === undefined ? false : memo.cache.has(key);\n    };\n    return memo;\n}\n/**\n * Default arguments hash function.\n * Supports only 0-1 arguments with a primitive type.\n */\nexport function defaultArgsHashFn(...args) {\n    if (args.length === 0)\n        return null;\n    if (args.length > 1)\n        return;\n    if (typeof args[0] !== 'string' && typeof args[0] !== 'number' && typeof args[0] !== 'boolean')\n        return;\n    return String(args[0]);\n}\n","import { defaultArgsHashFn, memoizeFn } from '../misc/memoize';\nimport { isPrototype, getPropertyDescriptor } from '../misc/object';\n/**\n * Memoization decorator helper.\n * @see memoizeFn Original memoizeFn function decorator.\n */\nexport function memoize(hashFn = defaultArgsHashFn) {\n    return function (target, prop, descriptor) {\n        if (!descriptor || typeof (descriptor.value || descriptor.get) !== 'function') {\n            throw new TypeError('Only get accessors or class methods can be decorated via @memoize');\n        }\n        if (isPrototype(target)) {\n            // Object members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeGetter(descriptor.get, prop));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeMethod(descriptor.value, prop, hashFn));\n        }\n        else {\n            // Static members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeFn(descriptor.get));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeFn(descriptor.value, hashFn));\n        }\n    };\n}\n// Lock storage to prevent cache logic for some key\nconst locks = new WeakMap();\nconst defineOwnKeySafe = (obj, prop, value) => {\n    locks.set(obj, prop); // IE try to get key with the prototype instance call, so we lock it\n    Object.defineProperty(obj, prop, { value, writable: true, configurable: true });\n    locks.delete(obj); // Free property key\n};\n/** Cache getter result as an object own property */\nfunction memoizeGetter(originalMethod, prop) {\n    return function () {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const value = originalMethod.call(this);\n        defineOwnKeySafe(this, prop, value);\n        return value;\n    };\n}\n/** Cache method memo function in the current context on call */\nfunction memoizeMethod(originalMethod, prop, hashFn) {\n    return function (...args) {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const memo = memoizeFn(originalMethod, hashFn);\n        defineOwnKeySafe(this, prop, memo);\n        return memo.apply(this, args);\n    };\n}\n/**\n * Clear memoization cache for passed target and property.\n * Accepts not own properties.\n * Note: be sure that you targeting memoized property or function.\n * Clear utility has no 100% check to prevent modifying incorrect (not memoized) property keys\n */\nmemoize.clear = function (target, property) {\n    if (Array.isArray(property))\n        return property.forEach((prop) => memoize.clear(target, prop));\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return;\n    if (typeof desc.get === 'function' && typeof desc.get.clear === 'function')\n        return desc.get.clear();\n    if (typeof desc.value === 'function' && typeof desc.value.clear === 'function')\n        return desc.value.clear();\n    if (Object.hasOwnProperty.call(target, property))\n        delete target[property];\n};\n/** Check if property has cache for the passed params */\nmemoize.has = function (target, property, ...params) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return false;\n    if (typeof desc.get === 'function' && typeof desc.get.has === 'function')\n        return desc.get.has(...params);\n    if (typeof desc.value === 'function' && typeof desc.value.has === 'function')\n        return desc.value.has(...params);\n    return Object.hasOwnProperty.call(target, property);\n};\n","import { isObject } from './types';\n/** Deeply compares passed objects */\nexport function isEqual(obj1, obj2) {\n    if (Object.is(obj1, obj2))\n        return true;\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (isObject(obj1) && isObject(obj2)) {\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n        if (keys1.length !== keys2.length)\n            return false;\n        return !keys1.some((key) => !isEqual(obj1[key], obj2[key]));\n    }\n    return false;\n}\n/** @deprecated alias for `isEqual` method */\nexport const deepCompare = isEqual;\n/** Check if arr and arr mask has intersection */\nfunction isIntersect(arrObj, arrMask, comparer) {\n    return arrMask.every((key) => arrObj.some((itm) => comparer(itm, key)));\n}\n/**\n * Checks if all keys presented in the `mask` are equal to the `obj` keys\n * Note: array order is not taken into account and uses intersection strategy\n */\nexport function isSimilar(obj, mask, deep = true) {\n    if (Array.isArray(obj) && Array.isArray(mask))\n        return isIntersect(obj, mask, deep ? isSimilar : Object.is);\n    if (!isObject(obj) || !isObject(mask))\n        return Object.is(obj, mask);\n    return Object.keys(mask).every((key) => (deep ? isSimilar : Object.is)(obj[key], mask[key]));\n}\n","/** Check that `nodeA` and `nodeB` are from the same tree path */\nexport const isRelativeNode = (nodeA, nodeB) => {\n    return !!(nodeA && nodeB) && (nodeA.contains(nodeB) || nodeB.contains(nodeA));\n};\n/** Create function that finds next dom element, that matches selector, in the sequence declared by `next` function */\nexport const createSequenceFinder = (next, includeSelf = false) => {\n    return function (base, predicate) {\n        if (!predicate)\n            return includeSelf ? base : next(base);\n        for (let target = includeSelf ? base : next(base); target; target = next(target)) {\n            if (typeof predicate === 'string' && target.matches(predicate))\n                return target;\n            if (typeof predicate === 'function' && predicate.call(target, target))\n                return target;\n        }\n        return null;\n    };\n};\n/** Checks if element matches passed selector or exact predicate function */\nexport const isMatches = (el, matcher) => {\n    if (typeof matcher === 'string')\n        return el.matches(matcher);\n    if (typeof matcher === 'function')\n        return matcher(el);\n    return typeof matcher === 'undefined';\n};\n/** @returns first matching next sibling or null*/\nexport const findNext = createSequenceFinder((el) => el.nextElementSibling);\n/** @returns first matching previous sibling or null*/\nexport const findPrev = createSequenceFinder((el) => el.previousElementSibling);\n/** @returns first matching parent or null*/\nexport const findParent = createSequenceFinder((el) => el.parentElement);\n/** @returns first matching ancestor starting from passed element or null*/\nexport const findClosest = createSequenceFinder((el) => el.parentElement, true);\n/** @returns Array of all matching elements in subtree or empty array */\nexport const findAll = (base, sel) => {\n    return sel ? Array.from(base.querySelectorAll(sel)) : [base];\n};\n/** @returns Array of all matching children or empty array */\nexport const findChildren = (base, sel) => {\n    return Array.from(base.children).filter((el) => !sel || el.matches(sel));\n};\n/**\n * Find closest parent node of `node` by `predicate`.\n * Optional `skipSelf` to skip initial node\n */\nexport const findClosestBy = (node, predicate, skipSelf = false) => {\n    let current = skipSelf && node ? node.parentNode : node;\n    while (current) {\n        if (predicate(current))\n            return current;\n        current = current.parentNode;\n    }\n    return null;\n};\n/** @deprecated Cumulative traversing utility set */\nexport class TraversingUtils {\n}\nTraversingUtils.isRelative = isRelativeNode;\nTraversingUtils.closestBy = findClosestBy;\nTraversingUtils.createSequenceFinder = createSequenceFinder;\nTraversingUtils.findNext = findNext;\nTraversingUtils.findPrev = findPrev;\nTraversingUtils.findParent = findParent;\nTraversingUtils.findClosest = findClosest;\nTraversingUtils.findAll = findAll;\nTraversingUtils.findChildren = findChildren;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLTraversingQuery_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { tuple, wrap, uniq } from '../../esl-utils/misc/array';\nimport { unwrapParenthesis } from '../../esl-utils/misc/format';\nimport { findAll, findChildren, findNext, findParent, findClosest, findPrev } from '../../esl-utils/dom/traversing';\n/**\n * Traversing Query utility to find element via extended selector query\n * Extended query supports\n * - plain CSS selectors\n * - relative selectors (selectors that don't start from a plain selector will use passed base Element as a root)\n * - ::next and ::prev sibling pseudo-selectors\n * - ::parent, ::closest and ::child pseudo-selectors\n * - ::find pseudo-selector\n * - ::first, ::last and :nth(#) limitation pseudo-selectors\n * - ::filter, ::not filtration pseudo-selectors\n *\n * @example\n * - `#id .class [attr]` - find by CSS selector in a current document\n * - ` ` - get current base element\n * - `::next` - get next sibling element\n * - `::prev` - get previous sibling element\n * - `::parent` - get base element parent\n * - `::parent(#id .class [attr])` - find the closest parent matching passed selector\n * - `::closest(#id .class [attr])` - find the closest ancestor including base element that matches passed selector\n * - `::child(#id .class [attr])` - find direct child element(s) that match passed selector\n * - `::find(#id .class [attr])` - find child element(s) that match passed selector\n * - `::find(buttons, a)::not([hidden])` - find all buttons and anchors that are not have hidden attribute\n * - `::find(buttons, a)::filter(:first-child)` - find all buttons and anchors that are first child in container\n * - `::parent::child(some-tag)` - find direct child element(s) that match tag 'some-tag' in the parent\n * - `#id .class [attr]::parent` - find parent of element matching selector '#id .class [attr]' in document\n * - `::find(.row)::last::parent` - find parent of the last element matching selector '.row' from the base element subtree\n */\nlet ESLTraversingQuery = ESLTraversingQuery_1 = class ESLTraversingQuery {\n    /**\n     * @returns RegExp that selects all known processors in query string\n     * e.g. /(::parent|::closest|::child|::next|::prev)/\n     */\n    static get PROCESSORS_REGEX() {\n        const keys = Object.keys(this.ELEMENT_PROCESSORS).concat(Object.keys(this.COLLECTION_PROCESSORS));\n        return new RegExp(`(${keys.join('|')})`, 'g');\n    }\n    static isCollectionProcessor([name]) {\n        return !!name && (name in this.COLLECTION_PROCESSORS);\n    }\n    static processElement(el, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.ELEMENT_PROCESSORS))\n            return [];\n        return wrap(this.ELEMENT_PROCESSORS[name](el, sel));\n    }\n    static processCollection(els, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.COLLECTION_PROCESSORS))\n            return [];\n        return wrap(this.COLLECTION_PROCESSORS[name](els, sel));\n    }\n    static traverseChain(collection, processors, findFirst) {\n        if (!processors.length || !collection.length)\n            return collection;\n        const [processor, ...rest] = processors;\n        if (this.isCollectionProcessor(processor)) {\n            const processedItem = this.processCollection(collection, processor);\n            return this.traverseChain(processedItem, rest, findFirst);\n        }\n        const result = [];\n        for (const target of collection) {\n            const processedItem = this.processElement(target, processor);\n            const resultCollection = this.traverseChain(processedItem, rest, findFirst);\n            if (!resultCollection.length)\n                continue;\n            if (findFirst)\n                return resultCollection.slice(0, 1);\n            result.push(...resultCollection);\n        }\n        return uniq(result);\n    }\n    /** Split multiple queries separated by comma (respects query brackets) */\n    // This can be solved by RegEx /(?<!\\([^\\)]*),(?![^\\(]*\\))/g)/, when the WebKit browser implements this feature\n    static splitQueries(str) {\n        let last = 0;\n        let stack = 0;\n        const result = [];\n        for (let i = 0; i < str.length; i++) {\n            if (str[i] === '(')\n                stack++;\n            if (str[i] === ')')\n                stack = Math.max(0, stack - 1);\n            if (str[i] === ',' && !stack) {\n                result.push(str.substring(last, i).trim());\n                last = i + 1;\n            }\n        }\n        result.push(str.substring(last).trim());\n        return result;\n    }\n    static traverse(query, findFirst, base, scope = document) {\n        const found = [];\n        for (const part of ESLTraversingQuery_1.splitQueries(query)) {\n            const els = this.traverseQuery(part, findFirst, base, scope);\n            if (findFirst && els.length)\n                return [els[0]];\n            found.push(...els);\n        }\n        return uniq(found);\n    }\n    static traverseQuery(query, findFirst, base, scope = document) {\n        const parts = query.split(this.PROCESSORS_REGEX).map((term) => term.trim());\n        const rootSel = parts.shift();\n        const baseCollection = base ? [base] : [];\n        const initial = rootSel ? Array.from(scope.querySelectorAll(rootSel)) : baseCollection;\n        return this.traverseChain(initial, tuple(parts), findFirst);\n    }\n    /** @returns first matching element reached via {@link ESLTraversingQuery} rules */\n    static first(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, true, base, scope)[0] || null;\n    }\n    /** @returns Array of all matching elements reached via {@link ESLTraversingQuery} rules */\n    static all(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, false, base, scope);\n    }\n};\nESLTraversingQuery.ELEMENT_PROCESSORS = {\n    '::find': findAll,\n    '::next': findNext,\n    '::prev': findPrev,\n    '::child': findChildren,\n    '::parent': findParent,\n    '::closest': findClosest\n};\nESLTraversingQuery.COLLECTION_PROCESSORS = {\n    '::first': (list) => list.slice(0, 1),\n    '::last': (list) => list.slice(-1),\n    '::nth': (list, sel) => {\n        const index = sel ? +sel : NaN;\n        return wrap(list[index - 1]);\n    },\n    '::not': (list, sel) => list.filter((el) => !el.matches(sel || '')),\n    '::filter': (list, sel) => list.filter((el) => el.matches(sel || ''))\n};\nESLTraversingQuery = ESLTraversingQuery_1 = __decorate([\n    ExportNs('TraversingQuery')\n], ESLTraversingQuery);\nexport { ESLTraversingQuery };\n/** @deprecated alias for {@link ESLTraversingQuery} */\nexport const TraversingQuery = ESLTraversingQuery;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { wrap } from '../../esl-utils/misc/array';\nimport { resolveProperty } from '../../esl-utils/misc/functions';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { isObject } from '../../esl-utils/misc/object/types';\nimport { isSimilar } from '../../esl-utils/misc/object/compare';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { isPassiveByDefault } from '../../esl-utils/dom/events/misc';\n/** Key to store listeners on the host */\nconst STORE = '__esl_listeners';\n/**\n * Splits and deduplicates event string\n * @returns array of unique events presented in events string\n */\nexport const splitEvents = (events) => {\n    const terms = (events || '').split(' ').map((term) => term.trim());\n    const deduplicate = new Set();\n    return terms.filter((term) => {\n        if (!term || deduplicate.has(term))\n            return false;\n        deduplicate.add(term);\n        return true;\n    });\n};\n/**\n * `EventListener` instance, used as an 'inner' record to process subscriptions made by `ESLEventUtils`\n * Uses `EventListenerObject` interface to subscribe on event.\n *\n * Use Chrome console `getEventListeners` method to check subscribers details when debugging ESLEventListener subscriptions.\n * */\nexport class ESLEventListener {\n    constructor(host, event, handler, desc) {\n        this.host = host;\n        this.event = event;\n        this.handler = handler;\n        const defaults = {\n            capture: false,\n            passive: isPassiveByDefault(event)\n        };\n        Object.assign(this, defaults, desc, { event });\n    }\n    /** @returns target element to listen */\n    get $targets() {\n        if (!isObject(this.host))\n            return [];\n        const target = resolveProperty(this.target, this.host);\n        if (isObject(target))\n            return wrap(target);\n        const $host = '$host' in this.host ? this.host.$host : this.host;\n        if (typeof target === 'string')\n            return ESLTraversingQuery.all(target, $host);\n        if (typeof target === 'undefined' && $host instanceof HTMLElement)\n            return [$host];\n        return [];\n    }\n    /** @returns resolved selector to check event target */\n    get delegate() {\n        return resolveProperty(this.selector, this.host);\n    }\n    /**\n     * Checks if the passed criteria matches current event listener\n     * - `string` type criteria checked by the `event` name\n     * - `function` type criteria checked by the `handler` reference\n     * - `object` type criteria checked as descriptor using `isSimilar` comparer\n     * Note: `function` (handler) marcher has a priority over descriptor check, so handler function own properties will be ignored\n     */\n    matches(desc) {\n        if (typeof desc === 'string')\n            return this.event === desc;\n        if (typeof desc === 'function')\n            return this.handler === desc;\n        if (typeof desc === 'object')\n            return isSimilar(this, desc, false);\n        return false;\n    }\n    /**\n     * Memoized builder for bound and decorated low level subscription.\n     * Implements DOM API {@link EventListenerObject.handleEvent}\n     */\n    get handleEvent() {\n        const handlerBound = this.handler.bind(this.host);\n        const handlerFull = this.once ? ((e) => (handlerBound(e), this.unsubscribe())) : handlerBound;\n        return this.selector ? (e) => this.isDelegatedTarget(e) && handlerFull(e) : handlerFull;\n    }\n    /** Checks if the passed event can be handled by the current event listener */\n    isDelegatedTarget(e) {\n        const target = e.target;\n        const current = e.currentTarget;\n        const delegate = this.delegate;\n        if (typeof delegate !== 'string')\n            return true;\n        if (!delegate || !(target instanceof HTMLElement) || !(current instanceof HTMLElement))\n            return false;\n        return current.contains(target.closest(delegate));\n    }\n    /**\n     * (Re-)Subscribes event listener instance\n     * @returns if subscription was successful\n     */\n    subscribe() {\n        const { passive, capture } = this;\n        this.unsubscribe();\n        memoize.clear(this, '$targets');\n        memoize.clear(this, 'handleEvent');\n        if (!this.$targets.length)\n            return false;\n        this.$targets.forEach((el) => el.addEventListener(this.event, this, { passive, capture }));\n        ESLEventListener.add(this.host, this);\n        return true;\n    }\n    /** Unsubscribes event listener instance */\n    unsubscribe() {\n        const { capture } = this;\n        if (!memoize.has(this, '$targets'))\n            return;\n        this.$targets.forEach((el) => el.removeEventListener(this.event, this, { capture }));\n        ESLEventListener.remove(this.host, this);\n    }\n    /**\n     * Gets stored listeners array the passed `host` object\n     * Supports additional filtration criteria\n     */\n    static get(host, ...criteria) {\n        if (!host)\n            return [];\n        const listeners = (host[STORE] || []);\n        if (!criteria.length)\n            return listeners;\n        return listeners.filter((listener) => criteria.every(listener.matches, listener));\n    }\n    /** Adds listener to the listener store of the host object */\n    static add(host, instance) {\n        if (!host)\n            return;\n        if (!Object.hasOwnProperty.call(host, STORE))\n            host[STORE] = [];\n        host[STORE].push(instance);\n    }\n    /** Removes listener from the listener store of the host object */\n    static remove(host, instance) {\n        const listeners = ESLEventListener.get(host);\n        const value = listeners.filter((listener) => listener !== instance);\n        Object.defineProperty(host, STORE, { value, configurable: true });\n    }\n    /** Creates or resolve existing event listeners by handler and descriptors */\n    static createOrResolve(host, handler, desc) {\n        if (!isObject(host))\n            return [];\n        const eventString = resolveProperty(desc.event, host);\n        const listeners = [];\n        for (const event of splitEvents(eventString)) {\n            const subscribed = ESLEventListener.get(host, event, handler, {\n                target: desc.target,\n                selector: desc.selector,\n                capture: !!desc.capture\n            });\n            if (subscribed.length)\n                listeners.push(...subscribed);\n            else\n                listeners.push(new ESLEventListener(host, event, handler, desc));\n        }\n        return listeners;\n    }\n}\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"$targets\", null);\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"handleEvent\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLEventUtils_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { dispatchCustomEvent } from '../../esl-utils/dom/events/misc';\nimport { extractValues } from '../../esl-utils/misc/object';\nimport { ESLEventListener } from './listener';\nlet ESLEventUtils = ESLEventUtils_1 = class ESLEventUtils {\n    /**\n     * Dispatches custom event. Alias for {@link dispatchCustomEvent}\n     * @see dispatchCustomEvent\n     */\n    static dispatch(el, eventName, eventInit) {\n        return dispatchCustomEvent(el, eventName, eventInit);\n    }\n    /** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\n    static isEventDescriptor(obj) {\n        return typeof obj === 'function' && Object.hasOwnProperty.call(obj, 'event');\n    }\n    /** Gets {@link ESLListenerDescriptorFn}s of the passed object */\n    static descriptors(host, auto = true) {\n        return extractValues(host, (value) => ESLEventUtils_1.isEventDescriptor(value) && value.auto === auto);\n    }\n    /**\n     * Gets currently subscribed listeners of the host\n     * @param host - host element (listeners context)\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners list\n     */\n    static listeners(host, ...criteria) {\n        return ESLEventListener.get(host, ...criteria);\n    }\n    static subscribe(host, eventDesc, handler = eventDesc) {\n        if (typeof handler !== 'function')\n            return [];\n        if (typeof eventDesc === 'string')\n            eventDesc = { event: eventDesc };\n        if (ESLEventUtils_1.isEventDescriptor(handler) && eventDesc !== handler)\n            eventDesc = Object.assign({}, handler, eventDesc);\n        const listeners = ESLEventListener.createOrResolve(host, handler, eventDesc);\n        const subscribed = listeners.filter((listener) => listener.subscribe());\n        if (!subscribed.length)\n            console.warn('[ESL]: Empty subscription %o', Object.assign({}, eventDesc, { handler }));\n        return subscribed;\n    }\n    /**\n     * Unsubscribes {@link ESLEventListener}(s) from the object\n     * @param host - host element that stores subscriptions (listeners context)\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners to remove\n     */\n    static unsubscribe(host, ...criteria) {\n        const listeners = ESLEventListener.get(host, ...criteria);\n        listeners.forEach((listener) => listener.unsubscribe());\n        return listeners;\n    }\n};\nESLEventUtils = ESLEventUtils_1 = __decorate([\n    ExportNs('EventUtils')\n], ESLEventUtils);\nexport { ESLEventUtils };\n/** @deprecated alias for {@link ESLEventUtils} */\nexport const EventUtils = ESLEventUtils;\n","import { ESLEventUtils } from '../../esl-event-listener/core';\nexport function listen(desc) {\n    return function listener(target, propertyKey, descriptor) {\n        const superDesc = Object.getPrototypeOf(target)[propertyKey];\n        desc = typeof desc === 'string' || typeof desc === 'function' ? { event: desc } : desc;\n        desc = Object.assign({ auto: true }, desc.inherit && ESLEventUtils.isEventDescriptor(superDesc) ? superDesc : {}, desc);\n        const fn = descriptor.value || descriptor.get && descriptor.get.call(target);\n        if (typeof fn !== 'function') {\n            throw new TypeError('Only class methods can be decorated via listener decorator');\n        }\n        if (ESLEventUtils.isEventDescriptor(fn) && fn.event !== desc.event) {\n            throw new TypeError(`Method ${propertyKey} already decorated as ESLListenerDescriptor`);\n        }\n        Object.assign(fn, desc);\n        // Allow collecting\n        descriptor.enumerable = true;\n    };\n}\n","import { wrap } from '../misc/array';\n/** Store locks for key element classes*/\nconst lockStore = new WeakMap();\n/** Mange className lock for the element */\nconst lock = (el, className, locker) => {\n    const elLocks = lockStore.get(el) || new Map();\n    const classLocks = elLocks.get(className) || new Set();\n    classLocks.add(locker);\n    elLocks.set(className, classLocks);\n    lockStore.set(el, elLocks);\n};\n/**\n * Manage className unlock for the element\n * @returns true if className have no locks\n */\nconst unlock = (el, className, locker) => {\n    const elLocks = lockStore.get(el);\n    if (!elLocks)\n        return true;\n    const classLocks = elLocks.get(className);\n    if (!classLocks)\n        return true;\n    classLocks.delete(locker);\n    return !classLocks.size;\n};\n/**\n * Add single class to the element.\n * Supports inversion and locker management.\n */\nconst add = (el, className, locker) => {\n    if (className[0] === '!')\n        return remove(el, className.substring(1), locker);\n    if (locker)\n        lock(el, className, locker);\n    el.classList.add(className);\n};\n/**\n * Remove single class from the element.\n * Supports inversion and locker management.\n */\nconst remove = (el, className, locker) => {\n    if (className[0] === '!')\n        return add(el, className.substring(1), locker);\n    if (locker && !unlock(el, className, locker))\n        return;\n    if (!locker)\n        CSSClassUtils.unlock(el, className);\n    el.classList.remove(className);\n};\n/**\n * Check if the element matches passed CSS class.\n * Supports inversion.\n */\nconst has = (el, className) => {\n    if (className[0] === '!')\n        return !has(el, className.substring(1));\n    return el.classList.contains(className);\n};\n/**\n * CSS class manipulation utilities.\n *\n * Allows manipulating with CSS classes with the following set of sub-features:\n * - JQuery-like enumeration - you can pass multiple tokens separated by space\n * - safe checks - empty or falsy token sting will be ignored without throwing an error\n * - inversion syntax - tokens that start from '!' will be processed with inverted action\n * (e.g. addCls(el, '!class') - will remove 'class' from the element, while removeCls(el, '!class') adds 'class' to the element)\n * - class locks - you can manipulate with classes using `locker` option that takes into account the modification initiator.\n * That means the class added in 'locker' mode will not be removed until all initiators that requested add class have requested its removal.\n * */\nexport class CSSClassUtils {\n    /** Splitting passed token string into CSS class names array. */\n    static splitTokens(tokenString) {\n        return (tokenString || '').split(' ').filter((str) => !!str);\n    }\n    /**\n     * Add all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static add(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => add(el, className, locker)));\n    }\n    /**\n     * Remove all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static remove(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => remove(el, className, locker)));\n    }\n    /**\n     * Toggle all classes from the class token string on the element to the passed state.\n     * @see CSSClassUtils\n     * */\n    static toggle(els, cls, state, locker) {\n        (state ? CSSClassUtils.add : CSSClassUtils.remove)(els, cls, locker);\n    }\n    /**\n     * Check if all class from token string matches to the element or elements.\n     * @see CSSClassUtils\n     * */\n    static has(els, cls) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        return wrap(els).every((el) => tokens.every((className) => has(el, className)));\n    }\n    /** Remove all lockers for the element or passed element className */\n    static unlock(els, className) {\n        if (className) {\n            wrap(els).forEach((el) => { var _a; return (_a = lockStore.get(el)) === null || _a === void 0 ? void 0 : _a.delete(className); });\n        }\n        else {\n            wrap(els).forEach((el) => lockStore.delete(el));\n        }\n    }\n}\n","export const TAB = 'Tab';\nexport const ENTER = 'Enter';\nexport const ESC = 'Escape';\nexport const SPACE = ' ';\nexport const BACKSPACE = 'Backspace';\nexport const ALT = 'Alt';\nexport const SHIFT = 'Shift';\nexport const CONTROL = 'Control';\nexport const PAUSE = 'Pause';\nexport const END = 'End';\nexport const HOME = 'Home';\nexport const DELETE = 'Delete';\nexport const PAGE_UP = 'PageUp';\nexport const PAGE_DOWN = 'PageDown';\nexport const ARROW_LEFT = 'ArrowLeft';\nexport const ARROW_UP = 'ArrowUp';\nexport const ARROW_RIGHT = 'ArrowRight';\nexport const ARROW_DOWN = 'ArrowDown';\nexport const SYSTEM_KEYS = [TAB, ALT, SHIFT, CONTROL, PAGE_UP, PAGE_DOWN, ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN];\n","/**\n * `@prop` is auxiliary decorator to define a field on the prototype level.\n *` @prop` can be used to override decorated property from the parent level\n *\n * You can also use an @override decorator in combination with ECMA Script class property definition:\n * `@prop() public field: any = initial value;`\n *\n * The class property initial value is a part of object creation, so it goes to the object itself,\n * while the @override value is defined on the prototype level.\n *\n * @param value - value to setup in prototype\n * @param prototypeConfig - prototype property configuration\n */\nexport function prop(value, prototypeConfig = {}) {\n    return function (obj, name) {\n        if (Object.hasOwnProperty.call(obj, name)) {\n            throw new TypeError('Can\\'t override own property');\n        }\n        Object.defineProperty(obj, name, {\n            value,\n            writable: !prototypeConfig.readonly,\n            enumerable: !prototypeConfig.enumerable,\n            configurable: true\n        });\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { prop } from '../../esl-utils/decorators';\nimport { ESLEventUtils } from '../../esl-utils/dom/events';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\n/**\n * Base class for ESL custom elements\n * Allows defining custom element with the optional custom tag name\n */\nexport class ESLBaseElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this._connected = false;\n    }\n    connectedCallback() {\n        this._connected = true;\n        this.classList.add(this.constructor.is);\n        ESLEventUtils.descriptors(this).forEach((desc) => ESLEventUtils.subscribe(this, desc));\n    }\n    disconnectedCallback() {\n        this._connected = false;\n        ESLEventUtils.unsubscribe(this);\n    }\n    /** Check that the element is connected and `connectedCallback` has been executed */\n    get connected() {\n        return this._connected;\n    }\n    $$on(event, handler) {\n        return ESLEventUtils.subscribe(this, event, handler);\n    }\n    /** Unsubscribes event listener */\n    $$off(...condition) {\n        return ESLEventUtils.unsubscribe(this, ...condition);\n    }\n    /**\n     * Gets or sets CSS classes for the current element.\n     * @param cls - CSS classes query {@link CSSClassUtils}\n     * @param value - boolean to set CSS class(es) state or undefined to skip mutation\n     * @returns current classes state or passed state\n     */\n    $$cls(cls, value) {\n        if (value === undefined)\n            return CSSClassUtils.has(this, cls);\n        CSSClassUtils.toggle(this, cls, value);\n        return value;\n    }\n    /**\n     * Gets or sets an attribute for the current element.\n     * If the `value` param is undefined then skips mutation.\n     * @param name - attribute name\n     * @param value - string attribute value, boolean attribute state or `null` to delete attribute\n     * @returns the current attribute value or previous value for mutation\n     */\n    $$attr(name, value) {\n        const prevValue = this.getAttribute(name);\n        if (value !== undefined)\n            setAttr(this, name, value);\n        return prevValue;\n    }\n    /**\n     * Dispatches component custom event.\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    $$fire(eventName, eventInit) {\n        return ESLEventUtils.dispatch(this, eventName, eventInit);\n    }\n    /**\n     * Register component in the {@link customElements} registry\n     * @param tagName - custom tag name to register custom element\n     */\n    static register(tagName) {\n        tagName = tagName || this.is;\n        if (!tagName)\n            throw new Error('Can not define custom element');\n        const constructor = customElements.get(tagName);\n        if (constructor) {\n            if (constructor.is !== tagName)\n                throw new Error('Element declaration tag inconsistency');\n            return;\n        }\n        if (this.is !== tagName) {\n            this.is = tagName;\n        }\n        customElements.define(tagName, this);\n    }\n    /** Shortcut for `customElements.whenDefined(currentCustomElement)` */\n    static get registered() {\n        return customElements.whenDefined(this.is);\n    }\n    static create() {\n        return document.createElement(this.is);\n    }\n}\n/** Custom element tag name */\nESLBaseElement.is = '';\n__decorate([\n    prop('esl:refresh')\n], ESLBaseElement.prototype, \"REFRESH_EVENT\", void 0);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement, listen } from '../../../esl-base-element/core';\nimport { ESLEventUtils } from '../../../esl-utils/dom/events';\n/**\n * Base class for {@link HTMLSelectElement} wrapper element, implements {@link ESLSelectModel} options source\n */\nexport class ESLSelectWrapper extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._mutationObserver = new MutationObserver(this._onTargetMutation.bind(this));\n    }\n    /** Native select that is wrapped */\n    get $select() {\n        return this._$select;\n    }\n    set $select(select) {\n        const prev = this._$select;\n        this._$select = select;\n        this._onTargetChange(select, prev);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._mutationObserver.disconnect();\n    }\n    _onChange(event) { }\n    _onListChange() { }\n    _onTargetChange(newTarget, oldTarget) {\n        this.$$on(this._onChange);\n        this._mutationObserver.disconnect();\n        const type = this.constructor;\n        if (newTarget)\n            this._mutationObserver.observe(newTarget, type.observationConfig);\n    }\n    _onTargetMutation(changes) {\n        const isListChange = (change) => change.addedNodes.length + change.removedNodes.length > 0;\n        changes.some(isListChange) ? this._onListChange() : this._onChange();\n    }\n    _onReset(event) {\n        if (!event.target || event.target !== this.form)\n            return;\n        setTimeout(() => this._onChange(event));\n    }\n    get multiple() {\n        return this.$select && this.$select.multiple;\n    }\n    get options() {\n        return this.$select ? Array.from(this.$select.options) : [];\n    }\n    get selectedOptions() {\n        return this.options.filter((item) => item.selected);\n    }\n    getOption(value) {\n        return this.options.find((item) => item.value === value);\n    }\n    setSelected(value, state) {\n        if (!this.$select)\n            return;\n        const option = this.getOption(value);\n        option && (option.selected = state);\n        ESLEventUtils.dispatch(this.$select, 'change');\n    }\n    isSelected(value) {\n        const opt = this.getOption(value);\n        return !!opt && opt.selected;\n    }\n    hasSelected() {\n        return this.options.some((item) => item.selected);\n    }\n    isAllSelected() {\n        return this.options.every((item) => item.selected || item.disabled);\n    }\n    setAllSelected(state) {\n        if (!this.multiple || !this.$select)\n            return;\n        this.options.forEach((item) => item.selected = !item.disabled && state);\n        ESLEventUtils.dispatch(this.$select, 'change');\n    }\n    // Proxy select methods and values\n    get value() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    get values() {\n        return this.selectedOptions.map((item) => item.value);\n    }\n    get form() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.form;\n    }\n    get name() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.name;\n    }\n    set name(name) {\n        this.$select && (this.$select.name = name);\n    }\n    get required() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.required;\n    }\n    set required(required) {\n        this.$select && (this.$select.required = required);\n    }\n    // Validation API values\n    get validity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.validity;\n    }\n    get validationMessage() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.validationMessage;\n    }\n    get willValidate() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.willValidate;\n    }\n    // Validation API methods\n    checkValidity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.checkValidity();\n    }\n    reportValidity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.reportValidity();\n    }\n    setCustomValidity(error) {\n        var _a;\n        (_a = this.$select) === null || _a === void 0 ? void 0 : _a.setCustomValidity(error);\n    }\n}\nESLSelectWrapper.observationConfig = {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['value', 'selected', 'disabled'],\n    childList: true,\n    characterData: true\n};\n__decorate([\n    listen({\n        event: 'change',\n        target: (el) => el.$select\n    })\n], ESLSelectWrapper.prototype, \"_onChange\", null);\n__decorate([\n    listen({\n        event: 'reset',\n        target: (el) => el.ownerDocument\n    })\n], ESLSelectWrapper.prototype, \"_onReset\", null);\n","/**\n * Postpone action after next render\n */\nexport const afterNextRender = (callback) => requestAnimationFrame(() => requestAnimationFrame(callback));\n/**\n * Postpone action after a couple of renders\n */\nexport const skipOneRender = (callback) => requestAnimationFrame(() => afterNextRender(callback));\n/**\n * Decorate function to schedule execution after next render\n * @returns decorated function\n */\nexport const rafDecorator = (fn) => {\n    let lastArgs = null; // null if no calls requested\n    return function (...args) {\n        if (lastArgs === null) {\n            requestAnimationFrame(() => {\n                lastArgs && fn.call(this, ...lastArgs);\n                lastArgs = null;\n            });\n        }\n        lastArgs = args;\n    };\n};\n","import { getPropertyDescriptor } from '../misc/object/utils';\n/**\n * Common TS decorator to apply decorator function\n * (like {@link debounce}, {@link throttle}, {@link rafDecorator})\n * to the class method\n * @param decorator - function decorator, should accept decorated method as first argument\n * @param args - additional arguments to pass into `decorator`\n */\nexport function decorate(decorator, ...args) {\n    return function (target, propertyKey, descriptor) {\n        if (!descriptor || typeof descriptor.value !== 'function') {\n            throw new TypeError('Only class methods can be decorated');\n        }\n        const originalFn = descriptor.value;\n        return descriptor = {\n            enumerable: descriptor.enumerable,\n            configurable: true,\n            get: function getBound() {\n                // Skip own properties\n                const proto = Object.getPrototypeOf(this);\n                // Find the closest descriptor for property\n                const desc = getPropertyDescriptor(proto, propertyKey);\n                // Return original function in case of prototype or super call\n                if (!desc || desc.get !== getBound)\n                    return originalFn;\n                // Create a new decorated instance of function\n                const decoratedFn = decorator(originalFn.bind(this), ...args);\n                // Copy original function own keys\n                Object.assign(decoratedFn, originalFn);\n                // Defines own property with the decorated instance\n                return this[propertyKey] = decoratedFn;\n            },\n            set(value) {\n                Object.defineProperty(this, propertyKey, {\n                    value,\n                    writable: true,\n                    configurable: true,\n                    enumerable: descriptor.enumerable\n                });\n            }\n        };\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '../../../esl-base-element/core';\nimport { format } from '../../../esl-utils/misc/format';\nimport { rafDecorator } from '../../../esl-utils/async/raf';\nimport { attr, boolAttr, decorate, listen } from '../../../esl-utils/decorators';\n/**\n * ESLSelectRenderer component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom element to render {@link ESLSelect} inline field\n */\nexport class ESLSelectRenderer extends ESLBaseElement {\n    constructor() {\n        super();\n        this.$remove = document.createElement('button');\n        this.$remove.type = 'button';\n        this.$remove.setAttribute('aria-label', 'Clear');\n        this.$remove.classList.add('esl-select-clear-btn');\n        this.$remove.classList.add('icon-nav-close-menu');\n        this.$container = document.createElement('div');\n        this.$container.classList.add('esl-select-text-container');\n        this.$text = document.createElement('span');\n        this.$text.classList.add('esl-select-text');\n        this.$container.appendChild(this.$text);\n        this.$rest = document.createElement('span');\n        this.$rest.classList.add('esl-select-text');\n        this.$container.appendChild(this.$rest);\n    }\n    /** ESLSelect owner */\n    get owner() {\n        if (!this.parentElement || !this.parentElement.matches('esl-select'))\n            return null;\n        return this.parentElement;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$container);\n        this.appendChild(this.$remove);\n        Promise.resolve().then(() => this.render());\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeChild(this.$container);\n        this.removeChild(this.$remove);\n    }\n    /** Rerender component with markers */\n    render() {\n        if (!this.owner)\n            return;\n        const selected = this.owner.selectedOptions;\n        this.hasValue = !!selected.length;\n        this.toggleAttribute('multiple', this.owner.multiple);\n        this.applyItems(selected.map((item) => item.text));\n    }\n    /** Render item with a visible items limit */\n    apply(items, limit) {\n        const length = items.length;\n        const rest = length - limit;\n        const options = { rest, length, limit };\n        this.$text.textContent = items.slice(0, limit).join(', ');\n        if (rest > 0) {\n            this.$rest.textContent = format(this.moreLabelFormat || '', options);\n        }\n        else {\n            this.$rest.textContent = '';\n        }\n    }\n    /** Render items using adaptive algorithm */\n    applyItems(items) {\n        let size = 0;\n        do {\n            this.apply(items, ++size); // Render with extended limit while it not fits to the container\n        } while (size <= items.length && this.$container.scrollWidth <= this.$container.clientWidth);\n        this.apply(items, size - 1); // Render last limit that fits\n    }\n    /** Handle clear button click */\n    _onClear(e) {\n        if (!this.owner)\n            return;\n        this.owner.setAllSelected(false);\n        e.stopPropagation();\n        e.preventDefault();\n    }\n    _onResize() {\n        this.render();\n    }\n}\nESLSelectRenderer.is = 'esl-select-renderer';\n__decorate([\n    attr()\n], ESLSelectRenderer.prototype, \"emptyText\", void 0);\n__decorate([\n    attr()\n], ESLSelectRenderer.prototype, \"moreLabelFormat\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectRenderer.prototype, \"hasValue\", void 0);\n__decorate([\n    listen({\n        event: 'esl:change:value',\n        target: (el) => el.owner\n    })\n], ESLSelectRenderer.prototype, \"render\", null);\n__decorate([\n    listen({ event: 'click', selector: '.esl-select-clear-btn' })\n], ESLSelectRenderer.prototype, \"_onClear\", null);\n__decorate([\n    listen({ event: 'resize', target: window }),\n    decorate(rafDecorator)\n], ESLSelectRenderer.prototype, \"_onResize\", null);\n","import { getAttr, setAttr } from '../dom/attr';\nimport { toKebabCase, evaluate } from '../misc/format';\nfunction buildJsonAttrDescriptor(attrName, readOnly, defaultValue) {\n    function get() {\n        const attrContent = getAttr(this, attrName, '').trim();\n        return evaluate(attrContent, defaultValue);\n    }\n    function set(value) {\n        try {\n            if (typeof value !== 'object')\n                throw Error('value should be object');\n            setAttr(this, attrName, value ? JSON.stringify(value) : false);\n        }\n        catch (e) {\n            console.error('[ESL] jsonAttr: Can not set json value ', e);\n        }\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value using JSON (de-)serialization rules.\n * Maps object type property.\n * @param config - mapping configuration. See {@link JsonAttrDescriptor}\n */\nexport const jsonAttr = (config = {}) => {\n    config = Object.assign({ defaultValue: {} }, config);\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildJsonAttrDescriptor(attrName, !!config.readonly, config.defaultValue));\n    };\n};\n","const ns = window || global;\nconst sequences = ns.__esl_sequences__ || new Map();\nns.__esl_sequences__ = sequences;\n/** Create and return sequential id */\nexport const sequentialUID = (name, prefix = name) => {\n    const uid = (sequences.get(name) || 0) + 1;\n    sequences.set(name, uid);\n    return prefix + uid;\n};\n/** Return random unique identifier */\nexport const randUID = (prefix = '') => {\n    const time = Date.now().toString(32);\n    const rand = Math.round(Math.random() * 1024 * 1024).toString(32);\n    return prefix + time + '-' + rand;\n};\n/**\n * Generate unique id\n * @deprecated Alias for {@link randUID}\n */\nexport const generateUId = randUID;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from './export-ns';\nconst { userAgent, vendor, platform } = window.navigator;\n// IE Detection\nexport const isTrident = /trident/i.test(userAgent);\nexport const isIE = isTrident;\n// Edge Detection\nexport const isEdgeHTML = /edg([ea]|ios)/i.test(userAgent);\nexport const isBlinkEdge = /\\sedg\\//i.test(userAgent);\nexport const isEdge = isEdgeHTML || isBlinkEdge;\n// Gecko\nexport const isGecko = /gecko/i.test(userAgent) && !/like gecko/i.test(userAgent);\nexport const isFirefox = /firefox|iceweasel|fxios/i.test(userAgent);\n// Opera / Chrome\nexport const isOpera = /(?:^opera.+?version|opr)/.test(userAgent);\nexport const isChrome = !isOpera && /google inc/.test(vendor);\n// Webkit\nexport const isWebkit = /(apple)?webkit/i.test(userAgent);\n// Safari\nexport const isSafari = isWebkit && /^((?!chrome|android).)*safari/i.test(userAgent);\n// Blink\nexport const isBlink = isWebkit && !isSafari;\n// Bot detection\nexport const isBot = /Chrome-Lighthouse|Google Page Speed Insights/i.test(userAgent);\n// Mobile\nexport const isAndroid = /Android/i.test(userAgent);\nexport const isMobileIOS13 = /* iOS 13+ detection */ (platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nexport const isMobileIOS = /iPad|iPhone|iPod/.test(platform) || isMobileIOS13;\nexport const isLegacyMobile = /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport const isMobile = isMobileIOS || isAndroid || isLegacyMobile;\nexport const isMobileSafari = isMobileIOS && isWebkit && /CriOS/i.test(userAgent);\n// Touch Detection\nexport const isTouchDevice = (() => {\n    const navApi = window.navigator;\n    if (navApi.maxTouchPoints || navApi.msMaxTouchPoints)\n        return true;\n    return ('ontouchstart' in window) || ('DocumentTouch' in window && document instanceof Touch);\n})();\n// Hover check\n// Note: always true for IE\nexport const hasHover = !matchMedia('(hover: none)').matches;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nexport const TOUCH_EVENTS = (() => {\n    const isTouch = isTouchDevice;\n    return {\n        START: isTouch ? 'touchstart' : 'pointerdown',\n        MOVE: isTouch ? 'touchmove' : 'pointermove',\n        END: isTouch ? 'touchend' : 'pointerup'\n    };\n})();\n/**\n * Device detection utility\n * @readonly\n */\nlet DeviceDetector = class DeviceDetector {\n};\n// IE Detection\nDeviceDetector.isTrident = isTrident;\nDeviceDetector.isIE = isIE;\n// Edge Detection\nDeviceDetector.isEdgeHTML = isEdgeHTML;\nDeviceDetector.isBlinkEdge = isBlinkEdge;\nDeviceDetector.isEdge = isEdge;\n// Gecko\nDeviceDetector.isGecko = isGecko;\nDeviceDetector.isFirefox = isFirefox;\n// Opera / Chrome\nDeviceDetector.isOpera = isOpera;\nDeviceDetector.isChrome = isChrome;\n// Webkit\nDeviceDetector.isWebkit = isWebkit;\n// Safari\nDeviceDetector.isSafari = isSafari;\n// Blink\nDeviceDetector.isBlink = isBlink;\n// Bot detection\nDeviceDetector.isBot = isBot;\n// Mobile\nDeviceDetector.isAndroid = isAndroid;\nDeviceDetector.isMobileIOS13 = isMobileIOS13;\nDeviceDetector.isMobileIOS = isMobileIOS;\nDeviceDetector.isLegacyMobile = isLegacyMobile;\nDeviceDetector.isMobile = isMobile;\nDeviceDetector.isMobileSafari = isMobileSafari;\n// Touch Detection\nDeviceDetector.isTouchDevice = isTouchDevice;\n// Hover check\n// Note: always true for IE\nDeviceDetector.hasHover = hasHover;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nDeviceDetector.TOUCH_EVENTS = TOUCH_EVENTS;\nDeviceDetector = __decorate([\n    ExportNs('DeviceDetector')\n], DeviceDetector);\nexport { DeviceDetector };\n","/**\n * Task placeholder with a single place for executing deferred task.\n * Only one task can be planed per DelayedTask instance.\n * @see put DelayedTask.put behaviour description.\n */\nexport class DelayedTask {\n    constructor() {\n        this._fn = null;\n        this._timeout = null;\n        /** Execute deferred task immediately */\n        this.run = () => {\n            this._timeout = null;\n            this._fn && this._fn();\n        };\n    }\n    /** @returns Function of currently deferred (planned) task */\n    get fn() {\n        return this._fn;\n    }\n    /**\n     * Cancel deferred task and planning passed\n     * @param task - task function\n     * @param delay - time to delay task execution\n     *  - pass negative or false to execute task immediately\n     *  - pass 0 to plan task to the macrotask\n     *  - pass positive number x to delay task on x ms.\n     * */\n    put(task, delay = false) {\n        const prev = this.cancel();\n        if (typeof task === 'function') {\n            if (delay && typeof delay === 'string')\n                delay = +delay;\n            if (typeof delay === 'number' && delay >= 0) {\n                this._fn = task;\n                this._timeout = window.setTimeout(this.run, delay);\n            }\n            else {\n                task();\n            }\n        }\n        return prev;\n    }\n    /** Cancel deferred (planned) task */\n    cancel() {\n        const prev = this._fn;\n        (typeof this._timeout === 'number') && clearTimeout(this._timeout);\n        this._fn = this._timeout = null;\n        return prev;\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleable_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESC, SYSTEM_KEYS } from '../../esl-utils/dom/keys';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { prop, attr, jsonAttr, boolAttr, listen } from '../../esl-utils/decorators';\nimport { defined, copyDefinedKeys } from '../../esl-utils/misc/object';\nimport { sequentialUID } from '../../esl-utils/misc/uid';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { DelayedTask } from '../../esl-utils/async/delayed-task';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { isMatches } from '../../esl-utils/dom/traversing';\nconst activators = new WeakMap();\n/**\n * ESLToggleable component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleable - a custom element, that is used as a base for \"Popup-like\" components creation\n */\nlet ESLToggleable = ESLToggleable_1 = class ESLToggleable extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Inner state */\n        this._open = false;\n        /** Inner show/hide task manager instance */\n        this._task = new DelayedTask();\n        /** Marker for current hover listener state */\n        this._trackHover = false;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (!this.id && !this.noAutoId) {\n            const tag = this.constructor.is;\n            this.id = sequentialUID(tag, tag + '-');\n        }\n        this.initiallyOpened = this.hasAttribute('open');\n        this.setInitialState();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        activators.delete(this);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        switch (attrName) {\n            case 'open':\n                if (this.open === this.hasAttribute('open'))\n                    return;\n                this.toggle(this.open, { initiator: 'attribute', showDelay: 0, hideDelay: 0 });\n                break;\n            case 'group':\n                this.$$fire(this.GROUP_CHANGED_EVENT, {\n                    detail: { oldGroupName: oldVal, newGroupName: newVal }\n                });\n                break;\n        }\n    }\n    /** Set initial state of the Toggleable */\n    setInitialState() {\n        if (this.initialParams) {\n            this.toggle(this.initiallyOpened, this.initialParams);\n        }\n    }\n    /** Bind outside action event listeners */\n    bindOutsideEventTracking(track) {\n        track ? this.$$on(this._onOutsideAction) : this.$$off(this._onOutsideAction);\n    }\n    /** Bind hover events listeners for the Toggleable itself */\n    bindHoverStateTracking(track, hideDelay) {\n        if (!DeviceDetector.hasHover)\n            return;\n        this._trackHoverDelay = track && hideDelay !== undefined ? +hideDelay : undefined;\n        if (this._trackHover === track)\n            return;\n        this._trackHover = track;\n        track ? this.$$on(this._onMouseEnter) : this.$$off(this._onMouseEnter);\n        track ? this.$$on(this._onMouseLeave) : this.$$off(this._onMouseLeave);\n    }\n    /** Function to merge the result action params */\n    mergeDefaultParams(params) {\n        return Object.assign({}, this.defaultParams, copyDefinedKeys(params));\n    }\n    /** Toggle the element state */\n    toggle(state = !this.open, params) {\n        return state ? this.show(params) : this.hide(params);\n    }\n    /** Change the element state to active */\n    show(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.showTask.bind(this, params), defined(params.showDelay, params.delay));\n        this.bindOutsideEventTracking(this.closeOnOutsideAction);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Change the element state to inactive */\n    hide(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.hideTask.bind(this, params), defined(params.hideDelay, params.delay));\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Actual show task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    showTask(params) {\n        if (!params.force && this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_SHOW_EVENT, { detail: { params } }))\n            return;\n        this.activator = params.activator;\n        this.open = true;\n        this.onShow(params);\n        if (!params.silent)\n            this.$$fire(this.SHOW_EVENT, { detail: { params }, cancelable: false });\n    }\n    /** Actual hide task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    hideTask(params) {\n        if (!params.force && !this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_HIDE_EVENT, { detail: { params } }))\n            return;\n        this.open = false;\n        this.onHide(params);\n        this.bindOutsideEventTracking(false);\n        if (!params.silent)\n            this.$$fire(this.HIDE_EVENT, { detail: { params }, cancelable: false });\n    }\n    /**\n     * Actions to execute on show toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Adds CSS classes, update a11y and fire {@link ESLToggleable.REFRESH_EVENT} event by default.\n     */\n    onShow(params) {\n        CSSClassUtils.add(this, this.activeClass);\n        CSSClassUtils.add(document.body, this.bodyClass, this);\n        this.updateA11y();\n        this.$$fire(this.REFRESH_EVENT); // To notify other components about content change\n    }\n    /**\n     * Actions to execute on hide toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Removes CSS classes and update a11y by default.\n     */\n    onHide(params) {\n        CSSClassUtils.remove(this, this.activeClass);\n        CSSClassUtils.remove(document.body, this.bodyClass, this);\n        this.updateA11y();\n    }\n    /** Active state marker */\n    get open() {\n        return this._open;\n    }\n    set open(value) {\n        this.toggleAttribute('open', this._open = value);\n    }\n    /** Last component that has activated the element. Uses {@link ESLToggleableActionParams.activator}*/\n    get activator() {\n        return activators.get(this);\n    }\n    set activator(el) {\n        el ? activators.set(this, el) : activators.delete(this);\n    }\n    /** Returns the element to apply a11y attributes */\n    get $a11yTarget() {\n        const target = this.getAttribute('a11y-target');\n        if (target === 'none')\n            return null;\n        return target ? this.querySelector(target) : this;\n    }\n    /** Called on show and on hide actions to update a11y state accordingly */\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-hidden', String(!this._open));\n    }\n    /** @returns if the passed event should trigger hide action */\n    isOutsideAction(e) {\n        const target = e.target;\n        // target is inside current toggleable\n        if (this.contains(target))\n            return false;\n        // target is inside last activator\n        if (this.activator && this.activator.contains(target))\n            return false;\n        // Event is not a system command key\n        return !(e instanceof KeyboardEvent && SYSTEM_KEYS.includes(e.key));\n    }\n    _onCloseClick(e) {\n        this.hide({ initiator: 'close', activator: e.target, event: e });\n    }\n    _onOutsideAction(e) {\n        if (!this.isOutsideAction(e))\n            return;\n        // Used 0 delay to decrease priority of the request\n        this.hide({ initiator: 'outsideaction', hideDelay: 0, event: e });\n    }\n    _onKeyboardEvent(e) {\n        if (this.closeOnEsc && e.key === ESC) {\n            this.hide({ initiator: 'keyboard', event: e });\n        }\n    }\n    _onMouseEnter(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseenter', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.show(Object.assign(baseParams, this.trackHoverParams));\n    }\n    _onMouseLeave(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseleave', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.hide(Object.assign(baseParams, this.trackHoverParams));\n    }\n    /** Prepares toggle request events param */\n    buildRequestParams(e) {\n        const detail = e.detail || {};\n        if (!isMatches(this, detail.match))\n            return null;\n        return Object.assign({}, detail, { event: e });\n    }\n    /** Actions to execute on show request */\n    _onShowRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.show(params);\n    }\n    /** Actions to execute on hide request */\n    _onHideRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.hide(params);\n    }\n};\nESLToggleable.is = 'esl-toggleable';\nESLToggleable.observedAttributes = ['open', 'group'];\n__decorate([\n    prop('esl:before:show')\n], ESLToggleable.prototype, \"BEFORE_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:before:hide')\n], ESLToggleable.prototype, \"BEFORE_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show')\n], ESLToggleable.prototype, \"SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:hide')\n], ESLToggleable.prototype, \"HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:after:show')\n], ESLToggleable.prototype, \"AFTER_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:after:hide')\n], ESLToggleable.prototype, \"AFTER_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show:request')\n], ESLToggleable.prototype, \"SHOW_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:hide:request')\n], ESLToggleable.prototype, \"HIDE_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:change:group')\n], ESLToggleable.prototype, \"GROUP_CHANGED_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"bodyClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLToggleable.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ name: 'group' })\n], ESLToggleable.prototype, \"groupName\", void 0);\n__decorate([\n    attr({ name: 'close-on' })\n], ESLToggleable.prototype, \"closeTrigger\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"noAutoId\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLToggleable.prototype, \"initialParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"defaultParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"trackHoverParams\", void 0);\n__decorate([\n    listen({\n        event: 'click',\n        selector: (el) => el.closeTrigger || ''\n    })\n], ESLToggleable.prototype, \"_onCloseClick\", null);\n__decorate([\n    listen({\n        auto: false,\n        event: 'keydown mouseup touchend',\n        target: document.body,\n        capture: true\n    })\n], ESLToggleable.prototype, \"_onOutsideAction\", null);\n__decorate([\n    listen('keydown')\n], ESLToggleable.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseenter' })\n], ESLToggleable.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseleave' })\n], ESLToggleable.prototype, \"_onMouseLeave\", null);\n__decorate([\n    listen((el) => el.SHOW_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onShowRequest\", null);\n__decorate([\n    listen((el) => el.HIDE_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onHideRequest\", null);\nESLToggleable = ESLToggleable_1 = __decorate([\n    ExportNs('Toggleable')\n], ESLToggleable);\nexport { ESLToggleable };\n","/** Makes a plain copy of obj with properties satisfying the predicate\n * If no predicate provided copies all own properties */\nexport function copy(obj, predicate = () => true) {\n    const result = Object.assign({}, obj || {});\n    Object.keys(result).forEach((key) => {\n        (!predicate(key, result[key])) && delete result[key];\n    });\n    return result;\n}\n/** Makes a flat copy without undefined keys */\nexport function copyDefinedKeys(obj) {\n    return copy(obj || {}, (key, value) => value !== void 0);\n}\n/** Omits copying provided properties from object */\nexport function omit(obj, keys) {\n    return copy(obj, key => !keys.includes(key));\n}\n","import { onDocumentReady } from '../dom/ready';\n/** Defer method execution to the next task with dom ready state precondition */\nexport function ready(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== 'function') {\n        throw new TypeError('Only class methods can be decorated via document ready decorator');\n    }\n    const fn = descriptor.value;\n    descriptor.value = function (...arg) {\n        onDocumentReady(() => fn.call(this, ...arg));\n    };\n}\n","/**\n * Execute callback in bounds of the next task with dom ready state precondition\n */\nexport function onDocumentReady(callback) {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', function fn() {\n            document.removeEventListener('DOMContentLoaded', fn);\n            setTimeout(() => callback());\n        });\n    }\n    else {\n        setTimeout(() => callback());\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { memoize } from '../decorators/memoize';\n// TODO: functional\nexport class RTLUtils {\n    /** Check if the element in a RTL direction context */\n    static isRtl(el) {\n        return getComputedStyle(el || document.body).direction === 'rtl';\n    }\n    /**\n     * @returns RTL scroll type (lazy, memoized)\n     */\n    static get scrollType() {\n        let scrollType = 'default';\n        const el = createDummyEl();\n        document.body.appendChild(el);\n        if (el.scrollLeft <= 0) {\n            el.scrollLeft = 2;\n            scrollType = el.scrollLeft < 2 ? 'negative' : 'reverse';\n        }\n        document.body.removeChild(el);\n        return scrollType;\n    }\n    static normalizeScrollLeft(el, value = null, isRtl = RTLUtils.isRtl(el)) {\n        value = (value === null) ? el.scrollLeft : value;\n        switch (isRtl ? RTLUtils.scrollType : '') {\n            case 'negative':\n                return el.scrollWidth - el.clientWidth + value;\n            case 'reverse':\n                return el.scrollWidth - el.clientWidth - value;\n            default:\n                return value;\n        }\n    }\n}\n__decorate([\n    memoize()\n], RTLUtils, \"scrollType\", null);\n/** Creates the dummy test element with a horizontal scroll presented */\nfunction createDummyEl() {\n    const el = document.createElement('div');\n    el.appendChild(document.createTextNode('ESL!'));\n    el.dir = 'rtl';\n    Object.assign(el.style, {\n        position: 'absolute',\n        top: '-1000px',\n        width: '4px',\n        height: '1px',\n        fontSize: '14px',\n        overflow: 'scroll'\n    });\n    return el;\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { bind, ready, attr, boolAttr, listen } from '../../esl-utils/decorators';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { isMouseEvent, isTouchEvent, getTouchPoint, getOffsetPoint } from '../../esl-utils/dom/events';\nimport { isRelativeNode } from '../../esl-utils/dom/traversing';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { RTLUtils } from '../../esl-utils/dom/rtl';\n/**\n * ESLScrollbar is a reusable web component that replaces the browser's default scrollbar with\n * a custom scrollbar implementation.\n *\n * @author Yuliya Adamskaya\n */\nlet ESLScrollbar = class ESLScrollbar extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredDrag = rafDecorator((e) => this._onPointerDrag(e));\n        this._deferredRefresh = rafDecorator(() => this.refresh());\n        this._scrollTimer = 0;\n        this._resizeObserver = new ResizeObserver(this._deferredRefresh);\n        this._mutationObserver = new MutationObserver((rec) => this.updateContentObserve(rec));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n        this.findTarget();\n    }\n    disconnectedCallback() {\n        this.unbindTargetEvents();\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'target')\n            this.findTarget();\n        if (attrName === 'horizontal')\n            this.refresh();\n    }\n    findTarget() {\n        this.$target = this.target ?\n            ESLTraversingQuery.first(this.target, this) :\n            null;\n    }\n    /** Target element to observe and scroll */\n    get $target() {\n        return this._$target || null;\n    }\n    set $target(content) {\n        this.unbindTargetEvents();\n        this._$target = content;\n        this.bindTargetEvents();\n        this._deferredRefresh();\n    }\n    render() {\n        this.innerHTML = '';\n        this.$scrollbarTrack = document.createElement('div');\n        this.$scrollbarTrack.className = this.trackClass;\n        this.$scrollbarThumb = document.createElement('div');\n        this.$scrollbarThumb.className = this.thumbClass;\n        this.$scrollbarTrack.appendChild(this.$scrollbarThumb);\n        this.appendChild(this.$scrollbarTrack);\n    }\n    bindTargetEvents() {\n        if (!this.$target)\n            return;\n        // Container resize/scroll observers/listeners\n        if (document.documentElement === this.$target) {\n            this.$$on({ event: 'scroll resize', target: window }, this._onScrollOrResize);\n        }\n        else {\n            this.$$on({ event: 'scroll', target: this.$target }, this._onScrollOrResize);\n            this._resizeObserver.observe(this.$target);\n        }\n        // Subscribes to the child elements resizes\n        this._mutationObserver.observe(this.$target, { childList: true });\n        Array.from(this.$target.children).forEach((el) => this._resizeObserver.observe(el));\n    }\n    /** Resubscribes resize observer on child elements when container content changes */\n    updateContentObserve(recs = []) {\n        if (!this.$target)\n            return;\n        const contentChanges = recs.filter((rec) => rec.type === 'childList');\n        contentChanges.forEach((rec) => {\n            Array.from(rec.addedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.observe(el));\n            Array.from(rec.removedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.unobserve(el));\n        });\n        if (contentChanges.length)\n            this._deferredRefresh();\n    }\n    unbindTargetEvents() {\n        if (!this.$target)\n            return;\n        this.$$off(this._onScrollOrResize);\n        if (document.documentElement !== this.$target) {\n            this._resizeObserver.disconnect();\n            this._mutationObserver.disconnect();\n        }\n    }\n    /** @readonly Scrollable distance size value (px) */\n    get scrollableSize() {\n        if (!this.$target)\n            return 0;\n        return this.horizontal ?\n            this.$target.scrollWidth - this.$target.clientWidth :\n            this.$target.scrollHeight - this.$target.clientHeight;\n    }\n    /** @readonly Track size value (px) */\n    get trackOffset() {\n        return this.horizontal ? this.$scrollbarTrack.offsetWidth : this.$scrollbarTrack.offsetHeight;\n    }\n    /** @readonly Thumb size value (px) */\n    get thumbOffset() {\n        return this.horizontal ? this.$scrollbarThumb.offsetWidth : this.$scrollbarThumb.offsetHeight;\n    }\n    /** @readonly Relative thumb size value (between 0.0 and 1.0) */\n    get thumbSize() {\n        // behave as native scroll\n        if (!this.$target || !this.$target.scrollWidth || !this.$target.scrollHeight)\n            return 1;\n        const areaSize = this.horizontal ? this.$target.clientWidth : this.$target.clientHeight;\n        const scrollSize = this.horizontal ? this.$target.scrollWidth : this.$target.scrollHeight;\n        return Math.min((areaSize + 1) / scrollSize, 1);\n    }\n    /** Relative position value (between 0.0 and 1.0) */\n    get position() {\n        if (!this.$target)\n            return 0;\n        const scrollOffset = this.horizontal ? RTLUtils.normalizeScrollLeft(this.$target) : this.$target.scrollTop;\n        return this.scrollableSize ? (scrollOffset / this.scrollableSize) : 0;\n    }\n    set position(position) {\n        this.scrollTargetTo(this.scrollableSize * this.normalizePosition(position));\n        this.update();\n    }\n    /** Normalizes position value (between 0.0 and 1.0) */\n    normalizePosition(position) {\n        const relativePosition = Math.min(1, Math.max(0, position));\n        if (!RTLUtils.isRtl(this.$target) || !this.horizontal)\n            return relativePosition;\n        return RTLUtils.scrollType === 'negative' ? (relativePosition - 1) : (1 - relativePosition);\n    }\n    /** Scrolls target element to passed position */\n    scrollTargetTo(pos) {\n        if (!this.$target)\n            return;\n        this.$target.scrollTo({\n            [this.horizontal ? 'left' : 'top']: pos,\n            behavior: this.dragging ? 'auto' : 'smooth'\n        });\n    }\n    /** Updates thumb size and position */\n    update() {\n        this.$$fire('esl:change:scroll', { bubbles: false });\n        if (!this.$scrollbarThumb || !this.$scrollbarTrack)\n            return;\n        const thumbSize = this.trackOffset * this.thumbSize;\n        const thumbPosition = (this.trackOffset - thumbSize) * this.position;\n        const style = {\n            [this.horizontal ? 'left' : 'top']: `${thumbPosition}px`,\n            [this.horizontal ? 'width' : 'height']: `${thumbSize}px`\n        };\n        Object.assign(this.$scrollbarThumb.style, style);\n    }\n    /** Updates auxiliary markers */\n    updateMarkers() {\n        const { position, thumbSize } = this;\n        this.toggleAttribute('at-start', thumbSize < 1 && position <= 0);\n        this.toggleAttribute('at-end', thumbSize < 1 && position >= 1);\n        this.toggleAttribute('inactive', thumbSize >= 1);\n    }\n    /** Refreshes scroll state and position */\n    refresh() {\n        this.update();\n        this.updateMarkers();\n    }\n    /** Returns position from MouseEvent coordinates (not normalized) */\n    toPosition(event) {\n        const { horizontal, thumbOffset, trackOffset } = this;\n        const point = getTouchPoint(event);\n        const offset = getOffsetPoint(this.$scrollbarTrack);\n        const pointPosition = horizontal ? point.x - offset.x : point.y - offset.y;\n        const freeTrackArea = trackOffset - thumbOffset; // size of free track px\n        const clickPositionNoOffset = pointPosition - thumbOffset / 2;\n        return clickPositionNoOffset / freeTrackArea;\n    }\n    // Event listeners\n    /** Handles `mousedown` / `touchstart` event to manage thumb drag start and scroll clicks */\n    _onPointerDown(event) {\n        this._initialPosition = this.position;\n        this._pointerPosition = this.toPosition(event);\n        const point = getTouchPoint(event);\n        this._initialMousePosition = this.horizontal ? point.x : point.y;\n        if (event.target === this.$scrollbarThumb) {\n            this._onThumbPointerDown(event); // Drag start handler\n        }\n        else {\n            this._onPointerDownTick(true); // Continuous scroll and click handler\n        }\n        // Subscribes inverse handlers\n        isMouseEvent(event) && this.$$on({ event: 'mouseup', target: window }, this._onPointerUp);\n        isTouchEvent(event) && this.$$on({ event: 'touchend', target: window }, this._onPointerUp);\n        // Prevents default text selection, etc.\n        if (!isTouchEvent(event))\n            event.preventDefault();\n    }\n    /** Handles a scroll click / continuous scroll*/\n    _onPointerDownTick(first) {\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        const position = this.position;\n        const allowedOffset = (first ? 1 : 1.5) * this.thumbSize;\n        this.position = Math.min(position + allowedOffset, Math.max(position - allowedOffset, this._pointerPosition));\n        if (this.position === this._pointerPosition || this.noContinuousScroll)\n            return;\n        this._scrollTimer = window.setTimeout(this._onPointerDownTick, 400);\n    }\n    /** Handles thumb drag start */\n    _onThumbPointerDown(event) {\n        var _a;\n        this.toggleAttribute('dragging', true);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.setProperty('scroll-behavior', 'auto');\n        // Attaches drag listeners\n        this.$$on(this._onBodyClick);\n        isMouseEvent(event) && this.$$on({ event: 'mousemove', target: window }, this._onPointerMove);\n        isTouchEvent(event) && this.$$on({ event: 'touchmove', target: window }, this._onPointerMove);\n    }\n    /** Sets position on drag */\n    _onPointerDrag(event) {\n        const point = getTouchPoint(event);\n        const mousePosition = this.horizontal ? point.x : point.y;\n        const positionChange = mousePosition - this._initialMousePosition;\n        const scrollableAreaHeight = this.trackOffset - this.thumbOffset;\n        const absChange = scrollableAreaHeight ? (positionChange / scrollableAreaHeight) : 0;\n        this.position = this._initialPosition + absChange;\n        this.updateMarkers();\n    }\n    /** `mousemove` document handler for thumb drag event. Active only if drag action is active */\n    _onPointerMove(event) {\n        if (!this.dragging)\n            return;\n        // Request position update\n        this._deferredDrag(event);\n        // Prevents default text selection, etc.\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    /** `mouseup` short-time document handler for drag end action */\n    _onPointerUp(event) {\n        var _a;\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        this.toggleAttribute('dragging', false);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.removeProperty('scroll-behavior');\n        // Unbinds drag listeners\n        this.$$off(this._onPointerMove);\n        this.$$off(this._onPointerUp);\n    }\n    /** Body `click` short-time handler to prevent clicks event on thumb drag. Handles capture phase */\n    _onBodyClick(event) {\n        event.stopImmediatePropagation();\n    }\n    /**\n     * Handler for refresh event\n     * @param event - instance of 'esl:refresh' event.\n     */\n    _onRefresh(event) {\n        if (!(event.target instanceof Element))\n            return;\n        if (!isRelativeNode(event.target.parentNode, this.$target))\n            return;\n        this._deferredRefresh();\n    }\n    /**\n     * Handler for scroll and resize events\n     * @param event - instance of 'resize' or 'scroll' event\n     */\n    _onScrollOrResize(event) {\n        if (event.type === 'scroll' && this.dragging)\n            return;\n        this._deferredRefresh();\n    }\n};\nESLScrollbar.is = 'esl-scrollbar';\nESLScrollbar.observedAttributes = ['target', 'horizontal'];\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"horizontal\", void 0);\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"noContinuousScroll\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLScrollbar.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-thumb' })\n], ESLScrollbar.prototype, \"thumbClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-track' })\n], ESLScrollbar.prototype, \"trackClass\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"dragging\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"inactive\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atStart\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atEnd\", void 0);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"disconnectedCallback\", null);\n__decorate([\n    listen('mousedown touchstart')\n], ESLScrollbar.prototype, \"_onPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDownTick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onThumbPointerDown\", null);\n__decorate([\n    listen({ auto: false, event: 'click', target: window, once: true, capture: true })\n], ESLScrollbar.prototype, \"_onBodyClick\", null);\n__decorate([\n    listen({\n        event: (el) => el.REFRESH_EVENT,\n        target: window\n    })\n], ESLScrollbar.prototype, \"_onRefresh\", null);\nESLScrollbar = __decorate([\n    ExportNs('Scrollbar')\n], ESLScrollbar);\nexport { ESLScrollbar };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLSelectItem_1;\nimport { ESLBaseElement } from '../../../esl-base-element/core';\nimport { attr, boolAttr } from '../../../esl-utils/decorators';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\n/**\n * ESLSelectItem component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectItem - inner component to render an option\n */\nlet ESLSelectItem = ESLSelectItem_1 = class ESLSelectItem extends ESLBaseElement {\n    connectedCallback() {\n        super.connectedCallback();\n        this.tabIndex = 0;\n        this.setAttribute('role', 'checkbox');\n        this.setAttribute('aria-selected', String(this.selected));\n    }\n    attributeChangedCallback(attrName) {\n        if (attrName === 'selected') {\n            this.setAttribute('aria-selected', String(this.selected));\n        }\n        if (attrName === 'disabled') {\n            this.setAttribute('aria-disabled', String(this.disabled));\n        }\n    }\n    update(option) {\n        if (option)\n            this.original = option;\n        this.value = this.original.value;\n        this.disabled = this.original.disabled;\n        this.selected = this.original.selected;\n        this.textContent = this.original.text;\n    }\n    /** Helper to create an option item */\n    static build(option) {\n        const item = document.createElement(ESLSelectItem_1.is);\n        item.update(option);\n        return item;\n    }\n};\nESLSelectItem.is = 'esl-select-item';\nESLSelectItem.observedAttributes = ['selected', 'disabled'];\n__decorate([\n    attr()\n], ESLSelectItem.prototype, \"value\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectItem.prototype, \"selected\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectItem.prototype, \"disabled\", void 0);\nESLSelectItem = ESLSelectItem_1 = __decorate([\n    ExportNs('SelectItem')\n], ESLSelectItem);\nexport { ESLSelectItem };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { bind, attr, boolAttr, listen } from '../../../esl-utils/decorators';\nimport { ARROW_DOWN, ARROW_UP, ENTER, SPACE } from '../../../esl-utils/dom/keys';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { ESLScrollbar } from '../../../esl-scrollbar/core';\nimport { ESLSelectItem } from './esl-select-item';\nimport { ESLSelectWrapper } from './esl-select-wrapper';\n/**\n * ESLSelectList component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectList is a component to show selectable list of items. Decorates native HTMLSelectElement\n */\nlet ESLSelectList = class ESLSelectList extends ESLSelectWrapper {\n    static register() {\n        ESLSelectItem.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this.$list = document.createElement('div');\n        this.$list.setAttribute('role', 'list');\n        this.$list.classList.add('esl-scrollable-content');\n        this.$list.classList.add('esl-select-list-container');\n        this.$scroll = document.createElement(ESLScrollbar.is);\n        this.$scroll.target = '::prev';\n        this.$selectAll = document.createElement(ESLSelectItem.is);\n        this.$selectAll.classList.add('esl-select-all-item');\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        if (attrName === 'select-all-label') {\n            this.$selectAll.textContent = newVal;\n        }\n        if (attrName === 'disabled') {\n            this._updateDisabled();\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$selectAll);\n        this.appendChild(this.$list);\n        this.appendChild(this.$scroll);\n        this.bindSelect();\n        this._updateDisabled();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.appendChild(this.$selectAll);\n        this.appendChild(this.$list);\n        this.appendChild(this.$scroll);\n    }\n    bindSelect() {\n        const target = this.querySelector('[esl-select-target]');\n        if (!target || !(target instanceof HTMLSelectElement))\n            return;\n        this.$select = target;\n    }\n    _renderItems() {\n        if (!this.$select)\n            return;\n        this.$list.innerHTML = '';\n        this.$items = this.options.map(ESLSelectItem.build);\n        if (this.pinSelected) {\n            this._renderGroup(this.$items.filter((option) => option.selected));\n            this._renderGroup(this.$items.filter((option) => !option.selected));\n        }\n        else {\n            this._renderGroup(this.$items);\n        }\n        this.toggleAttribute('multiple', this.multiple);\n    }\n    _renderGroup(items) {\n        items.forEach((item) => this.$list.appendChild(item));\n        const [last] = items.slice(-1);\n        last && last.classList.add('last-in-group');\n    }\n    _updateSelectAll() {\n        if (!this.multiple) {\n            this.$selectAll.removeAttribute('tabindex');\n            return;\n        }\n        this.$selectAll.tabIndex = 0;\n        this.$selectAll.selected = this.isAllSelected();\n        this.$selectAll.textContent = this.selectAllLabel;\n    }\n    _updateDisabled() {\n        this.setAttribute('aria-disabled', String(this.disabled));\n        if (!this.$select)\n            return;\n        this.$select.disabled = this.disabled;\n    }\n    _onTargetChange(newTarget, oldTarget) {\n        super._onTargetChange(newTarget, oldTarget);\n        this._updateSelectAll();\n        this._renderItems();\n    }\n    _onChange() {\n        this._updateSelectAll();\n        this.$items.forEach((item) => item.update());\n    }\n    _onListChange() {\n        this._renderItems();\n    }\n    _onClick(e) {\n        if (this.disabled)\n            return;\n        const target = e.target;\n        if (!target || !(target instanceof ESLSelectItem))\n            return;\n        if (target.classList.contains('esl-select-all-item')) {\n            this.setAllSelected(!target.selected);\n        }\n        else {\n            this.setSelected(target.value, !target.selected);\n        }\n    }\n    _onKeydown(e) {\n        if ([ENTER, SPACE].includes(e.key)) {\n            this._onClick(e);\n            e.preventDefault();\n        }\n        if ([ARROW_UP, ARROW_DOWN].includes(e.key)) {\n            const index = this.$items.indexOf(document.activeElement);\n            const count = this.$items.length;\n            const increment = e.key === ARROW_UP ? -1 : 1;\n            if (index === -1)\n                return;\n            this.$items[(index + increment + count) % count].focus();\n            e.preventDefault();\n        }\n    }\n};\nESLSelectList.is = 'esl-select-list';\nESLSelectList.observedAttributes = ['select-all-label', 'disabled'];\n__decorate([\n    attr({ defaultValue: 'Select All' })\n], ESLSelectList.prototype, \"selectAllLabel\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectList.prototype, \"disabled\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectList.prototype, \"pinSelected\", void 0);\n__decorate([\n    bind\n], ESLSelectList.prototype, \"_onTargetChange\", null);\n__decorate([\n    listen({ inherit: true })\n], ESLSelectList.prototype, \"_onChange\", null);\n__decorate([\n    bind\n], ESLSelectList.prototype, \"_onListChange\", null);\n__decorate([\n    listen('click')\n], ESLSelectList.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLSelectList.prototype, \"_onKeydown\", null);\nESLSelectList = __decorate([\n    ExportNs('SelectList')\n], ESLSelectList);\nexport { ESLSelectList };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLToggleable } from '../../../esl-toggleable/core/esl-toggleable';\nimport { bind, prop, listen } from '../../../esl-utils/decorators';\nimport { TAB } from '../../../esl-utils/dom/keys';\nimport { rafDecorator } from '../../../esl-utils/async/raf';\nimport { ESLSelectList } from '../../esl-select-list/core';\n/**\n * ESLSelectDropdown component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom component to render {@link ESLSelect} dropdown section\n * Uses {@link ESLSelectList} to render the content\n */\nexport class ESLSelectDropdown extends ESLToggleable {\n    static register() {\n        ESLSelectList.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this._deferredUpdatePosition = rafDecorator(() => this.updatePosition());\n        this.closeOnEsc = true;\n        this.closeOnOutsideAction = true;\n        this.$list = document.createElement(ESLSelectList.is);\n    }\n    setInitialState() { }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$list);\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeChild(this.$list);\n    }\n    onShow(params) {\n        document.body.appendChild(this);\n        this._disposeTimeout && window.clearTimeout(this._disposeTimeout);\n        this.$$cls(this.$owner.dropdownClass, true);\n        this.$list.pinSelected = this.$owner.pinSelected;\n        this.$list.selectAllLabel = this.$owner.selectAllLabel;\n        this.$list.$select = this.$owner.$select;\n        super.onShow(params);\n        const focusable = this.querySelector('[tabindex]');\n        focusable === null || focusable === void 0 ? void 0 : focusable.focus({ preventScroll: true });\n        this.updatePosition();\n    }\n    onHide(params) {\n        const select = this.activator;\n        super.onHide(params);\n        this._disposeTimeout = window.setTimeout(() => {\n            if (this.parentNode !== document.body)\n                return;\n            document.body.removeChild(this);\n        }, 1000);\n        select && setTimeout(() => select.focus({ preventScroll: true }), 0);\n    }\n    _onKeyboardEvent(e) {\n        super._onKeyboardEvent(e);\n        if (e.key === TAB)\n            this._onTabKey(e);\n    }\n    _onTabKey(e) {\n        const els = this.querySelectorAll('[tabindex]');\n        const first = els[0];\n        const last = els[els.length - 1];\n        if (first && e.target === last && !e.shiftKey)\n            first.focus();\n        if (last && e.target === first && e.shiftKey)\n            last.focus();\n    }\n    _onResize() {\n        if (!this.activator)\n            return;\n        this._deferredUpdatePosition();\n    }\n    updatePosition() {\n        if (!this.activator)\n            return;\n        const windowY = window.scrollY || window.pageYOffset;\n        const rect = this.activator.getBoundingClientRect();\n        this.style.top = `${windowY + rect.top + rect.height}px`;\n        this.style.left = `${rect.left}px`;\n        this.style.width = `${rect.width}px`;\n    }\n}\nESLSelectDropdown.is = 'esl-select-dropdown';\n__decorate([\n    prop()\n], ESLSelectDropdown.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    prop()\n], ESLSelectDropdown.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    listen('keydown')\n], ESLSelectDropdown.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    listen({ event: 'resize', target: window })\n], ESLSelectDropdown.prototype, \"_onResize\", null);\n__decorate([\n    bind\n], ESLSelectDropdown.prototype, \"updatePosition\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { attr, boolAttr, listen } from '../../../esl-utils/decorators';\nimport { CSSClassUtils } from '../../../esl-utils/dom/class';\nimport { ENTER, SPACE } from '../../../esl-utils/dom/keys';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { ESLEventUtils } from '../../../esl-utils/dom/events';\nimport { ESLSelectWrapper } from '../../esl-select-list/core/esl-select-wrapper';\nimport { ESLSelectRenderer } from './esl-select-renderer';\nimport { ESLSelectDropdown } from './esl-select-dropdown';\n/**\n * ESLSelect component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelect is a component on top of native select that brings more customization features.\n * Uses \"select with dropdown\" view. Supports both single and multiple selection.\n */\nlet ESLSelect = class ESLSelect extends ESLSelectWrapper {\n    static register() {\n        ESLSelectDropdown.register();\n        ESLSelectRenderer.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this.$renderer = document.createElement(ESLSelectRenderer.is);\n        this.$dropdown = document.createElement(ESLSelectDropdown.is);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (attrName === 'disabled')\n            this._updateDisabled();\n        if (attrName === 'dropdown-class') {\n            this.$dropdown.$$cls(oldVal, false);\n            this.$dropdown.$$cls(newVal, true);\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.$select = this.querySelector('[esl-select-target]');\n        if (!this.$select)\n            return;\n        this._prepare();\n        this._updateDisabled();\n        this._updateMarkers();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._dispose();\n    }\n    /** Catches the focus */\n    focus(options) {\n        this.$select.focus(options);\n    }\n    /** Updates select component */\n    update(valueChanged = true) {\n        this._updateMarkers();\n        if (!valueChanged)\n            return;\n        // TODO: silent updates\n        ESLEventUtils.dispatch(this, 'esl:change:value', { detail: { event: null } });\n    }\n    _prepare() {\n        this.$renderer.className = this.$select.className;\n        this.$renderer.emptyText = this.placeholder;\n        this.$renderer.moreLabelFormat = this.moreLabelFormat;\n        this.$dropdown.$owner = this;\n        this.appendChild(this.$renderer);\n    }\n    _dispose() {\n        this.$select.className = this.$renderer.className;\n        this.removeChild(this.$renderer);\n    }\n    _updateMarkers() {\n        const hasValue = this.hasSelected();\n        this.toggleAttribute('has-value', hasValue);\n        CSSClassUtils.toggle(this, this.hasValueClass, hasValue);\n        const focusEl = document.activeElement;\n        const hasFocus = this.open || (focusEl && this.contains(focusEl));\n        CSSClassUtils.toggle(this, this.hasFocusClass, !!hasFocus);\n    }\n    _updateDisabled() {\n        this.setAttribute('aria-disabled', String(this.disabled));\n        if (!this.$select)\n            return;\n        this.$select.disabled = this.disabled;\n        if (this.disabled && this.open)\n            this.$dropdown.hide();\n    }\n    _onChange(event) {\n        this._updateMarkers();\n        ESLEventUtils.dispatch(this, 'esl:change:value', { detail: { event } });\n    }\n    _onFocusOut() {\n        this._updateMarkers();\n    }\n    _onClick() {\n        if (this.disabled)\n            return;\n        this.$dropdown.toggle(!this.$dropdown.open, {\n            activator: this,\n            initiator: 'select'\n        });\n    }\n    _onKeydown(e) {\n        if ([ENTER, SPACE].includes(e.key)) {\n            this.click();\n            e.preventDefault();\n        }\n    }\n    _onPopupStateChange(e) {\n        this.open = this.$dropdown.open;\n        this._updateMarkers();\n    }\n};\nESLSelect.is = 'esl-select';\nESLSelect.observedAttributes = ['disabled', 'dropdown-class'];\n__decorate([\n    attr()\n], ESLSelect.prototype, \"placeholder\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"hasValueClass\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"hasFocusClass\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"dropdownClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'Select All' })\n], ESLSelect.prototype, \"selectAllLabel\", void 0);\n__decorate([\n    attr({ defaultValue: '+ {rest} more...' })\n], ESLSelect.prototype, \"moreLabelFormat\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"open\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"disabled\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"pinSelected\", void 0);\n__decorate([\n    listen({ inherit: true })\n], ESLSelect.prototype, \"_onChange\", null);\n__decorate([\n    listen('focusout')\n], ESLSelect.prototype, \"_onFocusOut\", null);\n__decorate([\n    listen('click')\n], ESLSelect.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLSelect.prototype, \"_onKeydown\", null);\n__decorate([\n    listen({\n        event: 'esl:show esl:hide',\n        target: (el) => el.$dropdown\n    })\n], ESLSelect.prototype, \"_onPopupStateChange\", null);\nESLSelect = __decorate([\n    ExportNs('Select')\n], ESLSelect);\nexport { ESLSelect };\n","import { isObject } from './types';\nexport function deepMerge(...objects) {\n    return objects.reduce((res, obj) => {\n        if (typeof obj === 'undefined')\n            return res;\n        if (typeof res === 'undefined')\n            res = Array.isArray(obj) ? [] : {};\n        if (!isObject(obj) || !isObject(res))\n            return obj;\n        Object.keys(obj).forEach((key) => {\n            res[key] = isObject(obj[key]) ? deepMerge(res[key], obj[key]) : obj[key];\n        });\n        return res;\n    }, undefined);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenDPR_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\n/**\n * DPR preprocessor. Used to replace DPR shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenDPR = ESLScreenDPR_1 = class ESLScreenDPR {\n    static toDPI(dpr) {\n        return (96 * dpr).toFixed(1);\n    }\n    static process(match) {\n        if (!ESLScreenDPR_1.VALUE_REGEXP.test(match))\n            return;\n        const dpr = parseFloat(match);\n        if (dpr < 0 || isNaN(dpr))\n            return;\n        if (ESLScreenDPR_1.ignoreBotsDpr && DeviceDetector.isBot && dpr > 1)\n            return 'not all';\n        if (DeviceDetector.isSafari)\n            return `(-webkit-min-device-pixel-ratio: ${dpr})`;\n        return `(min-resolution: ${ESLScreenDPR_1.toDPI(dpr)}dpi)`;\n    }\n};\nESLScreenDPR.VALUE_REGEXP = /(\\d(\\.\\d)?)x/;\n/** Option to exclude dpr greater then 2 for bots */\nESLScreenDPR.ignoreBotsDpr = false;\nESLScreenDPR = ESLScreenDPR_1 = __decorate([\n    ExportNs('ScreenDPR')\n], ESLScreenDPR);\nexport { ESLScreenDPR };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenBreakpoints_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst registry = new Map();\n/**\n * ESL Screen Breakpoints registry\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Screen Breakpoint registry is used to provide custom breakpoints for {@link ESLMediaQuery}\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenBreakpoints = ESLScreenBreakpoints_1 = class ESLScreenBreakpoints {\n    /**\n     * Add or replace breakpoint shortcut that can be used inside ESLMediaQuery\n     * @param name - name of shortcut\n     * @param minWidth - min width for breakpoint\n     * @param maxWidth - max width for breakpoint\n     */\n    static add(name, minWidth, maxWidth) {\n        name = name.toLowerCase();\n        if (ESLScreenBreakpoints_1.BP_NAME_REGEXP.test(name)) {\n            const current = registry.get(name);\n            registry.set(name, new ESLScreenBreakpoint(name, minWidth, maxWidth));\n            return current;\n        }\n        throw new Error('The shortcut should consist only of Latin characters and be at least one character long.');\n    }\n    /** Removes screen breakpoint */\n    static remove(name) {\n        return registry.delete(name.toLowerCase());\n    }\n    /** @returns known breakpoint shortcut instance */\n    static get(name) {\n        return registry.get((name || '').toLowerCase());\n    }\n    /** All available breakpoints names */\n    static get names() {\n        const keys = [];\n        registry.forEach((value, key) => keys.push(key));\n        return keys;\n    }\n    /** @returns breakpoints shortcut replacement */\n    static process(term) {\n        const [, sign, bp] = term.match(ESLScreenBreakpoints_1.BP_REGEXP) || [];\n        const shortcut = ESLScreenBreakpoints_1.get(bp);\n        if (!shortcut)\n            return;\n        if (sign === '+')\n            return shortcut.mediaQueryGE;\n        if (sign === '-')\n            return shortcut.mediaQueryLE;\n        return shortcut.mediaQuery;\n    }\n};\nESLScreenBreakpoints.BP_REGEXP = /^([+-]?)([a-z]+)/i;\nESLScreenBreakpoints.BP_NAME_REGEXP = /^[a-z]+/i;\nESLScreenBreakpoints = ESLScreenBreakpoints_1 = __decorate([\n    ExportNs('ScreenBreakpoints')\n], ESLScreenBreakpoints);\nexport { ESLScreenBreakpoints };\n/** ESL Screen Breakpoint description */\nexport class ESLScreenBreakpoint {\n    constructor(name, min, max) {\n        this.name = name;\n        this.min = min;\n        this.max = max;\n    }\n    get mediaQuery() {\n        return `(min-width: ${this.min}px) and (max-width: ${this.max}px)`;\n    }\n    get mediaQueryGE() {\n        return `(min-width: ${this.min}px)`;\n    }\n    get mediaQueryLE() {\n        return `(max-width: ${this.max}px)`;\n    }\n    toString() {\n        return `[${this.name}]: ${this.min} to ${this.max}`;\n    }\n}\n// Defaults\nESLScreenBreakpoints.add('xs', 1, 767);\nESLScreenBreakpoints.add('sm', 768, 991);\nESLScreenBreakpoints.add('md', 992, 1199);\nESLScreenBreakpoints.add('lg', 1200, 1599);\nESLScreenBreakpoints.add('xl', 1600, 999999);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst shortcuts = new Map();\n/**\n * Static shortcuts preprocessor. Used to store device related shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLEnvShortcuts = class ESLEnvShortcuts {\n    /**\n     * Add mapping\n     * @param shortcut - term to find in query\n     * @param value - media query string or boolean result (that represents `all` or `not all` conditions)\n     */\n    static add(shortcut, value) {\n        if (!['boolean', 'string'].includes(typeof value))\n            value = false;\n        shortcuts.set(shortcut.toLowerCase(), value);\n    }\n    /** Remove mapping for passed shortcut term */\n    static remove(shortcut) {\n        return shortcuts.delete(shortcut.toLowerCase());\n    }\n    /** Replaces shortcut to registered result */\n    static process(match) {\n        if (shortcuts.has(match))\n            return shortcuts.get(match);\n    }\n};\n// For debug purposes\nESLEnvShortcuts._shortcuts = shortcuts;\nESLEnvShortcuts = __decorate([\n    ExportNs('EnvShortcuts')\n], ESLEnvShortcuts);\nexport { ESLEnvShortcuts };\n// Touch check\nESLEnvShortcuts.add('touch', DeviceDetector.isTouchDevice);\n// Basic device type shortcuts\nESLEnvShortcuts.add('bot', DeviceDetector.isBot);\nESLEnvShortcuts.add('mobile', DeviceDetector.isMobile);\nESLEnvShortcuts.add('desktop', !DeviceDetector.isMobile);\nESLEnvShortcuts.add('android', DeviceDetector.isAndroid);\nESLEnvShortcuts.add('ios', DeviceDetector.isMobileIOS);\n// Basic browser shortcuts\nESLEnvShortcuts.add('ie', DeviceDetector.isIE);\nESLEnvShortcuts.add('edge', DeviceDetector.isEdgeHTML);\nESLEnvShortcuts.add('gecko', DeviceDetector.isGecko);\nESLEnvShortcuts.add('webkit', DeviceDetector.isWebkit);\nESLEnvShortcuts.add('blink', DeviceDetector.isBlink);\nESLEnvShortcuts.add('safari', DeviceDetector.isSafari);\nESLEnvShortcuts.add('safari-ios', DeviceDetector.isMobileSafari);\n","/**\n * Const media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Ignores listeners always return the same result.\n * Have only two instances: {@link ALL} and {@link NOT_ALL}\n */\nclass MediaQueryConstCondition {\n    constructor(_matches) {\n        this._matches = _matches;\n    }\n    get matches() {\n        return this._matches;\n    }\n    addListener() { }\n    addEventListener() { }\n    removeListener() { }\n    removeEventListener() { }\n    dispatchEvent() {\n        return false;\n    }\n    optimize() {\n        return this;\n    }\n    toString() {\n        return this._matches ? 'all' : 'not all';\n    }\n    /** Compares const media condition with the passed query instance or string */\n    eq(val) {\n        return String(val).trim() === this.toString();\n    }\n}\nexport const ALL = new MediaQueryConstCondition(true);\nexport const NOT_ALL = new MediaQueryConstCondition(false);\n","/** Custom event dispatched by {@link ESLMediaQuery} instances */\nexport class ESLMediaChangeEvent extends Event {\n    constructor(matches) {\n        super('change');\n        this.matches = matches;\n    }\n    /** Returns serialized value of the current {@link ESLMediaQuery} */\n    get media() {\n        return String(this.target);\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ALL, NOT_ALL } from './media-query-const';\nimport { ESLMediaChangeEvent } from './media-query-base';\n/**\n * Simple media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Wraps matchMedia instance\n */\nexport class MediaQueryCondition extends SyntheticEventTarget {\n    constructor(query, inverted = false) {\n        super();\n        this._inverted = inverted;\n        this._mq = matchMedia(query.trim() || 'all');\n        this._onChange = this._onChange.bind(this);\n    }\n    get matches() {\n        return this._inverted ? !this._mq.matches : this._mq.matches;\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.hasEventListener(1))\n            return;\n        if (typeof this._mq.addEventListener === 'function') {\n            this._mq.addEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.addListener(this._onChange);\n        }\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        if (typeof this._mq.removeEventListener === 'function') {\n            this._mq.removeEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.removeListener(this._onChange);\n        }\n    }\n    /** Optimize query. Can simplify query to {@link MediaQueryConstCondition} */\n    optimize() {\n        if (ALL.eq(this))\n            return this._inverted ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(this))\n            return this._inverted ? ALL : NOT_ALL;\n        return this;\n    }\n    toString() {\n        const query = this._mq.media;\n        const inverted = this._inverted;\n        const complex = inverted && /\\)[\\s\\w]+\\(/.test(query);\n        return (inverted ? 'not ' : '') + (complex ? `(${query})` : query);\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        this.dispatchEvent(new ESLMediaChangeEvent(this._mq.matches));\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ESLMediaChangeEvent } from './media-query-base';\nimport { ALL, NOT_ALL } from './media-query-const';\n/**\n * Abstract multiple media conditions container\n * @author Alexey Stsefanovich (ala'n)\n *\n * Observe all child items. Dispatch changes when the whole condition result is changed\n */\nclass MediaQueryContainer extends SyntheticEventTarget {\n    constructor(items = []) {\n        super();\n        this.items = items;\n        this._matches = this.matches;\n        this._onChange = this._onChange.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.hasEventListener(1))\n            return;\n        this.items.forEach((item) => item.addEventListener('change', this._onChange));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        this.items.forEach((item) => item.removeEventListener('change', this._onChange));\n    }\n    optimize() {\n        return this;\n    }\n    get matches() {\n        return false;\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        const { matches } = this;\n        if (this._matches === matches)\n            return;\n        this.dispatchEvent(new ESLMediaChangeEvent(this._matches = matches));\n    }\n}\n/** Conjunction (AND) group of media conditions */\nexport class MediaQueryConjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.every((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => NOT_ALL.eq(item)))\n            return NOT_ALL;\n        const items = optimizedItems.filter((item) => !ALL.eq(item));\n        if (items.length === 0)\n            return ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryConjunction(items);\n    }\n    toString() {\n        return this.items.join(' and ');\n    }\n}\n/** Disjunction (OR) group of media conditions */\nexport class MediaQueryDisjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.some((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => ALL.eq(item)))\n            return ALL;\n        const items = optimizedItems.filter((item) => !NOT_ALL.eq(item));\n        if (items.length === 0)\n            return NOT_ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryDisjunction(items);\n    }\n    toString(pretty = false) {\n        return this.items.join(pretty ? ' or ' : ', ');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaQuery_1;\nimport { memoize } from '../../esl-utils/decorators';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLScreenDPR } from './common/screen-dpr';\nimport { ESLScreenBreakpoints } from './common/screen-breakpoint';\nimport { ESLEnvShortcuts } from './common/env-shortcuts';\nimport { ALL, NOT_ALL } from './conditions/media-query-const';\nimport { MediaQueryCondition } from './conditions/media-query-condition';\nimport { MediaQueryConjunction, MediaQueryDisjunction } from './conditions/media-query-containers';\n/**\n * ESL Media Query\n * @implements EventTarget\n * Provides special media condition syntax - ESLMediaQuery\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n *\n * Utility to support extended MediaQuery features\n * Supports\n * - CSS MediaQuery matching check\n * - DPR display queries (`@x1|@x2|@x3`)\n * - Registered screen default sizes (breakpoints) shortcuts (`@[-|+](XS|SM|MD|LG|XL)`)\n * - Device and browser shortcuts (`@MOBILE|@DESKTOP|@IE`)\n * - Custom static shortcuts and custom query preprocessors\n * - `not` logic operation (can have multiple not operators before any term of the query)\n * - `or` or `,` logical operator (have a lowest priority)\n * - Query matching change listeners\n * - Implements {@link EventTarget}, compatible with {@link ESLEventListener}\n *\n * Building query process:\n *\n * [Building query logical tree] - [preprocess nodes queries] - [building native MediaQueryList nodes] - [query tree optimization]\n */\nlet ESLMediaQuery = ESLMediaQuery_1 = class ESLMediaQuery {\n    /** Adds {@link IMediaQueryPreprocessor} instance for query preprocessing step */\n    static use(preprocessor) {\n        this._preprocessors.unshift(preprocessor);\n        return this;\n    }\n    /** Cached method to create {@link ESLMediaQuery} condition instance from query string */\n    static for(query) {\n        return ESLMediaQuery_1.from(query);\n    }\n    /** Creates {@link ESLMediaQuery} condition instance from query string */\n    static from(query) {\n        const conjunctions = query.split(/\\sor\\s|,/).map((term) => {\n            const conditions = term.split(/\\sand\\s/).map(ESLMediaQuery_1.parseSimpleQuery);\n            return new MediaQueryConjunction(conditions);\n        });\n        return new MediaQueryDisjunction(conjunctions).optimize();\n    }\n    /** Preprocess simple query term by applying replacers and shortcuts rules */\n    static preprocess(term) {\n        if (!this.SHORTCUT_PATTERN.test(term))\n            return term;\n        const shortcut = term.trim().substring(1).toLowerCase();\n        for (const replacer of this._preprocessors) {\n            const result = replacer.process(shortcut);\n            if (typeof result === 'string')\n                return result;\n            if (typeof result === 'boolean')\n                return result ? 'all' : 'not all';\n        }\n        return term;\n    }\n    /** Creates simple {@link ESLMediaQuery} condition */\n    static parseSimpleQuery(term) {\n        const query = term.replace(/^\\s*not\\s+/, '');\n        const queryInverted = query !== term;\n        const processedQuery = ESLMediaQuery_1.preprocess(query);\n        const sanitizedQuery = processedQuery.replace(/^\\s*not\\s+/, '');\n        const resultInverted = processedQuery !== sanitizedQuery;\n        const invert = queryInverted !== resultInverted;\n        if (ALL.eq(sanitizedQuery))\n            return invert ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(sanitizedQuery))\n            return invert ? ALL : NOT_ALL;\n        return new MediaQueryCondition(sanitizedQuery, invert);\n    }\n};\n/** Always true condition */\nESLMediaQuery.ALL = ALL;\n/** Always false condition */\nESLMediaQuery.NOT_ALL = NOT_ALL;\nESLMediaQuery.SHORTCUT_PATTERN = /@([a-z0-9.+-]+)/i;\nESLMediaQuery._preprocessors = [];\n__decorate([\n    memoize()\n], ESLMediaQuery, \"for\", null);\nESLMediaQuery = ESLMediaQuery_1 = __decorate([\n    ExportNs('MediaQuery')\n], ESLMediaQuery);\nexport { ESLMediaQuery };\n// Register otb preprocessors\nESLMediaQuery.use(ESLScreenDPR);\nESLMediaQuery.use(ESLScreenBreakpoints);\nESLMediaQuery.use(ESLEnvShortcuts);\n","import { ESLMediaQuery } from './esl-media-query';\n/**\n * ESL Media Rule\n * @author Yuliya Adamskaya\n *\n * Helper class to wrap {@link ESLMediaQuery} with the payload value\n * @see ESLMediaQuery\n * @see ESLMediaRuleList\n */\nexport class ESLMediaRule {\n    constructor(payload, query = '') {\n        this.query = ESLMediaQuery.for(query);\n        this.payload = payload;\n    }\n    /** @returns if the inner {@link ESLMediaQuery} is matching current device configuration */\n    get matches() {\n        return this.query.matches;\n    }\n    addEventListener(type, callback = type) {\n        this.query.addEventListener(callback);\n    }\n    removeEventListener(type, callback = type) {\n        this.query.removeEventListener(callback);\n    }\n    toString() {\n        const val = typeof this.payload === 'object' ?\n            JSON.stringify(this.payload) :\n            String(this.payload);\n        return `${this.query} => ${val}`;\n    }\n    /**\n     * Creates the {@link ESLMediaRule} instance from payload string, query and valueParser.\n     * If the payload parse result is undefined then rule will be undefined.\n     */\n    static create(payload, query, parser) {\n        const payloadValue = parser(payload.trim());\n        if (typeof payloadValue === 'undefined')\n            return undefined;\n        return new ESLMediaRule(payloadValue, query.trim());\n    }\n    /** Parses the rule string to the {@link ESLMediaRule} instance */\n    static parse(lex, parser) {\n        const parts = lex.split('=>');\n        const query = parts.length === 2 ? parts[0] : '';\n        const payload = parts.length === 2 ? parts[1] : parts[0];\n        return ESLMediaRule.create(payload, query, parser);\n    }\n    /** Shortcut to create always active {@link ESLMediaRule} with passed value */\n    static all(payload) {\n        return new ESLMediaRule(payload, 'all');\n    }\n    /** Shortcut to create always inactive {@link ESLMediaRule} */\n    static empty() {\n        return new ESLMediaRule(undefined, 'all');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaRuleList_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { evaluate } from '../../esl-utils/misc/format';\nimport { deepMerge, isEqual } from '../../esl-utils/misc/object';\nimport { SyntheticEventTarget } from '../../esl-utils/dom/events';\nimport { ESLMediaRule } from './esl-media-rule';\n/** Custom event dispatched by {@link ESLMediaRuleList} instances */\nexport class ESLMediaRuleListEvent extends Event {\n    constructor(current, previous) {\n        super('change');\n        Object.assign(this, { current, previous });\n    }\n}\n/**\n * ESLMediaRuleList - {@link ESLMediaRule} observable collection\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Represents observable object that wraps environment to value mapping\n */\nlet ESLMediaRuleList = ESLMediaRuleList_1 = class ESLMediaRuleList extends SyntheticEventTarget {\n    static parse(query, ...common) {\n        const parser = typeof common[common.length - 1] === 'function' ? common.pop() : String;\n        const value = common.pop();\n        return typeof value === 'string' ?\n            ESLMediaRuleList_1.parseTuple(query, value, parser) :\n            ESLMediaRuleList_1.parseQuery(query, parser);\n    }\n    static parseQuery(query, parser = String) {\n        const rules = query.split('|')\n            .map((lex) => ESLMediaRule.parse(lex, parser))\n            .filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(rules);\n    }\n    static parseTuple(mask, values, parser = String) {\n        const queries = mask.split('|');\n        const valueList = values.split('|');\n        while (valueList.length < queries.length && valueList.length !== 0)\n            valueList.push(valueList[valueList.length - 1]);\n        if (valueList.length !== queries.length)\n            throw Error('Value doesn\\'t correspond to mask');\n        const rules = queries.map((query, i) => ESLMediaRule.create(valueList[i], query, parser));\n        const validRules = rules.filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(validRules);\n    }\n    constructor(rules) {\n        super();\n        this._rules = rules;\n        this._onMatchChanged = this._onMatchChanged.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.hasEventListener(1))\n            return;\n        this._value = this.computedValue;\n        this.rules.forEach((rule) => rule.addEventListener(this._onMatchChanged));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        delete this._value;\n        this.rules.forEach((rule) => rule.removeEventListener(this._onMatchChanged));\n    }\n    /** Array of {@link ESLMediaRule}s that forms the current {@link ESLMediaRuleList} */\n    get rules() {\n        return this._rules;\n    }\n    /** All active {@link ESLMediaRule}s */\n    get active() {\n        return this.rules.filter((rule) => rule.matches);\n    }\n    /** Value of the last of active rules */\n    get activeValue() {\n        var _a;\n        return (_a = this.active.pop()) === null || _a === void 0 ? void 0 : _a.payload;\n    }\n    /** All active rule values */\n    get activeValues() {\n        return this.active.map((rule) => rule.payload);\n    }\n    /**\n     * Current value of {@link ESLMediaRuleList} object\n     * Uses cache if current object is under observation\n     */\n    get value() {\n        if (!this.hasEventListener())\n            return this.computedValue;\n        return Object.hasOwnProperty.call(this, '_value') ? this._value : this.computedValue;\n    }\n    /** Always computed value of the current {@link ESLMediaRuleList} object */\n    get computedValue() {\n        return deepMerge(undefined, ...this.activeValues);\n    }\n    /** Handles inner rules state change */\n    _onMatchChanged() {\n        const curValue = this.value;\n        const newValue = this.computedValue;\n        if (isEqual(curValue, newValue))\n            return;\n        this._value = newValue;\n        this.dispatchEvent(new ESLMediaRuleListEvent(newValue, curValue));\n    }\n    /** @returns serialized {@link ESLMediaRuleList} object representation*/\n    toString() {\n        return this.rules.join('|');\n    }\n};\n/** String value parser (default) */\nESLMediaRuleList.STRING_PARSER = String;\n/** Object value parser. Uses {@link evaluate} to parse value */\nESLMediaRuleList.OBJECT_PARSER = (val) => evaluate(val);\nESLMediaRuleList = ESLMediaRuleList_1 = __decorate([\n    ExportNs('MediaRuleList')\n], ESLMediaRuleList);\nexport { ESLMediaRuleList };\n","import { DeviceDetector } from '../../esl-utils/environment/device-detector';\nlet iObserver;\n/** ESL Image lazy loading IntersectionObserver instance */\nexport function getIObserver() {\n    if (!iObserver) {\n        iObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(handleViewport);\n        }, {\n            threshold: [0.01],\n            rootMargin: DeviceDetector.isMobile ? '250px' : '500px' // rootMargin value for IntersectionObserver\n        });\n    }\n    return iObserver;\n}\nfunction handleViewport(entry) {\n    const image = entry.target;\n    // Check that entry is going to appear in the viewport area\n    if (entry.isIntersecting || entry.intersectionRatio > 0) {\n        image.triggerLoad();\n    }\n}\n","/** checks if the attribute is dangerous */\nconst isDangerousAttribute = (name, value) => {\n    const val = value.replace(/\\s+/g, '').toLowerCase();\n    if (['src', 'data', 'href', 'xlink:href'].includes(name)\n        && (val.includes('javascript:') || val.includes('data:text/html')))\n        return true;\n    return name.indexOf('on') === 0;\n};\n/** loops through each attribute, if it's dangerous, remove it */\nconst removeDangerousAttributes = (el) => {\n    Array.from(el.attributes).forEach(({ name, value }) => {\n        if (isDangerousAttribute(name, value)) {\n            el.removeAttribute(name);\n        }\n    });\n};\n/** removes malicious attributes from element and its children */\nconst sanitizeElAttributes = (body) => {\n    Array.from(body.children).forEach((el) => {\n        removeDangerousAttributes(el);\n        sanitizeElAttributes(el);\n    });\n};\n/** removes script elements inside element */\nconst removeScripts = (body) => {\n    const scripts = body.querySelectorAll('script');\n    Array.from(scripts).forEach((script) => script.remove());\n};\nconst filterElements = (body, allowedTopLevelTags) => {\n    if (!allowedTopLevelTags.length)\n        return;\n    Array.from(body.childNodes).forEach((el) => {\n        if (!allowedTopLevelTags.includes(el.tagName))\n            body.removeChild(el);\n    });\n};\n/**\n * Sanitizes html string from malicious attributes, values, and scripts\n * Can also filter elements at the top nesting level by tag names.\n * @param html - html string to sanitize\n * @param allowedTopLevelTags - array of allowed tag names\n */\nexport function sanitize(html, allowedTopLevelTags = []) {\n    // converts the string to an HTML document\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const body = doc.body || document.createElement('body');\n    // sanitizes html\n    removeScripts(body);\n    sanitizeElAttributes(body);\n    // filter allowed tags\n    filterElements(body, allowedTopLevelTags);\n    return body.innerHTML;\n}\n","import { sanitize } from '../../esl-utils/dom/sanitize';\nexport const EMPTY_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\nexport const isEmptyImage = (src) => src === EMPTY_IMAGE;\nexport const STRATEGIES = {\n    'cover': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n        },\n        clear(img) {\n            img.style.backgroundImage = '';\n        }\n    },\n    'save-ratio': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n            if (shadowImg.width === 0)\n                return;\n            img.style.paddingTop = isEmpty ? '' : `${(shadowImg.height * 100 / shadowImg.width)}%`;\n        },\n        clear(img) {\n            img.style.paddingTop = '';\n            img.style.backgroundImage = '';\n        }\n    },\n    'fit': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.removeAttribute('width');\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'origin': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.width = shadowImg.width / window.devicePixelRatio;\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'inner-svg': {\n        apply(img, shadowImg) {\n            const request = new XMLHttpRequest();\n            request.open('GET', shadowImg.src, true);\n            request.onreadystatechange = () => {\n                if (request.readyState !== 4 || request.status !== 200)\n                    return;\n                img.innerHTML = sanitize(request.responseText, ['svg']);\n            };\n            request.send();\n        },\n        clear(img) {\n            img.innerHTML = '';\n        }\n    }\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLImage_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { bind, prop, attr, boolAttr } from '../../esl-utils/decorators';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { ESLMediaRuleList } from '../../esl-media-query/core';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core/esl-traversing-query';\nimport { getIObserver } from './esl-image-iobserver';\nimport { EMPTY_IMAGE, STRATEGIES, isEmptyImage } from './esl-image-strategies';\nconst isLoadState = (state) => ['error', 'loaded', 'ready'].includes(state);\n/**\n * ESLImage - custom element, that provides flexible ways to include images on web pages.\n * Was originally developed as an alternative to `<picture>` element, but with more features inside.\n *\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\nlet ESLImage = ESLImage_1 = class ESLImage extends ESLBaseElement {\n    connectedCallback() {\n        super.connectedCallback();\n        this.alt =\n            this.alt || this.getAttribute('aria-label') || this.getAttribute('data-alt') || '';\n        this.updateA11y();\n        this.srcRules.addEventListener(this._onMediaMatchChange);\n        if (this.lazyObservable) {\n            this.removeAttribute('lazy-triggered');\n            getIObserver().observe(this);\n            this._detachLazyTrigger = function () {\n                getIObserver().unobserve(this);\n                this._detachLazyTrigger = null;\n            };\n        }\n        this.refresh();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._detachLazyTrigger && this._detachLazyTrigger();\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        switch (attrName) {\n            case 'aria-label':\n                this.alt = newVal || '';\n                break;\n            case 'alt':\n            case 'role':\n                this.updateA11y();\n                break;\n            case 'data-src':\n                this.srcRules = ESLMediaRuleList.parse(newVal);\n                this.refresh();\n                break;\n            case 'data-src-base':\n                this.refresh();\n                break;\n            case 'mode':\n                this.changeMode(oldVal, newVal);\n                break;\n            case 'lazy-triggered':\n                this.lazyTriggered && this.update();\n                break;\n        }\n    }\n    get srcRules() {\n        if (!this._srcRules) {\n            this.srcRules = ESLMediaRuleList.parse(this.src);\n        }\n        return this._srcRules;\n    }\n    set srcRules(rules) {\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n        this._srcRules = rules;\n        this._srcRules.addEventListener(this._onMediaMatchChange);\n    }\n    get currentSrc() {\n        return this._currentSrc;\n    }\n    get empty() {\n        return !this._currentSrc || isEmptyImage(this._currentSrc);\n    }\n    get canUpdate() {\n        return this.lazyTriggered || this.lazy === 'none';\n    }\n    get lazyObservable() {\n        return this.lazy !== 'none' && this.lazy !== 'manual';\n    }\n    get originalWidth() {\n        return this._shadowImageElement ? this._shadowImageElement.width : 0;\n    }\n    get originalHeight() {\n        return this._shadowImageElement ? this._shadowImageElement.height : 0;\n    }\n    triggerLoad() {\n        this.setAttribute('lazy-triggered', '');\n    }\n    changeMode(oldVal, newVal) {\n        oldVal = oldVal || 'save-ratio';\n        newVal = newVal || 'save-ratio';\n        if (oldVal === newVal)\n            return;\n        if (!STRATEGIES[newVal]) {\n            this.mode = oldVal;\n            throw new Error('ESL Image: Unsupported mode: ' + newVal);\n        }\n        this.clearImage();\n        if (this.loaded)\n            this.syncImage();\n    }\n    update(force = false) {\n        if (!this.canUpdate)\n            return;\n        const src = this.getPath(this.srcRules.activeValue);\n        if (this._currentSrc !== src || !this.ready || force) {\n            this._currentSrc = src;\n            this._shadowImg.src = src;\n            if (this.refreshOnUpdate || !this.ready) {\n                this.syncImage();\n            }\n            if (this._shadowImg.complete) {\n                this._shadowImgError ? this._onError() : this._onLoad();\n            }\n        }\n        this._detachLazyTrigger && this._detachLazyTrigger();\n    }\n    updateA11y() {\n        const role = this.getAttribute('role') || 'img';\n        this.setAttribute('role', role);\n        this.innerImage && (this.innerImage.alt = this.alt);\n        if (role === 'img')\n            this.setAttribute('aria-label', this.alt);\n    }\n    getPath(src) {\n        if (!src || src === '0' || src === 'none') {\n            return ESLImage_1.EMPTY_IMAGE;\n        }\n        return this.srcBase + src;\n    }\n    refresh() {\n        this.removeAttribute('loaded');\n        this.removeAttribute('ready');\n        this.updateContainerClasses();\n        this.clearImage();\n        this.update(true);\n    }\n    syncImage() {\n        const strategy = STRATEGIES[this.mode];\n        this._strategy = strategy;\n        strategy && strategy.apply(this, this._shadowImg);\n    }\n    clearImage() {\n        this._strategy && this._strategy.clear(this);\n        this._strategy = null;\n    }\n    get innerImage() {\n        return this._innerImg;\n    }\n    attachInnerImage() {\n        if (!this._innerImg) {\n            this._innerImg = this.querySelector(`img.${this.innerImageClass}`) ||\n                this._shadowImg.cloneNode();\n            this._innerImg.className = this.innerImageClass;\n        }\n        if (!this._innerImg.parentNode) {\n            this.appendChild(this._innerImg);\n        }\n        this._innerImg.alt = this.alt;\n        return this._innerImg;\n    }\n    removeInnerImage() {\n        if (!this.innerImage)\n            return;\n        this.removeChild(this.innerImage);\n        setTimeout(() => {\n            if (this._innerImg && !this._innerImg.parentNode) {\n                this._innerImg = null;\n            }\n        });\n    }\n    get _shadowImg() {\n        if (!this._shadowImageElement) {\n            this._shadowImageElement = new Image();\n            this._shadowImageElement.onload = this._onLoad;\n            this._shadowImageElement.onerror = this._onError;\n        }\n        return this._shadowImageElement;\n    }\n    get _shadowImgError() {\n        if (!this._shadowImg.complete)\n            return false;\n        if (this._shadowImg.src.slice(-4) === '.svg')\n            return false;\n        return this._shadowImg.naturalHeight <= 0;\n    }\n    _onLoad() {\n        this.syncImage();\n        this._onReadyState(true);\n        this.updateContainerClasses();\n    }\n    _onError() {\n        this._onReadyState(false);\n        this.updateContainerClasses();\n    }\n    _onMediaMatchChange() {\n        this.update();\n    }\n    _onReadyState(successful) {\n        if (this.ready)\n            return;\n        this.toggleAttribute('loaded', successful);\n        this.toggleAttribute('error', !successful);\n        this.toggleAttribute('ready', true);\n        this.$$fire(successful ? this.LOAD_EVENT : this.ERROR_EVENT, { bubbles: false });\n        this.$$fire(this.READY_EVENT, { bubbles: false });\n    }\n    updateContainerClasses() {\n        if (this.containerClass === null)\n            return;\n        const cls = this.containerClass || this.constructor.DEFAULT_CONTAINER_CLS;\n        const state = isLoadState(this.containerClassState) && this[this.containerClassState];\n        const targetEl = ESLTraversingQuery.first(this.containerClassTarget, this);\n        targetEl && CSSClassUtils.toggle(targetEl, cls, state);\n    }\n};\nESLImage.is = 'esl-image';\nESLImage.observedAttributes = ['alt', 'role', 'mode', 'aria-label', 'data-src', 'data-src-base', 'lazy-triggered'];\n/** Default container class value */\nESLImage.DEFAULT_CONTAINER_CLS = 'img-container-loaded';\nESLImage.STRATEGIES = STRATEGIES;\nESLImage.EMPTY_IMAGE = EMPTY_IMAGE;\n__decorate([\n    prop('ready')\n], ESLImage.prototype, \"READY_EVENT\", void 0);\n__decorate([\n    prop('load')\n], ESLImage.prototype, \"LOAD_EVENT\", void 0);\n__decorate([\n    prop('error')\n], ESLImage.prototype, \"ERROR_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLImage.prototype, \"alt\", void 0);\n__decorate([\n    attr({ defaultValue: 'save-ratio' })\n], ESLImage.prototype, \"mode\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"src\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"srcBase\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLImage.prototype, \"lazy\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"lazyTriggered\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"refreshOnUpdate\", void 0);\n__decorate([\n    attr({ defaultValue: 'inner-image' })\n], ESLImage.prototype, \"innerImageClass\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLImage.prototype, \"containerClass\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLImage.prototype, \"containerClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'ready' })\n], ESLImage.prototype, \"containerClassState\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"ready\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"loaded\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"error\", void 0);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onLoad\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onError\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onMediaMatchChange\", null);\nESLImage = ESLImage_1 = __decorate([\n    ExportNs('Image')\n], ESLImage);\nexport { ESLImage };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleablePlaceholder_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nlet ESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = class ESLToggleablePlaceholder extends ESLBaseElement {\n    /** reates a placeholder for a given element of the toggleable's descendant */\n    static from($el) {\n        const $placeholder = document.createElement(this.is);\n        $placeholder.$origin = $el;\n        return $placeholder;\n    }\n    connectedCallback() {\n        this.copyAttributesFromOrigin();\n        super.connectedCallback();\n    }\n    /** Builds attribute name for copy */\n    buildAttrName(name) {\n        return name === 'id' ? 'original-id' : name;\n    }\n    /** Copies allowed attributes from origin to this element */\n    copyAttributesFromOrigin() {\n        const { $origin } = this;\n        if (!$origin)\n            return;\n        this.constructor.allowedAttrs.forEach((name) => {\n            const value = $origin.getAttribute(name);\n            if (value) {\n                this.setAttribute(this.buildAttrName(name), value);\n            }\n        });\n        // sanitize class list of placeholder from the tag name of origin's element\n        this.classList.remove($origin.constructor.is);\n    }\n};\nESLToggleablePlaceholder.is = 'esl-toggleable-placeholder';\n/** List of attributes allowed to copy from origin to this element */\nESLToggleablePlaceholder.allowedAttrs = ['id', 'class'];\nESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = __decorate([\n    ExportNs('ToggleablePlaceholder')\n], ESLToggleablePlaceholder);\nexport { ESLToggleablePlaceholder };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { attr, boolAttr, prop, listen, ready } from '../../esl-utils/decorators';\nimport { parseNumber } from '../../esl-utils/misc/format';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ENTER, SPACE, ESC } from '../../esl-utils/dom/keys';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { ESLMediaQuery } from '../../esl-media-query/core';\nimport { ESLToggleablePlaceholder } from '../../esl-toggleable/core';\nlet ESLTrigger = class ESLTrigger extends ESLBaseElement {\n    attributeChangedCallback(attrName) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target')\n            return this.updateTargetFromSelector();\n    }\n    /** Target observable Toggleable */\n    get $target() {\n        return this._$target;\n    }\n    set $target(newPopupInstance) {\n        this.$$off(this._onTargetStateChange);\n        this._$target = newPopupInstance;\n        this.$$on(this._onTargetStateChange);\n        this._onTargetStateChange();\n    }\n    /** Element target to setup aria attributes */\n    get $a11yTarget() {\n        return this.a11yTarget ? this.querySelector(this.a11yTarget) : this;\n    }\n    /** Value to setup aria-label */\n    get a11yLabel() {\n        if (!this.$target)\n            return null;\n        return (this.$target.open ? this.a11yLabelActive : this.a11yLabelInactive) || null;\n    }\n    /** Marker to allow track hover */\n    get allowHover() {\n        return DeviceDetector.hasHover && ESLMediaQuery.for(this.trackHover).matches;\n    }\n    /** Marker to allow track clicks */\n    get allowClick() {\n        return ESLMediaQuery.for(this.trackClick).matches;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.updateTargetFromSelector();\n        this.initA11y();\n    }\n    /** Update `$target` Toggleable  from `target` selector */\n    updateTargetFromSelector() {\n        if (!this.target)\n            return;\n        this.$target = ESLTraversingQuery.first(this.target, this);\n        if (this.$target instanceof ESLToggleablePlaceholder && this.$target.$origin) {\n            // change target if it is an instance of the placeholder element\n            this.$target = this.$target.$origin;\n        }\n    }\n    /** Check if the event target should be ignored */\n    isTargetIgnored(target) {\n        if (!target || !(target instanceof HTMLElement) || !this.ignore)\n            return false;\n        const $ignore = target.closest(this.ignore);\n        // Ignore only inner elements (but do not ignore the trigger itself)\n        return !!$ignore && $ignore !== this && this.contains($ignore);\n    }\n    /** Merge params to pass to the toggleable */\n    mergeToggleableParams(...params) {\n        return Object.assign({\n            initiator: 'trigger',\n            activator: this\n        }, ...params);\n    }\n    /** Show target toggleable with passed params */\n    showTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.showDelay)\n        }, params);\n        if (this.$target && typeof this.$target.show === 'function') {\n            this.$target.show(actionParams);\n        }\n    }\n    /** Hide target toggleable with passed params */\n    hideTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.hideDelay)\n        }, params);\n        if (this.$target && typeof this.$target.hide === 'function') {\n            this.$target.hide(actionParams);\n        }\n    }\n    /** Toggles target toggleable with passed params */\n    toggleTarget(params = {}, state = !this.active) {\n        state ? this.showTarget(params) : this.hideTarget(params);\n    }\n    /**\n     * Updates trigger state according to toggleable state\n     * Does not produce `esl:change:active` event\n     */\n    updateState() {\n        var _a;\n        const isActive = !!((_a = this.$target) === null || _a === void 0 ? void 0 : _a.open);\n        const wasActive = this.active;\n        this.toggleAttribute('active', isActive);\n        const clsTarget = ESLTraversingQuery.first(this.activeClassTarget, this);\n        clsTarget && CSSClassUtils.toggle(clsTarget, this.activeClass, isActive);\n        this.updateA11y();\n        return isActive !== wasActive;\n    }\n    /** Handles ESLToggleable state change */\n    _onTargetStateChange(originalEvent) {\n        if (!this.updateState())\n            return;\n        const detail = { active: this.active, originalEvent };\n        this.$$fire(this.CHANGE_EVENT, { detail });\n    }\n    /** Handles `click` event */\n    _onClick(event) {\n        if (!this.allowClick || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        this._onPrimaryEvent(event);\n    }\n    /** Handles `keydown` event */\n    _onKeydown(event) {\n        if (![ENTER, SPACE, ESC].includes(event.key) || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        if (event.key === ESC) {\n            if (this.ignoreEsc)\n                return;\n            this.hideTarget({ event });\n        }\n        else {\n            this._onPrimaryEvent(event);\n        }\n    }\n    /** Handles target primary (observed) event */\n    _onPrimaryEvent(event) {\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles hover `mouseenter` event */\n    _onMouseEnter(event) {\n        if (!this.allowHover)\n            return;\n        const delay = parseNumber(this.hoverShowDelay);\n        this.toggleTarget({ event, delay }, this.mode !== 'hide');\n        event.preventDefault();\n    }\n    /** Handles hover `mouseleave` event */\n    _onMouseLeave(event) {\n        if (!this.allowHover)\n            return;\n        if (this.mode === 'show' || this.mode === 'hide')\n            return;\n        const delay = parseNumber(this.hoverHideDelay);\n        this.hideTarget({ event, delay, trackHover: true });\n        event.preventDefault();\n    }\n    /** Set initial a11y attributes. Do nothing if trigger contains actionable element */\n    initA11y() {\n        if (this.$a11yTarget !== this)\n            return;\n        if (!this.hasAttribute('role'))\n            this.setAttribute('role', 'button');\n        if (this.getAttribute('role') === 'button' && !this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n    }\n    /** Update aria attributes */\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (this.a11yLabelActive !== null || this.a11yLabelInactive !== null) {\n            setAttr(target, 'aria-label', this.a11yLabel);\n        }\n        setAttr(target, 'aria-expanded', String(this.active));\n        if (this.$target && this.$target.id) {\n            setAttr(target, 'aria-controls', this.$target.id);\n        }\n    }\n};\nESLTrigger.is = 'esl-trigger';\nESLTrigger.observedAttributes = ['target'];\n__decorate([\n    prop('esl:change:active')\n], ESLTrigger.prototype, \"CHANGE_EVENT\", void 0);\n__decorate([\n    prop('esl:show esl:hide')\n], ESLTrigger.prototype, \"OBSERVED_EVENTS\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLTrigger.prototype, \"active\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'a[href]' })\n], ESLTrigger.prototype, \"ignore\", void 0);\n__decorate([\n    attr({ defaultValue: '::next' })\n], ESLTrigger.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'toggle' })\n], ESLTrigger.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'all' })\n], ESLTrigger.prototype, \"trackClick\", void 0);\n__decorate([\n    attr({ defaultValue: 'not all' })\n], ESLTrigger.prototype, \"trackHover\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"a11yTarget\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelActive\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelInactive\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"showDelay\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"hideDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverShowDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverHideDelay\", void 0);\n__decorate([\n    boolAttr()\n], ESLTrigger.prototype, \"ignoreEsc\", void 0);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"connectedCallback\", null);\n__decorate([\n    listen({\n        event: (that) => that.OBSERVED_EVENTS,\n        target: (that) => that.$target\n    })\n], ESLTrigger.prototype, \"_onTargetStateChange\", null);\n__decorate([\n    listen('click')\n], ESLTrigger.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLTrigger.prototype, \"_onKeydown\", null);\n__decorate([\n    listen('mouseenter')\n], ESLTrigger.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen('mouseleave')\n], ESLTrigger.prototype, \"_onMouseLeave\", null);\nESLTrigger = __decorate([\n    ExportNs('Trigger')\n], ESLTrigger);\nexport { ESLTrigger };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLAlert_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { attr, jsonAttr, prop, listen } from '../../esl-utils/decorators';\nimport { isMatches } from '../../esl-utils/dom/traversing';\nimport { ESLToggleable } from '../../esl-toggleable/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { createZIndexIframe } from '../../esl-utils/fixes/ie-fixes';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\n/**\n * ESLAlert component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLAlert is a component to show small notifications on your pages. ESLAlert can have multiple instances on the page.\n */\nlet ESLAlert = ESLAlert_1 = class ESLAlert extends ESLToggleable {\n    /** Creates global alert instance (using body element as a base) */\n    static init(options) {\n        let alert = document.querySelector(`body > ${ESLAlert_1.is}`);\n        if (!alert) {\n            alert = document.createElement(ESLAlert_1.is);\n            options && Object.assign(alert, options);\n            document.body.appendChild(alert);\n        }\n        return alert;\n    }\n    mergeDefaultParams(params) {\n        const type = this.constructor;\n        return Object.assign({}, type.defaultConfig, this.defaultParams || {}, params || {});\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target') {\n            this.$target = ESLTraversingQuery.first(this.target);\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.setAttribute('role', this.getAttribute('role') || 'alert');\n        this.$content = document.createElement('div');\n        this.$content.className = 'esl-alert-content';\n        this.innerHTML = '';\n        this.appendChild(this.$content);\n        if (DeviceDetector.isIE)\n            this.appendChild(createZIndexIframe());\n        if (this.target) {\n            this.$target = ESLTraversingQuery.first(this.target, this);\n        }\n    }\n    /** Target element to listen to activation events */\n    get $target() {\n        return this._$target;\n    }\n    set $target($el) {\n        this._$target = $el;\n        this.$$on(this._onShowRequest);\n        this.$$on(this._onHideRequest);\n    }\n    onShow(params) {\n        if (this._clearTimeout)\n            window.clearTimeout(this._clearTimeout);\n        if (params.html || params.text) {\n            this.render(params);\n            super.onShow(params);\n        }\n        this.hide(params);\n    }\n    onHide(params) {\n        super.onHide(params);\n        this._clearTimeout = window.setTimeout(() => this.clear(), params.hideTime);\n    }\n    render({ text, html, cls }) {\n        CSSClassUtils.remove(this, this.activeCls);\n        CSSClassUtils.add(this, this.activeCls = cls);\n        if (html)\n            this.$content.innerHTML = html;\n        if (text)\n            this.$content.textContent = text;\n    }\n    clear() {\n        this.$content.innerHTML = '';\n        CSSClassUtils.remove(this, this.activeCls);\n    }\n    buildRequestParams(e) {\n        const detail = e.detail || {};\n        if (!isMatches(this, detail.match))\n            return null;\n        if (e.type === this.SHOW_REQUEST_EVENT)\n            return Object.assign({}, detail, { force: true });\n        if (e.type === this.HIDE_REQUEST_EVENT)\n            return Object.assign({ hideDelay: 0 }, detail, { force: true });\n        return null;\n    }\n    _onHideRequest(e) {\n        super._onHideRequest(e);\n        e.stopPropagation();\n    }\n    _onShowRequest(e) {\n        super._onShowRequest(e);\n        e.stopPropagation();\n    }\n};\nESLAlert.is = 'esl-alert';\nESLAlert.observedAttributes = ['target'];\n/** Default show/hide params for all ESLAlert instances */\nESLAlert.defaultConfig = {\n    hideTime: 300,\n    hideDelay: 2500\n};\n__decorate([\n    prop('esl:alert:show')\n], ESLAlert.prototype, \"SHOW_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:alert:hide')\n], ESLAlert.prototype, \"HIDE_REQUEST_EVENT\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLAlert.prototype, \"target\", void 0);\n__decorate([\n    jsonAttr()\n], ESLAlert.prototype, \"defaultParams\", void 0);\n__decorate([\n    listen({ inherit: true, target: (el) => el.$target })\n], ESLAlert.prototype, \"_onHideRequest\", null);\n__decorate([\n    listen({ inherit: true, target: (el) => el.$target })\n], ESLAlert.prototype, \"_onShowRequest\", null);\nESLAlert = ESLAlert_1 = __decorate([\n    ExportNs('Alert')\n], ESLAlert);\nexport { ESLAlert };\n","/** Fix IE browser to allow to display alert under iframe */\nexport function createZIndexIframe() {\n    const iframe = document.createElement('iframe');\n    iframe.className = 'ie-zindex-fix';\n    iframe.src = 'about:blank';\n    return iframe;\n}\n","import {Observable} from '@exadel/esl/modules/esl-utils/abstract/observable';\nimport {UIPPlugin} from './plugin';\nimport {UIPRoot} from './root';\n\n/** Type for function to change attribute's current value */\nexport type TransformSignature = (current: string | null) => string | boolean | null;\n\n/** Config for changing attribute's value */\nexport type ChangeAttrConfig = {\n  /** CSS query to find target elements */\n  target: string,\n  /** Attribute to change */\n  attribute: string,\n  /** Changes initiator */\n  modifier: UIPPlugin | UIPRoot\n} & ({\n  /** New {@link attribute} value */\n  value: string | boolean\n} | {\n  /**\n   * Function to transform(update)\n   * {@link attribute} value\n   */\n  transform: TransformSignature\n});\n\n/** Type for both <script> or <template> containers */\nexport type SnippetTemplate = HTMLTemplateElement | HTMLScriptElement;\n\n\n/**\n * State holder class to store current UIP markup state\n * Provides methods to modify the state\n * @extends Observable\n */\nexport class UIPStateModel extends Observable {\n  /** Current markup state */\n  private _html = new DOMParser().parseFromString('', 'text/html').body;\n  /** Last {@link UIPPlugin} element which changed markup */\n  private _lastModifier: UIPPlugin | UIPRoot;\n  /** Marker whether state changes were dispatched */\n  private _isFired = false;\n\n  /** Snippets {@link SnippetTemplate template-holders} */\n  private _snippets: SnippetTemplate[];\n  /** Current active {@link SnippetTemplate template-holder} */\n  private _activeSnippet: SnippetTemplate;\n\n  /**\n   * Sets current markup state to the passed one\n   * @param markup - new state\n   * @param modifier - plugin, that initiates the change\n   */\n  public setHtml(markup: string, modifier: UIPPlugin | UIPRoot) {\n    const root = new DOMParser().parseFromString(markup, 'text/html').body;\n\n    if (!root || root.innerHTML !== this.html) {\n      this._html = root;\n      this._lastModifier = modifier;\n      this.dispatchChange();\n    }\n  }\n\n  /** Current markup state getter */\n  public get html(): string {\n    return this._html ? this._html.innerHTML : '';\n  }\n\n  /** Last markup state modifier */\n  public get lastModifier(): UIPPlugin | UIPRoot {\n    return this._lastModifier;\n  }\n\n  /** Snippets template-holders getter */\n  public get snippets(): SnippetTemplate[] {\n    return this._snippets;\n  }\n\n  /** Sets snippets template-holders */\n  public set snippets(snippets: SnippetTemplate[]) {\n    this._snippets = snippets;\n  }\n\n  /** Current active {@link SnippetTemplate} getter */\n  public get activeSnippet(): SnippetTemplate {\n    return this._activeSnippet;\n  }\n\n  /** Changes current active snippet */\n  public applySnippet(snippet: SnippetTemplate, modifier: UIPPlugin | UIPRoot) {\n    if (!snippet) return;\n    this._activeSnippet = snippet;\n    this.setHtml(snippet.innerHTML, modifier);\n  }\n\n  /**\n   * Gets attribute values for the matched set of elements\n   * @param target - CSS sector to define target elements\n   * @param attr - attribute name\n   * @returns array of matched elements attribute value (uses the element placement order)\n   */\n  public getAttribute(target: string, attr: string): (string | null)[] {\n    return Array.from(this._html.querySelectorAll(target)).map(el => el.getAttribute(attr));\n  }\n\n  /** Applies change config to current markup */\n  public changeAttribute(cfg: ChangeAttrConfig) {\n    const {target, attribute, modifier} = cfg;\n    const elements = Array.from(this._html.querySelectorAll(target));\n    if (!elements.length) return;\n\n    UIPStateModel.setAttribute(elements, attribute, 'transform' in cfg ? cfg.transform : cfg.value);\n    this._lastModifier = modifier;\n    this.dispatchChange();\n  }\n\n  /** Plans microtask to dispatch model change event */\n  protected dispatchChange() {\n    if (!this._isFired) {\n      this._isFired = true;\n      Promise.resolve().then(() => {\n        this.fire();\n        this._isFired = false;\n      });\n    }\n  }\n\n  /**\n   * Changes element attribute according to `transform` argument\n   * @param elements - elements to apply changes\n   * @param attr - attribute name\n   * @param transform - value or function to change attribute value\n   */\n  protected static setAttribute(elements: Element[], attr: string, transform: TransformSignature | string | boolean): void {\n    elements.forEach(el => {\n      const transformed = typeof transform === 'function' ? transform(el.getAttribute(attr)) : transform;\n      if (typeof transformed === 'string') {\n        el.setAttribute(attr, transformed);\n      } else {\n        transformed ? el.setAttribute(attr, '') : el.removeAttribute(attr);\n      }\n    });\n  }\n}\n","/**\n * Abstract Observable implementation\n * @author Yuliya Adamskaya\n */\nexport class Observable {\n    constructor() {\n        this._listeners = new Set();\n    }\n    addListener(listener) {\n        this._listeners.add(listener);\n    }\n    removeListener(listener) {\n        this._listeners.delete(listener);\n    }\n    fire(...args) {\n        this._listeners.forEach((listener) => {\n            try {\n                listener.apply(this, args);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n}\n","import {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {boolAttr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport type {AnyToVoidFnSignature} from '@exadel/esl/modules/esl-utils/misc/functions';\n\nimport {SnippetTemplate, UIPStateModel} from './model';\n\n/**\n * UI Playground root custom element definition\n * Container element for {@link UIPPlugin} components\n * Defines the bounds of UI Playground instance\n * Shares the {@link UIPStateModel} instance between {@link UIPPlugin}-s\n */\nexport class UIPRoot extends ESLBaseElement {\n  public static is = 'uip-root';\n  static observedAttributes = ['dark-theme', 'settings-collapsed', 'editor-collapsed', 'rtl-direction'];\n\n  /** CSS query for snippets */\n  public static SNIPPET_SEL = '[uip-snippet]';\n\n  /** Indicates that the UIP components' theme is dark */\n  @boolAttr() public darkTheme: boolean;\n  /** Collapsed settings state marker */\n  @boolAttr() public settingsCollapsed: boolean;\n  /** Collapsed editor state marker */\n  @boolAttr() public editorCollapsed: boolean;\n  /** Indicates that the direction of the preview content is RTL direction */\n  @boolAttr() public rtlDirection: boolean;\n\n  /** {@link UIPStateModel} instance to store UI Playground state */\n  @memoize()\n  public get model(): UIPStateModel {\n    return new UIPStateModel();\n  }\n\n  /** Collects snippets template-holders */\n  public get $snippets(): SnippetTemplate[] {\n    return Array.from(this.querySelectorAll(UIPRoot.SNIPPET_SEL));\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.initSnippets();\n  }\n\n  /** Alias for {@link this.model.addListener} */\n  public addStateListener(listener: AnyToVoidFnSignature) {\n    this.model.addListener(listener);\n  }\n\n  /** Alias for {@link this.model.removeListener} */\n  public removeStateListener(listener: AnyToVoidFnSignature) {\n    this.model.removeListener(listener);\n  }\n\n  /** Initial initialization of snippets */\n  protected initSnippets(): void {\n    this.model.snippets = this.$snippets;\n    this.model.applySnippet(this.model.snippets[0], this);\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string | null, newVal: string | null) {\n    if (oldVal === newVal) return;\n    if (['rtl-direction', 'dark-theme'].includes(attrName)) {\n      this.classList.toggle(attrName, newVal !== null);\n    }\n    // setTimeout to let other plugins init before dispatching\n    setTimeout(() => {\n      EventUtils.dispatch(this, 'uip:configchange', {\n        bubbles: false,\n        detail: {\n          attribute: attrName,\n          value: newVal\n        }\n      });\n    });\n  }\n}\n","import {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\n\nimport {UIPRoot} from './root';\nimport {UIPStateModel} from './model';\n\n/**\n * Base class for UI Playground plugins\n * Implements basic relation and styles\n */\nexport abstract class UIPPlugin extends ESLBaseElement {\n  static observedAttributes = ['label'];\n\n  /** Visible label */\n  @attr() public label: string;\n\n  /** Closest playground {@link UIPRoot} element */\n  @memoize()\n  protected get root(): UIPRoot | null {\n    return this.closest(`${UIPRoot.is}`) as UIPRoot;\n  }\n\n  /** Returns {@link UIPStateModel} from root instance */\n  protected get model(): UIPStateModel | null {\n    return this.root ? this.root.model : null;\n  }\n\n  /** {@link UIPPlugin} section wrapper */\n  @memoize()\n  protected get $inner() {\n    const $inner = document.createElement('div');\n    const pluginType = this.constructor as typeof UIPPlugin;\n    $inner.className = `${pluginType.is}-inner uip-plugin-inner`;\n    return $inner;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.classList.add('uip-plugin');\n    this.root?.addStateListener(this._onRootStateChange);\n    this.root && this._onRootStateChange();\n  }\n\n  protected disconnectedCallback() {\n    this.root?.removeStateListener(this._onRootStateChange);\n    super.disconnectedCallback();\n    memoize.clear(this, 'root');\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (attrName === 'label') this.setAttribute('aria-label', newVal);\n  }\n\n  /** Handles {@link UIPRoot} state changes */\n  protected _onRootStateChange(): void {}\n}\n","import {bind} from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport {UIPPlugin} from '../base/plugin';\n\n/**\n * Preview {@link UIPPlugin} custom element definition\n * Element that displays active markup\n * @extends UIPPlugin\n */\nexport class UIPPreview extends UIPPlugin {\n  static is = 'uip-preview';\n  static observedAttributes: string[] = ['resizable'];\n\n  /** Changes preview markup from state changes */\n  @bind\n  protected _onRootStateChange(): void {\n    if (this.$inner.parentElement === this) this.removeChild(this.$inner);\n    this.$inner.innerHTML = this.model!.html;\n    this.appendChild(this.$inner);\n  }\n\n  protected disconnectedCallback() {\n    if (this.$inner.parentElement === this) this.removeChild(this.$inner);\n    super.disconnectedCallback();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string): void {\n    if (attrName === 'resizable' && newVal === null) {\n      this.clearInlineSize();\n      this.$inner.classList.remove('resizable');\n    } else {\n      this.$inner.classList.add('resizable');\n    }\n  }\n\n  /** Resets element both inline height and width properties */\n  protected clearInlineSize() {\n    this.$inner.style.removeProperty('height');\n    this.$inner.style.removeProperty('width');\n  }\n}\n","import {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport type {ESLScrollbar} from '@exadel/esl/modules/esl-scrollbar/core';\n\nimport {UIPPlugin} from '../../../core/base/plugin';\nimport {SnippetTemplate} from '../../../core/base/model';\n\n/**\n * Snippets {@link UIPPlugin} custom element definition\n * Container class for snippets (component's templates)\n * @extends UIPPlugin\n */\nexport class UIPSnippets extends UIPPlugin {\n  public static is = 'uip-snippets';\n  /** CSS Class for snippets list item */\n  public static LIST_ITEM = 'snippets-list-item';\n  /** CSS Class added to active snippet */\n  public static ACTIVE_ITEM = 'active';\n  /** Index of current snippet list item */\n  public currentIndex = 0;\n\n  /** Snippets container element */\n  @memoize()\n  protected get $snippetList(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-list';\n    return $el;\n  }\n\n  /** Active snippet title */\n  @memoize()\n  protected get $title(): HTMLElement {\n    const $el = document.createElement('span');\n    $el.className = 'snippets-title';\n    return $el;\n  }\n\n  /** Snippets dropdown element */\n  @memoize()\n  protected get $dropdown(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-dropdown';\n    return $el;\n  }\n\n  /** Dropdown control element */\n  @memoize()\n  protected get $dropdownControl(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-dropdown-control';\n    return $el;\n  }\n\n  /** Dropdown wrapper element */\n  @memoize()\n  protected get $dropdownWrapper(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-dropdown-wrapper';\n    return $el;\n  }\n\n  /** Snippets list from dropdown element*/\n  @memoize()\n  public get $items(): HTMLElement[] {\n    const items = this.querySelectorAll(`.${UIPSnippets.LIST_ITEM}`);\n    return Array.from(items) as HTMLElement[];\n  }\n\n  /** {@link ESLScrollbar} scroll element */\n  @memoize()\n  public get $scroll(): ESLScrollbar {\n    const $scroll = document.createElement('esl-scrollbar');\n    $scroll.setAttribute('target', '::prev');\n    return $scroll;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.render();\n    this.updateTitleText();\n    // Initial update\n    setTimeout(() => this.$active = this.$active || this.$items[0]);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles `mouseup` event to\n   * manage dropdown open state\n   */\n  @listen({event: 'mouseup', target: document.body})\n  protected onOutsideAction(e: Event) {\n    if (!this.classList.contains('dropdown-open')) return;\n    const target = e.target as HTMLElement;\n    if (this.contains(target)) return false;\n    this.toggleDropdown();\n  }\n\n  /** Active snippet element */\n  public get $active(): HTMLElement | null {\n    return this.$items.find(item => item.classList.contains(UIPSnippets.ACTIVE_ITEM)) || null;\n  }\n  /** Sets active snippet element */\n  public set $active(snippet: HTMLElement | null) {\n    this.$items.forEach((item) => item.classList.toggle(UIPSnippets.ACTIVE_ITEM, snippet === item));\n  }\n\n  /** Initializes snippets layout */\n  protected render(): void {\n    const snippets = this.model!.snippets;\n    if (!snippets.length) return;\n\n    snippets.length > 1\n      ? this.renderDropdown(snippets, this.$title)\n      : this.appendChild(this.$title);\n  }\n\n  /** Renders dropdown element for a case with multiple snippets */\n  protected renderDropdown(snippets: SnippetTemplate[], title: HTMLElement) {\n\n    snippets\n      .map((snippet: SnippetTemplate) => this.buildListItem(snippet))\n      .forEach((item) => item && this.$snippetList.appendChild(item));\n\n    this.$snippetList.classList.add('esl-scrollable-content');\n    this.$dropdownWrapper.appendChild(this.$snippetList);\n    this.$scroll && this.$dropdownWrapper.appendChild(this.$scroll);\n\n    this.$dropdownControl.appendChild(title);\n    this.appendChild(this.$dropdownControl);\n\n    this.$dropdown.appendChild(this.$dropdownWrapper);\n    this.appendChild(this.$dropdown);\n  }\n\n  /** Builds snippets list item */\n  protected buildListItem(snippet: SnippetTemplate) {\n    const label = snippet.getAttribute('label');\n    if (!label) return;\n\n    const $li = document.createElement('li');\n    $li.classList.add(UIPSnippets.LIST_ITEM);\n    $li.textContent = label;\n    return $li;\n  }\n\n  /** Updates dropdown title with the name of active snippet */\n  protected updateTitleText(): void {\n    if (this.model) {\n      this.$title.textContent = `${this.model.activeSnippet.getAttribute('label')}`;\n    }\n  }\n\n  /** Handles `click` event to manage active snippet */\n  @listen({event: 'click', selector: '.snippets-list-item'})\n  protected _onItemClick(event: Event) {\n    const target = event.target as HTMLElement;\n    const index = this.$items.indexOf(target);\n    if (index < 0) return;\n\n    this.toggleDropdown();\n\n    if (this.currentIndex !== index && this.model) {\n      this.model.applySnippet(this.model.snippets[index], this);\n      this.$active = target;\n      this.currentIndex = index;\n      this.updateTitleText();\n    }\n  }\n\n  /**\n   * Handles dropdown control `click` event to\n   * manage dropdown open state\n   */\n  @listen({event: 'click', selector: '.snippets-dropdown-control'})\n  protected _onDropdownClick() {\n    this.toggleDropdown();\n  }\n\n  /** Toggles dropdown open state */\n  public toggleDropdown(): void {\n    this.classList.toggle('dropdown-open');\n  }\n}\n","import {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {ENTER, SPACE} from '@exadel/esl/modules/esl-utils/dom/keys';\n\nimport type {UIPOptions} from '../options';\nimport {UIPRoot} from '../../../../core/base/root';\n\n/** Config used to create options */\nexport type OptionConfig = {\n  /** Attribute name used as absence marker of option icon */\n  attrName: string;\n  /** Controlled attribute to toggle on root */\n  optionValue: string;\n  /** Callback to indicate if option should be rendered */\n  canActivate?: (scope: UIPOptions) => boolean;\n};\n\n/** Custom element to toggle {@link UIPRoot} attributes */\nexport class UIPOption extends ESLBaseElement {\n  public static is = 'uip-option';\n\n  /** {@link UIPRoot's} attribute which is changed by option */\n  @attr() public attribute: string;\n  public _active: boolean;\n\n  /** Closest playground {@link UIPRoot} element */\n  protected $root: UIPRoot;\n  protected config: OptionConfig;\n\n  /** Builds option element from {@link OptionConfig} */\n  static createEl(optionConfig: OptionConfig): UIPOption {\n    const option = document.createElement('uip-option') as UIPOption;\n    option.setAttribute('attribute', optionConfig.optionValue);\n    option.config = optionConfig;\n    return option;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.$root = this.closest('.uip-root') as UIPRoot;\n    this.classList.add(`${this.attribute}-option`);\n    this.tabIndex = 0;\n    this.active = this.$root.hasAttribute(this.config.optionValue);\n  }\n\n  /** Checks whether option is in its active state */\n  public get active(): boolean {\n    return this.$$cls('active');\n  }\n\n  /** Setter for `active` class */\n  public set active(val: boolean) {\n    this.$$cls('active', val);\n  }\n\n  /** Handles option `click` event */\n  @listen('click')\n  protected _onClick() {\n    this.toggleState();\n    this.$$fire('uip:option:changed');\n  }\n\n  /** Handles option `keydown` event */\n  @listen('keydown')\n  protected _onKeydown(e: KeyboardEvent) {\n    if (ENTER !== e.key && SPACE !== e.key) return;\n    this.toggleState();\n    this.$$fire('uip:option:changed');\n  }\n\n  /** Toggles option active state */\n  public toggleState(force?: boolean) {\n    this.active = force === undefined ? !this.active : force;\n  }\n}\n","import {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPPlugin} from '../../../core/base/plugin';\nimport {OptionConfig, UIPOption} from './option/option';\n\n/**\n * Options {@link UIPPlugin} custom element definition\n * Custom element to provide controls for changing UIP visual appearance.\n * @extends UIPPlugin\n */\nexport class UIPOptions extends UIPPlugin {\n  public static is = 'uip-options';\n  public static observedAttributes = ['hide-theme', 'hide-direction', 'hide-settings', 'hide-editor'];\n\n  /** Map that stores {@link UIPOption} instances */\n  public options = new Map<string, UIPOption>();\n\n  /** List of configs to create options */\n  protected static UIPOptionsConfig: OptionConfig[] = [\n    {\n      attrName: 'hide-theme',\n      optionValue: 'dark-theme',\n      canActivate: (component) => !component.hasAttribute('hide-theme')\n    },\n    {\n      attrName: 'hide-direction',\n      optionValue: 'rtl-direction',\n      canActivate: (component) => !component.hasAttribute('hide-direction')\n    },\n    {\n      attrName: 'hide-settings',\n      optionValue: 'settings-collapsed',\n      canActivate: (component) => !component.hasAttribute('hide-settings') &&\n        !!component.root?.querySelector('uip-settings')\n    },\n    {\n      attrName: 'hide-editor',\n      optionValue: 'editor-collapsed',\n      canActivate: (component) => !component.hasAttribute('hide-editor') &&\n        !!component.root?.querySelector('uip-editor')\n    }\n  ];\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.render();\n  }\n\n  protected disconnectedCallback() {\n    this.innerHTML = '';\n    super.disconnectedCallback();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string | null, newVal: string | null) {\n    if (oldVal === newVal || !this.options) return;\n\n    const config = UIPOptions.UIPOptionsConfig.find(elem => elem.attrName === attrName);\n    if (!config) return;\n\n    if (newVal === null) this.render([config]); // case to add option icon\n    if (newVal !== null) { // case to remove option icon\n      const option = this.options.get(config.optionValue);\n      if (!option) return;\n      this.options.delete(config.optionValue);\n      option.remove();\n    }\n  }\n\n  /**\n   * Renders options from passed configs array or\n   * by default from {@link UIPOptions.UIPOptionsConfig}\n   */\n  protected render(optionsCfg = UIPOptions.UIPOptionsConfig) {\n    optionsCfg = optionsCfg.filter(option => !option.canActivate || option.canActivate(this));\n    optionsCfg.forEach((option) => this.options.set(option.optionValue, UIPOption.createEl(option)));\n    this.options.forEach(option => this.append(option));\n  }\n\n  /**\n   * Handles {@link UIPRoot} `uip:configchange` event to\n   * manage {@link UIPOption} active state\n   */\n  @listen({event: 'uip:configchange', target: '::parent(.uip-root)'})\n  protected _onRootConfigChange(e: CustomEvent) {\n    const option = this.options.get(e.detail.attribute);\n    option?.toggleState(e.detail.value !== null);\n  }\n\n  /**\n   * Handles {@link UIPOption} `click` event\n   * to manage {@link UIPRoot} options attributes\n   */\n  @listen('click')\n  protected _onOptionClick(e: Event) {\n    e.stopPropagation();\n    const option = e.target as UIPOption;\n    this.root?.toggleAttribute(option.attribute, option.active);\n  }\n\n  public static register(tagName?: string) {\n    UIPOption.register();\n    UIPOption.registered.then(() => super.register.call(this, tagName));\n  }\n}\n","import {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {UIPPlugin} from '../../core/base/plugin';\nimport {UIPOptions, UIPSnippets} from '../registration';\n\n/**\n * Header {@link UIPPlugin} custom element definition\n * Container for {@link UIPSnippets} and {@link UIPOptions} elements\n * @extends UIPPlugin\n */\nexport class UIPHeader extends UIPPlugin {\n  static is = 'uip-header';\n\n  protected connectedCallback(): void {\n    super.connectedCallback();\n    this.childElementCount || this.autofill();\n  }\n\n  /** Default configuration rendering */\n  protected autofill(): void {\n    this.renderSnippets();\n    this.renderOptions();\n    this.renderCopy();\n  }\n\n  /** Renders {@link UIPSnippets} element */\n  protected renderSnippets(): void {\n    if (this.model?.snippets.length) {\n      const snippetsEl = document.createElement(UIPSnippets.is) as UIPSnippets;\n      this.prepend(snippetsEl);\n    }\n  }\n\n  /** Renders {@link UIPOptions} element */\n  protected renderOptions(): void {\n    const optionsEl = document.createElement(UIPOptions.is) as UIPSnippets;\n    this.append(optionsEl);\n  }\n\n  /** Renders copy icon */\n  protected renderCopy(): void {\n    const icon = document.createElement('button');\n    icon.title = 'copy markup';\n    icon.classList.add('copy-icon');\n    this.append(icon);\n  }\n\n  /** Handles copy icon click */\n  @listen({event: 'click', selector: '.copy-icon'})\n  protected _onCopyClick() {\n    navigator.clipboard.writeText(this.model!.html).then(() => {\n      EventUtils.dispatch(this, 'esl:alert:show', {\n        detail: {\n          text: 'Markup copied',\n          cls: 'uip-alert-info'\n        }\n      });\n    });\n  }\n}\n","/**\n * @returns Promise that will be resolved or rejected in `timeout` with an optional `payload`\n * If `isReject` is `true` the result promise will be rejected, otherwise (by default) the result promise will be resolved\n */\nexport function promisifyTimeout(timeout, payload, isReject) {\n    return new Promise((resolve, reject) => setTimeout((isReject ? reject : resolve).bind(null, payload), timeout));\n}\n/**\n * @returns Promise that will be resolved by dispatching `event` on `target`\n * Or it will be rejected in `timeout` if it's specified\n * Optional `options` for addEventListener can be also specified\n */\nexport function promisifyEvent(target, event, timeout, options) {\n    return new Promise((resolve, reject) => {\n        function eventCallback(e) {\n            target.removeEventListener(event, eventCallback, options);\n            resolve(e);\n        }\n        target.addEventListener(event, eventCallback, options);\n        if (typeof timeout === 'number' && timeout >= 0) {\n            setTimeout(() => reject(new Error('Rejected by timeout')), timeout);\n        }\n    });\n}\n/**\n * Short helper to make Promise from element state marker\n * @returns Promise that will be resolved if the target `marker` property is truthful or `event` is dispatched\n * @example\n * `const imgReady = promisifyMarker(eslImage, 'ready');`\n */\nexport function promisifyMarker(target, marker, event = marker) {\n    if (target[marker])\n        return Promise.resolve(target);\n    return promisifyEvent(target, event).then(() => target);\n}\n/**\n * Call `callback` limited by `tryCount` amount of times with interval in `timeout` ms\n * @returns Promise that will be resolved as soon as callback returns truthy value, or reject it by limit.\n */\nexport function tryUntil(callback, tryCount = 2, timeout = 100) {\n    return new Promise((resolve, reject) => {\n        (function check() {\n            let result;\n            try {\n                result = callback();\n            }\n            catch (_a) {\n                result = undefined;\n            }\n            if (result || (tryCount--) < 0) {\n                result ? resolve(result) : reject(new Error('Rejected by limit of tries'));\n            }\n            else {\n                setTimeout(check, timeout);\n            }\n        })();\n    });\n}\n/**\n * Call async callback in a sequence passed number of times\n * Initial call starts as a microtask\n * @param callback - async chain function\n * @param count - count o calls\n * @returns sequence end promise\n */\nexport function repeatSequence(callback, count = 1) {\n    if (count < 1)\n        return Promise.reject();\n    if (count === 1)\n        return Promise.resolve().then(callback);\n    return repeatSequence(callback, count - 1).then(callback);\n}\n/**\n * Create Deferred Object that wraps promise and its resolve and reject callbacks\n */\nexport function createDeferred() {\n    let reject;\n    let resolve;\n    // Both reject and resolve will be assigned anyway while the Promise constructing.\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\n/**\n * Safe wrap for Promise.resolve to use in Promise chain\n * @example\n * `const resolvedPromise = rejectedPromise.catch(resolvePromise);`\n */\nexport function resolvePromise(arg) {\n    return Promise.resolve(arg);\n}\n/**\n * Safe wrap for Promise.reject to use in Promise chain\n * @example\n * `const rejectedPromise = resolvedPromise.then(rejectPromise);`\n */\nexport function rejectPromise(arg) {\n    return Promise.reject(arg);\n}\n/**\n * Promise utils helper class\n * Note: use individual methods in case you need correct \"tree shaking\"\n */\nexport class PromiseUtils {\n}\nPromiseUtils.fromTimeout = promisifyTimeout;\nPromiseUtils.fromEvent = promisifyEvent;\nPromiseUtils.fromMarker = promisifyMarker;\nPromiseUtils.repeat = repeatSequence;\nPromiseUtils.tryUntil = tryUntil;\nPromiseUtils.deferred = createDeferred;\nPromiseUtils.resolve = resolvePromise;\nPromiseUtils.reject = rejectPromise;\n","import { createDeferred } from './promise';\n/**\n * Creates a debounced function that implements {@link Debounced}.\n * Debounced function delays invoking func until after wait milliseconds have elapsed\n * since the last time the debounced function was invoked.\n * The func is invoked with the last arguments provided to the debounced function.\n * @param fn - function to decorate\n * @param wait - time to debounce\n * @param thisArg - optional context to call original function, use debounced method call context if not defined\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function debounce(fn, wait = 10, thisArg) {\n    let timeout = null;\n    let deferred = null;\n    function debouncedSubject(...args) {\n        deferred = deferred || createDeferred();\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = window.setTimeout(() => {\n            timeout = null;\n            // fn.apply to save call context\n            deferred.resolve(fn.apply(thisArg || this, args));\n            deferred = null;\n        }, wait);\n    }\n    function cancel() {\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = null;\n        deferred === null || deferred === void 0 ? void 0 : deferred.reject();\n        deferred = null;\n    }\n    Object.defineProperty(debouncedSubject, 'promise', {\n        get: () => deferred ? deferred.promise : Promise.resolve()\n    });\n    Object.defineProperty(debouncedSubject, 'cancel', {\n        writable: false,\n        enumerable: false,\n        value: cancel\n    });\n    return debouncedSubject;\n}\n","import {debounce} from '@exadel/esl/modules/esl-utils/async/debounce';\nimport {jsonAttr} from '@exadel/esl/modules/esl-base-element/core';\nimport {bind, decorate, memoize, listen} from '@exadel/esl/modules/esl-utils/decorators';\n\nimport {UIPPlugin} from '../../core/registration';\nimport {EditorConfig, AceTheme} from './ace/utils';\nimport type {AceEditor} from './ace/ace-editor';\n\n/**\n * Editor {@link UIPPlugin} custom element definition\n * Uses ACE UI code editor to provide an ability to modify UIP state markup\n * @extends UIPPlugin\n */\nexport class UIPEditor extends UIPPlugin {\n  public static is = 'uip-editor';\n  /** Attribute to trigger editor's collapsing */\n  private static collapsedAttribute = 'editor-collapsed';\n\n  /** Editor's {@link EditorConfig} passed through attribute */\n  @jsonAttr({defaultValue: {}})\n  public editorConfig: Partial<EditorConfig>;\n  /** Wrapped {@link https://ace.c9.io/ Ace} editor instance */\n  protected editor: AceEditor;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.innerHTML = '';\n    this.appendChild(this.$inner);\n\n    if (this.root && !this.root.hasAttribute(UIPEditor.collapsedAttribute)) {\n      this.initEditor();\n    }\n  }\n\n  protected disconnectedCallback(): void {\n    this.editor?.destroy();\n    this.resizeObserver.unobserve(this);\n    super.disconnectedCallback();\n  }\n\n  /** Initialize inner {@link https://ace.c9.io/ Ace} editor */\n  protected initEditor(): Promise<void> {\n    if (this.editor) {\n      return Promise.resolve();\n    }\n\n    return import(/* webpackChunkName: \"ace-editor\" */ './ace/ace-editor').then((Ace) => {\n      this.resizeObserver.observe(this);\n      this.editor = new Ace.Editor(this.$inner);\n      this.editor.setConfig(this.editorConfig);\n      this._onRootStateChange();\n    });\n  }\n\n  /** Callback to call on editor's content changes */\n  @listen('change')\n  @decorate(debounce, 1000)\n  protected _onChange() {\n    this.model!.setHtml(this.editor.getValue(), this);\n  }\n\n  /** Change editor's markup from markup state changes */\n  @bind\n  protected _onRootStateChange(): void {\n    if (this.model!.lastModifier === this) return;\n\n    const markup = this.model!.html;\n    setTimeout(() => this.editor && this.editor.setValue(markup));\n  }\n\n  /**\n   * Merge passed editorConfig with current editorConfig\n   * @param {Partial<EditorConfig>} editorConfig - config to merge\n   */\n  public updateEditorConfig(editorConfig: Partial<EditorConfig>): void {\n    this.editorConfig = {\n      ...this.editorConfig,\n      ...editorConfig,\n    };\n\n    this.editor?.setConfig(this.editorConfig);\n  }\n\n  /**\n   * Observer to prevent editor's content from overflowing\n   * when toggling settings section or sidebar\n   */\n  @memoize()\n  protected get resizeObserver(): ResizeObserver {\n    return new ResizeObserver(debounce(() => this.editor.resize(), 500));\n  }\n\n  /** Callback to catch theme changes from {@link UIPRoot} */\n  @listen({event: 'uip:configchange', target: '::parent(.uip-root)'})\n  protected _onRootConfigChange(e: CustomEvent) {\n    const attr = e.detail.attribute;\n    const value = e.detail.value;\n\n    if (attr === 'dark-theme') {\n      return this.updateEditorConfig({\n        theme: value === null\n          ? AceTheme.Light\n          : AceTheme.Dark\n      });\n    }\n  }\n}\n","/**\n * Object with messages used to indicate\n * the type of warning\n */\nexport const WARNING_MSG = {\n  inconsistent: 'Inconsistent value',\n  multiple: 'Multiple values',\n  invalid: 'Invalid setting value',\n  noTarget: 'No setting target',\n  noMatch: 'No select match'\n};\n","import {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport {UIPSettings} from './settings';\nimport {WARNING_MSG} from '../../utils/warning-msg';\nimport {getAttr, setAttr} from '@exadel/esl/modules/esl-utils/dom/attr';\n\n/**\n * Custom element for manipulating with elements attributes\n * Custom settings should extend this class\n * to become connected with {@link UIPSettings}\n */\nexport abstract class UIPSetting extends ESLBaseElement {\n  static is = 'uip-setting';\n\n  /** {@link target} attribute which is changed by setting */\n  @attr() public attribute: string;\n  /** Target to which setting's changes are attached */\n  public get target(): string {\n    return getAttr(this, 'target', this.$settings.target);\n  }\n  /** Sets target to which setting's changes are attached */\n  public set target(target: string) {\n    setAttr(this, 'target', target);\n  }\n\n  /** Closest {@link UIPSettings} element */\n  @memoize()\n  public get $settings() {\n    return this.closest(UIPSettings.is) as UIPSettings;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.classList.add(UIPSetting.is);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles setting value change and\n   * dispatches `uip:change` event\n   */\n  @listen('change')\n  protected _onChange(e: Event): void {\n    e.preventDefault();\n    EventUtils.dispatch(this, 'uip:change');\n  }\n\n  /**\n   * Changes markup in {@link UIPStateModel}\n   * with setting's value\n   */\n  public applyTo(model: UIPStateModel): void {\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      value: this.getDisplayedValue(),\n      modifier: this.$settings\n    };\n    this.isValid() ? model.changeAttribute(cfg) : this.setInconsistency(WARNING_MSG.invalid);\n  }\n\n  /**\n   * Updates setting's value with\n   * active markup from {@link UIPStateModel}\n   */\n  public updateFrom(model: UIPStateModel): void {\n    this.disabled = false;\n    const values = model.getAttribute(this.target, this.attribute);\n\n    if (!values.length) {\n      this.disabled = true;\n      this.setInconsistency(WARNING_MSG.noTarget);\n    } else if (values.some(value => value !== values[0])) {\n      this.setInconsistency(WARNING_MSG.multiple);\n    } else {\n      this.setValue(values[0]);\n    }\n  }\n\n  /**\n   * Checks whether setting's value is valid or not\n   * Use for custom validation\n   */\n  protected isValid(): boolean {\n    return true;\n  }\n\n  /**\n   * Indicates setting's incorrect state\n   * (e.g. multiple attribute values or no target provided)\n   */\n  protected setInconsistency(msg: string = WARNING_MSG.inconsistent): void {\n    return;\n  }\n\n  /**\n   * Disable setting\n   * By default is used when there are no setting's targets\n   */\n  set disabled(force: boolean) {\n    return;\n  }\n\n  /**\n   * Gets setting's value\n   * to update markup in {@link UIPStateModel}\n   */\n  protected abstract getDisplayedValue(): string | boolean;\n\n  /**\n   * Sets setting's value\n   * after processing markup in {@link UIPStateModel}\n   */\n  protected abstract setValue(value: string | null): void;\n}\n","import {bind} from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport type {ESLScrollbar} from '@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar';\n\nimport {UIPPlugin} from '../../core/base/plugin';\nimport {UIPSetting} from './setting';\n\n/**\n * Settings {@link UIPPlugin} custom element definition\n * Container for {@link UIPSetting}\n * @extends UIPPlugin\n */\nexport class UIPSettings extends UIPPlugin {\n  public static is = 'uip-settings';\n\n  /**\n   * Attribute to set all inner {@link UIPSetting settings'}\n   * {@link UIPSetting#target targets}\n   */\n  @attr() public target: string;\n  @attr({defaultValue: 'Settings'}) public label: string;\n\n  /** {@link ESLScrollbar} scroll element */\n  @memoize()\n  public get $scroll(): ESLScrollbar {\n    const $scroll = document.createElement('esl-scrollbar');\n    $scroll.setAttribute('target', '::prev(.settings-list)');\n    return $scroll;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.updateInner();\n  }\n\n  /** Initializes settings layout */\n  protected updateInner() {\n    const $settingsList = document.createElement('div');\n    $settingsList.className = 'settings-list esl-scrollable-content';\n    [...this.childNodes].forEach( (node: HTMLElement) => {\n      $settingsList.appendChild(node);\n    });\n    this.$inner.appendChild($settingsList);\n    this.$scroll && this.$inner.appendChild(this.$scroll);\n    this.appendChild(this.$inner);\n  }\n\n  protected disconnectedCallback(): void {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles `uip:change` event to\n   * apply changes to the state\n   */\n  @listen('uip:change')\n  protected _onSettingChanged(e: any) {\n    e.stopPropagation();\n    if (!this.model) return;\n    (e.target as UIPSetting).applyTo(this.model);\n  }\n\n  /** Collects all {@link UIPSetting} items */\n  protected get settings(): UIPSetting[] {\n    return Array.from(this.getElementsByClassName(UIPSetting.is)) as UIPSetting[];\n  }\n\n  /** Updates {@link UIPSetting} values */\n  @bind\n  protected _onRootStateChange(): void {\n    this.settings.forEach(setting => setting.updateFrom(this.model!));\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\n/**\n * Custom setting for inputting attribute's value\n * @extends UIPSetting\n */\nexport class UIPTextSetting extends UIPSetting {\n  public static is = 'uip-text-setting';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n\n  /** Text input to change setting's value */\n  @memoize()\n  protected get $field(): HTMLInputElement {\n    const $field = document.createElement('input');\n    $field.type = 'text';\n    $field.name = this.label;\n    return $field;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    const label = document.createElement('label');\n    label.innerText = this.label;\n    label.appendChild(this.$field);\n\n    this.innerHTML = '';\n    this.appendChild(label);\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.value;\n  }\n\n  protected setValue(value: string | null): void {\n    this.$field.value = value || '';\n    this.$field.placeholder = '';\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.value = '';\n    this.$field.placeholder = msg;\n  }\n\n  set disabled(force: boolean) {\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","/** Class for processing attribute's tokens */\nexport default class TokenListUtils {\n\n  /**\n   * Divides string by whitespace regexp\n   * @return array of items or empty array\n   */\n  static split(str: string | null): string[] {\n    return str?.split(/\\s+/) || [];\n  }\n\n  /** Creates new string by concatenating all passed elements */\n  static join(values: any[]): string {\n    return values.join(' ');\n  }\n\n  /** Checks if all array elements are equal */\n  static hasSameElements(values: any[]): boolean {\n    return values.every(val => val === values[0]);\n  }\n\n  /** Checks whether two arrays have same elements or not */\n  static equals<T>(arr1: T[], arr2: T[]): boolean {\n    return TokenListUtils.contains(arr1, arr2) && TokenListUtils.contains(arr2, arr1);\n  }\n\n  /** Checks if array contains all elements from subArray */\n  static contains<T>(array: T[], subArray: T[]): boolean {\n    const set = new Set(array);\n    return subArray.every(val => set.has(val));\n  }\n\n  /** Gets array which contains only common elements from arrays */\n  static intersection<T>(...rest: T[][]): T[];\n  static intersection<T>(a: T[], b: T[], ...rest: T[][]): T[] {\n    if (rest.length) return TokenListUtils.intersection(a, TokenListUtils.intersection(b, ...rest));\n    return b ? a.filter(Set.prototype.has, new Set(b)) : a;\n  }\n\n  /** Removes all element appearances from array */\n  static remove<T>(array: T[], element: T): T[] {\n    return array.filter(el => el !== element);\n  }\n}\n","import {attr, boolAttr, listen} from '@exadel/esl/modules/esl-base-element/core';\nimport {randUID} from '@exadel/esl/modules/esl-utils/misc/uid';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport type {ESLSelect} from '@exadel/esl/modules/esl-forms/esl-select/core';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport TokenListUtils from '../../utils/token-list-utils';\nimport {WARNING_MSG} from '../../utils/warning-msg';\nimport {UIPRoot} from '../../registration';\n\n\n/**\n * Custom setting for selecting attribute's value\n * @extends UIPSetting\n */\nexport class UIPSelectSetting extends UIPSetting {\n  public static is = 'uip-select-setting';\n  /** Option displayed when setting has inconsistent state */\n  public static inconsistentValue = 'inconsistent';\n  /** CSS selector for dropdown element */\n  private static dropdownClass = 'uip-select-dropdown';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n  /**\n   * Attribute to set mode for setting\n   * `replace` - replacing [attribute's]{@link UIPSetting#attribute} value with setting's value\n   * `append` - appending [attribute's]{@link UIPSetting#attribute} value to attribute's value\n   */\n  @attr({defaultValue: 'replace'}) public mode: 'replace' | 'append';\n  /** Indicates whether setting supports multiple values selected or not */\n  @boolAttr() public multiple: boolean;\n  /** Select field to change setting's value */\n  @memoize()\n  protected get $field(): ESLSelect {\n    const $field = document.createElement('esl-select');\n    $field.name = this.label;\n    $field.dropdownClass = UIPSelectSetting.dropdownClass;\n    $field.$select = this.select;\n    $field.append(this.select);\n    return $field;\n  }\n\n  /** Label element for input */\n  @memoize()\n  protected get $label(): HTMLLabelElement {\n    const $label = document.createElement('label');\n    $label.innerText = this.label;\n    return $label;\n  }\n\n  /** Collects all options' values */\n  @memoize()\n  protected get settingOptions(): string[] {\n    return this.$field.options.map(opt => opt.value);\n  }\n\n  /** Initialization of {@link ESLSelect} */\n  @memoize()\n  protected get select(): HTMLSelectElement {\n    const select = document.createElement('select');\n    select.setAttribute('esl-select-target', '');\n    select.multiple = this.multiple;\n    select.id = `${UIPSelectSetting.is}-${randUID()}`;\n    this.querySelectorAll('option').forEach(option => select.add(option));\n    return select;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.$label.htmlFor = this.$field.$select.id;\n\n    this.innerHTML = '';\n    this.appendChild(this.$label);\n    this.appendChild(this.$field);\n  }\n\n  applyTo(model: UIPStateModel) {\n    if (this.mode === 'replace') return super.applyTo(model);\n\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      modifier: this.$settings,\n      transform: this.transformValue.bind(this, this.getDisplayedValue())\n    };\n\n    model.changeAttribute(cfg);\n  }\n\n  /** Function to transform(update) attribute value */\n  transformValue(value: string, attrValue: string | null ) {\n    if (!attrValue) return value || null;\n\n    const attrTokens = this.settingOptions.reduce((tokens, option) =>\n      TokenListUtils.remove(tokens, option), TokenListUtils.split(attrValue));\n    value && attrTokens.push(value);\n\n    return TokenListUtils.join(attrTokens);\n  }\n\n  updateFrom(model: UIPStateModel) {\n    this.reset();\n    const attrValues = model.getAttribute(this.target, this.attribute);\n\n    if (!attrValues.length) {\n      this.disabled = true;\n      return this.setInconsistency(WARNING_MSG.noTarget);\n    }\n\n    this.mode === 'replace' ? this.replaceFrom(attrValues) : this.appendFrom(attrValues);\n  }\n\n  /** Updates setting's value for replace {@link mode} */\n  protected replaceFrom(attrValues: (string | null)[]): void {\n    if (!TokenListUtils.hasSameElements(attrValues)) return this.setInconsistency(WARNING_MSG.multiple);\n\n    if (attrValues[0] !== null &&\n      TokenListUtils.contains(this.settingOptions, TokenListUtils.split(attrValues[0]))) {\n      return this.setValue(attrValues[0]);\n    }\n\n    return this.multiple ? this.setValue('') : this.setInconsistency(WARNING_MSG.noMatch);\n  }\n\n  /** Updates setting's value for {@link mode} = \"append\" */\n  protected appendFrom(attrValues: (string | null)[]): void {\n    // array of each attribute's value intersection with select options\n    const valuesOptions = attrValues.map(val => TokenListUtils.intersection(this.settingOptions, TokenListUtils.split(val)));\n\n    // make empty option active if no options intersections among attribute values\n    if (this.settingOptions.includes('') && valuesOptions.every(inter => !inter.length)) {\n      return this.setValue('');\n    }\n\n    // common options among all attribute values\n    const commonOptions = TokenListUtils.intersection(...valuesOptions);\n\n    if (this.multiple || commonOptions.length) return this.setValue(TokenListUtils.join(commonOptions));\n\n    return this.setInconsistency(TokenListUtils.hasSameElements(attrValues) ?\n      WARNING_MSG.noMatch : WARNING_MSG.multiple);\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.values.join(' ');\n  }\n\n  protected setValue(value: string): void {\n    this.$$off(this._onChange);\n    value.split(' ').forEach(opt => this.$field.setSelected(opt, true));\n    this.$$on(this._onChange);\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    const inconsistentOption = new Option(msg, UIPSelectSetting.inconsistentValue,\n      false, true);\n    inconsistentOption.disabled = true;\n\n    this.$field.$select.add(inconsistentOption, 0);\n    this.$field.update();\n  }\n\n  /** Handles setting `change` event to clear inconsistent value */\n  @listen('change')\n  protected clearInconsistency(): void {\n    this.select.remove(this.settingOptions.indexOf(UIPSelectSetting.inconsistentValue));\n  }\n\n\n  /**\n   * Handles {@link UIPRoot} `uip:configchange` event to\n   * manage dropdown theme\n   */\n  @listen({event: 'uip:configchange', target: `::parent(.${UIPRoot.is})`})\n  protected onRootThemeChange(e: CustomEvent): void {\n    if (e.detail.attribute !== 'dark-theme') return;\n    let dropdownClass = UIPSelectSetting.dropdownClass;\n    if (e.detail.value !== null) dropdownClass += ' uip-dark-dropdown';\n    this.$field.dropdownClass = dropdownClass;\n  }\n\n  set disabled(force: boolean) {\n    this.$field.toggleAttribute('disabled', force);\n  }\n\n  /** Resets {@link $field} value. */\n  protected reset(): void {\n    this.disabled = false;\n    this.$field.options.forEach(opt => opt.selected = false);\n    this.$field.$select.remove(this.settingOptions.indexOf(UIPSelectSetting.inconsistentValue));\n  }\n\n  public static register() {\n    customElements.whenDefined('esl-select').then(() => super.register());\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport TokenListUtils from '../../utils/token-list-utils';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\n/**\n * Custom setting to add/remove attributes or append values to attribute\n * @extends UIPSetting\n */\nexport class UIPBoolSetting extends UIPSetting {\n  public static is = 'uip-bool-setting';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n  /**\n   * Value for updating [attribute's]{@link UIPSetting#attribute} value\n   * If it's unset, setting adds/removes [attribute]{@link UIPSetting#attribute}\n   */\n  @attr({defaultValue: ''}) public value: string;\n  /**\n   * Attribute to set mode for setting\n   * `replace` - replacing [attribute's]{@link UIPSetting#attribute} value with setting's value\n   * `append` - appending [attribute's]{@link UIPSetting#attribute} value to attribute's value\n   */\n  @attr({defaultValue: 'replace'}) public mode: 'replace' | 'append';\n\n  /** Checkbox field to change setting's value */\n  @memoize()\n  protected get $field(): HTMLInputElement {\n    const $field = document.createElement('input');\n    $field.type = 'checkbox';\n    $field.name = this.label;\n    return $field;\n  }\n\n  /** Label element for input */\n  @memoize()\n  protected get $label(): HTMLLabelElement {\n    const $label = document.createElement('label');\n    $label.innerText = this.label;\n    $label.append(this.$field);\n    return $label;\n  }\n\n  /** Container element for displaying inconsistency message */\n  @memoize()\n  protected get $inconsistencyMarker(): HTMLElement {\n    const marker = document.createElement('div');\n    marker.classList.add('inconsistency-marker');\n    return marker;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.insertBefore(this.$label, this.firstChild);\n  }\n\n  applyTo(model: UIPStateModel): void {\n    if (this.mode === 'replace') return super.applyTo(model);\n\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      modifier: this.$settings,\n      transform: this.transform.bind(this, this.getDisplayedValue()),\n    };\n\n    model.changeAttribute(cfg);\n  }\n\n  /** Function to transform(update) attribute value */\n  transform(value: string | false,  attrValue: string | null): string | null {\n    if (!attrValue) return value || null;\n\n    const attrTokens = TokenListUtils.remove(TokenListUtils.split(attrValue), this.value);\n    value && attrTokens.push(this.value);\n\n    return TokenListUtils.join(attrTokens);\n  }\n\n  updateFrom(model: UIPStateModel): void {\n    this.disabled = false;\n    const attrValues = model.getAttribute(this.target, this.attribute);\n\n    if (!attrValues.length) {\n      this.disabled = true;\n      return this.setInconsistency(WARNING_MSG.noTarget);\n    }\n\n    this.mode === 'replace' ? this.updateReplace(attrValues) : this.updateAppend(attrValues);\n  }\n\n  /** Updates setting's value for replace {@link mode} */\n  protected updateReplace(attrValues: (string | null)[]): void {\n    if (!TokenListUtils.hasSameElements(attrValues)) {\n      return this.setInconsistency(WARNING_MSG.multiple);\n    }\n\n    return this.setValue((this.value && attrValues[0] !== this.value) ? null : attrValues[0]);\n  }\n\n  /** Updates setting's value for append {@link mode} */\n  protected updateAppend(attrValues: (string | null)[]): void {\n    const containsFunction = (val: string | null) =>\n      TokenListUtils.contains(TokenListUtils.split(val), [this.value]);\n\n    if (attrValues.every(containsFunction)) return this.setValue(this.value);\n    if (!attrValues.some(containsFunction)) return this.setValue(null);\n\n    return this.setInconsistency(WARNING_MSG.multiple);\n  }\n\n  protected getDisplayedValue(): string | false {\n    if (this.value) {\n      return this.$field.checked ? this.value : false;\n    }\n\n    return this.$field.checked ? '' : false;\n  }\n\n  protected setValue(value: string | null): void {\n    if (this.value) {\n      this.$field.checked = value === this.value;\n    } else {\n      this.$field.checked = value !== null;\n    }\n    this.$inconsistencyMarker.remove();\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.checked = false;\n    this.$inconsistencyMarker.innerText = msg;\n    this.append(this.$inconsistencyMarker);\n  }\n\n  set disabled(force: boolean) {\n    this.$inconsistencyMarker.classList.toggle('disabled', force);\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\nexport class UIPSliderSetting extends UIPSetting {\n  public static is = 'uip-slider-setting';\n\n  /** Setting's visible name. */\n  @attr({defaultValue: ''}) public label: string;\n  /** Minimum range value. */\n  @attr({defaultValue: '0'}) public min: string;\n  /** Maximum range value. */\n  @attr({defaultValue: '0'}) public max: string;\n  /** Step for range. */\n  @attr({defaultValue: '0'}) public step: string;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    this.$label.append(this.$field);\n    this.append(this.$label);\n    this.append(this.$fieldValue);\n  }\n\n  protected disconnectedCallback() {\n    this.innerHTML = '';\n    super.disconnectedCallback();\n  }\n\n  /** Range input to change setting's value */\n  @memoize()\n  protected get $field(): HTMLInputElement {\n    const $field = document.createElement('input');\n    $field.type = 'range';\n\n    $field.min = this.min;\n    $field.max = this.max;\n    $field.step = this.step;\n\n    return $field;\n  }\n\n  /** Label element for input */\n  @memoize()\n  protected get $label(): HTMLLabelElement {\n    const $label = document.createElement('label');\n    $label.innerHTML = `<span>${this.label}</span>`;\n    return $label;\n  }\n\n  /** Container for current value */\n  @memoize()\n  protected get $fieldValue(): HTMLDivElement {\n    const $fieldValue = document.createElement('div');\n    $fieldValue.classList.add('slider-value');\n    return $fieldValue;\n  }\n\n  /** Handles `input` event to display its current value */\n  @listen('input')\n  protected updateSliderValue() {\n    this.$fieldValue.textContent = `Value: ${this.$field.value}`;\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.value;\n  }\n\n  protected setValue(value: string | null): void {\n    this.$field.value = value || this.min;\n    this.updateSliderValue();\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.value = this.min;\n    this.$fieldValue.textContent = msg;\n  }\n\n  set disabled(force: boolean) {\n    this.$fieldValue.classList.toggle('disabled', force);\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","import {ESLSelect} from '@exadel/esl/modules/esl-forms/esl-select/core';\nimport {ESLImage} from '@exadel/esl/modules/esl-image/core';\nimport {ESLScrollbar} from '@exadel/esl/modules/esl-scrollbar/core';\nimport {ESLTrigger} from '@exadel/esl/modules/esl-trigger/core';\nimport {ESLToggleable} from '@exadel/esl/modules/esl-toggleable/core';\nimport {ESLAlert} from '@exadel/esl/modules/esl-alert/core';\n\nimport {init} from '../../src/registration';\n\nESLSelect.register();\nESLImage.register();\nESLScrollbar.register();\nESLTrigger.register();\nESLToggleable.register();\nESLAlert.register();\nESLAlert.init();\ninit();\n","import {UIPRoot} from './base/root';\nimport {UIPStateModel, ChangeAttrConfig} from './base/model';\nimport {UIPPlugin} from './base/plugin';\n\nimport {UIPPreview} from './preview/preview';\n\nexport {UIPRoot, UIPPlugin, UIPStateModel, UIPPreview, ChangeAttrConfig};\n\nexport const registerCore = () => {\n  UIPRoot.register();\n  UIPPreview.register();\n};\n","import {UIPHeader} from './header/header';\nimport {UIPOptions} from './header/options/options';\nimport {UIPSnippets} from './header/snippets/snippets';\nimport {UIPEditor} from './editor/editor';\nimport {UIPSettings} from './settings/settings';\nimport {registeredSettings} from '../registration';\n\nexport {UIPOptions, UIPEditor, UIPSettings, UIPSnippets, UIPHeader};\n\nexport const registerPlugins = () => {\n  UIPHeader.register();\n  UIPOptions.register();\n  UIPSnippets.register();\n  UIPEditor.register();\n  registeredSettings().then(() => UIPSettings.register());\n};\n","import {UIPSetting} from '../plugins/settings/setting';\nimport {UIPTextSetting} from './text-setting/text-setting';\nimport {UIPSelectSetting} from './select-setting/select-setting';\nimport {UIPBoolSetting} from './bool-setting/bool-setting';\nimport {UIPSliderSetting} from './slider-setting/slider-setting';\n\nexport {UIPSetting, UIPTextSetting, UIPBoolSetting, UIPSelectSetting, UIPSliderSetting};\n\nexport const registerSettings = () => {\n  UIPBoolSetting.register();\n  UIPTextSetting.register();\n  UIPSelectSetting.register();\n  UIPSliderSetting.register();\n};\n\nexport const registeredSettings = () => {\n  return Promise.all([\n  UIPBoolSetting.registered,\n  UIPTextSetting.registered,\n  UIPSelectSetting.registered,\n  UIPSliderSetting.registered,\n  ]);\n};\n"],"names":["inProgress","bind","target","propertyKey","descriptor","value","TypeError","originalFn","enumerable","configurable","get","getBound","proto","Object","getPrototypeOf","this","desc","set","defineProperty","writable","SyntheticEventTarget","constructor","_listeners","hasEventListener","type","minCount","_a","length","addEventListener","callback","validateEventListenerType","includes","push","assign","removeEventListener","filter","cb","dispatchEvent","e","forEach","listener","call","handleEvent","defaultPrevented","addListener","removeListener","Error","defined","params","param","undefined","getPropertyDescriptor","o","prop","getOwnPropertyDescriptor","extractValues","obj","key","AceTheme","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","id","loaded","__webpack_modules__","m","amdD","n","getter","__esModule","d","a","definition","f","chunkId","Promise","all","keys","reduce","promises","u","g","globalThis","Function","window","prototype","hasOwnProperty","l","url","done","script","needAttach","scripts","document","getElementsByTagName","i","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","fn","setTimeout","head","appendChild","r","Symbol","toStringTag","nmd","paths","children","scriptUrl","importScripts","location","currentScript","replace","p","installedChunks","j","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","self","arg","resolveProperty","val","origin","isObject","toKeyDef","parseKeysPath","path","start","parts","end","substring","isIndex","Math","floor","getByPath","defaultValue","result","Array","isArray","map","parseKeys","curr","toKebabCase","str","toLowerCase","unwrapParenthesis","trim","parseString","String","parseNumber","nanValue","NaN","isNaN","evaluate","console","warn","DEF_FORMAT_MATCHER","getAttr","$el","fallback","$host","setAttr","removeAttribute","attr","config","propName","attrName","dataAttr","buildAttrName","parser","readonly","serializer","boolAttr","readOnly","hasAttribute","buildConditionalDescriptor","ExportNs","root","split","index","exportNs","declare","isMouseEvent","MouseEvent","isTouchEvent","TouchEvent","PASSIVE_EVENTS","isPassiveByDefault","getTouchPoint","source","changedTouches","x","pageX","y","pageY","wrap","arr","uniq","slice","Set","item","add","memoizeFn","hashFn","defaultArgsHashFn","memo","args","apply","cache","has","Map","clear","memoize","originalMethod","locks","defineOwnKeySafe","memoizeGetter","memoizeMethod","WeakMap","delete","isEqual","obj1","obj2","is","keys1","keys2","isSimilar","mask","deep","arrObj","arrMask","comparer","every","itm","property","isRelativeNode","nodeA","nodeB","contains","createSequenceFinder","next","includeSelf","base","predicate","matches","isMatches","el","matcher","findNext","nextElementSibling","findPrev","previousElementSibling","findParent","parentElement","findClosest","findAll","sel","from","querySelectorAll","findChildren","TraversingUtils","isRelative","closestBy","node","skipSelf","current","ESLTraversingQuery_1","ESLTraversingQuery","PROCESSORS_REGEX","ELEMENT_PROCESSORS","concat","COLLECTION_PROCESSORS","RegExp","join","static","selString","els","collection","processors","findFirst","processor","rest","isCollectionProcessor","processedItem","processCollection","traverseChain","processElement","resultCollection","last","stack","max","query","scope","found","part","splitQueries","traverseQuery","term","rootSel","shift","baseCollection","initial","acc","traverse","list","decorators","c","arguments","Reflect","decorate","__decorate","STORE","ESLEventListener","host","handler","defaults","capture","passive","$targets","HTMLElement","delegate","selector","handlerBound","handlerFull","once","unsubscribe","isDelegatedTarget","currentTarget","closest","subscribe","remove","criteria","listeners","instance","eventString","events","terms","deduplicate","splitEvents","subscribed","ESLEventUtils_1","ESLEventUtils","eventName","eventInit","init","bubbles","composed","cancelable","CustomEvent","dispatchCustomEvent","auto","isEventDescriptor","eventDesc","createOrResolve","EventUtils","listen","superDesc","inherit","lockStore","className","locker","elLocks","classLocks","lock","classList","size","unlock","CSSClassUtils","tokenString","cls","tokens","splitTokens","state","ENTER","ESC","SPACE","ARROW_UP","ARROW_DOWN","SYSTEM_KEYS","prototypeConfig","ESLBaseElement","super","_connected","connectedCallback","descriptors","disconnectedCallback","connected","$$on","$$off","condition","$$cls","toggle","$$attr","prevValue","$$fire","dispatch","tagName","customElements","define","registered","whenDefined","ESLSelectWrapper","_mutationObserver","MutationObserver","_onTargetMutation","$select","_$select","select","_onTargetChange","disconnect","_onChange","_onListChange","newTarget","oldTarget","observe","observationConfig","changes","change","addedNodes","removedNodes","_onReset","form","multiple","options","selectedOptions","selected","getOption","find","setSelected","option","isSelected","opt","hasSelected","isAllSelected","disabled","setAllSelected","values","required","validity","validationMessage","willValidate","checkValidity","reportValidity","setCustomValidity","subtree","attributes","attributeFilter","childList","characterData","ownerDocument","rafDecorator","lastArgs","requestAnimationFrame","decorator","decoratedFn","ESLSelectRenderer","$remove","$container","$text","$rest","owner","then","render","hasValue","toggleAttribute","applyItems","text","items","limit","textContent","match","format","moreLabelFormat","scrollWidth","clientWidth","_onClear","stopPropagation","preventDefault","_onResize","jsonAttr","JSON","stringify","buildJsonAttrDescriptor","ns","sequences","__esl_sequences__","userAgent","vendor","platform","navigator","isTrident","test","isIE","isEdgeHTML","isBlinkEdge","isEdge","isGecko","isFirefox","isOpera","isChrome","isWebkit","isSafari","isBlink","isBot","isAndroid","isMobileIOS13","maxTouchPoints","isMobileIOS","isLegacyMobile","isMobile","isMobileSafari","isTouchDevice","navApi","msMaxTouchPoints","Touch","hasHover","matchMedia","TOUCH_EVENTS","START","MOVE","END","DeviceDetector","DelayedTask","_fn","_timeout","run","put","task","delay","cancel","activators","ESLToggleable","_open","_task","_trackHover","noAutoId","tag","prefix","uid","sequentialUID","initiallyOpened","setInitialState","attributeChangedCallback","oldVal","newVal","open","initiator","showDelay","hideDelay","GROUP_CHANGED_EVENT","detail","oldGroupName","newGroupName","initialParams","bindOutsideEventTracking","track","_onOutsideAction","bindHoverStateTracking","_trackHoverDelay","_onMouseEnter","_onMouseLeave","mergeDefaultParams","defaultParams","copy","show","hide","showTask","closeOnOutsideAction","trackHover","hideTask","force","silent","BEFORE_SHOW_EVENT","activator","onShow","SHOW_EVENT","BEFORE_HIDE_EVENT","onHide","HIDE_EVENT","activeClass","body","bodyClass","updateA11y","REFRESH_EVENT","$a11yTarget","querySelector","targetEl","isOutsideAction","KeyboardEvent","_onCloseClick","_onKeyboardEvent","closeOnEsc","baseParams","trackHoverParams","buildRequestParams","_onShowRequest","_onHideRequest","observedAttributes","closeTrigger","SHOW_REQUEST_EVENT","HIDE_REQUEST_EVENT","ready","readyState","RTLUtils","getComputedStyle","direction","scrollType","createTextNode","dir","style","position","top","width","height","fontSize","overflow","createDummyEl","scrollLeft","isRtl","ESLScrollbar","_deferredDrag","_onPointerDrag","_deferredRefresh","refresh","_scrollTimer","_resizeObserver","ResizeObserver","rec","updateContentObserve","findTarget","unbindTargetEvents","$target","first","_$target","content","bindTargetEvents","innerHTML","$scrollbarTrack","trackClass","$scrollbarThumb","thumbClass","documentElement","_onScrollOrResize","recs","contentChanges","Element","unobserve","scrollableSize","horizontal","scrollHeight","clientHeight","trackOffset","offsetWidth","offsetHeight","thumbOffset","thumbSize","areaSize","scrollSize","min","scrollOffset","normalizeScrollLeft","scrollTop","scrollTargetTo","normalizePosition","update","relativePosition","pos","scrollTo","behavior","dragging","thumbPosition","updateMarkers","toPosition","point","offset","props","getBoundingClientRect","scrollY","left","scrollX","getOffsetPoint","_onPointerDown","_initialPosition","_pointerPosition","_initialMousePosition","_onThumbPointerDown","_onPointerDownTick","_onPointerUp","allowedOffset","noContinuousScroll","setProperty","_onBodyClick","_onPointerMove","positionChange","scrollableAreaHeight","absChange","removeProperty","stopImmediatePropagation","_onRefresh","ESLSelectItem_1","ESLSelectItem","tabIndex","original","ESLSelectList","register","$list","$scroll","$selectAll","_updateDisabled","bindSelect","HTMLSelectElement","_renderItems","$items","build","pinSelected","_renderGroup","_updateSelectAll","selectAllLabel","_onClick","_onKeydown","indexOf","activeElement","count","increment","focus","ESLSelectDropdown","_deferredUpdatePosition","updatePosition","_disposeTimeout","$owner","dropdownClass","focusable","preventScroll","_onTabKey","shiftKey","windowY","pageYOffset","rect","ESLSelect","$renderer","$dropdown","_prepare","_updateMarkers","_dispose","valueChanged","emptyText","placeholder","hasValueClass","focusEl","hasFocus","hasFocusClass","_onFocusOut","click","_onPopupStateChange","deepMerge","objects","res","ESLScreenDPR_1","ESLScreenDPR","dpr","toFixed","VALUE_REGEXP","parseFloat","ignoreBotsDpr","toDPI","ESLScreenBreakpoints_1","registry","ESLScreenBreakpoints","minWidth","maxWidth","BP_NAME_REGEXP","ESLScreenBreakpoint","names","sign","bp","BP_REGEXP","shortcut","mediaQueryGE","mediaQueryLE","mediaQuery","toString","shortcuts","ESLEnvShortcuts","_shortcuts","MediaQueryConstCondition","_matches","optimize","eq","ALL","NOT_ALL","ESLMediaChangeEvent","Event","media","MediaQueryCondition","inverted","_inverted","_mq","MediaQueryContainer","MediaQueryConjunction","optimizedItems","MediaQueryDisjunction","pretty","ESLMediaQuery_1","ESLMediaQuery","preprocessor","_preprocessors","unshift","conjunctions","conditions","parseSimpleQuery","SHORTCUT_PATTERN","replacer","process","queryInverted","processedQuery","preprocess","sanitizedQuery","invert","use","ESLMediaRule","payload","payloadValue","lex","create","ESLMediaRuleList_1","ESLMediaRuleListEvent","previous","iObserver","ESLMediaRuleList","common","pop","parseTuple","parseQuery","rules","parse","rule","queries","valueList","validRules","_rules","_onMatchChanged","_value","computedValue","active","activeValue","activeValues","curValue","newValue","getIObserver","IntersectionObserver","entries","handleViewport","threshold","rootMargin","entry","image","isIntersecting","intersectionRatio","triggerLoad","STRING_PARSER","OBJECT_PARSER","sanitizeElAttributes","isDangerousAttribute","removeDangerousAttributes","EMPTY_IMAGE","isEmptyImage","STRATEGIES","img","shadowImg","isEmpty","backgroundImage","paddingTop","innerImg","attachInnerImage","removeInnerImage","devicePixelRatio","XMLHttpRequest","onreadystatechange","status","html","allowedTopLevelTags","DOMParser","parseFromString","removeScripts","childNodes","filterElements","sanitize","responseText","send","ESLImage_1","ESLImage","alt","srcRules","_onMediaMatchChange","lazyObservable","_detachLazyTrigger","_srcRules","changeMode","lazyTriggered","currentSrc","_currentSrc","empty","canUpdate","lazy","originalWidth","_shadowImageElement","originalHeight","mode","clearImage","syncImage","getPath","_shadowImg","refreshOnUpdate","complete","_shadowImgError","_onError","_onLoad","role","innerImage","srcBase","updateContainerClasses","strategy","_strategy","_innerImg","innerImageClass","cloneNode","Image","naturalHeight","_onReadyState","successful","LOAD_EVENT","ERROR_EVENT","READY_EVENT","containerClass","DEFAULT_CONTAINER_CLS","isLoadState","containerClassState","containerClassTarget","ESLToggleablePlaceholder","$placeholder","$origin","copyAttributesFromOrigin","allowedAttrs","ESLTrigger","updateTargetFromSelector","newPopupInstance","_onTargetStateChange","a11yTarget","a11yLabel","a11yLabelActive","a11yLabelInactive","allowHover","allowClick","trackClick","initA11y","isTargetIgnored","ignore","$ignore","mergeToggleableParams","showTarget","actionParams","hideTarget","toggleTarget","updateState","isActive","wasActive","clsTarget","activeClassTarget","originalEvent","CHANGE_EVENT","_onPrimaryEvent","ignoreEsc","hoverShowDelay","hoverHideDelay","that","OBSERVED_EVENTS","ESLAlert_1","ESLAlert","alert","defaultConfig","$content","iframe","createZIndexIframe","_clearTimeout","hideTime","activeCls","UIPStateModel","fire","_html","_isFired","setHtml","markup","modifier","_lastModifier","dispatchChange","lastModifier","snippets","_snippets","activeSnippet","_activeSnippet","applySnippet","snippet","changeAttribute","cfg","attribute","elements","transform","transformed","UIPRoot","model","$snippets","SNIPPET_SEL","initSnippets","addStateListener","removeStateListener","UIPPlugin","$inner","pluginType","_onRootStateChange","UIPPreview","clearInlineSize","UIPSnippets","currentIndex","$snippetList","$title","$dropdownControl","$dropdownWrapper","LIST_ITEM","updateTitleText","$active","onOutsideAction","toggleDropdown","ACTIVE_ITEM","renderDropdown","title","buildListItem","label","$li","_onItemClick","_onDropdownClick","UIPOption","optionConfig","optionValue","$root","toggleState","UIPOptions","UIPOptionsConfig","elem","optionsCfg","canActivate","createEl","append","_onRootConfigChange","_onOptionClick","component","UIPHeader","childElementCount","autofill","renderSnippets","renderOptions","renderCopy","snippetsEl","prepend","optionsEl","icon","_onCopyClick","clipboard","writeText","promisifyEvent","eventCallback","createDeferred","rej","PromiseUtils","debounce","wait","thisArg","deferred","debouncedSubject","fromTimeout","isReject","fromEvent","fromMarker","marker","repeat","repeatSequence","tryUntil","tryCount","check","UIPEditor","collapsedAttribute","initEditor","editor","destroy","resizeObserver","Ace","Editor","setConfig","editorConfig","getValue","setValue","updateEditorConfig","resize","theme","WARNING_MSG","UIPSetting","$settings","UIPSettings","applyTo","getDisplayedValue","isValid","setInconsistency","updateFrom","msg","updateInner","$settingsList","_onSettingChanged","settings","getElementsByClassName","setting","UIPTextSetting","$field","innerText","TokenListUtils","arr1","arr2","array","subArray","b","intersection","element","UIPSelectSetting","$label","settingOptions","Date","now","round","random","randUID","htmlFor","transformValue","attrValue","attrTokens","reset","attrValues","replaceFrom","appendFrom","hasSameElements","valuesOptions","inter","commonOptions","inconsistentOption","Option","inconsistentValue","clearInconsistency","onRootThemeChange","UIPBoolSetting","$inconsistencyMarker","insertBefore","firstChild","updateReplace","updateAppend","containsFunction","checked","UIPSliderSetting","$fieldValue","step","updateSliderValue"],"sourceRoot":""}