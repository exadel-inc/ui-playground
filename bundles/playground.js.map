{"version":3,"file":"playground.js","mappings":"6BAAIA,E,oECGG,SAASC,EAAKC,EAAQC,EAAaC,GAEtC,IAAKA,GAA2C,mBAArBA,EAAWC,MAClC,MAAM,IAAIC,UAAU,iDAGxB,MAAMC,EAAaH,EAAWC,MAC9B,OAAOD,EAAa,CAChBI,WAAYJ,EAAWI,WACvBC,cAAc,EACdC,IAAK,SAASC,IACV,MAAMC,EAAQC,OAAOC,eAAeC,MAC9BC,GAAO,QAAsBJ,EAAOT,GAE1C,OADqBa,GAAQA,EAAKN,MAAQC,EACPI,KAAKZ,GAAeI,EAAWN,KAAKc,MAAlDR,CACzB,EACAU,IAAIZ,GACAQ,OAAOK,eAAeH,KAAMZ,EAAa,CACrCE,QACAc,UAAU,EACVV,cAAc,EACdD,WAAYJ,EAAWI,YAE/B,EAER,C,sDCvBO,MAAMY,EACTC,cACIN,KAAKO,WAAa,CAAC,CACvB,CACAC,iBAAiBC,EAAO,SAAUC,EAAW,GACzC,IAAIC,EACJ,MAAoB,iBAATF,EACAT,KAAKQ,iBAAiB,SAAUC,GAAQ,IACV,QAAhCE,EAAKX,KAAKO,WAAWE,UAA0B,IAAPE,OAAgB,EAASA,EAAGC,QAAUF,CAC3F,CACAG,iBAAiBJ,EAAMK,GACnB,GAAoB,iBAATL,EACP,OAAOT,KAAKa,iBAAiB,SAAUJ,GAC3CM,EAA0BD,GACtBd,KAAKO,WAAWE,IAAST,KAAKO,WAAWE,GAAMO,SAASF,KAExDd,KAAKO,WAAWE,GAChBT,KAAKO,WAAWE,GAAMQ,KAAKH,GAE3BhB,OAAOoB,OAAOlB,KAAKO,WAAY,CAAE,CAACE,GAAO,CAACK,KAClD,CACAK,oBAAoBV,EAAMK,GACtB,GAAoB,iBAATL,EACP,OAAOT,KAAKmB,oBAAoB,SAAUV,GAC9CM,EAA0BD,GACrBd,KAAKO,WAAWE,KAErBT,KAAKO,WAAWE,GAAQT,KAAKO,WAAWE,GAAMW,QAAQC,GAAOA,IAAOP,IACxE,CACAQ,cAAcC,GACV,IAAIZ,EACJ,MAAMxB,EAAS,IAAMa,KAUrB,OATAF,OAAOK,eAAeoB,EAAG,SAAU,CAAE5B,IAAKR,EAAQM,YAAY,IAC9DK,OAAOK,eAAeoB,EAAG,gBAAiB,CAAE5B,IAAKR,EAAQM,YAAY,IACrEK,OAAOK,eAAeoB,EAAG,aAAc,CAAE5B,IAAKR,EAAQM,YAAY,IAC/B,QAAlCkB,EAAKX,KAAKO,WAAWgB,EAAEd,aAA0B,IAAPE,GAAyBA,EAAGa,SAASC,IACpD,mBAAbA,EACPA,EAASC,KAAK1B,KAAMuB,GAEpBE,EAASE,YAAYD,KAAKD,EAAUF,EAAE,IAEvCA,EAAEK,gBACb,CAEAC,YAAYR,GACRrB,KAAKa,iBAAiBQ,EAC1B,CAEAS,eAAeT,GACXrB,KAAKmB,oBAAoBE,EAC7B,EAEJ,SAASN,EAA0BD,GAC/B,IAAKA,GAAgC,mBAAbA,GAA2D,mBAAzBA,EAASa,YAC/D,MAAMI,MAAM,uDAEpB,C,sBC5DO,SAASC,KAAWC,GACvB,IAAK,MAAMC,KAASD,EAChB,QAAcE,IAAVD,EACA,OAAOA,CAEnB,CAEO,SAASE,EAAsBC,EAAGC,GACrC,IAAIzC,EAAQwC,EACZ,KAAOxC,GAAO,CACV,MAAMI,EAAOH,OAAOyC,yBAAyB1C,EAAOyC,GACpD,GAAIrC,EACA,OAAOA,EACXJ,EAAQC,OAAOC,eAAeF,EAClC,CACJ,C,8ECDA,IAAY2C,E,gCAAZ,SAAYA,GAEV,2BAEA,iCACD,CALD,CAAYA,IAAAA,EAAQ,I,GCdhBC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBR,IAAjBS,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CACjDI,GAAIJ,EACJK,QAAQ,EACRH,QAAS,CAAC,GAUX,OANAI,EAAoBN,GAAUG,EAAQA,EAAOD,QAASH,GAGtDI,EAAOE,QAAS,EAGTF,EAAOD,OACf,CAGAH,EAAoBQ,EAAID,EC5BxBP,EAAoBS,KAAO,WAC1B,MAAM,IAAIpB,MAAM,iCACjB,ECDAW,EAAoBU,EAAI,SAASN,GAChC,IAAIO,EAASP,GAAUA,EAAOQ,WAC7B,WAAa,OAAOR,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoBa,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CACR,ECNAX,EAAoBa,EAAI,SAASV,EAASY,GACzC,IAAI,IAAIC,KAAOD,EACXf,EAAoBL,EAAEoB,EAAYC,KAAShB,EAAoBL,EAAEQ,EAASa,IAC5E5D,OAAOK,eAAe0C,EAASa,EAAK,CAAEjE,YAAY,EAAME,IAAK8D,EAAWC,IAG3E,ECPAhB,EAAoBiB,EAAI,CAAC,EAGzBjB,EAAoBnB,EAAI,SAASqC,GAChC,OAAOC,QAAQC,IAAIhE,OAAOiE,KAAKrB,EAAoBiB,GAAGK,QAAO,SAASC,EAAUP,GAE/E,OADAhB,EAAoBiB,EAAED,GAAKE,EAASK,GAC7BA,CACR,GAAG,IACJ,ECPAvB,EAAoBwB,EAAI,SAASN,GAEhC,OAAyB,MAAZA,EAAkB,aAAeA,GAAW,KAC1D,ECJAlB,EAAoByB,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOpE,MAAQ,IAAIqE,SAAS,cAAb,EAGhB,CAFE,MAAO9C,GACR,GAAsB,iBAAX+C,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB5B,EAAoBL,EAAI,SAASkC,EAAKjC,GAAQ,OAAOxC,OAAO0E,UAAUC,eAAe/C,KAAK6C,EAAKjC,EAAO,EZAlGrD,EAAa,CAAC,EAGlByD,EAAoBgC,EAAI,SAASC,EAAKC,EAAMlB,EAAKE,GAChD,GAAG3E,EAAW0F,GAAQ1F,EAAW0F,GAAK1D,KAAK2D,OAA3C,CACA,IAAIC,EAAQC,EACZ,QAAW3C,IAARuB,EAEF,IADA,IAAIqB,EAAUC,SAASC,qBAAqB,UACpCC,EAAI,EAAGA,EAAIH,EAAQnE,OAAQsE,IAAK,CACvC,IAAIC,EAAIJ,EAAQG,GAChB,GAAGC,EAAEC,aAAa,QAAUT,EAAK,CAAEE,EAASM,EAAG,KAAO,CACvD,CAEGN,IACHC,GAAa,GACbD,EAASG,SAASK,cAAc,WAEzBC,QAAU,QACjBT,EAAOU,QAAU,IACb7C,EAAoB8C,IACvBX,EAAOY,aAAa,QAAS/C,EAAoB8C,IAGlDX,EAAOa,IAAMf,GAEd1F,EAAW0F,GAAO,CAACC,GACnB,IAAIe,EAAmB,SAASC,EAAMC,GAErChB,EAAOiB,QAAUjB,EAAOkB,OAAS,KACjCC,aAAaT,GACb,IAAIU,EAAUhH,EAAW0F,GAIzB,UAHO1F,EAAW0F,GAClBE,EAAOqB,YAAcrB,EAAOqB,WAAWC,YAAYtB,GACnDoB,GAAWA,EAAQzE,SAAQ,SAAS4E,GAAM,OAAOA,EAAGP,EAAQ,IACzDD,EAAM,OAAOA,EAAKC,EACtB,EACIN,EAAUc,WAAWV,EAAiBzG,KAAK,UAAMiD,EAAW,CAAE1B,KAAM,UAAWtB,OAAQ0F,IAAW,MACtGA,EAAOiB,QAAUH,EAAiBzG,KAAK,KAAM2F,EAAOiB,SACpDjB,EAAOkB,OAASJ,EAAiBzG,KAAK,KAAM2F,EAAOkB,QACnDjB,GAAcE,SAASsB,KAAKC,YAAY1B,EAnCkB,CAoC3D,EavCAnC,EAAoB8D,EAAI,SAAS3D,GACX,oBAAX4D,QAA0BA,OAAOC,aAC1C5G,OAAOK,eAAe0C,EAAS4D,OAAOC,YAAa,CAAEpH,MAAO,WAE7DQ,OAAOK,eAAe0C,EAAS,aAAc,CAAEvD,OAAO,GACvD,ECNAoD,EAAoBiE,IAAM,SAAS7D,GAGlC,OAFAA,EAAO8D,MAAQ,GACV9D,EAAO+D,WAAU/D,EAAO+D,SAAW,IACjC/D,CACR,E,WCJA,IAAIgE,EACApE,EAAoByB,EAAE4C,gBAAeD,EAAYpE,EAAoByB,EAAE6C,SAAW,IACtF,IAAIhC,EAAWtC,EAAoByB,EAAEa,SACrC,IAAK8B,GAAa9B,IACbA,EAASiC,gBACZH,EAAY9B,EAASiC,cAAcvB,MAC/BoB,GAAW,CACf,IAAI/B,EAAUC,EAASC,qBAAqB,UACzCF,EAAQnE,SAAQkG,EAAY/B,EAAQA,EAAQnE,OAAS,GAAG8E,IAC5D,CAID,IAAKoB,EAAW,MAAM,IAAI/E,MAAM,yDAChC+E,EAAYA,EAAUI,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,YAAa,KACpFxE,EAAoByE,EAAIL,C,eCVxB,IAAIM,EAAkB,CACrB,IAAK,GAGN1E,EAAoBiB,EAAE0D,EAAI,SAASzD,EAASK,GAE1C,IAAIqD,EAAqB5E,EAAoBL,EAAE+E,EAAiBxD,GAAWwD,EAAgBxD,QAAWzB,EACtG,GAA0B,IAAvBmF,EAGF,GAAGA,EACFrD,EAAShD,KAAKqG,EAAmB,QAC3B,CAGL,IAAIC,EAAU,IAAI1D,SAAQ,SAAS2D,EAASC,GAAUH,EAAqBF,EAAgBxD,GAAW,CAAC4D,EAASC,EAAS,IACzHxD,EAAShD,KAAKqG,EAAmB,GAAKC,GAGtC,IAAI5C,EAAMjC,EAAoByE,EAAIzE,EAAoBwB,EAAEN,GAEpD8D,EAAQ,IAAI3F,MAgBhBW,EAAoBgC,EAAEC,GAfH,SAASkB,GAC3B,GAAGnD,EAAoBL,EAAE+E,EAAiBxD,KAEf,KAD1B0D,EAAqBF,EAAgBxD,MACRwD,EAAgBxD,QAAWzB,GACrDmF,GAAoB,CACtB,IAAIK,EAAY9B,IAAyB,SAAfA,EAAMpF,KAAkB,UAAYoF,EAAMpF,MAChEmH,EAAU/B,GAASA,EAAM1G,QAAU0G,EAAM1G,OAAOuG,IACpDgC,EAAMG,QAAU,iBAAmBjE,EAAU,cAAgB+D,EAAY,KAAOC,EAAU,IAC1FF,EAAMI,KAAO,iBACbJ,EAAMjH,KAAOkH,EACbD,EAAMK,QAAUH,EAChBN,EAAmB,GAAGI,EACvB,CAEF,GACyC,SAAW9D,EAASA,EAE/D,CAEH,EAaA,IAAIoE,EAAuB,SAASC,EAA4BC,GAC/D,IAKIvF,EAAUiB,EALVuE,EAAWD,EAAK,GAChBE,EAAcF,EAAK,GACnBG,EAAUH,EAAK,GAGIhD,EAAI,EAC3B,GAAGiD,EAASG,MAAK,SAASvF,GAAM,OAA+B,IAAxBqE,EAAgBrE,EAAW,IAAI,CACrE,IAAIJ,KAAYyF,EACZ1F,EAAoBL,EAAE+F,EAAazF,KACrCD,EAAoBQ,EAAEP,GAAYyF,EAAYzF,IAG7C0F,GAAsBA,EAAQ3F,EAClC,CAEA,IADGuF,GAA4BA,EAA2BC,GACrDhD,EAAIiD,EAASvH,OAAQsE,IACzBtB,EAAUuE,EAASjD,GAChBxC,EAAoBL,EAAE+E,EAAiBxD,IAAYwD,EAAgBxD,IACrEwD,EAAgBxD,GAAS,KAE1BwD,EAAgBxD,GAAW,CAG7B,EAEI2E,EAAqBC,KAAmB,aAAIA,KAAmB,cAAK,GACxED,EAAmB/G,QAAQwG,EAAqB9I,KAAK,KAAM,IAC3DqJ,EAAmBtH,KAAO+G,EAAqB9I,KAAK,KAAMqJ,EAAmBtH,KAAK/B,KAAKqJ,G,eCtFhF,MAEM,EAAYE,GAAQA,EAEpBC,EAAkB,CAACC,EAAKC,IAA0B,mBAARD,EAAqBA,EAAIjH,KAAKkH,EAAQA,GAAUD,ECJ1FE,EAAYtE,KAAUA,GAAsB,iBAARA,ECC3CuE,EAAYpF,GAAuB,iBAARA,EAAmBA,EAAM,CAAEA,OAQtDqF,EAAiBC,IACnB,IAAIC,EAAQ,EACZ,MAAMC,EAAQ,GACd,KAAOD,EAAQD,EAAKpI,QAAQ,CACxB,IAAIuI,EAAMF,KAAkC,MAAhBD,EAAKC,IACjC,GAAoB,MAAhBD,EAAKC,GAAgB,CAErB,IADAE,IAAQF,EACDE,EAAMH,EAAKpI,QAAwB,MAAdoI,EAAKG,MAC3BA,EACN,MAAMzF,EAAMsF,EAAKI,UAAUH,EAAOE,GAC5BE,GAAW3F,GAAO4F,KAAKC,OAAO7F,MAAUA,EAC9CwF,EAAMjI,KAAK,CAAEyC,MAAK2F,YAClBJ,IAAUE,CACd,KACK,CACD,KAAOA,EAAMH,EAAKpI,QAAwB,MAAdoI,EAAKG,IAA8B,MAAdH,EAAKG,MAChDA,EACN,MAAMzF,EAAMsF,EAAKI,UAAUH,EAAOE,GAClCD,EAAMjI,KAAK,CAAEyC,QACbuF,EAAQE,CACZ,CACJ,CACA,OAAOD,CAAK,EAmBHM,EAAY,CAACtB,EAAMc,EAAMS,KAClC,MACMC,EAjDe,CAACV,GAClBW,MAAMC,QAAQZ,GACPA,EAAKa,IAAIf,GACbC,EAAcC,GAAQ,KA6ChBc,CAAUd,GACHhF,QAAO,CAAC+F,GAAQrG,UAChC,GDnD6BmF,EAARtE,ECmDJwF,IDnD4C,mBAARxF,ECoDjD,OAAOwF,EAAKrG,GDpDI,IAACa,CCqDL,GACjB2D,GACH,YAAyB,IAAXwB,EAAyBD,EAAeC,CAAM,ECxDnDM,EAAeC,GACjBA,EAAI/C,QAAQ,kBAAmB,SAASA,QAAQ,UAAW,KAAKgD,cAc9DC,EAAqBF,GACvBA,EAAIG,OAAOlD,QAAQ,aAAc,MAAMkD,OAGrCC,EAAe1B,GAAQ2B,OAAO3B,QAAiCA,EAAM,IAOrE4B,EAAc,CAACN,EAAKO,KAC7B,GAAY,IAARP,EACA,OAAO,EACX,MAAM3K,IAAU2K,GAAOQ,KACvB,OAAOC,MAAMpL,GAASkL,EAAWlL,CAAK,EAiBnC,SAASqL,EAASV,EAAKR,GAC1B,IAEI,OAAOQ,EAAM,IAAK5F,SAAS,UAAU4F,IAAxB,GAAoCR,CAKrD,CAHA,MAAOlI,GAEH,OADAqJ,QAAQC,KAAK,sBAAuBZ,EAAK1I,GAClCkI,CACX,CACJ,CAEO,MAAMqB,EAAqB,wBCtD3B,SAASC,EAAQC,EAAKlD,EAAMmD,EAAW,MACtC,UAAWD,IACXA,EAAMA,EAAIE,OACd,MAAM5L,EAAQ0L,EAAI5F,aAAa0C,GAC/B,OAAiB,OAAVxI,EAAiB2L,EAAW3L,CACvC,CAEO,SAAS6L,EAAQH,EAAKlD,EAAMxI,GAC3B,UAAW0L,IACXA,EAAMA,EAAIE,OACV5L,UAAmD,IAAVA,EACzC0L,EAAII,gBAAgBtD,GAGpBkD,EAAIvF,aAAaqC,GAAgB,IAAVxI,EAAiB,GAAKA,EAErD,CCnBA,MAMa+L,EAAO,CAACC,EAAS,CAAC,IACpB,CAACnM,EAAQoM,KACZ,MAAMC,EARQ,EAACD,EAAUE,IAAaA,EAAW,QAAQzB,EAAYuB,KAAcvB,EAAYuB,GAQ9EG,CAAcJ,EAAOxD,MAAQyD,IAAYD,EAAOG,UACjE,SAAS9L,IACL,MAAMgJ,EAAMoC,EAAQ/K,KAAMwL,GAC1B,OAAY,OAAR7C,GAAgB,iBAAkB2C,EAC3BA,EAAO7B,cACV6B,EAAOK,QAAUtB,GAAa1B,EAC1C,CAIA7I,OAAOK,eAAehB,EAAQoM,EAAUD,EAAOM,SAAW,CAAEjM,OAAQ,CAAEA,MAAKO,IAH3E,SAAaZ,GACT6L,EAAQnL,KAAMwL,GAAWF,EAAOO,YAAc,GAAUvM,GAC5D,GACiF,ECJ5EwM,EAAW,CAACR,EAAS,CAAC,IACxB,CAACnM,EAAQoM,KACZ,MAAMC,EARQ,EAACD,EAAUE,IAAaA,EAAW,QAAQzB,EAAYuB,KAAcvB,EAAYuB,GAQ9E,CAAcD,EAAOxD,MAAQyD,IAAYD,EAAOG,UACjE3L,OAAOK,eAAehB,EAAQoM,EAlBtC,SAAoCC,EAAUO,GAC1C,SAASpM,IACL,OFHqBmI,EEGA0D,EFFrB,UADgBR,EEGDhL,QFDfgL,EAAMA,EAAIE,OACPF,EAAIgB,aAAalE,GAHrB,IAAiBkD,EAAKlD,CEIzB,CAIA,OAAOiE,EAAW,CAAEpM,OAAQ,CAAEA,MAAKO,IAHnC,SAAaZ,GACT6L,EAAQnL,KAAMwL,IAAYlM,EAC9B,EAEJ,CAUgD2M,CAA2BT,IAAYF,EAAOM,UAAU,ECgBjG,SAASM,EAASpE,GACrB,OAAQhF,GAjBY,EAACgF,EAAMhF,KApBf,QAqBKwB,QAjBrB,SAAgB6H,EAAMrE,EAAMxI,GACxBwI,EAAKsE,MAAM,KAAKpI,QAAO,CAACO,EAAKb,EAAK2I,EAAOnD,KACrC,GAAIA,EAAMtI,SAAWyL,EAAQ,EACzB,OAAQ9H,EAAIb,GAAOa,EAAIb,IAAQpE,EAEnC,MAAMmB,SAAc8D,EAAIb,GACxB,GAAa,cAATjD,GAAiC,WAATA,GAA8B,aAATA,EAC7C,MAAM,IAAIsB,MAAM,kBAAkBzC,QAAYwI,KAElD,OAAQvD,EAAIb,GAAOa,EAAIb,IAAQ,CAAC,CAAE,GACnCyI,EACP,CAQI,CAAO7H,OAAc,IAAGwD,EAAMhF,EAAO,EAclBwJ,CAASxE,GAAQhF,EAAOgF,KAAMhF,EACrD,CAEAoJ,EAASK,QAAU,KACX,QAASjI,QAEbxE,OAAOK,eAAemE,OAAQ,MAAO,CAAEhF,MAAO,CAAC,GAAI,EC1ChD,MAAMkN,EAAgB3G,GAAUvB,OAAOmI,YAAc5G,aAAiB4G,WAEhEC,EAAgB7G,GAAUvB,OAAOqI,YAAc9G,aAAiB8G,WAGvEC,EAAiB,CAAC,QAAS,aAAc,aAAc,aAKhDC,EAAsBhH,GAAU+G,EAAe5L,SAAS6E,GAOxDiH,EAAiBjH,IAC1B,MAAMkH,EAASL,EAAa7G,GAASA,EAAMmH,eAAe,GAAKnH,EAC/D,MAAO,CACHoH,EAAGF,EAAOG,MACVC,EAAGJ,EAAOK,MACb,ECXQC,EAAQC,GACbA,QACO,GACP3D,MAAMC,QAAQ0D,GACPA,EACJ,CAACA,GAMCC,EAAQD,IACjB,GAAIA,EAAI1M,OAAS,EACb,OAAO0M,EAAIE,MAAM,GACrB,MAAM9D,EAAS,GACTxJ,EAAM,IAAIuN,IAGhB,OAFAH,EAAI9L,SAASkM,GAASxN,EAAIyN,IAAID,KAC9BxN,EAAIsB,SAASkM,GAAShE,EAAOzI,KAAKyM,KAC3BhE,CAAM,ECzBV,SAASkE,EAAUxH,EAAIyH,EAASC,GACnC,SAASC,KAAQC,GACb,MAAMtK,EAAMmK,KAAUG,GACtB,OAAY,OAARtK,GAA+B,iBAARA,GACvBkH,QAAQC,KAAK,yBAAyBzE,EAAG0B,cAClC1B,EAAG6H,MAAMjO,KAAMgO,KAErBD,EAAKG,MAAMC,IAAIzK,IAChBqK,EAAKG,MAAMhO,IAAIwD,EAAK0C,EAAG6H,MAAMjO,KAAMgO,IAEhCD,EAAKG,MAAMvO,IAAI+D,GAC1B,CAOA,OANAqK,EAAKG,MAAQ,IAAIE,IACjBL,EAAKM,MAAQ,IAAMN,EAAKG,MAAMG,QAC9BN,EAAKI,IAAM,IAAIH,KACX,MAAMtK,EAAMmK,KAAUG,GACtB,YAAe7L,IAARuB,GAA4BqK,EAAKG,MAAMC,IAAIzK,EAAI,EAEnDqK,CACX,CAKO,SAASD,KAAqBE,GACjC,OAAoB,IAAhBA,EAAKpN,OACE,KACPoN,EAAKpN,OAAS,GAEK,iBAAZoN,EAAK,IAAsC,iBAAZA,EAAK,IAAsC,kBAAZA,EAAK,QAF9E,EAIO1D,OAAO0D,EAAK,GACvB,C,aC/BO,SAASM,EAAQT,EAASC,GAC7B,OAAO,SAAU3O,EAAQmD,EAAMjD,GAC3B,IAAKA,GAA8D,mBAAxCA,EAAWC,OAASD,EAAWM,KACtD,MAAM,IAAIJ,UAAU,qEVGL,IAACgF,IUDJpF,EVCYW,OAAO2E,eAAe/C,KAAK6C,EAAK,gBUC7B,mBAAnBlF,EAAWM,MAAwBN,EAAWM,IAkBlE,SAAuB4O,EAAgBjM,GACnC,OAAO,WACH,GAAIkM,EAAM7O,IAAIK,QAAUsC,EACpB,OAAOiM,EACX,MAAMjP,EAAQiP,EAAe7M,KAAK1B,MAElC,OADAyO,EAAiBzO,KAAMsC,EAAMhD,GACtBA,CACX,CACJ,CA1BwEoP,CAAcrP,EAAWM,IAAK2C,IAC7D,mBAArBjD,EAAWC,QAA0BD,EAAWC,MA2BpE,SAAuBiP,EAAgBjM,EAAMuL,GACzC,OAAO,YAAaG,GAChB,GAAIQ,EAAM7O,IAAIK,QAAUsC,EACpB,OAAOiM,EACX,MAAMR,EAAOH,EAAUW,EAAgBV,GAEvC,OADAY,EAAiBzO,KAAMsC,EAAMyL,GACtBA,EAAKE,MAAMjO,KAAMgO,EAC5B,CACJ,CAnC4EW,CAActP,EAAWC,MAAOgD,EAAMuL,MAI3E,mBAAnBxO,EAAWM,MAAwBN,EAAWM,IAAMiO,EAAUvO,EAAWM,MACpD,mBAArBN,EAAWC,QAA0BD,EAAWC,MAAQsO,EAAUvO,EAAWC,MAAOuO,IAEpG,CACJ,CAEA,MAAMW,EAAQ,IAAII,QACZH,EAAmB,CAAClK,EAAKjC,EAAMhD,KACjCkP,EAAMtO,IAAIqE,EAAKjC,GACfxC,OAAOK,eAAeoE,EAAKjC,EAAM,CAAEhD,QAAOc,UAAU,EAAMV,cAAc,IACxE8O,EAAMK,OAAOtK,EAAI,EC1Bd,SAASuK,EAAQC,EAAMC,GAC1B,GAAIlP,OAAOmP,GAAGF,EAAMC,GAChB,OAAO,EACX,UAAWD,UAAgBC,EACvB,OAAO,EACX,GAAInG,EAASkG,IAASlG,EAASmG,GAAO,CAClC,MAAME,EAAQpP,OAAOiE,KAAKgL,GACpBI,EAAQrP,OAAOiE,KAAKiL,GAC1B,OAAIE,EAAMtO,SAAWuO,EAAMvO,SAEnBsO,EAAM5G,MAAM5E,IAASoL,EAAQC,EAAKrL,GAAMsL,EAAKtL,KACzD,CACA,OAAO,CACX,CAWO,SAAS0L,EAAU7K,EAAK8K,EAAMC,GAAO,GACxC,OAAI3F,MAAMC,QAAQrF,IAAQoF,MAAMC,QAAQyF,IARvBE,EASMhL,EATEiL,EASGH,EATMI,EASAH,EAAOF,EAAYtP,OAAOmP,GARrDO,EAAQE,OAAOhM,GAAQ6L,EAAOjH,MAAMqH,GAAQF,EAASE,EAAKjM,QAS5DmF,EAAStE,IAASsE,EAASwG,GAEzBvP,OAAOiE,KAAKsL,GAAMK,OAAOhM,IAAS4L,EAAOF,EAAYtP,OAAOmP,IAAI1K,EAAIb,GAAM2L,EAAK3L,MAD3E5D,OAAOmP,GAAG1K,EAAK8K,GAX9B,IAAqBE,EAAQC,EAASC,CAatC,CDwBAnB,EAAQD,MAAQ,SAAUlP,EAAQyQ,GAC9B,GAAIjG,MAAMC,QAAQgG,GACd,OAAOA,EAASpO,SAASc,GAASgM,EAAQD,MAAMlP,EAAQmD,KAC5D,MAAMrC,GAAO,QAAsBd,EAAQyQ,GAC3C,OAAK3P,EAEmB,mBAAbA,EAAKN,KAAgD,mBAAnBM,EAAKN,IAAI0O,MAC3CpO,EAAKN,IAAI0O,QACM,mBAAfpO,EAAKX,OAAoD,mBAArBW,EAAKX,MAAM+O,MAC/CpO,EAAKX,MAAM+O,aAClBvO,OAAO2E,eAAe/C,KAAKvC,EAAQyQ,WAC5BzQ,EAAOyQ,SAPlB,CAQJ,EAEAtB,EAAQH,IAAM,SAAUhP,EAAQyQ,KAAa3N,GACzC,MAAMhC,GAAO,QAAsBd,EAAQyQ,GAC3C,QAAK3P,IAEmB,mBAAbA,EAAKN,KAA8C,mBAAjBM,EAAKN,IAAIwO,IAC3ClO,EAAKN,IAAIwO,OAAOlM,GACD,mBAAfhC,EAAKX,OAAkD,mBAAnBW,EAAKX,MAAM6O,IAC/ClO,EAAKX,MAAM6O,OAAOlM,GACtBnC,OAAO2E,eAAe/C,KAAKvC,EAAQyQ,GAC9C,EE9EO,MAAMC,EAAiB,CAACC,EAAOC,OACxBD,IAASC,KAAWD,EAAME,SAASD,IAAUA,EAAMC,SAASF,IAG7DG,EAAuB,CAACC,EAAMC,GAAc,IAC9C,SAAUC,EAAMC,GACnB,IAAKA,EACD,OAAOF,EAAcC,EAAOF,EAAKE,GACrC,IAAK,IAAIjR,EAASgR,EAAcC,EAAOF,EAAKE,GAAOjR,EAAQA,EAAS+Q,EAAK/Q,GAAS,CAC9E,GAAyB,iBAAdkR,GAA0BlR,EAAOmR,QAAQD,GAChD,OAAOlR,EACX,GAAyB,mBAAdkR,GAA4BA,EAAU3O,KAAKvC,EAAQA,GAC1D,OAAOA,CACf,CACA,OAAO,IACX,EAGSoR,EAAY,CAACC,EAAIC,IACH,iBAAZA,EACAD,EAAGF,QAAQG,GACC,mBAAZA,EACAA,EAAQD,QACO,IAAZC,EAGLC,EAAWT,GAAsBO,GAAOA,EAAGG,qBAE3CC,EAAWX,GAAsBO,GAAOA,EAAGK,yBAE3CC,EAAab,GAAsBO,GAAOA,EAAGO,gBAE7CC,EAAcf,GAAsBO,GAAOA,EAAGO,gBAAe,GAE7DE,EAAWhB,GAAsBO,IAC1C,MAAMrE,EAAOqE,EAAGU,cAChB,OAAQ/E,aAAgBgF,WAAchF,EAAKiF,KAAO,IAAI,IACvD,GAEUC,EAAU,CAACjB,EAAMkB,IACnBA,EAAM3H,MAAM4H,KAAKnB,EAAKoB,iBAAiBF,IAAQ,CAAClB,GAG9CqB,EAAe,CAACrB,EAAMkB,IACxB3H,MAAM4H,KAAKnB,EAAKvJ,UAAUzF,QAAQoP,IAAQc,GAAOd,EAAGF,QAAQgB,KAM1DI,EAAgB,CAACC,EAAMtB,EAAWuB,GAAW,KACtD,IAAIC,EAAUD,GAAYD,EAAOA,EAAKzL,WAAayL,EACnD,KAAOE,GAAS,CACZ,GAAIxB,EAAUwB,GACV,OAAOA,EACXA,EAAUA,EAAQ3L,UACtB,CACA,OAAO,IAAI,EAGR,MAAM4L,GAEbA,EAAgBC,WAAalC,EAC7BiC,EAAgBE,UAAYN,EAC5BI,EAAgB7B,qBAAuBA,EACvC6B,EAAgBpB,SAAWA,EAC3BoB,EAAgBlB,SAAWA,EAC3BkB,EAAgBhB,WAAaA,EAC7BgB,EAAgBd,YAAcA,EAC9Bc,EAAgBT,QAAUA,EAC1BS,EAAgBL,aAAeA,ECpExB,MAAMQ,EAKTC,YAAYC,EAAO,CAAC,GAChB,OAAO,IAAInS,KAAKmS,EAAKlF,GAAKkF,EAAKC,KAAMD,EAAKhF,GAAKgF,EAAKE,IAAKF,EAAKG,MAAOH,EAAKI,OAC9E,CAMAL,eAAeM,EAAOC,GAClB,OAAOD,EAAMvF,IAAMwF,EAAMxF,GAAKuF,EAAMrF,IAAMsF,EAAMtF,GAAKqF,EAAMF,QAAUG,EAAMH,OAASE,EAAMD,SAAWE,EAAMF,MAC/G,CAMAL,iBAAiBM,EAAOC,GACpB,MAAMJ,EAAM/I,KAAKoJ,IAAIF,EAAMH,IAAKI,EAAMJ,KAChCD,EAAO9I,KAAKoJ,IAAIF,EAAMJ,KAAMK,EAAML,MAClCO,EAASrJ,KAAKsJ,IAAIJ,EAAMG,OAAQF,EAAME,QACtCE,EAAQvJ,KAAKsJ,IAAIJ,EAAMK,MAAOJ,EAAMI,OACpCP,EAAQhJ,KAAKoJ,IAAIG,EAAQT,EAAM,GAC/BG,EAASjJ,KAAKoJ,IAAIC,EAASN,EAAK,GACtC,OAAOJ,EAAKV,KAAK,CAAEc,MAAKD,OAAME,QAAOC,UACzC,CACAjS,YAAY2M,EAAGE,EAAGmF,EAAOC,GAErBvS,KAAKiN,EAAI,EAETjN,KAAKmN,EAAI,EAETnN,KAAKsS,MAAQ,EAEbtS,KAAKuS,OAAS,EACdvS,KAAKiN,EAAIA,GAAK,EACdjN,KAAKmN,EAAIA,GAAK,EACdnN,KAAKsS,MAAQA,GAAS,EACtBtS,KAAKuS,OAASA,GAAU,CAC5B,CAIIF,UACA,OAAOrS,KAAKmN,CAChB,CAIIiF,WACA,OAAOpS,KAAKiN,CAChB,CAII4F,YACA,OAAO7S,KAAKiN,EAAIjN,KAAKsS,KACzB,CAIIK,aACA,OAAO3S,KAAKmN,EAAInN,KAAKuS,MACzB,CAIIO,SACA,OAAO9S,KAAKiN,EAAIjN,KAAKsS,MAAQ,CACjC,CAIIS,SACA,OAAO/S,KAAKmN,EAAInN,KAAKuS,OAAS,CAClC,CACAS,KAAKC,EAAYC,EAAaD,GAK1B,OAJAjT,KAAKmN,GAAK+F,EACVlT,KAAKiN,GAAKgG,EACVjT,KAAKuS,QAAU,EAAIW,EACnBlT,KAAKsS,OAAS,EAAIW,EACXjT,IACX,CACAmT,OAAOC,EAAYC,EAAaD,GAC5B,OAAOpT,KAAKgT,MAAMI,GAAaC,EACnC,CAEIC,WACA,OAAOtT,KAAKuS,OAASvS,KAAKsS,KAC9B,EC5FG,MAOMiB,EAAeC,IACjBA,GAAaA,aAAmBC,OAA6C,GAAlCD,EAAgB,SAAEtJ,cAM3DwJ,EAAiBF,GACG,SAAzBD,EAAYC,GACLA,GACHlP,OAAO6M,WACTqC,aAAmBrC,WACfqC,EAAQpC,KACRoC,EAAQG,cAAgBH,EAAQtN,WACpCsN,EAAQtN,aArBS,EAACsN,EAAUlP,UAC1BkP,aAAmBC,OAASD,EAAQxO,SAAWwO,EAAQI,eAAeC,gBAoBjDC,CAAYN,GCnBtC,SAASO,EAAqBP,EAASQ,EAAO,IACjD,IAAIrT,EACJ,MAAMsT,EAAeC,EAAgBV,GAC/BW,EAASF,KAAmD,QAAhCtT,EAAK6S,EAAQI,qBAAkC,IAAPjT,OAAgB,EAASA,EAAGyT,MAChGjV,EAASgV,EACTE,EAAaJ,GAAgBA,EAAe,GAC5CA,EACAK,EAAcN,EAAKO,OAAOpV,GAChC,OAAOgV,EACDG,EACAA,EAAYC,OAAOR,EAAqBL,EAAcO,IAChE,CAKO,SAASC,EAAgBvC,GAC5B,IAAIhR,EACJ,MAAI,CAAC,OAAQ,OAAQ,aAAa6T,QAAQjB,EAAY5B,KAAU,EACvB,QAA7BhR,EAAKgR,EAAKiC,qBAAkC,IAAPjT,OAAgB,EAASA,EAAGyT,KAEzEzC,aAAgB8C,aAAeJ,EAAa1C,GACrCA,EAEJuC,EAAgBR,EAAc/B,GACzC,CAKO,SAAS0C,EAAab,GAEzB,MAAM,SAAEkB,EAAQ,UAAEC,EAAS,UAAEC,GAAcC,iBAAiBrB,GAC5D,MAAO,6BAA6BsB,KAAKJ,EAAWE,EAAYD,EACpE,CCxCA,IAMII,EAiCJ,IAAIC,EAAqBD,EAAuB,MAKjCE,8BACP,MAAMlR,EAAOjE,OAAOiE,KAAK/D,KAAKkV,oBAAoBX,OAAOzU,OAAOiE,KAAK/D,KAAKmV,wBAC1E,OAAO,IAAIC,OAAO,IAAIrR,EAAKsR,KAAK,QAAS,IAC7C,CACAnD,8BAA8BpK,IAC1B,QAASA,GAASA,KAAQ9H,KAAKmV,qBACnC,CACAjD,sBAAsB1B,GAAK1I,EAAMwN,IAC7B,MAAMhE,EAAMnH,EAAkBmL,GAAa,IAC3C,OAAKxN,GAAUA,KAAQ9H,KAAKkV,mBAErB7H,EAAKrN,KAAKkV,mBAAmBpN,GAAM0I,EAAIc,IADnC,EAEf,CACAY,yBAAyBqD,GAAMzN,EAAMwN,IACjC,MAAMhE,EAAMnH,EAAkBmL,GAAa,IAC3C,OAAKxN,GAAUA,KAAQ9H,KAAKmV,sBAErB9H,EAAKrN,KAAKmV,sBAAsBrN,GAAMyN,EAAKjE,IADvC,EAEf,CACAY,qBAAqBsD,EAAYC,EAAYC,GACzC,IAAKD,EAAW7U,SAAW4U,EAAW5U,OAClC,OAAO4U,EACX,MAAOG,KAAcC,GAAQH,EAC7B,GAAIzV,KAAK6V,sBAAsBF,GAAY,CACvC,MAAMG,EAAgB9V,KAAK+V,kBAAkBP,EAAYG,GACzD,OAAO3V,KAAKgW,cAAcF,EAAeF,EAAMF,EACnD,CACA,MAAMhM,EAAS,GACf,IAAK,MAAMvK,KAAUqW,EAAY,CAC7B,MAAMM,EAAgB9V,KAAKiW,eAAe9W,EAAQwW,GAC5CO,EAAmBlW,KAAKgW,cAAcF,EAAeF,EAAMF,GACjE,GAAKQ,EAAiBtV,OAAtB,CAEA,GAAI8U,EACA,OAAOQ,EAAiB1I,MAAM,EAAG,GACrC9D,EAAOzI,QAAQiV,EAHH,CAIhB,CACA,OAAO3I,EAAK7D,EAChB,CAGAwI,oBAAoBjI,GAChB,IAAIkM,EAAO,EACPC,EAAQ,EACZ,MAAM1M,EAAS,GACf,IAAK,IAAIxE,EAAI,EAAGA,EAAI+E,EAAIrJ,OAAQsE,IACb,MAAX+E,EAAI/E,IACJkR,IACW,MAAXnM,EAAI/E,KACJkR,EAAQ9M,KAAKoJ,IAAI,EAAG0D,EAAQ,IACjB,MAAXnM,EAAI/E,IAAekR,IACnB1M,EAAOzI,KAAKgJ,EAAIb,UAAU+M,EAAMjR,GAAGkF,QACnC+L,EAAOjR,EAAI,GAInB,OADAwE,EAAOzI,KAAKgJ,EAAIb,UAAU+M,GAAM/L,QACzBV,CACX,CACAwI,gBAAgBmE,EAAOX,EAAWtF,EAAMkG,EAAQtR,UAC5C,MAAMuR,EAAQ,GACd,IAAK,MAAMC,KAAQzB,EAAqB0B,aAAaJ,GAAQ,CACzD,MAAMd,EAAMvV,KAAK0W,cAAcF,EAAMd,EAAWtF,EAAMkG,GACtD,GAAIZ,GAAaH,EAAI3U,OACjB,MAAO,CAAC2U,EAAI,IAChBgB,EAAMtV,QAAQsU,EAClB,CACA,OAAOhI,EAAKgJ,EAChB,CACArE,qBAAqBmE,EAAOX,EAAWtF,EAAMkG,EAAQtR,UACjD,MAAMkE,EAAQmN,EAAMjK,MAAMpM,KAAKiV,kBAAkBpL,KAAK8M,GAASA,EAAKvM,SAC9DwM,EAAU1N,EAAM2N,QAChBC,EAAiB1G,EAAO,CAACA,GAAQ,GACjC2G,EAAUH,EAAUjN,MAAM4H,KAAK+E,EAAM9E,iBAAiBoF,IAAYE,EACxE,OAAO9W,KAAKgW,cAAce,EAAe7N,ERlHflF,QAAO,CAACgT,EAAKxG,MACxB,IAAfwG,EAAIpW,QAAgBoW,EAAIA,EAAIpW,OAAS,GAAGA,QAAU,IAClDoW,EAAI/V,KAAK,IACb+V,EAAIA,EAAIpW,OAAS,GAAGK,KAAKuP,GAClBwG,IACR,IQ6GsDtB,EACrD,CAEAxD,aAAamE,EAAOjG,EAAMkG,GACtB,OAAOvB,EAAqBkC,SAASZ,GAAO,EAAMjG,EAAMkG,GAAO,IAAM,IACzE,CAEApE,WAAWmE,EAAOjG,EAAMkG,GACpB,OAAOvB,EAAqBkC,SAASZ,GAAO,EAAOjG,EAAMkG,EAC7D,GAEJtB,EAAmBE,mBAAqB,CACpC,SAAU7D,EACV,SAAUX,EACV,SAAUE,EACV,UAAWa,EACX,WAAYX,EACZ,YAAaE,GAEjBgE,EAAmBG,sBAAwB,CACvC,UAAYnB,GAASA,EAAKxG,MAAM,EAAG,GACnC,SAAWwG,GAASA,EAAKxG,OAAO,GAChC,QAAS,CAACwG,EAAM1C,IAELjE,EAAK2G,GADE1C,GAAOA,EAAM7G,KACF,IAE7B,QAAS,CAACuJ,EAAM1C,IAAQ0C,EAAK5S,QAAQoP,IAAQA,EAAGF,QAAQgB,GAAO,MAC/D,YAAc0C,GAASA,EAAK5S,QAAQoP,GAAQA,aAAciE,aCvIvD,SAAmBjE,EAAI0G,EAAU,CAAEC,YAAY,IAClD,SAAK3G,EAAG4G,iBAAiBxW,QAErBsW,EAAQC,YAAclG,EAAST,GAAKY,GAA+C,WAAtCyD,iBAAiBzD,GAAM+F,cAEpED,EAAQG,SACR3F,EAAclB,GAAK8G,GAAWA,aAAkBC,SAAgD,MAArC1C,iBAAiByC,GAAQD,WAE/EH,EAAQM,WAMd,SAAsBhH,GACzB,MAAMiH,EAAkBxF,EAAKyF,UCP1B,SAAuBC,EAAMrT,QAChC,OAAO2N,EAAKV,KAAK,CACbtE,EAAG0K,EAAIC,SAAWD,EAAIE,YACtB1K,EAAGwK,EAAIG,SAAWH,EAAII,YACtBzF,MAAOqF,EAAIK,YAAcL,EAAI3S,SAAS6O,gBAAgBoE,YACtD1F,OAAQoF,EAAIO,aAAeP,EAAI3S,SAAS6O,gBAAgBsE,cAEhE,CDA2CC,GAAiBnG,EAAKV,KAAKf,EAAG6H,0BACrE,OAA6B,IAAzBZ,EAAgBnE,OAEZS,EAAqBvD,GAAIlI,MAAMgP,GAA+F,IAApFrF,EAAKyF,UAAUD,EAAiBxF,EAAKV,KAAK+F,EAAOe,0BAA0B/E,MACjI,CAXkCgF,CAAa9H,GAC/C,CD8H8E+H,CAAU/H,KACpF,WAAY,CAACwD,EAAM1C,IAAQ0C,EAAK5S,QAAQoP,GAAOA,EAAGF,QAAQgB,GAAO,OAErE0D,EAAqBD,EAnJyB,SAAUyD,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CA8I4CqS,CAAW,CACnD3M,EAAS,oBACV8I,GGrJH,IAAI,EAA0C,SAAUwD,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EASA,MAAMsS,IAAaxU,OAAOmC,QAAU6D,QAAQ,mBAqBrC,MAAMyO,GACTzY,YAAY8Q,EAAMvL,EAAOmT,EAAS/Y,GAC9BD,KAAKoR,KAAOA,EACZpR,KAAK6F,MAAQA,EACb7F,KAAKgZ,QAAUA,EACf,MAAMC,EAAW,CACbC,SAAS,EACTC,QAAStM,EAAmBhH,IAEhC/F,OAAOoB,OAAOlB,KAAMiZ,EAAUhZ,EAAM,CAAE4F,SAC1C,CAEIuT,eACA,IAAKvQ,EAAS7I,KAAKoR,MACf,MAAO,GACX,MAAMjS,EAASuJ,EAAgB1I,KAAKb,OAAQa,KAAKoR,MACjD,GAAIvI,EAAS1J,GACT,OAAOkO,EAAKlO,GAChB,MAAM+L,EAAQ,UAAWlL,KAAKoR,KAAOpR,KAAKoR,KAAKlG,MAAQlL,KAAKoR,KAC5D,MAAsB,iBAAXjS,EACA6V,EAAmBlR,IAAI3E,EAAQ+L,QACpB,IAAX/L,GAA0B+L,aAAiBuJ,YAC3C,CAACvJ,GACL,EACX,CAEImO,eACA,OAAO3Q,EAAgB1I,KAAKsZ,SAAUtZ,KAAKoR,KAC/C,CAQAd,QAAQrQ,GACJ,MAAoB,iBAATA,EACAD,KAAK6F,QAAU5F,EACN,mBAATA,EACAD,KAAKgZ,UAAY/Y,EACR,iBAATA,GACAmP,EAAUpP,KAAMC,GAAM,EAErC,CAKI0B,kBACA,MAAM4X,EAAevZ,KAAKgZ,QAAQ9Z,KAAKc,KAAKoR,MACtCoI,EAAcxZ,KAAKyZ,KAASlY,IAAOgY,EAAahY,GAAIvB,KAAK0Z,eAAkBH,EACjF,OAAOvZ,KAAKsZ,SAAY/X,GAAMvB,KAAK2Z,kBAAkBpY,IAAMiY,EAAYjY,GAAKiY,CAChF,CAEAG,kBAAkBpY,GACd,MAAMpC,EAASoC,EAAEpC,OACX0S,EAAUtQ,EAAEqY,cACZP,EAAWrZ,KAAKqZ,SACtB,MAAwB,iBAAbA,MAENA,GAAcla,aAAkBsV,aAAkB5C,aAAmB4C,cAEnE5C,EAAQ7B,SAAS7Q,EAAO0a,QAAQR,GAC3C,CAKAS,YACI,MAAM,QAAEX,EAAO,QAAED,GAAYlZ,KAI7B,OAHAA,KAAK0Z,cACLpL,EAAQD,MAAMrO,KAAM,YACpBsO,EAAQD,MAAMrO,KAAM,iBACfA,KAAKoZ,SAASxY,SAEnBZ,KAAKoZ,SAAS5X,SAASgP,GAAOA,EAAG3P,iBAAiBb,KAAK6F,MAAO7F,KAAM,CAAEmZ,UAASD,cAC/EH,GAAiBpL,IAAI3N,KAAKoR,KAAMpR,OACzB,EACX,CAEA0Z,cACI,MAAM,QAAER,GAAYlZ,KACfsO,EAAQH,IAAInO,KAAM,cAEvBA,KAAKoZ,SAAS5X,SAASgP,GAAOA,EAAGrP,oBAAoBnB,KAAK6F,MAAO7F,KAAM,CAAEkZ,cACzEH,GAAiBgB,OAAO/Z,KAAKoR,KAAMpR,MACvC,CAKAkS,WAAWd,KAAS4I,GAChB,IAAKnR,EAASuI,GACV,MAAO,GACX,MAAM6I,EAAa7I,EAAK0H,KAAc,GACtC,OAAKkB,EAASpZ,OAEPqZ,EAAU7Y,QAAQK,GAAauY,EAAStK,MAAMjO,EAAS6O,QAAS7O,KAD5DwY,CAEf,CAEA/H,WAAWd,EAAM8I,GACRrR,EAASuI,KAETtR,OAAO2E,eAAe/C,KAAK0P,EAAM0H,MAClC1H,EAAK0H,IAAa,IACtB1H,EAAK0H,IAAW7X,KAAKiZ,GACzB,CAEAhI,cAAcd,EAAM8I,GAChB,MACM5a,EADYyZ,GAAiBpZ,IAAIyR,GACfhQ,QAAQK,GAAaA,IAAayY,IAC1Dpa,OAAOK,eAAeiR,EAAM0H,GAAW,CAAExZ,QAAOI,cAAc,GAClE,CAOAwS,iBAAiBd,EAAM4H,EAAS3Z,EAAa2Z,GACzC,GAAuB,mBAAZA,EACP,MAAO,GACX,MAAMmB,EAAYnB,IAAY3Z,EAAaS,OAAOoB,OAAO,CAAC,EAAG8X,EAAS3Z,GAAcA,EAEpF,OADkB0Z,GAAiBqB,gBAAgBhJ,EAAM4H,EAASmB,GACjD/Y,QAAQK,GAAaA,EAASqY,aACnD,CAEA5H,uBAAuBd,EAAM4H,EAAS/Y,GAClC,IAAK4I,EAASuI,GACV,MAAO,GACX,MAAMiJ,EAAc3R,EAAgBzI,EAAK4F,MAAOuL,GAC1C6I,EAAY,GAClB,IAAK,MAAMpU,IArJQ,CAACyU,IACxB,MAAMC,GAASD,GAAU,IAAIlO,MAAM,KAAKvC,KAAK8M,GAASA,EAAKvM,SACrDoQ,EAAc,IAAI/M,IACxB,OAAO8M,EAAMnZ,QAAQuV,MACZA,GAAQ6D,EAAYrM,IAAIwI,KAE7B6D,EAAY7M,IAAIgJ,GACT,KACT,EA6IsB8D,CAAYJ,GAAc,CAC1C,MAAMK,EAAa3B,GAAiBpZ,IAAIyR,EAAMvL,EAAOmT,EAAS,CAC1D7Z,OAAQc,EAAKd,OACbma,SAAUrZ,EAAKqZ,SACfJ,UAAWjZ,EAAKiZ,UAEhBwB,EAAW9Z,OACXqZ,EAAUhZ,QAAQyZ,GAElBT,EAAUhZ,KAAK,IAAI8X,GAAiB3H,EAAMvL,EAAOmT,EAAS/Y,GAClE,CACA,OAAOga,CACX,EAEJ,EAAW,CACP3L,KACDyK,GAAiBvU,UAAW,WAAY,MAC3C,EAAW,CACP8J,KACDyK,GAAiBvU,UAAW,cAAe,MCzL9C,MAAMmW,IAAerW,OAAOmC,QAAU6D,QAAQ,qBAM9C,SAASsQ,GAAkBxJ,EAAMyJ,GAAoB,GACjD,GAAI/a,OAAO2E,eAAe/C,KAAK0P,EAAMuJ,IACjC,OAAOvJ,EAAKuJ,IAChB,MAAMrb,EAAQ,GAGd,OAFIub,GACA/a,OAAOK,eAAeiR,EAAMuJ,GAAa,CAAErb,QAAOI,cAAc,IAC7DJ,CACX,CAUO,SAASwb,GAAkBvW,GAC9B,QAAmB,mBAARA,IAAuBzE,OAAO2E,eAAe/C,KAAK6C,EAAK,UAEtC,iBAAdA,EAAIsB,OAA2C,mBAAdtB,EAAIsB,MACvD,CAEO,SAASkV,GAAmB3J,GAC/B,IAAKvI,EAASuI,GACV,MAAO,GACX,MAAMrN,EAjBV,SAA+BqN,GAC3B,MAAM4J,EAAQ,CAAC,EACf,IAAK,IAAInb,EAAQuR,EAAMvR,GAASA,IAAUC,OAAO0E,UAAW3E,EAAQC,OAAOC,eAAeF,GACtF+a,GAAkB/a,GAAO2B,SAASkC,GAAQsX,EAAMtX,IAAO,IAE3D,OAAO5D,OAAOiE,KAAKiX,EACvB,CAWiBC,CAAsB7J,GAEnC,OADerN,EAAK8F,KAAKnG,GAAQ0N,EAAK1N,KACxBtC,QAAQnB,GAAS6a,GAAkB7a,KAAuB,IAAdA,EAAKib,MACnE,CC3BA,IAAIC,GAAgB,MAMhBjJ,iBAAiBd,KAAS4I,GACtB,OAAOjB,GAAiBpZ,IAAIyR,KAAS4I,EACzC,CACA9H,iBAAiBd,EAAM+I,EAAWnB,EAAUmB,GACxC,GAAyB,IAArBzB,UAAU9X,OAGV,OAFoBma,GAAmB3J,GAEpBpN,QAAO,CAACgT,EAAK/W,IAAS+W,EAAIzC,OAAOwE,GAAiBe,UAAU1I,EAAMnR,KAAQ,IAExE,iBAAdka,IACPA,EAAY,CAAEtU,MAAOsU,IACzB,MAAMF,EAAYlB,GAAiBe,UAAU1I,EAAM4H,EAASmB,GAG5D,OAFKF,EAAUrZ,QACXgK,QAAQC,KAAK,+BAAgC/K,OAAOoB,OAAO,CAAC,EAAGiZ,EAAW,CAAEnB,aACzEiB,CACX,CAMA/H,mBAAmBd,KAAS4I,GACxB,MAAMC,EAAYlB,GAAiBpZ,IAAIyR,KAAS4I,GAEhD,OADAC,EAAUzY,SAASC,GAAaA,EAASiY,gBAClCO,CACX,GAMJkB,GAAcC,SdRqB,CAAC5K,EAAI6K,EAAWC,KAC/C,MAAMC,EAAOzb,OAAOoB,OAAO,CACvBsa,SAAS,EACTC,UAAU,EACVC,YAAY,GACbJ,GAAa,CAAC,GACjB,OAAO9K,EAAGlP,cAAc,IAAIqa,YAAYN,EAAWE,GAAM,EcI7DJ,GAAcS,YAAcb,GAE5BI,GAAcJ,mBAAqBA,GAQnCI,GAAcU,eDdP,SAAwBzK,EAAM1N,EAAKzD,GACtC,MAAMmG,EAAKgL,EAAK1N,GAChB,GAAkB,mBAAP0C,EACP,MAAM,IAAI7G,UAAU,0BAA0BmE,uBAElD,GAAIzD,EAAK6b,QAAS,CACd,MAAMC,EAAYjc,OAAOC,eAAeqR,GAAM1N,GAC9C,IAAKoX,GAAkBiB,GACnB,MAAM,IAAIC,eAAe,+DAA+DtY,KAC5FzD,EAAOH,OAAOoB,OAAO,CAAEga,MAAM,GAASa,EAAW9b,EACrD,MAEIA,EAAOH,OAAOoB,OAAO,CAAEga,MAAM,GAASjb,GAG1C,GAAIA,EAAKib,KAAM,CACX,MAAM5b,EAAQsb,GAAkBxJ,GAAM,GACjC9R,EAAM0B,SAAS0C,IAChBpE,EAAM2B,KAAKyC,EACnB,CACA,OAAO5D,OAAOoB,OAAOkF,EAAInG,EAC7B,ECLAkb,GAAcL,kBAAoBA,GAClCK,GA9D8C,SAAU3C,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CAyDgB,CAAW,CACvB0F,EAAS,eACViP,IAGI,MAAMc,GAAad,GClEnB,SAASe,GAAOjc,GACnB,OAAO,SAAkBd,EAAQC,GAE7Ba,EAAuB,iBAATA,GAAqC,mBAATA,EAAsB,CAAE4F,MAAO5F,GAASA,EAElFA,EAAOH,OAAOoB,OAAOjB,EAAK6b,QAAU,CAAC,EAAI,CAAEZ,MAAM,GAAQjb,GACzDkb,GAAcU,eAAe1c,EAAQC,EAAaa,EACtD,CACJ,CCPA,MAAMkc,GAAY,IAAIvN,QA2BhBjB,GAAM,CAAC6C,EAAI4L,EAAWC,KACxB,GAAqB,MAAjBD,EAAU,GACV,OAAOrC,GAAOvJ,EAAI4L,EAAUhT,UAAU,GAAIiT,GAC1CA,GA5BK,EAAC7L,EAAI4L,EAAWC,KACzB,MAAMC,EAAUH,GAAUxc,IAAI6Q,IAAO,IAAIpC,IACnCmO,EAAaD,EAAQ3c,IAAIyc,IAAc,IAAI3O,IACjD8O,EAAW5O,IAAI0O,GACfC,EAAQpc,IAAIkc,EAAWG,GACvBJ,GAAUjc,IAAIsQ,EAAI8L,EAAQ,EAwBtBE,CAAKhM,EAAI4L,EAAWC,GACxB7L,EAAGiM,UAAU9O,IAAIyO,EAAU,EAMzBrC,GAAS,CAACvJ,EAAI4L,EAAWC,KAC3B,GAAqB,MAAjBD,EAAU,GACV,OAAOzO,GAAI6C,EAAI4L,EAAUhT,UAAU,GAAIiT,GACvCA,IA5BO,EAAC7L,EAAI4L,EAAWC,KAC3B,MAAMC,EAAUH,GAAUxc,IAAI6Q,GAC9B,IAAK8L,EACD,OAAO,EACX,MAAMC,EAAaD,EAAQ3c,IAAIyc,GAC/B,OAAKG,IAELA,EAAW1N,OAAOwN,IACVE,EAAWG,KAAI,EAoBRC,CAAOnM,EAAI4L,EAAWC,KAEhCA,GACDO,GAAcD,OAAOnM,EAAI4L,GAC7B5L,EAAGiM,UAAU1C,OAAOqC,GAAU,EAM5BjO,GAAM,CAACqC,EAAI4L,IACQ,MAAjBA,EAAU,IACFjO,GAAIqC,EAAI4L,EAAUhT,UAAU,IACjCoH,EAAGiM,UAAUzM,SAASoM,GAa1B,MAAMQ,GAET1K,mBAAmB2K,GACf,OAAQA,GAAe,IAAIzQ,MAAM,KAAKhL,QAAQ6I,KAAUA,GAC5D,CAKAiI,WAAWqD,EAAKuH,EAAKT,GACjB,MAAMU,EAASH,GAAcI,YAAYF,GACzCzP,EAAKkI,GAAK/T,SAASgP,GAAOuM,EAAOvb,SAAS4a,GAAczO,GAAI6C,EAAI4L,EAAWC,MAC/E,CAKAnK,cAAcqD,EAAKuH,EAAKT,GACpB,MAAMU,EAASH,GAAcI,YAAYF,GACzCzP,EAAKkI,GAAK/T,SAASgP,GAAOuM,EAAOvb,SAAS4a,GAAcrC,GAAOvJ,EAAI4L,EAAWC,MAClF,CAKAnK,cAAcqD,EAAKuH,EAAKG,EAAOZ,IAC1BY,EAAQL,GAAcjP,IAAMiP,GAAc7C,QAAQxE,EAAKuH,EAAKT,EACjE,CAKAnK,WAAWqD,EAAKuH,GACZ,MAAMC,EAASH,GAAcI,YAAYF,GACzC,OAAOzP,EAAKkI,GAAK7F,OAAOc,GAAOuM,EAAOrN,OAAO0M,GAAcjO,GAAIqC,EAAI4L,MACvE,CAEAlK,cAAcqD,EAAK6G,GACXA,EACA/O,EAAKkI,GAAK/T,SAASgP,IAAS,IAAI7P,EAAI,OAAoC,QAA5BA,EAAKwb,GAAUxc,IAAI6Q,UAAwB,IAAP7P,OAAgB,EAASA,EAAGkO,OAAOuN,EAAU,IAG7H/O,EAAKkI,GAAK/T,SAASgP,GAAO2L,GAAUtN,OAAO2B,IAEnD,ECjHG,MACM0M,GAAQ,QACRC,GAAM,SACNC,GAAQ,IAYRC,GAAW,UAEXC,GAAa,YACbC,GAAc,CAlBR,MAKA,MACE,QACE,UAKA,SACE,WACC,YAI4DF,GAF3D,aAEkFC,ICLtG,SAAShb,GAAKhD,EAAOke,EAAkB,CAAC,GAC3C,OAAO,SAAUjZ,EAAKuD,GAClB,GAAIhI,OAAO2E,eAAe/C,KAAK6C,EAAKuD,GAChC,MAAM,IAAIvI,UAAU,+BAExBO,OAAOK,eAAeoE,EAAKuD,EAAM,CAC7BxI,QACAc,UAAWod,EAAgB5R,SAC3BnM,YAAa+d,EAAgB/d,WAC7BC,cAAc,GAEtB,CACJ,CCXO,MAAM+d,WAAuBhJ,YAChCnU,cACIod,SAAShF,WACT1Y,KAAK2d,YAAa,CACtB,CACAC,oBACI5d,KAAK2d,YAAa,EAClB3d,KAAKyc,UAAU9O,IAAI3N,KAAKM,YAAY2O,IACpCkM,GAAcrB,UAAU9Z,KAC5B,CACA6d,uBACI7d,KAAK2d,YAAa,EAClBxC,GAAczB,YAAY1Z,KAC9B,CAEI8d,gBACA,OAAO9d,KAAK2d,UAChB,CACAI,KAAKlY,EAAOmT,GACR,OAAOmC,GAAcrB,UAAU9Z,KAAM6F,EAAOmT,EAChD,CAEAgF,SAASC,GACL,OAAO9C,GAAczB,YAAY1Z,QAASie,EAC9C,CAOAC,MAAMpB,EAAKxd,GACP,YAAc6C,IAAV7C,EACOsd,GAAczO,IAAInO,KAAM8c,IACnCF,GAAcuB,OAAOne,KAAM8c,EAAKxd,GACzBA,EACX,CAQA8e,OAAOtW,EAAMxI,GACT,MAAM+e,EAAYre,KAAKoF,aAAa0C,GAGpC,YAFc3F,IAAV7C,GACA6L,EAAQnL,KAAM8H,EAAMxI,GACjB+e,CACX,CAMAC,OAAOjD,EAAWC,GACd,OAAOH,GAAcC,SAASpb,KAAMqb,EAAWC,EACnD,CAKApJ,gBAAgBqM,GAEZ,KADAA,EAAUA,GAAWve,KAAKiP,IAEtB,MAAM,IAAIlN,MAAM,iCACpB,MAAMzB,EAAcke,eAAe7e,IAAI4e,GACvC,GAAIje,GACA,GAAIA,EAAY2O,KAAOsP,EACnB,MAAM,IAAIxc,MAAM,8CAGpB/B,KAAKiP,KAAOsP,IACZve,KAAKiP,GAAKsP,GAEdC,eAAeC,OAAOF,EAASve,KACnC,CAEW0e,wBACP,OAAOF,eAAeG,YAAY3e,KAAKiP,GAC3C,CACAiD,gBACI,OAAOlN,SAASK,cAAcrF,KAAKiP,GACvC,EAGJwO,GAAexO,GAAK,GApG0B,SAAUuJ,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GACzIiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,EAC5D,CAgGA,CAAW,CACPlE,GAAK,gBACNmb,GAAejZ,UAAW,qBAAiB,GCvG9C,IAAI,GAA0C,SAAUgU,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAMO,MAAMoY,WAAyBnB,GAClCnd,cACIod,SAAShF,WACT1Y,KAAK6e,kBAAoB,IAAIC,iBAAiB9e,KAAK+e,kBAAkB7f,KAAKc,MAC9E,CAEIgf,cACA,OAAOhf,KAAKif,QAChB,CACID,YAAQE,GACR,MAAMtZ,EAAO5F,KAAKif,SAClBjf,KAAKif,SAAWC,EAChBlf,KAAKmf,gBAAgBD,EAAQtZ,EACjC,CACAgY,oBACIF,MAAME,mBACV,CACAC,uBACIH,MAAMG,uBACN7d,KAAK6e,kBAAkBO,YAC3B,CACAC,UAAUxZ,GAAS,CACnByZ,gBAAkB,CAClBH,gBAAgBI,EAAWC,GACvBxf,KAAK+d,KAAK/d,KAAKqf,WACfrf,KAAK6e,kBAAkBO,aACvB,MAAM3e,EAAOT,KAAKM,YACdif,GACAvf,KAAK6e,kBAAkBY,QAAQF,EAAW9e,EAAKif,kBACvD,CACAX,kBAAkBY,GAEdA,EAAQrX,MADcsX,GAAWA,EAAOC,WAAWjf,OAASgf,EAAOE,aAAalf,OAAS,IAC5DZ,KAAKsf,gBAAkBtf,KAAKqf,WAC7D,CACAU,SAASla,GACAA,EAAM1G,QAAU0G,EAAM1G,SAAWa,KAAKggB,MAE3C3Z,YAAW,IAAMrG,KAAKqf,UAAUxZ,IACpC,CACIoa,eACA,OAAOjgB,KAAKgf,SAAWhf,KAAKgf,QAAQiB,QACxC,CACI/I,cACA,OAAOlX,KAAKgf,QAAUrV,MAAM4H,KAAKvR,KAAKgf,QAAQ9H,SAAW,EAC7D,CACIgJ,sBACA,OAAOlgB,KAAKkX,QAAQ9V,QAAQsM,GAASA,EAAKyS,UAC9C,CACAC,UAAU9gB,GACN,OAAOU,KAAKkX,QAAQmJ,MAAM3S,GAASA,EAAKpO,QAAUA,GACtD,CACAghB,YAAYhhB,EAAO2d,GACf,IAAKjd,KAAKgf,QACN,OACJ,MAAMuB,EAASvgB,KAAKogB,UAAU9gB,GAC9BihB,IAAWA,EAAOJ,SAAWlD,GAC7B9B,GAAcC,SAASpb,KAAKgf,QAAS,SACzC,CACAwB,WAAWlhB,GACP,MAAMmhB,EAAMzgB,KAAKogB,UAAU9gB,GAC3B,QAASmhB,GAAOA,EAAIN,QACxB,CACAO,cACI,OAAO1gB,KAAKkX,QAAQ5O,MAAMoF,GAASA,EAAKyS,UAC5C,CACAQ,gBACI,OAAO3gB,KAAKkX,QAAQxH,OAAOhC,GAASA,EAAKyS,UAAYzS,EAAKkT,UAC9D,CACAC,eAAe5D,GACNjd,KAAKigB,UAAajgB,KAAKgf,UAE5Bhf,KAAKkX,QAAQ1V,SAASkM,GAASA,EAAKyS,UAAYzS,EAAKkT,UAAY3D,IACjE9B,GAAcC,SAASpb,KAAKgf,QAAS,UACzC,CAEI1f,YACA,IAAIqB,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGrB,KACvE,CACIwhB,aACA,OAAO9gB,KAAKkgB,gBAAgBrW,KAAK6D,GAASA,EAAKpO,OACnD,CACI0gB,WACA,IAAIrf,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGqf,IACvE,CACIlY,WACA,IAAInH,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGmH,IACvE,CACIA,SAAKA,GACL9H,KAAKgf,UAAYhf,KAAKgf,QAAQlX,KAAOA,EACzC,CACIiZ,eACA,IAAIpgB,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGogB,QACvE,CACIA,aAASA,GACT/gB,KAAKgf,UAAYhf,KAAKgf,QAAQ+B,SAAWA,EAC7C,CAEIC,eACA,IAAIrgB,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGqgB,QACvE,CACIC,wBACA,IAAItgB,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGsgB,iBACvE,CACIC,mBACA,IAAIvgB,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGugB,YACvE,CAEAC,gBACI,IAAIxgB,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGwgB,eACvE,CACAC,iBACI,IAAIzgB,EACJ,OAA+B,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,OAAgB,EAASA,EAAGygB,gBACvE,CACAC,kBAAkB3Z,GACd,IAAI/G,EACoB,QAAvBA,EAAKX,KAAKgf,eAA4B,IAAPre,GAAyBA,EAAG0gB,kBAAkB3Z,EAClF,EAEJkX,GAAiBc,kBAAoB,CACjC4B,SAAS,EACTC,YAAY,EACZC,gBAAiB,CAAC,QAAS,WAAY,YACvCC,WAAW,EACXC,eAAe,GAEnB,GAAW,CACPxF,GAAO,CACHrW,MAAO,SACP1G,OAASqR,GAAOA,EAAGwO,WAExBJ,GAAiBpa,UAAW,YAAa,MAC5C,GAAW,CACP0X,GAAO,CACHrW,MAAO,QACP1G,OAASqR,GAAOA,EAAGoD,iBAExBgL,GAAiBpa,UAAW,WAAY,MCzJpC,MASMmd,GAAgBvb,IACzB,IAAIwb,EAAW,KACf,OAAO,YAAa5T,GACC,OAAb4T,GACAC,uBAAsB,KAClBD,GAAYxb,EAAG1E,KAAK1B,QAAS4hB,GAC7BA,EAAW,IAAI,IAGvBA,EAAW5T,CACf,CAAC,ECdE,SAAS4K,GAASkJ,KAAc9T,GACnC,OAAO,SAAU7O,EAAQC,EAAaC,GAClC,IAAKA,GAA0C,mBAArBA,EAAWC,MACjC,MAAM,IAAIC,UAAU,uCAExB,MAAMC,EAAaH,EAAWC,MAC9B,OAAOD,EAAa,CAChBI,WAAYJ,EAAWI,WACvBC,cAAc,EACdC,IAAK,SAASC,IAEV,MAAMC,EAAQC,OAAOC,eAAeC,MAE9BC,GAAO,QAAsBJ,EAAOT,GAE1C,IAAKa,GAAQA,EAAKN,MAAQC,EACtB,OAAOJ,EAEX,MAAMuiB,EAAcD,EAAUtiB,EAAWN,KAAKc,SAAUgO,GAIxD,OAFAlO,OAAOoB,OAAO6gB,EAAaviB,GAEpBQ,KAAKZ,GAAe2iB,CAC/B,EACA7hB,IAAIZ,GACAQ,OAAOK,eAAeH,KAAMZ,EAAa,CACrCE,QACAc,UAAU,EACVV,cAAc,EACdD,WAAYJ,EAAWI,YAE/B,EAER,CACJ,CC1CA,IAAI,GAA0C,SAAU+Y,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAWO,MAAMwb,WAA0BvE,GACnCnd,cACIod,QACA1d,KAAKiiB,QAAUjd,SAASK,cAAc,UACtCrF,KAAKiiB,QAAQxhB,KAAO,SACpBT,KAAKiiB,QAAQxc,aAAa,aAAc,SACxCzF,KAAKiiB,QAAQxF,UAAU9O,IAAI,wBAC3B3N,KAAKiiB,QAAQxF,UAAU9O,IAAI,uBAC3B3N,KAAKkiB,WAAald,SAASK,cAAc,OACzCrF,KAAKkiB,WAAWzF,UAAU9O,IAAI,6BAC9B3N,KAAKmiB,MAAQnd,SAASK,cAAc,QACpCrF,KAAKmiB,MAAM1F,UAAU9O,IAAI,mBACzB3N,KAAKkiB,WAAW3b,YAAYvG,KAAKmiB,OACjCniB,KAAKoiB,MAAQpd,SAASK,cAAc,QACpCrF,KAAKoiB,MAAM3F,UAAU9O,IAAI,mBACzB3N,KAAKkiB,WAAW3b,YAAYvG,KAAKoiB,MACrC,CAEIC,YACA,OAAKriB,KAAK+Q,eAAkB/Q,KAAK+Q,cAAcT,QAAQ,cAEhDtQ,KAAK+Q,cADD,IAEf,CACA6M,oBACIF,MAAME,oBACN5d,KAAKuG,YAAYvG,KAAKkiB,YACtBliB,KAAKuG,YAAYvG,KAAKiiB,SACtBpe,QAAQ2D,UAAU8a,MAAK,IAAMtiB,KAAKuiB,UACtC,CACA1E,uBACIH,MAAMG,uBACN7d,KAAKmG,YAAYnG,KAAKkiB,YACtBliB,KAAKmG,YAAYnG,KAAKiiB,QAC1B,CAEAM,SACI,IAAKviB,KAAKqiB,MACN,OACJ,MAAMlC,EAAWngB,KAAKqiB,MAAMnC,gBAC5BlgB,KAAKwiB,WAAarC,EAASvf,OAC3BZ,KAAKyiB,gBAAgB,WAAYziB,KAAKqiB,MAAMpC,UAC5CjgB,KAAK0iB,WAAWvC,EAAStW,KAAK6D,GAASA,EAAKiV,OAChD,CAEA1U,MAAM2U,EAAOC,GACT,MAAMjiB,EAASgiB,EAAMhiB,OACfgV,EAAOhV,EAASiiB,EAChB3L,EAAU,CAAEtB,OAAMhV,SAAQiiB,SAChC7iB,KAAKmiB,MAAMW,YAAcF,EAAMpV,MAAM,EAAGqV,GAAOxN,KAAK,MAEhDrV,KAAKoiB,MAAMU,YADXlN,EAAO,E5BHZ,SAAgB3L,EAAK8C,EAAQ0D,EAAU3F,GAC1C,OAAOb,EAAI/C,QAAQuJ,GAAS,CAACsS,EAAOrf,KAChC,MAAMiF,EDAmCa,ECAzBuD,GAAQrJ,GDA0C,IAAI0I,MAAM,UAApD3C,GCCxB,YAAetH,IAARwG,EAAoBoa,EAAQpa,CAAG,GAE9C,C4BDqCqa,CAAOhjB,KAAKijB,iBAAmB,GAAI/L,GAGnC,EAEjC,CAEAwL,WAAWE,GACP,IAAIlG,EAAO,EACX,GACI1c,KAAKiO,MAAM2U,IAASlG,SACfA,GAAQkG,EAAMhiB,QAAUZ,KAAKkiB,WAAWgB,aAAeljB,KAAKkiB,WAAWjK,aAChFjY,KAAKiO,MAAM2U,EAAOlG,EAAO,EAC7B,CAEAyG,SAAS5hB,GACAvB,KAAKqiB,QAEVriB,KAAKqiB,MAAMxB,gBAAe,GAC1Btf,EAAE6hB,kBACF7hB,EAAE8hB,iBACN,CACAC,YACItjB,KAAKuiB,QACT,EAEJP,GAAkB/S,GAAK,sBACvB,GAAW,CACP5D,KACD2W,GAAkBxd,UAAW,iBAAa,GAC7C,GAAW,CACP6G,KACD2W,GAAkBxd,UAAW,uBAAmB,GACnD,GAAW,CACPsH,KACDkW,GAAkBxd,UAAW,gBAAY,GAC5C,GAAW,CACP0X,GAAO,CACHrW,MAAO,mBACP1G,OAASqR,GAAOA,EAAG6R,SAExBL,GAAkBxd,UAAW,SAAU,MAC1C,GAAW,CACP0X,GAAO,CAAErW,MAAO,QAASyT,SAAU,2BACpC0I,GAAkBxd,UAAW,WAAY,MAC5C,GAAW,CACP0X,GAAO,CAAErW,MAAO,SAAU1G,OAAQmF,SAClCsU,GAAS+I,KACVK,GAAkBxd,UAAW,YAAa,MC/F7C,MAMa+e,GAAW,CAACjY,EAAS,CAAC,KAC/BA,EAASxL,OAAOoB,OAAO,CAAEuI,aAAc,CAAC,GAAK6B,GACtC,CAACnM,EAAQoM,KACZ,MAAMC,EATQ,EAACD,EAAUE,IAAaA,EAAW,QAAQzB,EAAYuB,KAAcvB,EAAYuB,GAS9E,CAAcD,EAAOxD,MAAQyD,IAAYD,EAAOG,UACjE3L,OAAOK,eAAehB,EAAQoM,EA3BtC,SAAiCC,EAAUO,EAAUtC,GACjD,SAAS9J,IAEL,OAAOgL,EADaI,EAAQ/K,KAAMwL,EAAU,IAAIpB,OACnBX,EACjC,CAWA,OAAOsC,EAAW,CAAEpM,OAAQ,CAAEA,MAAKO,IAVnC,SAAaZ,GACT,IACI,GAAqB,iBAAVA,EACP,MAAMyC,MAAM,0BAChBoJ,EAAQnL,KAAMwL,IAAUlM,GAAQkkB,KAAKC,UAAUnkB,GAInD,CAFA,MAAOiC,GACHqJ,QAAQlD,MAAM,0CAA2CnG,EAC7D,CACJ,EAEJ,CAWgDmiB,CAAwBlY,IAAYF,EAAOM,SAAUN,EAAO7B,cAAc,GC7B1H,MAAMka,GAAKrf,QAAU,EAAAH,EACfyf,GAAYD,GAAGE,mBAAqB,IAAIzV,IAC9CuV,GAAGE,kBAAoBD,GCKvB,MAAM,UAAEE,GAAS,OAAEC,GAAM,SAAEC,IAAa1f,OAAO2f,UAElCC,GAAY,WAAWpP,KAAKgP,IAC5BK,GAAOD,GAEPE,GAAa,iBAAiBtP,KAAKgP,IACnCO,GAAc,WAAWvP,KAAKgP,IAC9BQ,GAASF,IAAcC,GAEvBE,GAAU,SAASzP,KAAKgP,MAAe,cAAchP,KAAKgP,IAC1DU,GAAY,2BAA2B1P,KAAKgP,IAE5CW,GAAU,2BAA2B3P,KAAKgP,IAC1CY,IAAYD,IAAW,aAAa3P,KAAKiP,IAEzCY,GAAW,kBAAkB7P,KAAKgP,IAElCc,GAAWD,IAAY,iCAAiC7P,KAAKgP,IAE7De,GAAUF,KAAaC,GAEvBE,GAAQ,gDAAgDhQ,KAAKgP,IAE7DiB,GAAY,WAAWjQ,KAAKgP,IAC5BkB,GAAsD,aAAbhB,IAA2B1f,OAAO2f,UAAUgB,eAAiB,EACtGC,GAAc,mBAAmBpQ,KAAKkP,KAAagB,GACnDG,GAAiB,wCAAwCrQ,KAAKmP,UAAUH,WACxEsB,GAAWF,IAAeH,IAAaI,GACvCE,GAAiBH,IAAeP,IAAY,SAAS7P,KAAKgP,IAE1DwB,GAAgB,MACzB,MAAMC,EAASjhB,OAAO2f,UACtB,SAAIsB,EAAON,iBAAkBM,EAAOC,mBAE5B,iBAAkBlhB,QAAY,kBAAmBA,QAAUU,oBAAoBygB,KAC1F,EAL4B,GAQhBC,IAAYC,WAAW,iBAAiBrV,QAExCsV,GAEF,CACHC,MAFYP,GAEK,aAAe,cAChCQ,KAHYR,GAGI,YAAc,cAC9BS,IAJYT,GAIG,WAAa,aAOpC,IAAIU,GAAiB,QAGrBA,GAAe9B,UAAYA,GAC3B8B,GAAe7B,KAAOA,GAEtB6B,GAAe5B,WAAaA,GAC5B4B,GAAe3B,YAAcA,GAC7B2B,GAAe1B,OAASA,GAExB0B,GAAezB,QAAUA,GACzByB,GAAexB,UAAYA,GAE3BwB,GAAevB,QAAUA,GACzBuB,GAAetB,SAAWA,GAE1BsB,GAAerB,SAAWA,GAE1BqB,GAAepB,SAAWA,GAE1BoB,GAAenB,QAAUA,GAEzBmB,GAAelB,MAAQA,GAEvBkB,GAAejB,UAAYA,GAC3BiB,GAAehB,cAAgBA,GAC/BgB,GAAed,YAAcA,GAC7Bc,GAAeb,eAAiBA,GAChCa,GAAeZ,SAAWA,GAC1BY,GAAeX,eAAiBA,GAEhCW,GAAeV,cAAgBA,GAG/BU,GAAeN,SAAWA,GAE1BM,GAAeJ,aAAeA,GAC9BI,GAhG8C,SAAUxN,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CA2FiB,CAAW,CACxB0F,EAAS,mBACV8Z,IC7FI,MAAMC,GACT3lB,cACIN,KAAKkmB,IAAM,KACXlmB,KAAKmmB,SAAW,KAEhBnmB,KAAKomB,IAAM,KACPpmB,KAAKmmB,SAAW,KAChBnmB,KAAKkmB,KAAOlmB,KAAKkmB,KAAK,CAE9B,CAEI9f,SACA,OAAOpG,KAAKkmB,GAChB,CASAG,IAAIC,EAAMC,GAAQ,GACd,MAAM3gB,EAAO5F,KAAKwmB,SAYlB,MAXoB,mBAATF,IACHC,GAA0B,iBAAVA,IAChBA,GAASA,GACQ,iBAAVA,GAAsBA,GAAS,GACtCvmB,KAAKkmB,IAAMI,EACXtmB,KAAKmmB,SAAW7hB,OAAO+B,WAAWrG,KAAKomB,IAAKG,IAG5CD,KAGD1gB,CACX,CAEA4gB,SACI,MAAM5gB,EAAO5F,KAAKkmB,IAGlB,MAF0B,iBAAlBlmB,KAAKmmB,UAA0BngB,aAAahG,KAAKmmB,UACzDnmB,KAAKkmB,IAAMlmB,KAAKmmB,SAAW,KACpBvgB,CACX,EChDJ,IAAI,GAA0C,SAAU4S,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAYA,MAAMigB,GAAa,IAAI7X,QAOvB,IAAI8X,GAAkC,cAA4BjJ,GAC9Dnd,cACIod,SAAShF,WAET1Y,KAAK2mB,OAAQ,EAEb3mB,KAAK4mB,MAAQ,IAAIX,GAEjBjmB,KAAK6mB,aAAc,CACvB,CACAjJ,oBAEI,GADAF,MAAME,qBACD5d,KAAK+C,KAAO/C,KAAK8mB,SAAU,CAC5B,MAAMC,EAAM/mB,KAAKM,YAAY2O,GAC7BjP,KAAK+C,GHlCY,EAAC+E,EAAMkf,EAASlf,KACzC,MAAMmf,GAAOrD,GAAUjkB,IAAImI,IAAS,GAAK,EAEzC,OADA8b,GAAU1jB,IAAI4H,EAAMmf,GACbD,EAASC,CAAG,EG+BDC,CAAcH,EAAKA,EAAM,IACvC,CACA/mB,KAAKmnB,gBAAkBnnB,KAAKgM,aAAa,QACzChM,KAAKonB,iBACT,CACAvJ,uBACIH,MAAMG,uBACN4I,GAAW5X,OAAO7O,KACtB,CACAqnB,yBAAyB7b,EAAU8b,EAAQC,GACvC,GAAKvnB,KAAK8d,WAAayJ,IAAWD,EAElC,OAAQ9b,GACJ,IAAK,OACD,GAAIxL,KAAKwnB,OAASxnB,KAAKgM,aAAa,QAChC,OACJhM,KAAKme,OAAOne,KAAKwnB,KAAM,CAAEC,UAAW,YAAaC,UAAW,EAAGC,UAAW,IAC1E,MACJ,IAAK,QACD3nB,KAAKse,OAAOte,KAAK4nB,oBAAqB,CAClCC,OAAQ,CAAEC,aAAcR,EAAQS,aAAcR,KAI9D,CAEAH,kBACQpnB,KAAKgoB,eACLhoB,KAAKme,OAAOne,KAAKmnB,gBAAiBnnB,KAAKgoB,cAE/C,CAEAC,yBAAyBC,GACrBA,EAAQloB,KAAK+d,KAAK/d,KAAKmoB,kBAAoBnoB,KAAKge,MAAMhe,KAAKmoB,iBAC/D,CAEAC,uBAAuBF,EAAOP,GACrB3B,GAAeN,WAEpB1lB,KAAKqoB,iBAAmBH,QAAuB/lB,IAAdwlB,GAA2BA,OAAYxlB,EACpEnC,KAAK6mB,cAAgBqB,IAEzBloB,KAAK6mB,YAAcqB,EACnBA,EAAQloB,KAAK+d,KAAK/d,KAAKsoB,eAAiBtoB,KAAKge,MAAMhe,KAAKsoB,eACxDJ,EAAQloB,KAAK+d,KAAK/d,KAAKuoB,eAAiBvoB,KAAKge,MAAMhe,KAAKuoB,gBAC5D,CAEAC,mBAAmBvmB,GACf,OAAOnC,OAAOoB,OAAO,CAAC,EAAGlB,KAAKyoB,cCpF/B,SAAclkB,EAAK8L,EAAY,MAAM,IACxC,MAAM3G,EAAS5J,OAAOoB,OAAO,CAAC,EAAGqD,GAAO,CAAC,GAIzC,OAHAzE,OAAOiE,KAAK2F,GAAQlI,SAASkC,KACvB2M,EAAU3M,EAAKgG,EAAOhG,YAAiBgG,EAAOhG,EAAI,IAEjDgG,CACX,CAGWgf,CD2E0DzmB,GC3E9C,CAAC,GAAG,CAACyB,EAAKpE,SAAoB,IAAVA,ID4EvC,CAEA6e,OAAOlB,GAASjd,KAAKwnB,KAAMvlB,GACvB,OAAOgb,EAAQjd,KAAK2oB,KAAK1mB,GAAUjC,KAAK4oB,KAAK3mB,EACjD,CAEA0mB,KAAK1mB,GAKD,OAJAA,EAASjC,KAAKwoB,mBAAmBvmB,GACjCjC,KAAK4mB,MAAMP,IAAIrmB,KAAK6oB,SAAS3pB,KAAKc,KAAMiC,IAAS,QAAQA,EAAOylB,UAAWzlB,EAAOskB,QAClFvmB,KAAKioB,yBAAyBjoB,KAAK8oB,sBACnC9oB,KAAKooB,yBAAyBnmB,EAAO8mB,YAAY,QAAQ9mB,EAAO0lB,UAAW1lB,EAAOskB,QAC3EvmB,IACX,CAEA4oB,KAAK3mB,GAKD,OAJAA,EAASjC,KAAKwoB,mBAAmBvmB,GACjCjC,KAAK4mB,MAAMP,IAAIrmB,KAAKgpB,SAAS9pB,KAAKc,KAAMiC,IAAS,QAAQA,EAAO0lB,UAAW1lB,EAAOskB,QAClFvmB,KAAKioB,0BAAyB,GAC9BjoB,KAAKooB,yBAAyBnmB,EAAO8mB,YAAY,QAAQ9mB,EAAO0lB,UAAW1lB,EAAOskB,QAC3EvmB,IACX,CAEA6oB,SAAS5mB,IACAA,EAAOgnB,OAASjpB,KAAKwnB,OAErBvlB,EAAOinB,QAAWlpB,KAAKse,OAAOte,KAAKmpB,kBAAmB,CAAEtB,OAAQ,CAAE5lB,eAEvEjC,KAAKopB,UAAYnnB,EAAOmnB,UACxBppB,KAAKwnB,MAAO,EACZxnB,KAAKqpB,OAAOpnB,GACPA,EAAOinB,QACRlpB,KAAKse,OAAOte,KAAKspB,WAAY,CAAEzB,OAAQ,CAAE5lB,UAAUyZ,YAAY,IACvE,CAEAsN,SAAS/mB,IACAA,EAAOgnB,OAAUjpB,KAAKwnB,QAEtBvlB,EAAOinB,QAAWlpB,KAAKse,OAAOte,KAAKupB,kBAAmB,CAAE1B,OAAQ,CAAE5lB,eAEvEjC,KAAKwnB,MAAO,EACZxnB,KAAKwpB,OAAOvnB,GACZjC,KAAKioB,0BAAyB,GACzBhmB,EAAOinB,QACRlpB,KAAKse,OAAOte,KAAKypB,WAAY,CAAE5B,OAAQ,CAAE5lB,UAAUyZ,YAAY,IACvE,CAMA2N,OAAOpnB,GACH2a,GAAcjP,IAAI3N,KAAMA,KAAK0pB,aAC7B9M,GAAcjP,IAAI3I,SAASoP,KAAMpU,KAAK2pB,UAAW3pB,MACjDA,KAAK4pB,aACL5pB,KAAKse,OAAOte,KAAK6pB,cACrB,CAMAL,OAAOvnB,GACH2a,GAAc7C,OAAO/Z,KAAMA,KAAK0pB,aAChC9M,GAAc7C,OAAO/U,SAASoP,KAAMpU,KAAK2pB,UAAW3pB,MACpDA,KAAK4pB,YACT,CAEIpC,WACA,OAAOxnB,KAAK2mB,KAChB,CACIa,SAAKloB,GACLU,KAAKyiB,gBAAgB,OAAQziB,KAAK2mB,MAAQrnB,EAC9C,CAEI8pB,gBACA,OAAO3C,GAAW9mB,IAAIK,KAC1B,CACIopB,cAAU5Y,GACVA,EAAKiW,GAAWvmB,IAAIF,KAAMwQ,GAAMiW,GAAW5X,OAAO7O,KACtD,CAEI8pB,kBACA,MAAM3qB,EAASa,KAAKoF,aAAa,eACjC,MAAe,SAAXjG,EACO,KACJA,EAASa,KAAK+pB,cAAc5qB,GAAUa,IACjD,CAEA4pB,aACI,MAAMI,EAAWhqB,KAAK8pB,YACjBE,GAELA,EAASvkB,aAAa,cAAe6E,QAAQtK,KAAK2mB,OACtD,CAEAsD,gBAAgB1oB,GACZ,MAAMpC,EAASoC,EAAEpC,OAEjB,QAAIa,KAAKgQ,SAAS7Q,IAGda,KAAKopB,WAAappB,KAAKopB,UAAUpZ,SAAS7Q,IAGrCoC,aAAa2oB,eAAiB3M,GAAYvc,SAASO,EAAEmC,KAClE,CACAymB,cAAc5oB,GACVvB,KAAK4oB,KAAK,CAAEnB,UAAW,QAAS2B,UAAW7nB,EAAEpC,OAAQ0G,MAAOtE,GAChE,CACA4mB,iBAAiB5mB,GACRvB,KAAKiqB,gBAAgB1oB,IAG1BvB,KAAK4oB,KAAK,CAAEnB,UAAW,gBAAiBE,UAAW,EAAG9hB,MAAOtE,GACjE,CACA6oB,iBAAiB7oB,GACTvB,KAAKqqB,YAAc9oB,EAAEmC,MAAQyZ,IAC7Bnd,KAAK4oB,KAAK,CAAEnB,UAAW,WAAY5hB,MAAOtE,GAElD,CACA+mB,cAAc/mB,GACV,MAAMomB,EAAY3nB,KAAKqoB,iBACjBiC,EAAa,CAAE7C,UAAW,aAAcsB,YAAY,EAAMK,UAAWppB,KAAKopB,UAAWvjB,MAAOtE,EAAGomB,aACrG3nB,KAAK2oB,KAAK7oB,OAAOoB,OAAOopB,EAAYtqB,KAAKuqB,kBAC7C,CACAhC,cAAchnB,GACV,MAAMomB,EAAY3nB,KAAKqoB,iBACjBiC,EAAa,CAAE7C,UAAW,aAAcsB,YAAY,EAAMK,UAAWppB,KAAKopB,UAAWvjB,MAAOtE,EAAGomB,aACrG3nB,KAAK4oB,KAAK9oB,OAAOoB,OAAOopB,EAAYtqB,KAAKuqB,kBAC7C,CAEAC,mBAAmBjpB,GACf,MAAMsmB,EAAStmB,EAAEsmB,QAAU,CAAC,EAC5B,OAAKtX,EAAUvQ,KAAM6nB,EAAO9E,OAErBjjB,OAAOoB,OAAO,CAAC,EAAG2mB,EAAQ,CAAEhiB,MAAOtE,IAD/B,IAEf,CAEAkpB,eAAelpB,GACX,MAAMU,EAASjC,KAAKwqB,mBAAmBjpB,GACvCU,GAAUjC,KAAK2oB,KAAK1mB,EACxB,CAEAyoB,eAAenpB,GACX,MAAMU,EAASjC,KAAKwqB,mBAAmBjpB,GACvCU,GAAUjC,KAAK4oB,KAAK3mB,EACxB,GAEJykB,GAAczX,GAAK,iBACnByX,GAAciE,mBAAqB,CAAC,OAAQ,SAC5C,GAAW,CACProB,GAAK,oBACNokB,GAAcliB,UAAW,yBAAqB,GACjD,GAAW,CACPlC,GAAK,oBACNokB,GAAcliB,UAAW,yBAAqB,GACjD,GAAW,CACPlC,GAAK,aACNokB,GAAcliB,UAAW,kBAAc,GAC1C,GAAW,CACPlC,GAAK,aACNokB,GAAcliB,UAAW,kBAAc,GAC1C,GAAW,CACPlC,GAAK,mBACNokB,GAAcliB,UAAW,wBAAoB,GAChD,GAAW,CACPlC,GAAK,mBACNokB,GAAcliB,UAAW,wBAAoB,GAChD,GAAW,CACPlC,GAAK,qBACNokB,GAAcliB,UAAW,0BAAsB,GAClD,GAAW,CACPlC,GAAK,qBACNokB,GAAcliB,UAAW,0BAAsB,GAClD,GAAW,CACPlC,GAAK,qBACNokB,GAAcliB,UAAW,2BAAuB,GACnD,GAAW,CACP6G,KACDqb,GAAcliB,UAAW,iBAAa,GACzC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,UACtBid,GAAcliB,UAAW,mBAAe,GAC3C,GAAW,CACP6G,EAAK,CAAEvD,KAAM,WACd4e,GAAcliB,UAAW,iBAAa,GACzC,GAAW,CACP6G,EAAK,CAAEvD,KAAM,cACd4e,GAAcliB,UAAW,oBAAgB,GAC5C,GAAW,CACPsH,KACD4a,GAAcliB,UAAW,gBAAY,GACxC,GAAW,CACPsH,KACD4a,GAAcliB,UAAW,kBAAc,GAC1C,GAAW,CACPsH,KACD4a,GAAcliB,UAAW,4BAAwB,GACpD,GAAW,CACP+e,GAAS,CAAE9Z,aAAc,CAAEwf,OAAO,EAAMxB,UAAW,WACpDf,GAAcliB,UAAW,qBAAiB,GAC7C,GAAW,CACP+e,GAAS,CAAE9Z,aAAc,CAAC,KAC3Bid,GAAcliB,UAAW,qBAAiB,GAC7C,GAAW,CACP+e,GAAS,CAAE9Z,aAAc,CAAC,KAC3Bid,GAAcliB,UAAW,wBAAoB,GAChD,GAAW,CACP0X,GAAO,CACHrW,MAAO,QACPyT,SAAW9I,GAAOA,EAAGoa,cAAgB,MAE1ClE,GAAcliB,UAAW,gBAAiB,MAC7C,GAAW,CACP0X,GAAO,CACHhB,MAAM,EACNrV,MAAO,2BACP1G,OAAQ6F,SAASoP,KACjB8E,SAAS,KAEdwN,GAAcliB,UAAW,mBAAoB,MAChD,GAAW,CACP0X,GAAO,YACRwK,GAAcliB,UAAW,mBAAoB,MAChD,GAAW,CACP0X,GAAO,CAAEhB,MAAM,EAAOrV,MAAO,gBAC9B6gB,GAAcliB,UAAW,gBAAiB,MAC7C,GAAW,CACP0X,GAAO,CAAEhB,MAAM,EAAOrV,MAAO,gBAC9B6gB,GAAcliB,UAAW,gBAAiB,MAC7C,GAAW,CACP0X,IAAQ1L,GAAOA,EAAGqa,sBACnBnE,GAAcliB,UAAW,iBAAkB,MAC9C,GAAW,CACP0X,IAAQ1L,GAAOA,EAAGsa,sBACnBpE,GAAcliB,UAAW,iBAAkB,MAC9CkiB,GAAkC,GAAW,CACzCxa,EAAS,eACVwa,I,cEnUI,SAASqE,GAAM5rB,EAAQC,EAAaC,GACvC,IAAKA,GAA0C,mBAArBA,EAAWC,MACjC,MAAM,IAAIC,UAAU,oEAExB,MAAM6G,EAAK/G,EAAWC,MACtBD,EAAWC,MAAQ,YAAamJ,GCJ7B,IAAyB3H,IDKR,IAAMsF,EAAG1E,KAAK1B,QAASyI,GCJf,YAAxBzD,SAASgmB,WACThmB,SAASnE,iBAAiB,oBAAoB,SAASuF,IACnDpB,SAAS7D,oBAAoB,mBAAoBiF,GACjDC,YAAW,IAAMvF,KACrB,IAGAuF,YAAW,IAAMvF,KDFrB,CACJ,CEFO,MAAMmqB,GAET/Y,aAAa1B,GACT,MAA2D,QAApDqE,iBAAiBrE,GAAMxL,SAASoP,MAAM8W,SACjD,CAIWC,wBACP,IAAIA,EAAa,UACjB,MAAM3a,EAyBd,WACI,MAAMA,EAAKxL,SAASK,cAAc,OAWlC,OAVAmL,EAAGjK,YAAYvB,SAASomB,eAAe,SACvC5a,EAAG6a,IAAM,MACTvrB,OAAOoB,OAAOsP,EAAG8a,MAAO,CACpBC,SAAU,WACVlZ,IAAK,UACLC,MAAO,MACPC,OAAQ,MACRiZ,SAAU,OACV9W,SAAU,WAEPlE,CACX,CAtCmBib,GAOX,OANAzmB,SAASoP,KAAK7N,YAAYiK,GACtBA,EAAGkb,YAAc,IACjBlb,EAAGkb,WAAa,EAChBP,EAAa3a,EAAGkb,WAAa,EAAI,WAAa,WAElD1mB,SAASoP,KAAKjO,YAAYqK,GACnB2a,CACX,CACAjZ,2BAA2B1B,EAAIlR,EAAQ,KAAMqsB,EAAQV,GAASU,MAAMnb,IAEhE,OADAlR,EAAmB,OAAVA,EAAkBkR,EAAGkb,WAAapsB,EACnCqsB,EAAQV,GAASE,WAAa,IAClC,IAAK,WACD,OAAO3a,EAAG0S,YAAc1S,EAAGyH,YAAc3Y,EAC7C,IAAK,UACD,OAAOkR,EAAG0S,YAAc1S,EAAGyH,YAAc3Y,EAC7C,QACI,OAAOA,EAEnB,GArC0C,SAAUkZ,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GACzIiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,EAC5D,CAkCA,CAAW,CACP8H,KACD2c,GAAU,aAAc,MCzC3B,IAAI,GAA0C,SAAUzS,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAeA,IAAIolB,GAAe,cAA2BnO,GAC1Cnd,cACIod,SAAShF,WACT1Y,KAAK6rB,cAAgBlK,IAAcpgB,GAAMvB,KAAK8rB,eAAevqB,KAC7DvB,KAAK+rB,iBAAmBpK,IAAa,IAAM3hB,KAAKgsB,YAChDhsB,KAAKisB,aAAe,EACpBjsB,KAAKksB,gBAAkB,IAAIC,eAAensB,KAAK+rB,kBAC/C/rB,KAAK6e,kBAAoB,IAAIC,kBAAkBsN,GAAQpsB,KAAKqsB,qBAAqBD,IACrF,CACAxO,oBACIF,MAAME,oBACN5d,KAAKuiB,SACLviB,KAAKssB,YACT,CACAzO,uBACI7d,KAAKusB,qBACLvsB,KAAKisB,cAAgB3nB,OAAO0B,aAAahG,KAAKisB,aAClD,CACA5E,yBAAyB7b,EAAU8b,EAAQC,GAClCvnB,KAAK8d,WAAawJ,IAAWC,IAEjB,WAAb/b,GACAxL,KAAKssB,aACQ,eAAb9gB,GACAxL,KAAKgsB,UACb,CACAM,aACItsB,KAAKwsB,QAAUxsB,KAAKb,OAChB6V,EAAmByX,MAAMzsB,KAAKb,OAAQa,MACtC,IACR,CAEIwsB,cACA,OAAOxsB,KAAK0sB,UAAY,IAC5B,CACIF,YAAQG,GACR3sB,KAAKusB,qBACLvsB,KAAK0sB,SAAWC,EAChB3sB,KAAK4sB,mBACL5sB,KAAK+rB,kBACT,CACAxJ,SACIviB,KAAK6sB,UAAY,GACjB7sB,KAAK8sB,gBAAkB9nB,SAASK,cAAc,OAC9CrF,KAAK8sB,gBAAgB1Q,UAAYpc,KAAK+sB,WACtC/sB,KAAKgtB,gBAAkBhoB,SAASK,cAAc,OAC9CrF,KAAKgtB,gBAAgB5Q,UAAYpc,KAAKitB,WACtCjtB,KAAK8sB,gBAAgBvmB,YAAYvG,KAAKgtB,iBACtChtB,KAAKuG,YAAYvG,KAAK8sB,gBAC1B,CACAF,mBACS5sB,KAAKwsB,UAGNxnB,SAAS6O,kBAAoB7T,KAAKwsB,QAClCxsB,KAAK+d,KAAK,CAAElY,MAAO,gBAAiB1G,OAAQmF,QAAUtE,KAAKktB,oBAG3DltB,KAAK+d,KAAK,CAAElY,MAAO,SAAU1G,OAAQa,KAAKwsB,SAAWxsB,KAAKktB,mBAC1DltB,KAAKksB,gBAAgBzM,QAAQzf,KAAKwsB,UAGtCxsB,KAAK6e,kBAAkBY,QAAQzf,KAAKwsB,QAAS,CAAE/K,WAAW,IAC1D9X,MAAM4H,KAAKvR,KAAKwsB,QAAQ3lB,UAAUrF,SAASgP,GAAOxQ,KAAKksB,gBAAgBzM,QAAQjP,KACnF,CAEA6b,qBAAqBc,EAAO,IACxB,IAAKntB,KAAKwsB,QACN,OACJ,MAAMY,EAAiBD,EAAK/rB,QAAQgrB,GAAqB,cAAbA,EAAI3rB,OAChD2sB,EAAe5rB,SAAS4qB,IACpBziB,MAAM4H,KAAK6a,EAAIvM,YACVze,QAAQoP,GAAOA,aAAc+G,UAC7B/V,SAASgP,GAAOxQ,KAAKksB,gBAAgBzM,QAAQjP,KAClD7G,MAAM4H,KAAK6a,EAAItM,cACV1e,QAAQoP,GAAOA,aAAc+G,UAC7B/V,SAASgP,GAAOxQ,KAAKksB,gBAAgBmB,UAAU7c,IAAI,IAExD4c,EAAexsB,QACfZ,KAAK+rB,kBACb,CACAQ,qBACSvsB,KAAKwsB,UAEVxsB,KAAKge,MAAMhe,KAAKktB,mBACZloB,SAAS6O,kBAAoB7T,KAAKwsB,UAClCxsB,KAAKksB,gBAAgB9M,aACrBpf,KAAK6e,kBAAkBO,cAE/B,CAEIkO,qBACA,OAAKttB,KAAKwsB,QAEHxsB,KAAKutB,WACRvtB,KAAKwsB,QAAQtJ,YAAcljB,KAAKwsB,QAAQvU,YACxCjY,KAAKwsB,QAAQgB,aAAextB,KAAKwsB,QAAQrU,aAHlC,CAIf,CAEIsV,kBACA,OAAOztB,KAAKutB,WAAavtB,KAAK8sB,gBAAgBY,YAAc1tB,KAAK8sB,gBAAgBa,YACrF,CAEIC,kBACA,OAAO5tB,KAAKutB,WAAavtB,KAAKgtB,gBAAgBU,YAAc1tB,KAAKgtB,gBAAgBW,YACrF,CAEIE,gBAEA,IAAK7tB,KAAKwsB,UAAYxsB,KAAKwsB,QAAQtJ,cAAgBljB,KAAKwsB,QAAQgB,aAC5D,OAAO,EACX,MAAMM,EAAW9tB,KAAKutB,WAAavtB,KAAKwsB,QAAQvU,YAAcjY,KAAKwsB,QAAQrU,aACrE4V,EAAa/tB,KAAKutB,WAAavtB,KAAKwsB,QAAQtJ,YAAcljB,KAAKwsB,QAAQgB,aAC7E,OAAOlkB,KAAKsJ,KAAKkb,EAAW,GAAKC,EAAY,EACjD,CAEIxC,eACA,IAAKvrB,KAAKwsB,QACN,OAAO,EACX,MAAMwB,EAAehuB,KAAKutB,WAAatC,GAASgD,oBAAoBjuB,KAAKwsB,SAAWxsB,KAAKwsB,QAAQ0B,UACjG,OAAOluB,KAAKstB,eAAkBU,EAAehuB,KAAKstB,eAAkB,CACxE,CACI/B,aAASA,GACTvrB,KAAKmuB,eAAenuB,KAAKstB,eAAiBttB,KAAKouB,kBAAkB7C,IACjEvrB,KAAKquB,QACT,CAEAD,kBAAkB7C,GACd,MAAM+C,EAAmBhlB,KAAKsJ,IAAI,EAAGtJ,KAAKoJ,IAAI,EAAG6Y,IACjD,OAAKN,GAASU,MAAM3rB,KAAKwsB,UAAaxsB,KAAKutB,WAEZ,aAAxBtC,GAASE,WAA6BmD,EAAmB,EAAM,EAAIA,EAD/DA,CAEf,CAEAH,eAAeI,GACNvuB,KAAKwsB,SAEVxsB,KAAKwsB,QAAQgC,SAAS,CAClB,CAACxuB,KAAKutB,WAAa,OAAS,OAAQgB,EACpCE,SAAUzuB,KAAK0uB,SAAW,OAAS,UAE3C,CAEAL,SAEI,GADAruB,KAAKse,OAAO,oBAAqB,CAAE9C,SAAS,KACvCxb,KAAKgtB,kBAAoBhtB,KAAK8sB,gBAC/B,OACJ,MAAMe,EAAY7tB,KAAKytB,YAAcztB,KAAK6tB,UACpCc,GAAiB3uB,KAAKytB,YAAcI,GAAa7tB,KAAKurB,SACtDD,EAAQ,CACV,CAACtrB,KAAKutB,WAAa,OAAS,OAAQ,GAAGoB,MACvC,CAAC3uB,KAAKutB,WAAa,QAAU,UAAW,GAAGM,OAE/C/tB,OAAOoB,OAAOlB,KAAKgtB,gBAAgB1B,MAAOA,EAC9C,CAEAsD,gBACI,MAAM,SAAErD,EAAQ,UAAEsC,GAAc7tB,KAChCA,KAAKyiB,gBAAgB,WAAYoL,EAAY,GAAKtC,GAAY,GAC9DvrB,KAAKyiB,gBAAgB,SAAUoL,EAAY,GAAKtC,GAAY,GAC5DvrB,KAAKyiB,gBAAgB,WAAYoL,GAAa,EAClD,CAEA7B,UACIhsB,KAAKquB,SACLruB,KAAK4uB,eACT,CAEAC,WAAWhpB,GACP,MAAM,WAAE0nB,EAAU,YAAEK,EAAW,YAAEH,GAAgBztB,KAC3C8uB,EAAQhiB,EAAcjH,GACtBkpB,EjCrKgB,CAACve,IAC3B,MAAMwe,EiCoK4BhvB,KAAK8sB,gBjCpKtBzU,wBACXlL,EAAI6hB,EAAM3c,IAAM/N,OAAOwT,QAE7B,MAAO,CAAE7K,EADC+hB,EAAM5c,KAAO9N,OAAOsT,QAClBzK,IAAG,EiCiKI8hB,GAIf,QAHsB1B,EAAauB,EAAM7hB,EAAI8hB,EAAO9hB,EAAI6hB,EAAM3hB,EAAI4hB,EAAO5hB,GAE3BygB,EAAc,IADtCH,EAAcG,EAGxC,CAGAsB,eAAerpB,GACX7F,KAAKmvB,iBAAmBnvB,KAAKurB,SAC7BvrB,KAAKovB,iBAAmBpvB,KAAK6uB,WAAWhpB,GACxC,MAAMipB,EAAQhiB,EAAcjH,GAC5B7F,KAAKqvB,sBAAwBrvB,KAAKutB,WAAauB,EAAM7hB,EAAI6hB,EAAM3hB,EAC3DtH,EAAM1G,SAAWa,KAAKgtB,gBACtBhtB,KAAKsvB,oBAAoBzpB,GAGzB7F,KAAKuvB,oBAAmB,GAG5B/iB,EAAa3G,IAAU7F,KAAK+d,KAAK,CAAElY,MAAO,UAAW1G,OAAQmF,QAAUtE,KAAKwvB,cAC5E9iB,EAAa7G,IAAU7F,KAAK+d,KAAK,CAAElY,MAAO,WAAY1G,OAAQmF,QAAUtE,KAAKwvB,cAExE9iB,EAAa7G,IACdA,EAAMwd,gBACd,CAEAkM,mBAAmB9C,GACfzsB,KAAKisB,cAAgB3nB,OAAO0B,aAAahG,KAAKisB,cAC9C,MAAMV,EAAWvrB,KAAKurB,SAChBkE,GAAiBhD,EAAQ,EAAI,KAAOzsB,KAAK6tB,UAC/C7tB,KAAKurB,SAAWjiB,KAAKsJ,IAAI2Y,EAAWkE,EAAenmB,KAAKoJ,IAAI6Y,EAAWkE,EAAezvB,KAAKovB,mBACvFpvB,KAAKurB,WAAavrB,KAAKovB,kBAAoBpvB,KAAK0vB,qBAEpD1vB,KAAKisB,aAAe3nB,OAAO+B,WAAWrG,KAAKuvB,mBAAoB,KACnE,CAEAD,oBAAoBzpB,GAChB,IAAIlF,EACJX,KAAKyiB,gBAAgB,YAAY,GACT,QAAvB9hB,EAAKX,KAAKwsB,eAA4B,IAAP7rB,GAAyBA,EAAG2qB,MAAMqE,YAAY,kBAAmB,QAEjG3vB,KAAK+d,KAAK/d,KAAK4vB,cACfpjB,EAAa3G,IAAU7F,KAAK+d,KAAK,CAAElY,MAAO,YAAa1G,OAAQmF,QAAUtE,KAAK6vB,gBAC9EnjB,EAAa7G,IAAU7F,KAAK+d,KAAK,CAAElY,MAAO,YAAa1G,OAAQmF,QAAUtE,KAAK6vB,eAClF,CAEA/D,eAAejmB,GACX,MAAMipB,EAAQhiB,EAAcjH,GAEtBiqB,GADgB9vB,KAAKutB,WAAauB,EAAM7hB,EAAI6hB,EAAM3hB,GACjBnN,KAAKqvB,sBACtCU,EAAuB/vB,KAAKytB,YAAcztB,KAAK4tB,YAC/CoC,EAAYD,EAAwBD,EAAiBC,EAAwB,EACnF/vB,KAAKurB,SAAWvrB,KAAKmvB,iBAAmBa,EACxChwB,KAAK4uB,eACT,CAEAiB,eAAehqB,GACN7F,KAAK0uB,WAGV1uB,KAAK6rB,cAAchmB,GAEnBA,EAAMwd,iBACNxd,EAAMud,kBACV,CAEAoM,aAAa3pB,GACT,IAAIlF,EACJX,KAAKisB,cAAgB3nB,OAAO0B,aAAahG,KAAKisB,cAC9CjsB,KAAKyiB,gBAAgB,YAAY,GACT,QAAvB9hB,EAAKX,KAAKwsB,eAA4B,IAAP7rB,GAAyBA,EAAG2qB,MAAM2E,eAAe,mBAEjFjwB,KAAKge,MAAMhe,KAAK6vB,gBAChB7vB,KAAKge,MAAMhe,KAAKwvB,aACpB,CAEAI,aAAa/pB,GACTA,EAAMqqB,0BACV,CAKAC,WAAWtqB,GACDA,EAAM1G,kBAAkBoY,SAEzB1H,EAAehK,EAAM1G,OAAO+G,WAAYlG,KAAKwsB,UAElDxsB,KAAK+rB,kBACT,CAKAmB,kBAAkBrnB,GACK,WAAfA,EAAMpF,MAAqBT,KAAK0uB,UAEpC1uB,KAAK+rB,kBACT,GAEJH,GAAa3c,GAAK,gBAClB2c,GAAajB,mBAAqB,CAAC,SAAU,cAC7C,GAAW,CACP7e,KACD8f,GAAapnB,UAAW,kBAAc,GACzC,GAAW,CACPsH,KACD8f,GAAapnB,UAAW,0BAAsB,GACjD,GAAW,CACP6G,EAAK,CAAE5B,aAAc,cACtBmiB,GAAapnB,UAAW,cAAU,GACrC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,qBACtBmiB,GAAapnB,UAAW,kBAAc,GACzC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,qBACtBmiB,GAAapnB,UAAW,kBAAc,GACzC,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtBggB,GAAapnB,UAAW,gBAAY,GACvC,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtBggB,GAAapnB,UAAW,gBAAY,GACvC,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtBggB,GAAapnB,UAAW,eAAW,GACtC,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtBggB,GAAapnB,UAAW,aAAS,GACpC,GAAW,CACPumB,IACDa,GAAapnB,UAAW,oBAAqB,MAChD,GAAW,CACPumB,IACDa,GAAapnB,UAAW,uBAAwB,MACnD,GAAW,CACP0X,GAAO,yBACR0P,GAAapnB,UAAW,iBAAkB,MAC7C,GAAW,CACPtF,GAAA,GACD0sB,GAAapnB,UAAW,qBAAsB,MACjD,GAAW,CACPtF,GAAA,GACD0sB,GAAapnB,UAAW,sBAAuB,MAClD,GAAW,CACP0X,GAAO,CAAEhB,MAAM,EAAOrV,MAAO,QAAS1G,OAAQmF,OAAQmV,MAAM,EAAMP,SAAS,KAC5E0S,GAAapnB,UAAW,eAAgB,MAC3C,GAAW,CACP0X,GAAO,CACHrW,MAAQ2K,GAAOA,EAAGqZ,cAClB1qB,OAAQmF,UAEbsnB,GAAapnB,UAAW,aAAc,MACzConB,GAAe,GAAW,CACtB1f,EAAS,cACV0f,IC3VH,IAMIwE,GANA,GAA0C,SAAU5X,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAWA,IAAI6pB,GAAgBD,GAAkB,cAA4B3S,GAC9DG,oBACIF,MAAME,oBACN5d,KAAKswB,SAAW,EAChBtwB,KAAKyF,aAAa,OAAQ,YAC1BzF,KAAKyF,aAAa,gBAAiB6E,OAAOtK,KAAKmgB,UACnD,CACAkH,yBAAyB7b,GACJ,aAAbA,GACAxL,KAAKyF,aAAa,gBAAiB6E,OAAOtK,KAAKmgB,WAElC,aAAb3U,GACAxL,KAAKyF,aAAa,gBAAiB6E,OAAOtK,KAAK4gB,UAEvD,CACAyN,OAAO9N,GACCA,IACAvgB,KAAKuwB,SAAWhQ,GACpBvgB,KAAKV,MAAQU,KAAKuwB,SAASjxB,MAC3BU,KAAK4gB,SAAW5gB,KAAKuwB,SAAS3P,SAC9B5gB,KAAKmgB,SAAWngB,KAAKuwB,SAASpQ,SAC9BngB,KAAK8iB,YAAc9iB,KAAKuwB,SAAS5N,IACrC,CAEAzQ,aAAaqO,GACT,MAAM7S,EAAO1I,SAASK,cAAc+qB,GAAgBnhB,IAEpD,OADAvB,EAAK2gB,OAAO9N,GACL7S,CACX,GAEJ2iB,GAAcphB,GAAK,kBACnBohB,GAAc1F,mBAAqB,CAAC,WAAY,YAChD,GAAW,CACPtf,KACDglB,GAAc7rB,UAAW,aAAS,GACrC,GAAW,CACPsH,KACDukB,GAAc7rB,UAAW,gBAAY,GACxC,GAAW,CACPsH,KACDukB,GAAc7rB,UAAW,gBAAY,GACxC6rB,GAAgBD,GAAkB,GAAW,CACzClkB,EAAS,eACVmkB,IC3DH,IAAI,GAA0C,SAAU7X,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAaA,IAAIgqB,GAAgB,cAA4B5R,GAC5C1M,kBACIme,GAAcI,WACd/S,MAAM+S,UACV,CACAnwB,cACIod,QACA1d,KAAK0wB,MAAQ1rB,SAASK,cAAc,OACpCrF,KAAK0wB,MAAMjrB,aAAa,OAAQ,QAChCzF,KAAK0wB,MAAMjU,UAAU9O,IAAI,0BACzB3N,KAAK0wB,MAAMjU,UAAU9O,IAAI,6BACzB3N,KAAK2wB,QAAU3rB,SAASK,cAAcumB,GAAa3c,IACnDjP,KAAK2wB,QAAQxxB,OAAS,SACtBa,KAAK4wB,WAAa5rB,SAASK,cAAcgrB,GAAcphB,IACvDjP,KAAK4wB,WAAWnU,UAAU9O,IAAI,sBAClC,CACA0Z,yBAAyB7b,EAAU8b,EAAQC,GAClCvnB,KAAK8d,WAAayJ,IAAWD,IAEjB,qBAAb9b,IACAxL,KAAK4wB,WAAW9N,YAAcyE,GAEjB,aAAb/b,GACAxL,KAAK6wB,kBAEb,CACAjT,oBACIF,MAAME,oBACN5d,KAAKuG,YAAYvG,KAAK4wB,YACtB5wB,KAAKuG,YAAYvG,KAAK0wB,OACtB1wB,KAAKuG,YAAYvG,KAAK2wB,SACtB3wB,KAAK8wB,aACL9wB,KAAK6wB,iBACT,CACAhT,uBACIH,MAAMG,uBACN7d,KAAKuG,YAAYvG,KAAK4wB,YACtB5wB,KAAKuG,YAAYvG,KAAK0wB,OACtB1wB,KAAKuG,YAAYvG,KAAK2wB,QAC1B,CACAG,aACI,MAAM3xB,EAASa,KAAK+pB,cAAc,uBAC7B5qB,GAAYA,aAAkB4xB,oBAEnC/wB,KAAKgf,QAAU7f,EACnB,CACA6xB,eACShxB,KAAKgf,UAEVhf,KAAK0wB,MAAM7D,UAAY,GACvB7sB,KAAKixB,OAASjxB,KAAKkX,QAAQrN,IAAIwmB,GAAca,OACzClxB,KAAKmxB,aACLnxB,KAAKoxB,aAAapxB,KAAKixB,OAAO7vB,QAAQmf,GAAWA,EAAOJ,YACxDngB,KAAKoxB,aAAapxB,KAAKixB,OAAO7vB,QAAQmf,IAAYA,EAAOJ,aAGzDngB,KAAKoxB,aAAapxB,KAAKixB,QAE3BjxB,KAAKyiB,gBAAgB,WAAYziB,KAAKigB,UAC1C,CACAmR,aAAaxO,GACTA,EAAMphB,SAASkM,GAAS1N,KAAK0wB,MAAMnqB,YAAYmH,KAC/C,MAAOyI,GAAQyM,EAAMpV,OAAO,GAC5B2I,GAAQA,EAAKsG,UAAU9O,IAAI,gBAC/B,CACA0jB,mBACSrxB,KAAKigB,UAIVjgB,KAAK4wB,WAAWN,SAAW,EAC3BtwB,KAAK4wB,WAAWzQ,SAAWngB,KAAK2gB,gBAChC3gB,KAAK4wB,WAAW9N,YAAc9iB,KAAKsxB,gBAL/BtxB,KAAK4wB,WAAWxlB,gBAAgB,WAMxC,CACAylB,kBACI7wB,KAAKyF,aAAa,gBAAiB6E,OAAOtK,KAAK4gB,WAC1C5gB,KAAKgf,UAEVhf,KAAKgf,QAAQ4B,SAAW5gB,KAAK4gB,SACjC,CACAzB,gBAAgBI,EAAWC,GACvB9B,MAAMyB,gBAAgBI,EAAWC,GACjCxf,KAAKqxB,mBACLrxB,KAAKgxB,cACT,CACA3R,YACIrf,KAAKqxB,mBACLrxB,KAAKixB,OAAOzvB,SAASkM,GAASA,EAAK2gB,UACvC,CACA/O,gBACItf,KAAKgxB,cACT,CACAO,SAAShwB,GACL,GAAIvB,KAAK4gB,SACL,OACJ,MAAMzhB,EAASoC,EAAEpC,OACZA,GAAYA,aAAkBkxB,KAE/BlxB,EAAOsd,UAAUzM,SAAS,uBAC1BhQ,KAAK6gB,gBAAgB1hB,EAAOghB,UAG5BngB,KAAKsgB,YAAYnhB,EAAOG,OAAQH,EAAOghB,UAE/C,CACAqR,WAAWjwB,GAKP,GAJI,CAAC2b,GAAOE,IAAOpc,SAASO,EAAEmC,OAC1B1D,KAAKuxB,SAAShwB,GACdA,EAAE8hB,kBAEF,CAAChG,GAAUC,IAAYtc,SAASO,EAAEmC,KAAM,CACxC,MAAM2I,EAAQrM,KAAKixB,OAAOzc,QAAQxP,SAASysB,eACrCC,EAAQ1xB,KAAKixB,OAAOrwB,OACpB+wB,EAAYpwB,EAAEmC,MAAQ2Z,IAAY,EAAI,EAC5C,IAAe,IAAXhR,EACA,OACJrM,KAAKixB,QAAQ5kB,EAAQslB,EAAYD,GAASA,GAAOE,QACjDrwB,EAAE8hB,gBACN,CACJ,GAEJmN,GAAcvhB,GAAK,kBACnBuhB,GAAc7F,mBAAqB,CAAC,mBAAoB,YACxD,GAAW,CACPtf,EAAK,CAAE5B,aAAc,gBACtB+mB,GAAchsB,UAAW,sBAAkB,GAC9C,GAAW,CACPsH,KACD0kB,GAAchsB,UAAW,gBAAY,GACxC,GAAW,CACPsH,KACD0kB,GAAchsB,UAAW,mBAAe,GAC3C,GAAW,CACPtF,GAAA,GACDsxB,GAAchsB,UAAW,kBAAmB,MAC/C,GAAW,CACP0X,GAAO,CAAEJ,SAAS,KACnB0U,GAAchsB,UAAW,YAAa,MACzC,GAAW,CACPtF,GAAA,GACDsxB,GAAchsB,UAAW,gBAAiB,MAC7C,GAAW,CACP0X,GAAO,UACRsU,GAAchsB,UAAW,WAAY,MACxC,GAAW,CACP0X,GAAO,YACRsU,GAAchsB,UAAW,aAAc,MAC1CgsB,GAAgB,GAAW,CACvBtkB,EAAS,eACVskB,ICvKH,IAAI,GAA0C,SAAUhY,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAaO,MAAMqrB,WAA0BnL,GACnCxU,kBACIse,GAAcC,WACd/S,MAAM+S,UACV,CACAnwB,cACIod,QACA1d,KAAK8xB,wBAA0BnQ,IAAa,IAAM3hB,KAAK+xB,mBACvD/xB,KAAKqqB,YAAa,EAClBrqB,KAAK8oB,sBAAuB,EAC5B9oB,KAAK0wB,MAAQ1rB,SAASK,cAAcmrB,GAAcvhB,GACtD,CACAmY,kBAAoB,CACpBxJ,oBACIF,MAAME,oBACN5d,KAAKuG,YAAYvG,KAAK0wB,MAC1B,CACA7S,uBACIH,MAAMG,uBACN7d,KAAKmG,YAAYnG,KAAK0wB,MAC1B,CACArH,OAAOpnB,GACH+C,SAASoP,KAAK7N,YAAYvG,MAC1BA,KAAKgyB,iBAAmB1tB,OAAO0B,aAAahG,KAAKgyB,iBACjDhyB,KAAKke,MAAMle,KAAKiyB,OAAOC,eAAe,GACtClyB,KAAK0wB,MAAMS,YAAcnxB,KAAKiyB,OAAOd,YACrCnxB,KAAK0wB,MAAMY,eAAiBtxB,KAAKiyB,OAAOX,eACxCtxB,KAAK0wB,MAAM1R,QAAUhf,KAAKiyB,OAAOjT,QACjCtB,MAAM2L,OAAOpnB,GACb,MAAMkwB,EAAYnyB,KAAK+pB,cAAc,cACrCoI,SAAsDA,EAAUP,MAAM,CAAEQ,eAAe,IACvFpyB,KAAK+xB,gBACT,CACAvI,OAAOvnB,GACH,MAAMid,EAASlf,KAAKopB,UACpB1L,MAAM8L,OAAOvnB,GACbjC,KAAKgyB,gBAAkB1tB,OAAO+B,YAAW,KACjCrG,KAAKkG,aAAelB,SAASoP,MAEjCpP,SAASoP,KAAKjO,YAAYnG,KAAK,GAChC,KACHkf,GAAU7Y,YAAW,IAAM6Y,EAAO0S,MAAM,CAAEQ,eAAe,KAAS,EACtE,CACAhI,iBAAiB7oB,GACbmc,MAAM0M,iBAAiB7oB,GnB9DZ,QmB+DPA,EAAEmC,KACF1D,KAAKqyB,UAAU9wB,EACvB,CACA8wB,UAAU9wB,GACN,MAAMgU,EAAMvV,KAAKwR,iBAAiB,cAC5Bib,EAAQlX,EAAI,GACZY,EAAOZ,EAAIA,EAAI3U,OAAS,GAC1B6rB,GAASlrB,EAAEpC,SAAWgX,IAAS5U,EAAE+wB,UACjC7F,EAAMmF,QACNzb,GAAQ5U,EAAEpC,SAAWstB,GAASlrB,EAAE+wB,UAChCnc,EAAKyb,OACb,CACAtO,YACStjB,KAAKopB,WAEVppB,KAAK8xB,yBACT,CACAC,iBACI,IAAK/xB,KAAKopB,UACN,OACJ,MAAMmJ,EAAUjuB,OAAOwT,SAAWxT,OAAOyT,YACnC5F,EAAOnS,KAAKopB,UAAU/Q,wBAC5BrY,KAAKsrB,MAAMjZ,IAAM,GAAGkgB,EAAUpgB,EAAKE,IAAMF,EAAKI,WAC9CvS,KAAKsrB,MAAMlZ,KAAO,GAAGD,EAAKC,SAC1BpS,KAAKsrB,MAAMhZ,MAAQ,GAAGH,EAAKG,SAC/B,EAEJuf,GAAkB5iB,GAAK,sBACvB,GAAW,CACP3M,MACDuvB,GAAkBrtB,UAAW,kBAAc,GAC9C,GAAW,CACPlC,MACDuvB,GAAkBrtB,UAAW,4BAAwB,GACxD,GAAW,CACP0X,GAAO,YACR2V,GAAkBrtB,UAAW,mBAAoB,MACpD,GAAW,CACP0X,GAAO,CAAErW,MAAO,SAAU1G,OAAQmF,UACnCutB,GAAkBrtB,UAAW,YAAa,MAC7C,GAAW,CACPtF,GAAA,GACD2yB,GAAkBrtB,UAAW,iBAAkB,MCzGlD,IAAI,GAA0C,SAAUgU,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAgBA,IAAIgsB,GAAY,cAAwB5T,GACpC1M,kBACI2f,GAAkBpB,WAClBzO,GAAkByO,WAClB/S,MAAM+S,UACV,CACAnwB,cACIod,QACA1d,KAAKyyB,UAAYztB,SAASK,cAAc2c,GAAkB/S,IAC1DjP,KAAK0yB,UAAY1tB,SAASK,cAAcwsB,GAAkB5iB,GAC9D,CACAoY,yBAAyB7b,EAAU8b,EAAQC,GACtB,aAAb/b,GACAxL,KAAK6wB,kBACQ,mBAAbrlB,IACAxL,KAAK0yB,UAAUxU,MAAMoJ,GAAQ,GAC7BtnB,KAAK0yB,UAAUxU,MAAMqJ,GAAQ,GAErC,CACA3J,oBACIF,MAAME,oBACN5d,KAAKgf,QAAUhf,KAAK+pB,cAAc,uBAC7B/pB,KAAKgf,UAEVhf,KAAK2yB,WACL3yB,KAAK6wB,kBACL7wB,KAAK4yB,iBACT,CACA/U,uBACIH,MAAMG,uBACN7d,KAAK6yB,UACT,CAEAjB,MAAM1a,GACFlX,KAAKgf,QAAQ4S,MAAM1a,EACvB,CAEAmX,OAAOyE,GAAe,GAClB9yB,KAAK4yB,iBACAE,GAGL3X,GAAcC,SAASpb,KAAM,mBAAoB,CAAE6nB,OAAQ,CAAEhiB,MAAO,OACxE,CACA8sB,WACI3yB,KAAKyyB,UAAUrW,UAAYpc,KAAKgf,QAAQ5C,UACxCpc,KAAKyyB,UAAUM,UAAY/yB,KAAKgzB,YAChChzB,KAAKyyB,UAAUxP,gBAAkBjjB,KAAKijB,gBACtCjjB,KAAK0yB,UAAUT,OAASjyB,KACxBA,KAAKuG,YAAYvG,KAAKyyB,UAC1B,CACAI,WACI7yB,KAAKgf,QAAQ5C,UAAYpc,KAAKyyB,UAAUrW,UACxCpc,KAAKmG,YAAYnG,KAAKyyB,UAC1B,CACAG,iBACI,MAAMpQ,EAAWxiB,KAAK0gB,cACtB1gB,KAAKyiB,gBAAgB,YAAaD,GAClC5F,GAAcuB,OAAOne,KAAMA,KAAKizB,cAAezQ,GAC/C,MAAM0Q,EAAUluB,SAASysB,cACnB0B,EAAWnzB,KAAKwnB,MAAS0L,GAAWlzB,KAAKgQ,SAASkjB,GACxDtW,GAAcuB,OAAOne,KAAMA,KAAKozB,gBAAiBD,EACrD,CACAtC,kBACI7wB,KAAKyF,aAAa,gBAAiB6E,OAAOtK,KAAK4gB,WAC1C5gB,KAAKgf,UAEVhf,KAAKgf,QAAQ4B,SAAW5gB,KAAK4gB,SACzB5gB,KAAK4gB,UAAY5gB,KAAKwnB,MACtBxnB,KAAK0yB,UAAU9J,OACvB,CACAvJ,UAAUxZ,GACN7F,KAAK4yB,iBACLzX,GAAcC,SAASpb,KAAM,mBAAoB,CAAE6nB,OAAQ,CAAEhiB,UACjE,CACAwtB,cACIrzB,KAAK4yB,gBACT,CACArB,WACQvxB,KAAK4gB,UAET5gB,KAAK0yB,UAAUvU,QAAQne,KAAK0yB,UAAUlL,KAAM,CACxC4B,UAAWppB,KACXynB,UAAW,UAEnB,CACA+J,WAAWjwB,GACH,CAAC2b,GAAOE,IAAOpc,SAASO,EAAEmC,OAC1B1D,KAAKszB,QACL/xB,EAAE8hB,iBAEV,CACAkQ,oBAAoBhyB,GAChBvB,KAAKwnB,KAAOxnB,KAAK0yB,UAAUlL,KAC3BxnB,KAAK4yB,gBACT,GCnHG,SAASY,MAAaC,GACzB,OAAOA,EAAQzvB,QAAO,CAAC0vB,EAAKnvB,SACL,IAARA,EACAmvB,QACQ,IAARA,IACPA,EAAM/pB,MAAMC,QAAQrF,GAAO,GAAK,CAAC,GAChCsE,EAAStE,IAASsE,EAAS6qB,IAEhC5zB,OAAOiE,KAAKQ,GAAK/C,SAASkC,IACtBgwB,EAAIhwB,GAAOmF,EAAStE,EAAIb,IAAQ8vB,GAAUE,EAAIhwB,GAAMa,EAAIb,IAAQa,EAAIb,EAAI,IAErEgwB,GAJInvB,SAKZpC,EACP,CDwGAqwB,GAAUvjB,GAAK,aACfujB,GAAU7H,mBAAqB,CAAC,WAAY,kBAC5C,GAAW,CACPtf,KACDmnB,GAAUhuB,UAAW,mBAAe,GACvC,GAAW,CACP6G,KACDmnB,GAAUhuB,UAAW,qBAAiB,GACzC,GAAW,CACP6G,KACDmnB,GAAUhuB,UAAW,qBAAiB,GACzC,GAAW,CACP6G,KACDmnB,GAAUhuB,UAAW,qBAAiB,GACzC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,gBACtB+oB,GAAUhuB,UAAW,sBAAkB,GAC1C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,sBACtB+oB,GAAUhuB,UAAW,uBAAmB,GAC3C,GAAW,CACPsH,KACD0mB,GAAUhuB,UAAW,YAAQ,GAChC,GAAW,CACPsH,KACD0mB,GAAUhuB,UAAW,gBAAY,GACpC,GAAW,CACPsH,KACD0mB,GAAUhuB,UAAW,mBAAe,GACvC,GAAW,CACP0X,GAAO,CAAEJ,SAAS,KACnB0W,GAAUhuB,UAAW,YAAa,MACrC,GAAW,CACP0X,GAAO,aACRsW,GAAUhuB,UAAW,cAAe,MACvC,GAAW,CACP0X,GAAO,UACRsW,GAAUhuB,UAAW,WAAY,MACpC,GAAW,CACP0X,GAAO,YACRsW,GAAUhuB,UAAW,aAAc,MACtC,GAAW,CACP0X,GAAO,CACHrW,MAAO,oBACP1G,OAASqR,GAAOA,EAAGkiB,aAExBF,GAAUhuB,UAAW,sBAAuB,MAC/CguB,GAAY,GAAW,CACnBtmB,EAAS,WACVsmB,I,IEjKCmB,G,UASJ,IAAIC,GAAeD,GAAiB,MAChCzhB,aAAa2hB,GACT,OAAQ,GAAKA,GAAKC,QAAQ,EAC9B,CACA5hB,eAAe6Q,GACX,IAAK4Q,GAAeI,aAAajf,KAAKiO,GAClC,OACJ,MAAM8Q,EAAMG,WAAWjR,GACvB,OAAI8Q,EAAM,GAAKnpB,MAAMmpB,QAArB,EAEIF,GAAeM,eAAiBjO,GAAelB,OAAS+O,EAAM,EACvD,UACP7N,GAAepB,SACR,oCAAoCiP,KACxC,oBAAoBF,GAAeO,MAAML,QACpD,GAEJD,GAAaG,aAAe,eAE5BH,GAAaK,eAAgB,EAC7BL,GAAeD,GAnC+B,SAAUnb,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CA8BgC,CAAW,CACvC0F,EAAS,cACV0nB,ICrCH,IAMIO,GAEJ,MAAMC,GAAW,IAAIhmB,IASrB,IAAIimB,GAAuBF,GAAyB,MAOhDjiB,WAAWpK,EAAMwsB,EAAUC,GAEvB,GADAzsB,EAAOA,EAAKoC,cACRiqB,GAAuBK,eAAe1f,KAAKhN,GAAO,CAClD,MAAM+J,EAAUuiB,GAASz0B,IAAImI,GAE7B,OADAssB,GAASl0B,IAAI4H,EAAM,IAAI2sB,GAAoB3sB,EAAMwsB,EAAUC,IACpD1iB,CACX,CACA,MAAM,IAAI9P,MAAM,2FACpB,CAEAmQ,cAAcpK,GACV,OAAOssB,GAASvlB,OAAO/G,EAAKoC,cAChC,CAEAgI,WAAWpK,GACP,OAAOssB,GAASz0B,KAAKmI,GAAQ,IAAIoC,cACrC,CAEWwqB,mBACP,MAAM3wB,EAAO,GAEb,OADAqwB,GAAS5yB,SAAQ,CAAClC,EAAOoE,IAAQK,EAAK9C,KAAKyC,KACpCK,CACX,CAEAmO,eAAeyE,GACX,MAAO,CAAEge,EAAMC,GAAMje,EAAKoM,MAAMoR,GAAuBU,YAAc,GAC/DC,EAAWX,GAAuBx0B,IAAIi1B,GAC5C,GAAKE,EAEL,MAAa,MAATH,EACOG,EAASC,aACP,MAATJ,EACOG,EAASE,aACbF,EAASG,UACpB,GAEJZ,GAAqBQ,UAAY,oBACjCR,GAAqBG,eAAiB,WACtCH,GAAuBF,GA9DuB,SAAU3b,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CAyDgD,CAAW,CACvD0F,EAAS,sBACVmoB,IAGI,MAAMI,GACTn0B,YAAYwH,EAAM8K,EAAKF,GACnB1S,KAAK8H,KAAOA,EACZ9H,KAAK4S,IAAMA,EACX5S,KAAK0S,IAAMA,CACf,CACIuiB,iBACA,MAAO,eAAej1B,KAAK4S,0BAA0B5S,KAAK0S,QAC9D,CACIqiB,mBACA,MAAO,eAAe/0B,KAAK4S,QAC/B,CACIoiB,mBACA,MAAO,eAAeh1B,KAAK0S,QAC/B,CACAwiB,WACI,MAAO,IAAIl1B,KAAK8H,UAAU9H,KAAK4S,UAAU5S,KAAK0S,KAClD,EAGJ2hB,GAAqB1mB,IAAI,KAAM,EAAG,KAClC0mB,GAAqB1mB,IAAI,KAAM,IAAK,KACpC0mB,GAAqB1mB,IAAI,KAAM,IAAK,MACpC0mB,GAAqB1mB,IAAI,KAAM,KAAM,MACrC0mB,GAAqB1mB,IAAI,KAAM,KAAM,QCnFrC,MAAMwnB,GAAY,IAAI/mB,IAOtB,IAAIgnB,GAAkB,MAMlBljB,WAAW4iB,EAAUx1B,GACZ,CAAC,UAAW,UAAU0B,gBAAgB1B,KACvCA,GAAQ,GACZ61B,GAAUj1B,IAAI40B,EAAS5qB,cAAe5K,EAC1C,CAEA4S,cAAc4iB,GACV,OAAOK,GAAUtmB,OAAOimB,EAAS5qB,cACrC,CAEAgI,eAAe6Q,GACX,GAAIoS,GAAUhnB,IAAI4U,GACd,OAAOoS,GAAUx1B,IAAIojB,EAC7B,GAGJqS,GAAgBC,WAAaF,GAC7BC,GAtC8C,SAAU5c,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CAiCkB,CAAW,CACzB0F,EAAS,iBACVkpB,IAGHA,GAAgBznB,IAAI,QAASqY,GAAeV,eAE5C8P,GAAgBznB,IAAI,MAAOqY,GAAelB,OAC1CsQ,GAAgBznB,IAAI,SAAUqY,GAAeZ,UAC7CgQ,GAAgBznB,IAAI,WAAYqY,GAAeZ,UAC/CgQ,GAAgBznB,IAAI,UAAWqY,GAAejB,WAC9CqQ,GAAgBznB,IAAI,MAAOqY,GAAed,aAE1CkQ,GAAgBznB,IAAI,KAAMqY,GAAe7B,MACzCiR,GAAgBznB,IAAI,OAAQqY,GAAe5B,YAC3CgR,GAAgBznB,IAAI,QAASqY,GAAezB,SAC5C6Q,GAAgBznB,IAAI,SAAUqY,GAAerB,UAC7CyQ,GAAgBznB,IAAI,QAASqY,GAAenB,SAC5CuQ,GAAgBznB,IAAI,SAAUqY,GAAepB,UAC7CwQ,GAAgBznB,IAAI,aAAcqY,GAAeX,gBClDjD,MAAMiQ,GACFh1B,YAAYi1B,GACRv1B,KAAKu1B,SAAWA,CACpB,CACIjlB,cACA,OAAOtQ,KAAKu1B,QAChB,CACA1zB,cAAgB,CAChBhB,mBAAqB,CACrBiB,iBAAmB,CACnBX,sBAAwB,CACxBG,gBACI,OAAO,CACX,CACAk0B,WACI,OAAOx1B,IACX,CACAk1B,WACI,OAAOl1B,KAAKu1B,SAAW,MAAQ,SACnC,CAEAE,GAAG9sB,GACC,OAAO2B,OAAO3B,GAAKyB,SAAWpK,KAAKk1B,UACvC,EAEG,MAAMQ,GAAM,IAAIJ,IAAyB,GACnCK,GAAU,IAAIL,IAAyB,GChC7C,MAAMM,WAA4BC,MACrCv1B,YAAYgQ,GACRoN,MAAM,UACN1d,KAAKsQ,QAAUA,CACnB,CAEIwlB,YACA,OAAOxrB,OAAOtK,KAAKb,OACvB,ECAG,MAAM42B,WAA4B,KACrCz1B,YAAY+V,EAAO2f,GAAW,GAC1BtY,QACA1d,KAAKi2B,UAAYD,EACjBh2B,KAAKk2B,IAAMvQ,WAAWtP,EAAMjM,QAAU,OACtCpK,KAAKqf,UAAYrf,KAAKqf,UAAUngB,KAAKc,KACzC,CACIsQ,cACA,OAAOtQ,KAAKi2B,WAAaj2B,KAAKk2B,IAAI5lB,QAAUtQ,KAAKk2B,IAAI5lB,OACzD,CACAzP,iBAAiBJ,EAAMK,EAAWL,GAC9Bid,MAAM7c,iBAAiBJ,EAAMK,GACzBd,KAAKQ,iBAAiB,KAEe,mBAA9BR,KAAKk2B,IAAIr1B,iBAChBb,KAAKk2B,IAAIr1B,iBAAiB,SAAUb,KAAKqf,WAGzCrf,KAAKk2B,IAAIr0B,YAAY7B,KAAKqf,WAElC,CACAle,oBAAoBV,EAAMK,EAAWL,GACjCid,MAAMvc,oBAAoBV,EAAMK,GAC5Bd,KAAKQ,qBAEmC,mBAAjCR,KAAKk2B,IAAI/0B,oBAChBnB,KAAKk2B,IAAI/0B,oBAAoB,SAAUnB,KAAKqf,WAG5Crf,KAAKk2B,IAAIp0B,eAAe9B,KAAKqf,WAErC,CAEAmW,WACI,OAAIE,GAAID,GAAGz1B,MACAA,KAAKi2B,UAAYN,GAAUD,GAClCC,GAAQF,GAAGz1B,MACJA,KAAKi2B,UAAYP,GAAMC,GAC3B31B,IACX,CACAk1B,WACI,MAAM7e,EAAQrW,KAAKk2B,IAAIJ,MACjBE,EAAWh2B,KAAKi2B,UAEtB,OAAQD,EAAW,OAAS,KADZA,GAAY,cAAclhB,KAAKuB,GACF,IAAIA,KAAWA,EAChE,CAEAgJ,YACIrf,KAAKsB,cAAc,IAAIs0B,GAAoB51B,KAAKk2B,IAAI5lB,SACxD,ECjDJ,MAAM6lB,WAA4B,KAC9B71B,YAAYsiB,EAAQ,IAChBlF,QACA1d,KAAK4iB,MAAQA,EACb5iB,KAAKu1B,SAAWv1B,KAAKsQ,QACrBtQ,KAAKqf,UAAYrf,KAAKqf,UAAUngB,KAAKc,KACzC,CACAa,iBAAiBJ,EAAMK,EAAWL,GAC9Bid,MAAM7c,iBAAiBJ,EAAMK,GACzBd,KAAKQ,iBAAiB,IAE1BR,KAAK4iB,MAAMphB,SAASkM,GAASA,EAAK7M,iBAAiB,SAAUb,KAAKqf,YACtE,CACAle,oBAAoBV,EAAMK,EAAWL,GACjCid,MAAMvc,oBAAoBV,EAAMK,GAC5Bd,KAAKQ,oBAETR,KAAK4iB,MAAMphB,SAASkM,GAASA,EAAKvM,oBAAoB,SAAUnB,KAAKqf,YACzE,CACAmW,WACI,OAAOx1B,IACX,CACIsQ,cACA,OAAO,CACX,CAEA+O,YACI,MAAM,QAAE/O,GAAYtQ,KAChBA,KAAKu1B,WAAajlB,GAEtBtQ,KAAKsB,cAAc,IAAIs0B,GAAoB51B,KAAKu1B,SAAWjlB,GAC/D,EAGG,MAAM8lB,WAA8BD,GACnC7lB,cACA,OAAOtQ,KAAK4iB,MAAMlT,OAAOhC,GAASA,EAAK4C,SAC3C,CACAklB,WACI,MAAMa,EAAiBr2B,KAAK4iB,MAAM/Y,KAAK6D,GAASA,EAAK8nB,aACrD,GAAIa,EAAe/tB,MAAMoF,GAASioB,GAAQF,GAAG/nB,KACzC,OAAOioB,GACX,MAAM/S,EAAQyT,EAAej1B,QAAQsM,IAAUgoB,GAAID,GAAG/nB,KACtD,OAAqB,IAAjBkV,EAAMhiB,OACC80B,GACU,IAAjB9S,EAAMhiB,OACCgiB,EAAM,GACV,IAAIwT,GAAsBxT,EACrC,CACAsS,WACI,OAAOl1B,KAAK4iB,MAAMvN,KAAK,QAC3B,EAGG,MAAMihB,WAA8BH,GACnC7lB,cACA,OAAOtQ,KAAK4iB,MAAMta,MAAMoF,GAASA,EAAK4C,SAC1C,CACAklB,WACI,MAAMa,EAAiBr2B,KAAK4iB,MAAM/Y,KAAK6D,GAASA,EAAK8nB,aACrD,GAAIa,EAAe/tB,MAAMoF,GAASgoB,GAAID,GAAG/nB,KACrC,OAAOgoB,GACX,MAAM9S,EAAQyT,EAAej1B,QAAQsM,IAAUioB,GAAQF,GAAG/nB,KAC1D,OAAqB,IAAjBkV,EAAMhiB,OACC+0B,GACU,IAAjB/S,EAAMhiB,OACCgiB,EAAM,GACV,IAAI0T,GAAsB1T,EACrC,CACAsS,SAASqB,GAAS,GACd,OAAOv2B,KAAK4iB,MAAMvN,KAAKkhB,EAAS,OAAS,KAC7C,EChFJ,IAMIC,GANA,GAA0C,SAAUhe,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAgCA,IAAIiwB,GAAgBD,GAAkB,MAElCtkB,WAAWwkB,GAEP,OADA12B,KAAK22B,eAAeC,QAAQF,GACrB12B,IACX,CAEAkS,WAAWmE,GACP,OAAOmgB,GAAgBjlB,KAAK8E,EAChC,CAEAnE,YAAYmE,GACR,MAAMwgB,EAAexgB,EAAMjK,MAAM,YAAYvC,KAAK8M,IAC9C,MAAMmgB,EAAangB,EAAKvK,MAAM,WAAWvC,IAAI2sB,GAAgBO,kBAC7D,OAAO,IAAIX,GAAsBU,EAAW,IAEhD,OAAO,IAAIR,GAAsBO,GAAcrB,UACnD,CAEAtjB,kBAAkByE,GACd,IAAK3W,KAAKg3B,iBAAiBliB,KAAK6B,GAC5B,OAAOA,EACX,MAAMme,EAAWne,EAAKvM,OAAOhB,UAAU,GAAGc,cAC1C,IAAK,MAAM+sB,KAAYj3B,KAAK22B,eAAgB,CACxC,MAAMjtB,EAASutB,EAASC,QAAQpC,GAChC,GAAsB,iBAAXprB,EACP,OAAOA,EACX,GAAsB,kBAAXA,EACP,OAAOA,EAAS,MAAQ,SAChC,CACA,OAAOiN,CACX,CAEAzE,wBAAwByE,GACpB,MAAMN,EAAQM,EAAKzP,QAAQ,aAAc,IACnCiwB,EAAgB9gB,IAAUM,EAC1BygB,EAAiBZ,GAAgBa,WAAWhhB,GAC5CihB,EAAiBF,EAAelwB,QAAQ,aAAc,IAEtDqwB,EAASJ,KADQC,IAAmBE,GAE1C,OAAI5B,GAAID,GAAG6B,GACAC,EAAS5B,GAAUD,GAC1BC,GAAQF,GAAG6B,GACJC,EAAS7B,GAAMC,GACnB,IAAII,GAAoBuB,EAAgBC,EACnD,GAGJd,GAAcf,IAAMA,GAEpBe,GAAcd,QAAUA,GACxBc,GAAcO,iBAAmB,mBACjCP,GAAcE,eAAiB,GAC/B,GAAW,CACProB,KACDmoB,GAAe,MAAO,MACzBA,GAAgBD,GAAkB,GAAW,CACzCtqB,EAAS,eACVuqB,IAGHA,GAAce,IAAI5D,IAClB6C,GAAce,IAAInD,IAClBoC,GAAce,IAAIpC,IC3FX,MAAMqC,GACTn3B,YAAYo3B,EAASrhB,EAAQ,IACzBrW,KAAKqW,MAAQogB,GAAA,IAAkBpgB,GAC/BrW,KAAK03B,QAAUA,CACnB,CAEIpnB,cACA,OAAOtQ,KAAKqW,MAAM/F,OACtB,CACAzP,iBAAiBJ,EAAMK,EAAWL,GAC9BT,KAAKqW,MAAMxV,iBAAiBC,EAChC,CACAK,oBAAoBV,EAAMK,EAAWL,GACjCT,KAAKqW,MAAMlV,oBAAoBL,EACnC,CACAo0B,WACI,MAAMvsB,EAA8B,iBAAjB3I,KAAK03B,QACpBlU,KAAKC,UAAUzjB,KAAK03B,SACpBptB,OAAOtK,KAAK03B,SAChB,MAAO,GAAG13B,KAAKqW,YAAY1N,GAC/B,CAKAuJ,cAAcwlB,EAASrhB,EAAO1K,GAC1B,MAAMgsB,EAAehsB,EAAO+rB,EAAQttB,QACpC,QAA4B,IAAjButB,EAEX,OAAO,IAAIF,GAAaE,EAActhB,EAAMjM,OAChD,CAEA8H,aAAa0lB,EAAKjsB,GACd,MAAMzC,EAAQ0uB,EAAIxrB,MAAM,MAClBiK,EAAyB,IAAjBnN,EAAMtI,OAAesI,EAAM,GAAK,GACxCwuB,EAA2B,IAAjBxuB,EAAMtI,OAAesI,EAAM,GAAKA,EAAM,GACtD,OAAOuuB,GAAaI,OAAOH,EAASrhB,EAAO1K,EAC/C,CAEAuG,WAAWwlB,GACP,OAAO,IAAID,GAAaC,EAAS,MACrC,CAEAxlB,eACI,OAAO,IAAIulB,QAAat1B,EAAW,MACvC,ECtDJ,IAMI21B,GAOG,MAAMC,WAA8BlC,MACvCv1B,YAAYuR,EAASmmB,GACjBta,MAAM,UACN5d,OAAOoB,OAAOlB,KAAM,CAAE6R,UAASmmB,YACnC,EAQJ,ICxBIC,GDwBAC,GAAmBJ,GAAqB,cAA+B,KACvE5lB,aAAamE,KAAU8hB,GACnB,MAAMxsB,EAA8C,mBAA9BwsB,EAAOA,EAAOv3B,OAAS,GAAoBu3B,EAAOC,MAAQ9tB,OAC1EhL,EAAQ64B,EAAOC,MACrB,MAAwB,iBAAV94B,EACVw4B,GAAmBO,WAAWhiB,EAAO/W,EAAOqM,GAC5CmsB,GAAmBQ,WAAWjiB,EAAO1K,EAC7C,CACAuG,kBAAkBmE,EAAO1K,EAASrB,QAC9B,MAAMiuB,EAAQliB,EAAMjK,MAAM,KACrBvC,KAAK+tB,GAAQH,GAAae,MAAMZ,EAAKjsB,KACrCvK,QAAQq3B,KAAWA,IACxB,OAAO,IAAIX,GAAmBS,EAClC,CACArmB,kBAAkB7C,EAAMyR,EAAQnV,EAASrB,QACrC,MAAMouB,EAAUrpB,EAAKjD,MAAM,KACrBusB,EAAY7X,EAAO1U,MAAM,KAC/B,KAAOusB,EAAU/3B,OAAS83B,EAAQ93B,QAA+B,IAArB+3B,EAAU/3B,QAClD+3B,EAAU13B,KAAK03B,EAAUA,EAAU/3B,OAAS,IAChD,GAAI+3B,EAAU/3B,SAAW83B,EAAQ93B,OAC7B,MAAMmB,MAAM,oCAChB,MACM62B,EADQF,EAAQ7uB,KAAI,CAACwM,EAAOnR,IAAMuyB,GAAaI,OAAOc,EAAUzzB,GAAImR,EAAO1K,KACxDvK,QAAQq3B,KAAWA,IAC5C,OAAO,IAAIX,GAAmBc,EAClC,CACAt4B,YAAYi4B,GACR7a,QACA1d,KAAK64B,OAASN,EACdv4B,KAAK84B,gBAAkB94B,KAAK84B,gBAAgB55B,KAAKc,KACrD,CACAa,iBAAiBJ,EAAMK,EAAWL,GAC9Bid,MAAM7c,iBAAiBJ,EAAMK,GACzBd,KAAKQ,iBAAiB,KAE1BR,KAAK+4B,OAAS/4B,KAAKg5B,cACnBh5B,KAAKu4B,MAAM/2B,SAASi3B,GAASA,EAAK53B,iBAAiBb,KAAK84B,mBAC5D,CACA33B,oBAAoBV,EAAMK,EAAWL,GACjCid,MAAMvc,oBAAoBV,EAAMK,GAC5Bd,KAAKQ,4BAEFR,KAAK+4B,OACZ/4B,KAAKu4B,MAAM/2B,SAASi3B,GAASA,EAAKt3B,oBAAoBnB,KAAK84B,mBAC/D,CAEIP,YACA,OAAOv4B,KAAK64B,MAChB,CAEII,aACA,OAAOj5B,KAAKu4B,MAAMn3B,QAAQq3B,GAASA,EAAKnoB,SAC5C,CAEI4oB,kBACA,IAAIv4B,EACJ,OAAoC,QAA5BA,EAAKX,KAAKi5B,OAAOb,aAA0B,IAAPz3B,OAAgB,EAASA,EAAG+2B,OAC5E,CAEIyB,mBACA,OAAOn5B,KAAKi5B,OAAOpvB,KAAK4uB,GAASA,EAAKf,SAC1C,CAKIp4B,YACA,OAAKU,KAAKQ,oBAEHV,OAAO2E,eAAe/C,KAAK1B,KAAM,UAAYA,KAAK+4B,OAD9C/4B,KAAKg5B,aAEpB,CAEIA,oBACA,OAAOxF,QAAUrxB,KAAcnC,KAAKm5B,aACxC,CAEAL,kBACI,MAAMM,EAAWp5B,KAAKV,MAChB+5B,EAAWr5B,KAAKg5B,cAClBlqB,EAAQsqB,EAAUC,KAEtBr5B,KAAK+4B,OAASM,EACdr5B,KAAKsB,cAAc,IAAIy2B,GAAsBsB,EAAUD,IAC3D,CAEAlE,WACI,OAAOl1B,KAAKu4B,MAAMljB,KAAK,IAC3B,GC5GG,SAASikB,KASZ,OARKrB,KACDA,GAAY,IAAIsB,sBAAqB,SAAUC,GAC3CA,EAAQh4B,QAAQi4B,GACpB,GAAG,CACCC,UAAW,CAAC,KACZC,WAAY3T,GAAeZ,SAAW,QAAU,WAGjD6S,EACX,CACA,SAASwB,GAAeG,GACpB,MAAMC,EAAQD,EAAMz6B,QAEhBy6B,EAAME,gBAAkBF,EAAMG,kBAAoB,IAClDF,EAAMG,aAEd,CD8FA9B,GAAiB+B,cAAgB3vB,OAEjC4tB,GAAiBgC,cAAiBvxB,GAAQgC,EAAShC,GACnDuvB,GAAmBJ,GArH2B,SAAUtf,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CAgHwC,CAAW,CAC/C0F,EAAS,kBACVgsB,IEtHH,MAgBMiC,GAAwB/lB,IAC1BzK,MAAM4H,KAAK6C,EAAKvN,UAAUrF,SAASgP,IATL,CAACA,IAC/B7G,MAAM4H,KAAKf,EAAG+Q,YAAY/f,SAAQ,EAAGsG,OAAMxI,YATlB,EAACwI,EAAMxI,KAChC,MAAMqJ,EAAMrJ,EAAM4H,QAAQ,OAAQ,IAAIgD,cACtC,SAAI,CAAC,MAAO,OAAQ,OAAQ,cAAclJ,SAAS8G,KAC3Ca,EAAI3H,SAAS,iBAAkB2H,EAAI3H,SAAS,oBAEtB,IAAvB8G,EAAK0M,QAAQ,KAAW,EAKvB4lB,CAAqBtyB,EAAMxI,IAC3BkR,EAAGpF,gBAAgBtD,EACvB,GACF,EAKEuyB,CAA0B7pB,GAC1B2pB,GAAqB3pB,EAAG,GAC1B,ECpBC,MAAM8pB,GAAc,6EACdC,GAAgB70B,GAAQA,IAAQ40B,GAChCE,GAAa,CACtB,MAAS,CACLvsB,MAAMwsB,EAAKC,GACP,MAAMh1B,EAAMg1B,EAAUh1B,IAChBi1B,GAAWj1B,GAAO60B,GAAa70B,GACrC+0B,EAAInP,MAAMsP,gBAAkBD,EAAU,GAAK,QAAQj1B,KACvD,EACA2I,MAAMosB,GACFA,EAAInP,MAAMsP,gBAAkB,EAChC,GAEJ,aAAc,CACV3sB,MAAMwsB,EAAKC,GACP,MAAMh1B,EAAMg1B,EAAUh1B,IAChBi1B,GAAWj1B,GAAO60B,GAAa70B,GACrC+0B,EAAInP,MAAMsP,gBAAkBD,EAAU,GAAK,QAAQj1B,MAC3B,IAApBg1B,EAAUpoB,QAEdmoB,EAAInP,MAAMuP,WAAaF,EAAU,GAA4B,IAAnBD,EAAUnoB,OAAemoB,EAAUpoB,MAAvC,IAC1C,EACAjE,MAAMosB,GACFA,EAAInP,MAAMuP,WAAa,GACvBJ,EAAInP,MAAMsP,gBAAkB,EAChC,GAEJ,IAAO,CACH3sB,MAAMwsB,EAAKC,GACP,MAAMI,EAAWL,EAAIM,mBACrBD,EAASp1B,IAAMg1B,EAAUh1B,IACzBo1B,EAAS1vB,gBAAgB,QAC7B,EACAiD,MAAMosB,GACFA,EAAIO,kBACR,GAEJ,OAAU,CACN/sB,MAAMwsB,EAAKC,GACP,MAAMI,EAAWL,EAAIM,mBACrBD,EAASp1B,IAAMg1B,EAAUh1B,IACzBo1B,EAASxoB,MAAQooB,EAAUpoB,MAAQhO,OAAO22B,gBAC9C,EACA5sB,MAAMosB,GACFA,EAAIO,kBACR,GAEJ,YAAa,CACT/sB,MAAMwsB,EAAKC,GACP,MAAM3yB,EAAU,IAAImzB,eACpBnzB,EAAQyf,KAAK,MAAOkT,EAAUh1B,KAAK,GACnCqC,EAAQozB,mBAAqB,KACE,IAAvBpzB,EAAQijB,YAAuC,MAAnBjjB,EAAQqzB,SAExCX,EAAI5N,UDbb,SAAkBwO,EAAMC,EAAsB,IAEjD,MAEMlnB,GAFS,IAAImnB,WACAC,gBAAgBH,EAAM,aACxBjnB,MAAQpP,SAASK,cAAc,QAMhD,MA5BkB,CAAC+O,IACnB,MAAMrP,EAAUqP,EAAK5C,iBAAiB,UACtC7H,MAAM4H,KAAKxM,GAASvD,SAASqD,GAAWA,EAAOkV,UAAS,EAsBxD0hB,CAAcrnB,GACd+lB,GAAqB/lB,GArBF,EAACA,EAAMknB,KACrBA,EAAoB16B,QAEzB+I,MAAM4H,KAAK6C,EAAKsnB,YAAYl6B,SAASgP,IAC5B8qB,EAAoBt6B,SAASwP,EAAG+N,UACjCnK,EAAKjO,YAAYqK,EAAG,GAC1B,EAiBFmrB,CAAevnB,EAAMknB,GACdlnB,EAAKyY,SAChB,CCEgC+O,CAAS7zB,EAAQ8zB,aAAc,CAAC,QAAO,EAE3D9zB,EAAQ+zB,MACZ,EACAztB,MAAMosB,GACFA,EAAI5N,UAAY,EACpB,IC7DR,IAMIkP,GANA,GAA0C,SAAUvjB,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAiBA,IAAIw1B,GAAWD,GAAa,cAAuBte,GAC/CG,oBACIF,MAAME,oBACN5d,KAAKi8B,IACDj8B,KAAKi8B,KAAOj8B,KAAKoF,aAAa,eAAiBpF,KAAKoF,aAAa,aAAe,GACpFpF,KAAK4pB,aACL5pB,KAAKk8B,SAASr7B,iBAAiBb,KAAKm8B,qBAChCn8B,KAAKo8B,iBACLp8B,KAAKoL,gBAAgB,kBACrBkuB,KAAe7Z,QAAQzf,MACvBA,KAAKq8B,mBAAqB,WACtB/C,KAAejM,UAAUrtB,MACzBA,KAAKq8B,mBAAqB,IAC9B,GAEJr8B,KAAKgsB,SACT,CACAnO,uBACIH,MAAMG,uBACN7d,KAAKq8B,oBAAsBr8B,KAAKq8B,qBAC5Br8B,KAAKs8B,WACLt8B,KAAKs8B,UAAUn7B,oBAAoBnB,KAAKm8B,oBAEhD,CACA9U,yBAAyB7b,EAAU8b,EAAQC,GACvC,GAAKvnB,KAAK8d,WAAawJ,IAAWC,EAElC,OAAQ/b,GACJ,IAAK,aACDxL,KAAKi8B,IAAM1U,GAAU,GACrB,MACJ,IAAK,MACL,IAAK,OACDvnB,KAAK4pB,aACL,MACJ,IAAK,WACD5pB,KAAKk8B,SAAWhE,GAAiBM,MAAMjR,GACvCvnB,KAAKgsB,UACL,MACJ,IAAK,gBACDhsB,KAAKgsB,UACL,MACJ,IAAK,OACDhsB,KAAKu8B,WAAWjV,EAAQC,GACxB,MACJ,IAAK,iBACDvnB,KAAKw8B,eAAiBx8B,KAAKquB,SAGvC,CACI6N,eAIA,OAHKl8B,KAAKs8B,YACNt8B,KAAKk8B,SAAWhE,GAAiBM,MAAMx4B,KAAK0F,MAEzC1F,KAAKs8B,SAChB,CACIJ,aAAS3D,GACLv4B,KAAKs8B,WACLt8B,KAAKs8B,UAAUn7B,oBAAoBnB,KAAKm8B,qBAE5Cn8B,KAAKs8B,UAAY/D,EACjBv4B,KAAKs8B,UAAUz7B,iBAAiBb,KAAKm8B,oBACzC,CACIM,iBACA,OAAOz8B,KAAK08B,WAChB,CACIC,YACA,OAAQ38B,KAAK08B,aAAenC,GAAav6B,KAAK08B,YAClD,CACIE,gBACA,OAAO58B,KAAKw8B,eAA+B,SAAdx8B,KAAK68B,IACtC,CACIT,qBACA,MAAqB,SAAdp8B,KAAK68B,MAAiC,WAAd78B,KAAK68B,IACxC,CACIC,oBACA,OAAO98B,KAAK+8B,oBAAsB/8B,KAAK+8B,oBAAoBzqB,MAAQ,CACvE,CACI0qB,qBACA,OAAOh9B,KAAK+8B,oBAAsB/8B,KAAK+8B,oBAAoBxqB,OAAS,CACxE,CACAynB,cACIh6B,KAAKyF,aAAa,iBAAkB,GACxC,CACA82B,WAAWjV,EAAQC,GAGf,IAFAD,EAASA,GAAU,iBACnBC,EAASA,GAAU,cACnB,CAEA,IAAKiT,GAAWjT,GAEZ,MADAvnB,KAAKi9B,KAAO3V,EACN,IAAIvlB,MAAM,gCAAkCwlB,GAEtDvnB,KAAKk9B,aACDl9B,KAAKgD,QACLhD,KAAKm9B,WAPC,CAQd,CACA9O,OAAOpF,GAAQ,GACX,IAAKjpB,KAAK48B,UACN,OACJ,MAAMl3B,EAAM1F,KAAKo9B,QAAQp9B,KAAKk8B,SAAShD,aACnCl5B,KAAK08B,cAAgBh3B,GAAQ1F,KAAK+qB,QAAS9B,IAC3CjpB,KAAK08B,YAAch3B,EACnB1F,KAAKq9B,WAAW33B,IAAMA,GAClB1F,KAAKs9B,iBAAoBt9B,KAAK+qB,OAC9B/qB,KAAKm9B,YAELn9B,KAAKq9B,WAAWE,WAChBv9B,KAAKw9B,gBAAkBx9B,KAAKy9B,WAAaz9B,KAAK09B,YAGtD19B,KAAKq8B,oBAAsBr8B,KAAKq8B,oBACpC,CACAzS,aACI,MAAM+T,EAAO39B,KAAKoF,aAAa,SAAW,MAC1CpF,KAAKyF,aAAa,OAAQk4B,GAC1B39B,KAAK49B,aAAe59B,KAAK49B,WAAW3B,IAAMj8B,KAAKi8B,KAClC,QAAT0B,GACA39B,KAAKyF,aAAa,aAAczF,KAAKi8B,IAC7C,CACAmB,QAAQ13B,GACJ,OAAKA,GAAe,MAARA,GAAuB,SAARA,EAGpB1F,KAAK69B,QAAUn4B,EAFXq2B,GAAWzB,WAG1B,CACAtO,UACIhsB,KAAKoL,gBAAgB,UACrBpL,KAAKoL,gBAAgB,SACrBpL,KAAK89B,yBACL99B,KAAKk9B,aACLl9B,KAAKquB,QAAO,EAChB,CACA8O,YACI,MAAMY,EAAWvD,GAAWx6B,KAAKi9B,MACjCj9B,KAAKg+B,UAAYD,EACjBA,GAAYA,EAAS9vB,MAAMjO,KAAMA,KAAKq9B,WAC1C,CACAH,aACIl9B,KAAKg+B,WAAah+B,KAAKg+B,UAAU3vB,MAAMrO,MACvCA,KAAKg+B,UAAY,IACrB,CACIJ,iBACA,OAAO59B,KAAKi+B,SAChB,CACAlD,mBAUI,OATK/6B,KAAKi+B,YACNj+B,KAAKi+B,UAAYj+B,KAAK+pB,cAAc,OAAO/pB,KAAKk+B,oBAC5Cl+B,KAAKq9B,WAAWc,YACpBn+B,KAAKi+B,UAAU7hB,UAAYpc,KAAKk+B,iBAE/Bl+B,KAAKi+B,UAAU/3B,YAChBlG,KAAKuG,YAAYvG,KAAKi+B,WAE1Bj+B,KAAKi+B,UAAUhC,IAAMj8B,KAAKi8B,IACnBj8B,KAAKi+B,SAChB,CACAjD,mBACSh7B,KAAK49B,aAEV59B,KAAKmG,YAAYnG,KAAK49B,YACtBv3B,YAAW,KACHrG,KAAKi+B,YAAcj+B,KAAKi+B,UAAU/3B,aAClClG,KAAKi+B,UAAY,KACrB,IAER,CACIZ,iBAMA,OALKr9B,KAAK+8B,sBACN/8B,KAAK+8B,oBAAsB,IAAIqB,MAC/Bp+B,KAAK+8B,oBAAoBh3B,OAAS/F,KAAK09B,QACvC19B,KAAK+8B,oBAAoBj3B,QAAU9F,KAAKy9B,UAErCz9B,KAAK+8B,mBAChB,CACIS,sBACA,QAAKx9B,KAAKq9B,WAAWE,UAEiB,SAAlCv9B,KAAKq9B,WAAW33B,IAAI8H,OAAO,IAExBxN,KAAKq9B,WAAWgB,eAAiB,CAC5C,CACAX,UACI19B,KAAKm9B,YACLn9B,KAAKs+B,eAAc,GACnBt+B,KAAK89B,wBACT,CACAL,WACIz9B,KAAKs+B,eAAc,GACnBt+B,KAAK89B,wBACT,CACA3B,sBACIn8B,KAAKquB,QACT,CACAiQ,cAAcC,GACNv+B,KAAK+qB,QAET/qB,KAAKyiB,gBAAgB,SAAU8b,GAC/Bv+B,KAAKyiB,gBAAgB,SAAU8b,GAC/Bv+B,KAAKyiB,gBAAgB,SAAS,GAC9BziB,KAAKse,OAAOigB,EAAav+B,KAAKw+B,WAAax+B,KAAKy+B,YAAa,CAAEjjB,SAAS,IACxExb,KAAKse,OAAOte,KAAK0+B,YAAa,CAAEljB,SAAS,IAC7C,CACAsiB,yBACI,GAA4B,OAAxB99B,KAAK2+B,eACL,OACJ,MAAM7hB,EAAM9c,KAAK2+B,gBAAkB3+B,KAAKM,YAAYs+B,sBAC9C3hB,EAtNM,CAACA,GAAU,CAAC,QAAS,SAAU,SAASjc,SAASic,GAsN/C4hB,CAAY7+B,KAAK8+B,sBAAwB9+B,KAAKA,KAAK8+B,qBAC3D9U,EAAWhV,EAAmByX,MAAMzsB,KAAK++B,qBAAsB/+B,MACrEgqB,GAAYpN,GAAcuB,OAAO6L,EAAUlN,EAAKG,EACpD,GAEJ+e,GAAS/sB,GAAK,YACd+sB,GAASrR,mBAAqB,CAAC,MAAO,OAAQ,OAAQ,aAAc,WAAY,gBAAiB,kBAEjGqR,GAAS4C,sBAAwB,uBACjC5C,GAASxB,WAAaA,GACtBwB,GAAS1B,YAAcA,GACvB,GAAW,CACPh4B,GAAK,UACN05B,GAASx3B,UAAW,mBAAe,GACtC,GAAW,CACPlC,GAAK,SACN05B,GAASx3B,UAAW,kBAAc,GACrC,GAAW,CACPlC,GAAK,UACN05B,GAASx3B,UAAW,mBAAe,GACtC,GAAW,CACP6G,KACD2wB,GAASx3B,UAAW,WAAO,GAC9B,GAAW,CACP6G,EAAK,CAAE5B,aAAc,gBACtBuyB,GAASx3B,UAAW,YAAQ,GAC/B,GAAW,CACP6G,EAAK,CAAEI,UAAU,KAClBuwB,GAASx3B,UAAW,WAAO,GAC9B,GAAW,CACP6G,EAAK,CAAEI,UAAU,KAClBuwB,GAASx3B,UAAW,eAAW,GAClC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,UACtBuyB,GAASx3B,UAAW,YAAQ,GAC/B,GAAW,CACPsH,KACDkwB,GAASx3B,UAAW,qBAAiB,GACxC,GAAW,CACPsH,KACDkwB,GAASx3B,UAAW,uBAAmB,GAC1C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,iBACtBuyB,GAASx3B,UAAW,uBAAmB,GAC1C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,QACtBuyB,GAASx3B,UAAW,sBAAkB,GACzC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,cACtBuyB,GAASx3B,UAAW,4BAAwB,GAC/C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,WACtBuyB,GAASx3B,UAAW,2BAAuB,GAC9C,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtBowB,GAASx3B,UAAW,aAAS,GAChC,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtBowB,GAASx3B,UAAW,cAAU,GACjC,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtBowB,GAASx3B,UAAW,aAAS,GAChC,GAAW,CACPtF,GAAA,GACD88B,GAASx3B,UAAW,UAAW,MAClC,GAAW,CACPtF,GAAA,GACD88B,GAASx3B,UAAW,WAAY,MACnC,GAAW,CACPtF,GAAA,GACD88B,GAASx3B,UAAW,sBAAuB,MAC9Cw3B,GAAWD,GAAa,GAAW,CAC/B7vB,EAAS,UACV8vB,ICrSH,IAAIgD,GAAwD,cAAuCvhB,GAE/FvL,YAAYlH,GACR,MAAMi0B,EAAej6B,SAASK,cAAcrF,KAAKiP,IAEjD,OADAgwB,EAAaC,QAAUl0B,EAChBi0B,CACX,CACArhB,oBACI5d,KAAKm/B,2BACLzhB,MAAME,mBACV,CAEAlS,cAAc5D,GACV,MAAgB,OAATA,EAAgB,cAAgBA,CAC3C,CAEAq3B,2BACI,MAAM,QAAED,GAAYl/B,KACfk/B,IAELl/B,KAAKM,YAAY8+B,aAAa59B,SAASsG,IACnC,MAAMxI,EAAQ4/B,EAAQ95B,aAAa0C,GAC/BxI,GACAU,KAAKyF,aAAazF,KAAK0L,cAAc5D,GAAOxI,EAChD,IAGJU,KAAKyc,UAAU1C,OAAOmlB,EAAQ5+B,YAAY2O,IAC9C,GAEJ+vB,GAAyB/vB,GAAK,6BAE9B+vB,GAAyBI,aAAe,CAAC,KAAM,SAC/CJ,GA1C8C,SAAUxmB,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,CAqCwD,CAAW,CAC/D0F,EAAS,0BACV8yB,IC5CH,IAAI,GAA0C,SAAUxmB,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAYA,IAAI64B,GAAa,cAAyB5hB,GACtC4J,yBAAyB7b,GACrB,GAAKxL,KAAK8d,UAEV,MAAiB,WAAbtS,EACOxL,KAAKs/B,gCADhB,CAEJ,CAEI9S,cACA,OAAOxsB,KAAK0sB,QAChB,CACIF,YAAQ+S,GACRv/B,KAAKge,MAAMhe,KAAKw/B,sBAChBx/B,KAAK0sB,SAAW6S,EAChBv/B,KAAK+d,KAAK/d,KAAKw/B,sBACfx/B,KAAKw/B,sBACT,CAEI1V,kBACA,OAAO9pB,KAAKy/B,WAAaz/B,KAAK+pB,cAAc/pB,KAAKy/B,YAAcz/B,IACnE,CAEI0/B,gBACA,OAAK1/B,KAAKwsB,UAEFxsB,KAAKwsB,QAAQhF,KAAOxnB,KAAK2/B,gBAAkB3/B,KAAK4/B,oBAD7C,IAEf,CAEIC,iBACA,OAAO7Z,GAAeN,UAAY+Q,GAAA,IAAkBz2B,KAAK+oB,YAAYzY,OACzE,CAEIwvB,iBACA,OAAOrJ,GAAA,IAAkBz2B,KAAK+/B,YAAYzvB,OAC9C,CACAsN,oBACIF,MAAME,oBACN5d,KAAKs/B,2BACLt/B,KAAKggC,UACT,CAEAV,2BACSt/B,KAAKb,SAEVa,KAAKwsB,QAAUxX,EAAmByX,MAAMzsB,KAAKb,OAAQa,MACjDA,KAAKwsB,mBAAmBwS,IAA4Bh/B,KAAKwsB,QAAQ0S,UAEjEl/B,KAAKwsB,QAAUxsB,KAAKwsB,QAAQ0S,SAEpC,CAEAe,gBAAgB9gC,GACZ,KAAKA,GAAYA,aAAkBsV,aAAiBzU,KAAKkgC,QACrD,OAAO,EACX,MAAMC,EAAUhhC,EAAO0a,QAAQ7Z,KAAKkgC,QAEpC,QAASC,GAAWA,IAAYngC,MAAQA,KAAKgQ,SAASmwB,EAC1D,CAEAC,yBAAyBn+B,GACrB,OAAOnC,OAAOoB,OAAO,CACjBumB,UAAW,UACX2B,UAAWppB,SACTiC,EACV,CAEAo+B,WAAWp+B,EAAS,CAAC,GACjB,MAAMq+B,EAAetgC,KAAKogC,sBAAsB,CAC5C7Z,MAAOhc,EAAYvK,KAAK0nB,YACzBzlB,GACCjC,KAAKwsB,SAAwC,mBAAtBxsB,KAAKwsB,QAAQ7D,MACpC3oB,KAAKwsB,QAAQ7D,KAAK2X,EAE1B,CAEAC,WAAWt+B,EAAS,CAAC,GACjB,MAAMq+B,EAAetgC,KAAKogC,sBAAsB,CAC5C7Z,MAAOhc,EAAYvK,KAAK2nB,YACzB1lB,GACCjC,KAAKwsB,SAAwC,mBAAtBxsB,KAAKwsB,QAAQ5D,MACpC5oB,KAAKwsB,QAAQ5D,KAAK0X,EAE1B,CAEAE,aAAav+B,EAAS,CAAC,EAAGgb,GAASjd,KAAKi5B,QACpChc,EAAQjd,KAAKqgC,WAAWp+B,GAAUjC,KAAKugC,WAAWt+B,EACtD,CAKAw+B,cACI,IAAI9/B,EACJ,MAAM+/B,KAAsC,QAAvB//B,EAAKX,KAAKwsB,eAA4B,IAAP7rB,OAAgB,EAASA,EAAG6mB,MAC1EmZ,EAAY3gC,KAAKi5B,OACvBj5B,KAAKyiB,gBAAgB,SAAUie,GAC/B,MAAME,EAAY5rB,EAAmByX,MAAMzsB,KAAK6gC,kBAAmB7gC,MAGnE,OAFA4gC,GAAahkB,GAAcuB,OAAOyiB,EAAW5gC,KAAK0pB,YAAagX,GAC/D1gC,KAAK4pB,aACE8W,IAAaC,CACxB,CAEAnB,qBAAqBsB,GACjB,IAAK9gC,KAAKygC,cACN,OACJ,MAAM5Y,EAAS,CAAEoR,OAAQj5B,KAAKi5B,OAAQ6H,iBACtC9gC,KAAKse,OAAOte,KAAK+gC,aAAc,CAAElZ,UACrC,CAEA0J,SAAS1rB,GACA7F,KAAK8/B,aAAc9/B,KAAKigC,gBAAgBp6B,EAAM1G,UAEnD0G,EAAMwd,iBACNrjB,KAAKghC,gBAAgBn7B,GACzB,CAEA2rB,WAAW3rB,GACP,GAAK,CAACqX,GAAOE,GAAOD,IAAKnc,SAAS6E,EAAMnC,OAAQ1D,KAAKigC,gBAAgBp6B,EAAM1G,QAG3E,GADA0G,EAAMwd,iBACFxd,EAAMnC,MAAQyZ,GAAK,CACnB,GAAInd,KAAKihC,UACL,OACJjhC,KAAKugC,WAAW,CAAE16B,SACtB,MAEI7F,KAAKghC,gBAAgBn7B,EAE7B,CAEAm7B,gBAAgBn7B,GACZ,OAAQ7F,KAAKi9B,MACT,IAAK,OACD,OAAOj9B,KAAKqgC,WAAW,CAAEx6B,UAC7B,IAAK,OACD,OAAO7F,KAAKugC,WAAW,CAAE16B,UAC7B,QACI,OAAO7F,KAAKwgC,aAAa,CAAE36B,UAEvC,CAEAyiB,cAAcziB,GACV,IAAK7F,KAAK6/B,WACN,OACJ,MAAMtZ,EAAQhc,EAAYvK,KAAKkhC,gBAC/BlhC,KAAKwgC,aAAa,CAAE36B,QAAO0gB,SAAuB,SAAdvmB,KAAKi9B,MACzCp3B,EAAMwd,gBACV,CAEAkF,cAAc1iB,GACV,IAAK7F,KAAK6/B,WACN,OACJ,GAAkB,SAAd7/B,KAAKi9B,MAAiC,SAAdj9B,KAAKi9B,KAC7B,OACJ,MAAM1W,EAAQhc,EAAYvK,KAAKmhC,gBAC/BnhC,KAAKugC,WAAW,CAAE16B,QAAO0gB,QAAOwC,YAAY,IAC5CljB,EAAMwd,gBACV,CAEA2c,WACQhgC,KAAK8pB,cAAgB9pB,OAEpBA,KAAKgM,aAAa,SACnBhM,KAAKyF,aAAa,OAAQ,UACI,WAA9BzF,KAAKoF,aAAa,SAAyBpF,KAAKgM,aAAa,aAC7DhM,KAAKyF,aAAa,WAAY,KAEtC,CAEAmkB,aACI,MAAMzqB,EAASa,KAAK8pB,YACf3qB,IAEwB,OAAzBa,KAAK2/B,iBAAuD,OAA3B3/B,KAAK4/B,mBACtCz0B,EAAQhM,EAAQ,aAAca,KAAK0/B,WAEvCv0B,EAAQhM,EAAQ,gBAAiBmL,OAAOtK,KAAKi5B,SACzCj5B,KAAKwsB,SAAWxsB,KAAKwsB,QAAQzpB,IAC7BoI,EAAQhM,EAAQ,gBAAiBa,KAAKwsB,QAAQzpB,IAEtD,GAEJs8B,GAAWpwB,GAAK,cAChBowB,GAAW1U,mBAAqB,CAAC,UACjC,GAAW,CACProB,GAAK,sBACN+8B,GAAW76B,UAAW,oBAAgB,GACzC,GAAW,CACPlC,GAAK,sBACN+8B,GAAW76B,UAAW,uBAAmB,GAC5C,GAAW,CACPsH,EAAS,CAAEF,UAAU,KACtByzB,GAAW76B,UAAW,cAAU,GACnC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,MACtB41B,GAAW76B,UAAW,mBAAe,GACxC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,MACtB41B,GAAW76B,UAAW,yBAAqB,GAC9C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,aACtB41B,GAAW76B,UAAW,cAAU,GACnC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,YACtB41B,GAAW76B,UAAW,cAAU,GACnC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,YACtB41B,GAAW76B,UAAW,YAAQ,GACjC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,SACtB41B,GAAW76B,UAAW,kBAAc,GACvC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,aACtB41B,GAAW76B,UAAW,kBAAc,GACvC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,MACtB41B,GAAW76B,UAAW,kBAAc,GACvC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,QACtB41B,GAAW76B,UAAW,uBAAmB,GAC5C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,QACtB41B,GAAW76B,UAAW,yBAAqB,GAC9C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,UACtB41B,GAAW76B,UAAW,iBAAa,GACtC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,UACtB41B,GAAW76B,UAAW,iBAAa,GACtC,GAAW,CACP6G,EAAK,CAAE5B,aAAc,OACtB41B,GAAW76B,UAAW,sBAAkB,GAC3C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,OACtB41B,GAAW76B,UAAW,sBAAkB,GAC3C,GAAW,CACPsH,KACDuzB,GAAW76B,UAAW,iBAAa,GACtC,GAAW,CACPumB,IACDsU,GAAW76B,UAAW,oBAAqB,MAC9C,GAAW,CACP0X,GAAO,CACHrW,MAAQu7B,GAASA,EAAKC,gBACtBliC,OAASiiC,GAASA,EAAK5U,WAE5B6S,GAAW76B,UAAW,uBAAwB,MACjD,GAAW,CACP0X,GAAO,UACRmjB,GAAW76B,UAAW,WAAY,MACrC,GAAW,CACP0X,GAAO,YACRmjB,GAAW76B,UAAW,aAAc,MACvC,GAAW,CACP0X,GAAO,eACRmjB,GAAW76B,UAAW,gBAAiB,MAC1C,GAAW,CACP0X,GAAO,eACRmjB,GAAW76B,UAAW,gBAAiB,MAC1C66B,GAAa,GAAW,CACpBnzB,EAAS,YACVmzB,ICtRH,IAMIiC,GANA,GAA0C,SAAU9oB,EAAYrZ,EAAQuE,EAAKzD,GAC7E,IAA2HsD,EAAvHkV,EAAIC,UAAU9X,OAAQ4F,EAAIiS,EAAI,EAAItZ,EAAkB,OAATc,EAAgBA,EAAOH,OAAOyC,yBAAyBpD,EAAQuE,GAAOzD,EACrH,GAAuB,iBAAZ0Y,SAAoD,mBAArBA,QAAQC,SAAyBpS,EAAImS,QAAQC,SAASJ,EAAYrZ,EAAQuE,EAAKzD,QACpH,IAAK,IAAIiF,EAAIsT,EAAW5X,OAAS,EAAGsE,GAAK,EAAGA,KAAS3B,EAAIiV,EAAWtT,MAAIsB,GAAKiS,EAAI,EAAIlV,EAAEiD,GAAKiS,EAAI,EAAIlV,EAAEpE,EAAQuE,EAAK8C,GAAKjD,EAAEpE,EAAQuE,KAAS8C,GAChJ,OAAOiS,EAAI,GAAKjS,GAAK1G,OAAOK,eAAehB,EAAQuE,EAAK8C,GAAIA,CAChE,EAgBA,IAAI+6B,GAAWD,GAAa,cAAuB5a,GAE/CxU,YAAYgF,GACR,IAAIsqB,EAAQx8B,SAAS+kB,cAAc,UAAUuX,GAAWryB,MAMxD,OALKuyB,IACDA,EAAQx8B,SAASK,cAAci8B,GAAWryB,IAC1CiI,GAAWpX,OAAOoB,OAAOsgC,EAAOtqB,GAChClS,SAASoP,KAAK7N,YAAYi7B,IAEvBA,CACX,CACAhZ,mBAAmBvmB,GACf,MAAMxB,EAAOT,KAAKM,YAClB,OAAOR,OAAOoB,OAAO,CAAC,EAAGT,EAAKghC,cAAezhC,KAAKyoB,eAAiB,CAAC,EAAGxmB,GAAU,CAAC,EACtF,CACAolB,yBAAyB7b,EAAU8b,EAAQC,GAClCvnB,KAAK8d,WAEO,WAAbtS,IACAxL,KAAKwsB,QAAUxX,EAAmByX,MAAMzsB,KAAKb,QAErD,CACAye,oBACIF,MAAME,oBACN5d,KAAKyF,aAAa,OAAQzF,KAAKoF,aAAa,SAAW,SACvDpF,KAAK0hC,SAAW18B,SAASK,cAAc,OACvCrF,KAAK0hC,SAAStlB,UAAY,oBAC1Bpc,KAAK6sB,UAAY,GACjB7sB,KAAKuG,YAAYvG,KAAK0hC,UAClB1b,GAAe7B,MACfnkB,KAAKuG,YClDV,WACH,MAAMo7B,EAAS38B,SAASK,cAAc,UAGtC,OAFAs8B,EAAOvlB,UAAY,gBACnBulB,EAAOj8B,IAAM,cACNi8B,CACX,CD6C6BC,IACjB5hC,KAAKb,SACLa,KAAKwsB,QAAUxX,EAAmByX,MAAMzsB,KAAKb,OAAQa,MAE7D,CAEIwsB,cACA,OAAOxsB,KAAK0sB,QAChB,CACIF,YAAQxhB,GACRhL,KAAK0sB,SAAW1hB,EAChBhL,KAAK+d,KAAK/d,KAAKyqB,gBACfzqB,KAAK+d,KAAK/d,KAAK0qB,eACnB,CACArB,OAAOpnB,GACCjC,KAAK6hC,eACLv9B,OAAO0B,aAAahG,KAAK6hC,gBACzB5/B,EAAOo5B,MAAQp5B,EAAO0gB,QACtB3iB,KAAKuiB,OAAOtgB,GACZyb,MAAM2L,OAAOpnB,IAEjBjC,KAAK4oB,KAAK3mB,EACd,CACAunB,OAAOvnB,GACHyb,MAAM8L,OAAOvnB,GACbjC,KAAK6hC,cAAgBv9B,OAAO+B,YAAW,IAAMrG,KAAKqO,SAASpM,EAAO6/B,SACtE,CACAvf,QAAO,KAAEI,EAAI,KAAE0Y,EAAI,IAAEve,IACjBF,GAAc7C,OAAO/Z,KAAMA,KAAK+hC,WAChCnlB,GAAcjP,IAAI3N,KAAMA,KAAK+hC,UAAYjlB,GACrCue,IACAr7B,KAAK0hC,SAAS7U,UAAYwO,GAC1B1Y,IACA3iB,KAAK0hC,SAAS5e,YAAcH,EACpC,CACAtU,QACIrO,KAAK0hC,SAAS7U,UAAY,GAC1BjQ,GAAc7C,OAAO/Z,KAAMA,KAAK+hC,UACpC,CACAvX,mBAAmBjpB,GACf,MAAMsmB,EAAStmB,EAAEsmB,QAAU,CAAC,EAC5B,OAAKtX,EAAUvQ,KAAM6nB,EAAO9E,OAExBxhB,EAAEd,OAAST,KAAK6qB,mBACT/qB,OAAOoB,OAAO,CAAC,EAAG2mB,EAAQ,CAAEoB,OAAO,IAC1C1nB,EAAEd,OAAST,KAAK8qB,mBACThrB,OAAOoB,OAAO,CAAEymB,UAAW,GAAKE,EAAQ,CAAEoB,OAAO,IACrD,KALI,IAMf,CACAyB,eAAenpB,GACXmc,MAAMgN,eAAenpB,GACrBA,EAAE6hB,iBACN,CACAqH,eAAelpB,GACXmc,MAAM+M,eAAelpB,GACrBA,EAAE6hB,iBACN,GAEJme,GAAStyB,GAAK,YACdsyB,GAAS5W,mBAAqB,CAAC,UAE/B4W,GAASE,cAAgB,CACrBK,SAAU,IACVna,UAAW,MAEf,GAAW,CACPrlB,GAAK,mBACNi/B,GAAS/8B,UAAW,0BAAsB,GAC7C,GAAW,CACPlC,GAAK,mBACNi/B,GAAS/8B,UAAW,0BAAsB,GAC7C,GAAW,CACP6G,EAAK,CAAE5B,aAAc,cACtB83B,GAAS/8B,UAAW,cAAU,GACjC,GAAW,CACP+e,MACDge,GAAS/8B,UAAW,qBAAiB,GACxC,GAAW,CACP0X,GAAO,CAAEJ,SAAS,EAAM3c,OAASqR,GAAOA,EAAGgc,WAC5C+U,GAAS/8B,UAAW,iBAAkB,MACzC,GAAW,CACP0X,GAAO,CAAEJ,SAAS,EAAM3c,OAASqR,GAAOA,EAAGgc,WAC5C+U,GAAS/8B,UAAW,iBAAkB,MACzC+8B,GAAWD,GAAa,GAAW,CAC/Bp1B,EAAS,UACVq1B,IErGI,MAAMS,WC/BN,MACH1hC,cACIN,KAAKO,WAAa,IAAIkN,GAC1B,CACA5L,YAAYJ,GACRzB,KAAKO,WAAWoN,IAAIlM,EACxB,CACAK,eAAeL,GACXzB,KAAKO,WAAWsO,OAAOpN,EAC3B,CACAwgC,QAAQj0B,GACJhO,KAAKO,WAAWiB,SAASC,IACrB,IACIA,EAASwM,MAAMjO,KAAMgO,EAIzB,CAFA,MAAOzM,GACHqJ,QAAQlD,MAAMnG,EAClB,IAER,GDYJ,c,oBAEU,KAAA2gC,OAAQ,IAAI3G,WAAYC,gBAAgB,GAAI,aAAapnB,KAIzD,KAAA+tB,UAAW,CAgHrB,CApGSC,QAAQC,EAAgBC,GAC7B,MAAMn2B,GAAO,IAAIovB,WAAYC,gBAAgB6G,EAAQ,aAAajuB,KAE7DjI,GAAQA,EAAK0gB,YAAc7sB,KAAKq7B,OACnCr7B,KAAKkiC,MAAQ/1B,EACbnM,KAAKuiC,cAAgBD,EACrBtiC,KAAKwiC,iBAET,CAGWnH,WACT,OAAOr7B,KAAKkiC,MAAQliC,KAAKkiC,MAAMrV,UAAY,EAC7C,CAGW4V,mBACT,OAAOziC,KAAKuiC,aACd,CAGWG,eACT,OAAO1iC,KAAK2iC,SACd,CAGWD,aAASA,GAClB1iC,KAAK2iC,UAAYD,CACnB,CAGWE,oBAKT,OAJK5iC,KAAK6iC,iBACR7iC,KAAK6iC,eAAiB7iC,KAAK0iC,SACxBriB,MAAMyiB,GAA6BA,EAAQ92B,aAAa,aAAchM,KAAK0iC,SAAS,IAElF1iC,KAAK6iC,cACd,CAEWD,kBAAcE,GACvB9iC,KAAK6iC,eAAez3B,gBAAgB,UACpC03B,EAAQr9B,aAAa,SAAU,IAC/BzF,KAAK6iC,eAAiBC,CACxB,CAGOC,aAAaD,EAA0BR,GACvCQ,IACL9iC,KAAK4iC,cAAgBE,EACrB9iC,KAAKoiC,QAAQU,EAAQjW,UAAWyV,GAClC,CAQOl9B,aAAajG,EAAgBkM,GAClC,OAAO1B,MAAM4H,KAAKvR,KAAKkiC,MAAM1wB,iBAAiBrS,IAAS0K,KAAI2G,GAAMA,EAAGpL,aAAaiG,IACnF,CAGO23B,gBAAgBC,GACrB,MAAM,OAAC9jC,EAAM,UAAE+jC,EAAS,SAAEZ,GAAYW,EAChCE,EAAWx5B,MAAM4H,KAAKvR,KAAKkiC,MAAM1wB,iBAAiBrS,IACnDgkC,EAASviC,SAEdohC,GAAcv8B,aAAa09B,EAAUD,EAAW,cAAeD,EAAMA,EAAIG,UAAYH,EAAI3jC,OACzFU,KAAKuiC,cAAgBD,EACrBtiC,KAAKwiC,iBACP,CAGUA,iBACHxiC,KAAKmiC,WACRniC,KAAKmiC,UAAW,EAChBt+B,QAAQ2D,UAAU8a,MAAK,KACrBtiB,KAAKiiC,OACLjiC,KAAKmiC,UAAW,CAAK,IAG3B,CAQUjwB,oBAAoBixB,EAAqB93B,EAAc+3B,GAC/DD,EAAS3hC,SAAQgP,IACf,MAAM6yB,EAAmC,mBAAdD,EAA2BA,EAAU5yB,EAAGpL,aAAaiG,IAAS+3B,EAC9D,iBAAhBC,EACT7yB,EAAG/K,aAAa4F,EAAMg4B,GAEtBA,EAAc7yB,EAAG/K,aAAa4F,EAAM,IAAMmF,EAAGpF,gBAAgBC,E,GAGnE,E,2UE3IK,MAAMi4B,WAAgB7lB,GAkBhB8lB,YACT,OAAO,IAAIvB,EACb,CAGWwB,gBACT,OAAO75B,MAAM4H,KAAKvR,KAAKwR,iBAAiB8xB,GAAQG,aAClD,CAEU7lB,oBACRF,MAAME,oBACN5d,KAAK0jC,cACP,CAGOC,iBAAiBliC,GACtBzB,KAAKujC,MAAM1hC,YAAYJ,EACzB,CAGOmiC,oBAAoBniC,GACzBzB,KAAKujC,MAAMzhC,eAAeL,EAC5B,CAGUiiC,eACR1jC,KAAKujC,MAAMb,SAAW1iC,KAAKwjC,UAC3BxjC,KAAKujC,MAAMR,aAAa/iC,KAAKujC,MAAMX,cAAe5iC,KACpD,CAEUqnB,yBAAyB7b,EAAkB8b,EAAuBC,GACtED,IAAWC,IACX,CAAC,gBAAiB,cAAcvmB,SAASwK,IAC3CxL,KAAKyc,UAAU0B,OAAO3S,EAAqB,OAAX+b,GAGlClhB,YAAW,KACT4V,GAAWb,SAASpb,KAAM,mBAAoB,CAC5Cwb,SAAS,EACTqM,OAAQ,CACNqb,UAAW13B,EACXlM,MAAOioB,IAET,IAEN,EA9Dc,GAAAtY,GAAK,WACZ,GAAA0b,mBAAqB,CAAC,aAAc,qBAAsB,mBAAoB,iBAGvE,GAAA8Y,YAAc,gBAGhB,IAAX33B,K,iCAEW,IAAXA,K,yCAEW,IAAXA,K,uCAEW,IAAXA,K,oCAID,IADCwC,K,sWCpBI,MAAeu1B,WAAkBpmB,GAQxBtR,WACZ,OAAOnM,KAAK6Z,QAAQ,GAAGypB,GAAQr0B,KACjC,CAGcs0B,YACZ,OAAOvjC,KAAKmM,KAAOnM,KAAKmM,KAAKo3B,MAAQ,IACvC,CAIcO,aACZ,MAAMA,EAAS9+B,SAASK,cAAc,OAChC0+B,EAAa/jC,KAAKM,YAExB,OADAwjC,EAAO1nB,UAAY,GAAG2nB,EAAW90B,4BAC1B60B,CACT,CAEUlmB,oB,MACRF,MAAME,oBACN5d,KAAKyc,UAAU9O,IAAI,cACV,QAAT,EAAA3N,KAAKmM,YAAI,SAAEw3B,iBAAiB3jC,KAAKgkC,oBACjChkC,KAAKmM,MAAQnM,KAAKgkC,oBACpB,CAEUnmB,uB,MACC,QAAT,EAAA7d,KAAKmM,YAAI,SAAEy3B,oBAAoB5jC,KAAKgkC,oBACpCtmB,MAAMG,uBACNvP,EAAQD,MAAMrO,KAAM,OACtB,CAEUqnB,yBAAyB7b,EAAkB8b,EAAgBC,GAClD,UAAb/b,GAAsBxL,KAAKyF,aAAa,aAAc8hB,EAC5D,CAGUyc,qBAA4B,EA3C/B,GAAArZ,mBAAqB,CAAC,SAGrB,IAAPtf,K,6BAID,IADCiD,K,0BAYD,IADCA,K,4BCpBI,MAAM21B,WAAmBJ,GAMpBG,qBACJhkC,KAAK8jC,OAAO/yB,gBAAkB/Q,MAAMA,KAAKmG,YAAYnG,KAAK8jC,QAC9D9jC,KAAK8jC,OAAOjX,UAAY7sB,KAAKujC,MAAOlI,KACpCr7B,KAAKuG,YAAYvG,KAAK8jC,OACxB,CAEUjmB,uBACJ7d,KAAK8jC,OAAO/yB,gBAAkB/Q,MAAMA,KAAKmG,YAAYnG,KAAK8jC,QAC9DpmB,MAAMG,sBACR,CAEUwJ,yBAAyB7b,EAAkB8b,EAAgBC,GAClD,cAAb/b,GAAuC,OAAX+b,GAC9BvnB,KAAKkkC,kBACLlkC,KAAK8jC,OAAOrnB,UAAU1C,OAAO,cAE7B/Z,KAAK8jC,OAAOrnB,UAAU9O,IAAI,YAE9B,CAGUu2B,kBACRlkC,KAAK8jC,OAAOxY,MAAM2E,eAAe,UACjCjwB,KAAK8jC,OAAOxY,MAAM2E,eAAe,QACnC,EA7BO,GAAAhhB,GAAK,cACL,GAAA0b,mBAA+B,CAAC,a,0TAIvC,EADCzrB,GAAA,G,mXCDI,MAAMilC,WAAoBN,GAWjBO,mBACZ,MAAMp5B,EAAMhG,SAASK,cAAc,OAEnC,OADA2F,EAAIoR,UAAY,gBACTpR,CACT,CAIcq5B,aACZ,MAAMr5B,EAAMhG,SAASK,cAAc,QAEnC,OADA2F,EAAIoR,UAAY,iBACTpR,CACT,CAIc0nB,gBACZ,MAAM1nB,EAAMhG,SAASK,cAAc,OAEnC,OADA2F,EAAIoR,UAAY,oBACTpR,CACT,CAIcs5B,uBACZ,MAAMt5B,EAAMhG,SAASK,cAAc,OAEnC,OADA2F,EAAIoR,UAAY,4BACTpR,CACT,CAIcu5B,uBACZ,MAAMv5B,EAAMhG,SAASK,cAAc,OAEnC,OADA2F,EAAIoR,UAAY,4BACTpR,CACT,CAIWimB,aACT,MAAMrO,EAAQ5iB,KAAKwR,iBAAiB,IAAI2yB,GAAYK,aACpD,OAAO76B,MAAM4H,KAAKqR,EACpB,CAIW+N,cACT,MAAMA,EAAU3rB,SAASK,cAAc,iBAEvC,OADAsrB,EAAQlrB,aAAa,SAAU,UACxBkrB,CACT,CAEU/S,oBACRF,MAAME,oBACN5d,KAAKuiB,SAELlc,YAAW,IAAMrG,KAAKykC,QAAUzkC,KAAKykC,SAAWzkC,KAAKixB,OAAO,IAC9D,CAEUpT,uBACRH,MAAMG,sBACR,CAOU6mB,gBAAgBnjC,GACxB,IAAKvB,KAAKyc,UAAUzM,SAAS,iBAAkB,OAC/C,MAAM7Q,EAASoC,EAAEpC,OACjB,GAAIa,KAAKgQ,SAAS7Q,GAAS,OAAO,EAClCa,KAAK2kC,gBACP,CAGWF,cACT,OAAOzkC,KAAKixB,OAAO5Q,MAAK3S,GAAQA,EAAK+O,UAAUzM,SAASm0B,GAAYS,gBAAiB,IACvF,CAEWH,YAAQ3B,GACjB9iC,KAAKixB,OAAOzvB,SAASkM,GAASA,EAAK+O,UAAU0B,OAAOgmB,GAAYS,YAAa9B,IAAYp1B,KACzF1N,KAAK6kC,iBACP,CAGUtiB,SACR,MAAMmgB,EAAW1iC,KAAKujC,MAAOb,SACxBA,EAAS9hC,SAEd8hC,EAAS9hC,OAAS,EACdZ,KAAK8kC,eAAepC,EAAU1iC,KAAKqkC,QACnCrkC,KAAKuG,YAAYvG,KAAKqkC,QAC5B,CAGUS,eAAepC,EAA6BqC,GAEpDrC,EACG74B,KAAKi5B,GAA6B9iC,KAAKglC,cAAclC,KACrDthC,SAASkM,GAASA,GAAQ1N,KAAKokC,aAAa79B,YAAYmH,KAE3D1N,KAAKokC,aAAa3nB,UAAU9O,IAAI,0BAChC3N,KAAKukC,iBAAiBh+B,YAAYvG,KAAKokC,cACvCpkC,KAAK2wB,SAAW3wB,KAAKukC,iBAAiBh+B,YAAYvG,KAAK2wB,SAEvD3wB,KAAKskC,iBAAiB/9B,YAAYw+B,GAClC/kC,KAAKuG,YAAYvG,KAAKskC,kBAEtBtkC,KAAK0yB,UAAUnsB,YAAYvG,KAAKukC,kBAChCvkC,KAAKuG,YAAYvG,KAAK0yB,UACxB,CAGUsS,cAAclC,G,MACtB,MAAMmC,EAAQnC,EAAQ19B,aAAa,SACnC,IAAK6/B,EAAO,OAEZ,MAAMC,EAAMlgC,SAASK,cAAc,MAInC,OAHA6/B,EAAIzoB,UAAU9O,IAAIw2B,GAAYK,WAC9BU,EAAIpiB,YAAcmiB,EAClBnC,KAAsB,QAAV,EAAA9iC,KAAKujC,aAAK,eAAEX,gBAAiBsC,EAAIzoB,UAAU9O,IAAIw2B,GAAYS,aAChEM,CACT,CAGUL,kBACJ7kC,KAAKujC,QACPvjC,KAAKqkC,OAAOvhB,YAAc,GAAG9iB,KAAKujC,MAAMX,cAAcx9B,aAAa,WAEvE,CAIU+/B,aAAat/B,GACrB,MAAM1G,EAAS0G,EAAM1G,OACfkN,EAAQrM,KAAKixB,OAAOzc,QAAQrV,GAC9BkN,EAAQ,IAEZrM,KAAK2kC,iBAED3kC,KAAKolC,eAAiB/4B,GAASrM,KAAKujC,QACtCvjC,KAAKujC,MAAMR,aAAa/iC,KAAKujC,MAAMb,SAASr2B,GAAQrM,MACpDA,KAAKykC,QAAUtlC,EACfa,KAAKolC,aAAe/4B,GAExB,CAOUg5B,mBACRrlC,KAAK2kC,gBACP,CAGOA,iBACL3kC,KAAKyc,UAAU0B,OAAO,gBACxB,EA3Kc,GAAAlP,GAAK,eAEL,GAAAu1B,UAAY,qBAEZ,GAAAI,YAAc,SAM5B,IADCt2B,K,kCASD,IADCA,K,4BASD,IADCA,K,+BASD,IADCA,K,sCASD,IADCA,K,sCASD,IADCA,K,4BAQD,IADCA,K,6BAuBD,IADC4N,GAAO,CAACrW,MAAO,UAAW1G,OAAQ6F,SAASoP,Q,qCAmE5C,IADC8H,GAAO,CAACrW,MAAO,QAASyT,SAAU,yB,kCAoBnC,IADC4C,GAAO,CAACrW,MAAO,QAASyT,SAAU,gC,iXC9J9B,MAAMgsB,WAAkB7nB,GAY7BvL,gBAAgBqzB,GACd,MAAMhlB,EAASvb,SAASK,cAAc,cAGtC,OAFAkb,EAAO9a,aAAa,YAAa8/B,EAAaC,aAC9CjlB,EAAOjV,OAASi6B,EACThlB,CACT,CAEU3C,oBACRF,MAAME,oBACN5d,KAAKylC,MAAQzlC,KAAK6Z,QAAQ,aAC1B7Z,KAAKyc,UAAU9O,IAAI,GAAG3N,KAAKkjC,oBAC3BljC,KAAKswB,SAAW,EAChBtwB,KAAKi5B,OAASj5B,KAAKylC,MAAMz5B,aAAahM,KAAKsL,OAAOk6B,YACpD,CAGWvM,aACT,OAAOj5B,KAAKke,MAAM,SACpB,CAGW+a,WAAOtwB,GAChB3I,KAAKke,MAAM,SAAUvV,EACvB,CAIU4oB,WACRvxB,KAAK0lC,cACL1lC,KAAKse,OAAO,qBACd,CAIUkT,WAAWjwB,GACf2b,KAAU3b,EAAEmC,KAAO0Z,KAAU7b,EAAEmC,MACnC1D,KAAK0lC,cACL1lC,KAAKse,OAAO,sBACd,CAGOonB,YAAYzc,GACjBjpB,KAAKi5B,YAAmB92B,IAAV8mB,GAAuBjpB,KAAKi5B,OAAShQ,CACrD,EAtDc,GAAAha,GAAK,aAGX,IAAP5D,K,iCAmCD,IADC6Q,GAAO,U,8BAQR,IADCA,GAAO,Y,2WCrDH,MAAMypB,WAAmB9B,GAAhC,c,oBAKS,KAAA3sB,QAAU,IAAI9I,GAwFvB,CA5DYwP,oBACRF,MAAME,oBACN5d,KAAKuiB,QACP,CAEU1E,uBACR7d,KAAK6sB,UAAY,GACjBnP,MAAMG,sBACR,CAEUwJ,yBAAyB7b,EAAkB8b,EAAuBC,GAC1E,GAAID,IAAWC,IAAWvnB,KAAKkX,QAAS,OAExC,MAAM5L,EAASq6B,GAAWC,iBAAiBvlB,MAAKwlB,GAAQA,EAAKr6B,WAAaA,IAC1E,GAAKF,IAEU,OAAXic,GAAiBvnB,KAAKuiB,OAAO,CAACjX,IACnB,OAAXic,GAAiB,CACnB,MAAMhH,EAASvgB,KAAKkX,QAAQvX,IAAI2L,EAAOk6B,aACvC,IAAKjlB,EAAQ,OACbvgB,KAAKkX,QAAQrI,OAAOvD,EAAOk6B,aAC3BjlB,EAAOxG,Q,CAEX,CAMUwI,OAAOujB,EAAaH,GAAWC,mBACvCE,EAAaA,EAAW1kC,QAAOmf,IAAWA,EAAOwlB,aAAexlB,EAAOwlB,YAAY/lC,SACxEwB,SAAS+e,GAAWvgB,KAAKkX,QAAQhX,IAAIqgB,EAAOilB,YAAaF,GAAUU,SAASzlB,MACvFvgB,KAAKkX,QAAQ1V,SAAQ+e,GAAUvgB,KAAKimC,OAAO1lB,IAC7C,CAOU2lB,oBAAoB3kC,GAC5B,MAAMgf,EAASvgB,KAAKkX,QAAQvX,IAAI4B,EAAEsmB,OAAOqb,WACzC3iB,SAAAA,EAAQmlB,YAA+B,OAAnBnkC,EAAEsmB,OAAOvoB,MAC/B,CAOU6mC,eAAe5kC,G,MACvBA,EAAE6hB,kBACF,MAAM7C,EAAShf,EAAEpC,OACR,QAAT,EAAAa,KAAKmM,YAAI,SAAEsW,gBAAgBlC,EAAO2iB,UAAW3iB,EAAO0Y,OACtD,CAEO/mB,gBAAgBqM,GACrB+mB,GAAU7U,WACV6U,GAAU5mB,WAAW4D,MAAK,IAAM5E,MAAM+S,SAAS/uB,KAAK1B,KAAMue,IAC5D,EA3Fc,GAAAtP,GAAK,cACL,GAAA0b,mBAAqB,CAAC,aAAc,iBAAkB,gBAAiB,eAMpEgb,GAAAC,iBAAmC,CAClD,CACEp6B,SAAU,aACVg6B,YAAa,aACbO,YAAcK,IAAeA,EAAUp6B,aAAa,eAEtD,CACER,SAAU,iBACVg6B,YAAa,gBACbO,YAAcK,IAAeA,EAAUp6B,aAAa,mBAEtD,CACER,SAAU,gBACVg6B,YAAa,qBACbO,YAAcK,I,MAAc,OAACA,EAAUp6B,aAAa,qBAClC,QAAd,EAAAo6B,EAAUj6B,YAAI,eAAE4d,cAAc,gBAAe,GAEnD,CACEve,SAAU,cACVg6B,YAAa,mBACbO,YAAcK,I,MAAc,OAACA,EAAUp6B,aAAa,mBAClC,QAAd,EAAAo6B,EAAUj6B,YAAI,eAAE4d,cAAc,cAAa,IA4CnD,IADC7N,GAAO,CAACrW,MAAO,mBAAoB1G,OAAQ,yB,yCAW5C,IADC+c,GAAO,U,oCClFH,MAAMmqB,WAAkBxC,GAGnBjmB,oBACRF,MAAME,oBACN5d,KAAKsmC,mBAAqBtmC,KAAKumC,UACjC,CAGUA,WACRvmC,KAAKwmC,iBACLxmC,KAAKymC,gBACLzmC,KAAK0mC,YACP,CAGUF,iB,MACR,GAAc,QAAV,EAAAxmC,KAAKujC,aAAK,eAAEb,SAAS9hC,OAAQ,CAC/B,MAAM+lC,EAAa3hC,SAASK,cAAc8+B,GAAYl1B,IACtDjP,KAAK4mC,QAAQD,E,CAEjB,CAGUF,gBACR,MAAMI,EAAY7hC,SAASK,cAAcsgC,GAAW12B,IACpDjP,KAAKimC,OAAOY,EACd,CAGUH,aACR,MAAMI,EAAO9hC,SAASK,cAAc,UACpCyhC,EAAK/B,MAAQ,cACb+B,EAAKrqB,UAAU9O,IAAI,aACnB3N,KAAKimC,OAAOa,EACd,CAIUC,eACR9iB,UAAU+iB,UAAUC,UAAUjnC,KAAKujC,MAAOlI,MAAM/Y,MAAK,KACnDrG,GAAWb,SAASpb,KAAM,iBAAkB,CAC1C6nB,OAAQ,CACNlF,KAAM,gBACN7F,IAAK,mBAEP,GAEN,EC9CK,SAASoqB,GAAe/nC,EAAQ0G,EAAON,EAAS2R,GACnD,OAAO,IAAIrT,SAAQ,CAAC2D,EAASC,KAKzBtI,EAAO0B,iBAAiBgF,GAJxB,SAASshC,EAAc5lC,GACnBpC,EAAOgC,oBAAoB0E,EAAOshC,EAAejwB,GACjD1P,EAAQjG,EACZ,GAC8C2V,GACvB,iBAAZ3R,GAAwBA,GAAW,GAC1Cc,YAAW,IAAMoB,EAAO,IAAI1F,MAAM,yBAAyBwD,EAC/D,GAER,CAoDO,SAAS6hC,KACZ,IAAI3/B,EACAD,EAMJ,MAAO,CAAED,QAJO,IAAI1D,SAAQ,CAAC6vB,EAAK2T,KAC9B7/B,EAAUksB,EACVjsB,EAAS4/B,CAAG,IAEE7/B,UAASC,SAC/B,CDzES,GAAAwH,GAAK,a,0TAsCZ,EADCiN,GAAO,CAACrW,MAAO,QAASyT,SAAU,gB,kCCyD9B,MAAMguB,IC9FN,SAASC,GAASnhC,EAAIohC,EAAO,GAAIC,GACpC,IAAIliC,EAAU,KACVmiC,EAAW,KACf,SAASC,KAAoB35B,GACzB05B,EAAWA,GAAYN,KACH,iBAAZ7hC,GAAyBS,aAAaT,GAC9CA,EAAUjB,OAAO+B,YAAW,KACxBd,EAAU,KAEVmiC,EAASlgC,QAAQpB,EAAG6H,MAAMw5B,GAAWznC,KAAMgO,IAC3C05B,EAAW,IAAI,GAChBF,EACP,CAeA,OARA1nC,OAAOK,eAAewnC,EAAkB,UAAW,CAC/ChoC,IAAK,IAAM+nC,EAAWA,EAASngC,QAAU1D,QAAQ2D,YAErD1H,OAAOK,eAAewnC,EAAkB,SAAU,CAC9CvnC,UAAU,EACVX,YAAY,EACZH,MAZJ,WACwB,iBAAZiG,GAAyBS,aAAaT,GAC9CA,EAAU,KACVmiC,SAAoDA,EAASjgC,SAC7DigC,EAAW,IACf,IASOC,CACX,CDoEAL,GAAaM,YAvGN,SAA0BriC,EAASmyB,EAASmQ,GAC/C,OAAO,IAAIhkC,SAAQ,CAAC2D,EAASC,IAAWpB,YAAYwhC,EAAWpgC,EAASD,GAAStI,KAAK,KAAMw4B,GAAUnyB,IAC1G,EAsGA+hC,GAAaQ,UAAYZ,GACzBI,GAAaS,WA/EN,SAAyB5oC,EAAQ6oC,EAAQniC,EAAQmiC,GACpD,OAAI7oC,EAAO6oC,GACAnkC,QAAQ2D,QAAQrI,GACpB+nC,GAAe/nC,EAAQ0G,GAAOyc,MAAK,IAAMnjB,GACpD,EA4EAmoC,GAAaW,OA7CN,SAASC,EAAepnC,EAAU4wB,EAAQ,GAC7C,OAAIA,EAAQ,EACD7tB,QAAQ4D,SACL,IAAViqB,EACO7tB,QAAQ2D,UAAU8a,KAAKxhB,GAC3BonC,EAAepnC,EAAU4wB,EAAQ,GAAGpP,KAAKxhB,EACpD,EAwCAwmC,GAAaa,SAxEN,SAAkBrnC,EAAUsnC,EAAW,EAAG7iC,EAAU,KACvD,OAAO,IAAI1B,SAAQ,CAAC2D,EAASC,MACzB,SAAU4gC,IACN,IAAI3+B,EACJ,IACIA,EAAS5I,GAIb,CAFA,MAAOH,GACH+I,OAASvH,CACb,CACIuH,GAAW0+B,IAAc,EACzB1+B,EAASlC,EAAQkC,GAAUjC,EAAO,IAAI1F,MAAM,+BAG5CsE,WAAWgiC,EAAO9iC,EAEzB,CAdD,EAcI,GAEZ,EAuDA+hC,GAAaI,SAAWN,GACxBE,GAAa9/B,QAvBN,SAAwBiB,GAC3B,OAAO5E,QAAQ2D,QAAQiB,EAC3B,EAsBA6+B,GAAa7/B,OAhBN,SAAuBgB,GAC1B,OAAO5E,QAAQ4D,OAAOgB,EAC1B,E,qVEvFO,MAAM6/B,WAAkBzE,GAWnBjmB,oBACRF,MAAME,oBACN5d,KAAK6sB,UAAY,GACjB7sB,KAAKuG,YAAYvG,KAAK8jC,QAElB9jC,KAAKmM,OAASnM,KAAKmM,KAAKH,aAAas8B,GAAUC,qBACjDvoC,KAAKwoC,YAET,CAEU3qB,uB,MACG,QAAX,EAAA7d,KAAKyoC,cAAM,SAAEC,UACb1oC,KAAK2oC,eAAetb,UAAUrtB,MAC9B0d,MAAMG,sBACR,CAGU2qB,aACR,OAAIxoC,KAAKyoC,OACA5kC,QAAQ2D,UAGV,qDAAgE8a,MAAMsmB,IAC3E5oC,KAAK2oC,eAAelpB,QAAQzf,MAC5BA,KAAKyoC,OAAS,IAAIG,EAAIC,OAAO7oC,KAAK8jC,QAClC9jC,KAAKyoC,OAAOK,UAAU9oC,KAAK+oC,cAC3B/oC,KAAKgkC,oBAAoB,GAE7B,CAKU3kB,YACRrf,KAAKujC,MAAOnB,QAAQpiC,KAAKyoC,OAAOO,WAAYhpC,KAC9C,CAIUgkC,qBACR,GAAIhkC,KAAKujC,MAAOd,eAAiBziC,KAAM,OAEvC,MAAMqiC,EAASriC,KAAKujC,MAAOlI,KAC3Bh1B,YAAW,IAAMrG,KAAKyoC,QAAUzoC,KAAKyoC,OAAOQ,SAAS5G,IACvD,CAMO6G,mBAAmBH,G,MACxB/oC,KAAK+oC,aAAe,OAAH,wBACZ/oC,KAAK+oC,cACLA,GAGM,QAAX,EAAA/oC,KAAKyoC,cAAM,SAAEK,UAAU9oC,KAAK+oC,aAC9B,CAOcJ,qBACZ,OAAO,IAAIxc,eAAeob,IAAS,IAAMvnC,KAAKyoC,OAAOU,UAAU,KACjE,CAIUjD,oBAAoB3kC,GAC5B,MAAM8J,EAAO9J,EAAEsmB,OAAOqb,UAChB5jC,EAAQiC,EAAEsmB,OAAOvoB,MAEvB,OAAQ+L,GACN,IAAK,aACH,OAAOrL,KAAKkpC,mBAAmB,CAACE,MAAiB,OAAV9pC,EAAiB,WAAiB,YAC3E,IAAK,mBAEH,YADU,OAAVA,GAAkBU,KAAKwoC,cAEzB,QACE,OAEN,EA7Fc,GAAAv5B,GAAK,aAEJ,GAAAs5B,mBAAqB,mBAIpC,IADChlB,GAAS,CAAC9Z,aAAc,CAAC,K,oCAsC1B,IAFCyS,GAAO,UACPtD,GAAS2uB,GAAU,M,+BAOpB,IADCroC,GAAA,G,wCA0BD,IADCoP,K,oCAOD,IADC4N,GAAO,CAACrW,MAAO,mBAAoB1G,OAAQ,yB,yCCzFvC,MAAMkqC,GAED,kBAFCA,GAID,oBAJCA,GAKF,kB,2UCMJ,MAAeC,WAAmB7rB,GAM5Bte,aACT,OAAO4L,EAAQ/K,KAAM,SAAUA,KAAKupC,UAAUpqC,OAChD,CAEWA,WAAOA,GAChBgM,EAAQnL,KAAM,SAAUb,EAC1B,CAIWoqC,gBACT,OAAOvpC,KAAK6Z,QAAQ2vB,GAAYv6B,GAClC,CAEU2O,oBACRF,MAAME,oBACN5d,KAAKyc,UAAU9O,IAAI27B,GAAWr6B,GAChC,CAEU4O,uBACRH,MAAMG,sBACR,CAOUwB,UAAU9d,GAClBA,EAAE8hB,iBACFpH,GAAWb,SAASpb,KAAM,aAC5B,CAMOypC,QAAQlG,GACb,MAAMN,EAAwB,CAC5B9jC,OAAQa,KAAKb,OACb+jC,UAAWljC,KAAKkjC,UAChB5jC,MAAOU,KAAK0pC,oBACZpH,SAAUtiC,KAAKupC,WAEjBvpC,KAAK2pC,UAAYpG,EAAMP,gBAAgBC,GAAOjjC,KAAK4pC,iBD1D5C,wBC2DT,CAMOC,WAAWtG,GAChBvjC,KAAK4gB,UAAW,EAChB,MAAME,EAASyiB,EAAMn+B,aAAapF,KAAKb,OAAQa,KAAKkjC,WAE/CpiB,EAAOlgB,OAGDkgB,EAAOxY,MAAKhJ,GAASA,IAAUwhB,EAAO,KAC/C9gB,KAAK4pC,iBAAiBP,IAEtBrpC,KAAKipC,SAASnoB,EAAO,KALrB9gB,KAAK4gB,UAAW,EAChB5gB,KAAK4pC,iBAAiBP,IAM1B,CAMUM,UACR,OAAO,CACT,CAMUC,iBAAiBE,EAAcT,sBAEzC,CAMIzoB,aAASqI,GAEb,EA5FO,GAAAha,GAAK,cAGJ,IAAP5D,K,iCAYD,IADCiD,K,+BAmBD,IADC4N,GAAO,W,0WClCH,MAAMstB,WAAoB3F,GAYpBlT,cACT,MAAMA,EAAU3rB,SAASK,cAAc,iBAEvC,OADAsrB,EAAQlrB,aAAa,SAAU,0BACxBkrB,CACT,CAEU/S,oBACRF,MAAME,oBACN5d,KAAK+pC,aACP,CAGUA,cACR,MAAMC,EAAgBhlC,SAASK,cAAc,OAC7C2kC,EAAc5tB,UAAY,uCAC1B,IAAIpc,KAAK07B,YAAYl6B,SAAUmQ,IAC7Bq4B,EAAczjC,YAAYoL,EAAK,IAEjC3R,KAAK8jC,OAAOv9B,YAAYyjC,GACxBhqC,KAAK2wB,SAAW3wB,KAAK8jC,OAAOv9B,YAAYvG,KAAK2wB,SAC7C3wB,KAAKuG,YAAYvG,KAAK8jC,OACxB,CAEUjmB,uBACRH,MAAMG,sBACR,CAOUosB,kBAAkB1oC,GAC1BA,EAAE6hB,kBACGpjB,KAAKujC,OACThiC,EAAEpC,OAAsBsqC,QAAQzpC,KAAKujC,MACxC,CAGc2G,eACZ,OAAOvgC,MAAM4H,KAAKvR,KAAKmqC,uBAAuBb,GAAWr6B,IAC3D,CAIU+0B,qBACRhkC,KAAKkqC,SAAS1oC,SAAQ4oC,GAAWA,EAAQP,WAAW7pC,KAAKujC,QAC3D,EA1Dc,GAAAt0B,GAAK,eAMX,IAAP5D,K,8BACiC,IAAjCA,EAAK,CAAC5B,aAAc,c,6BAIrB,IADC6E,K,6BAiCD,IADC4N,GAAO,e,uCAcR,IADChd,GAAA,G,mXC5DI,MAAMmrC,WAAuBf,GAQpBgB,aACZ,MAAMA,EAAStlC,SAASK,cAAc,SAGtC,OAFAilC,EAAO7pC,KAAO,OACd6pC,EAAOxiC,KAAO9H,KAAKilC,MACZqF,CACT,CAEU1sB,oBACRF,MAAME,oBAEN,MAAMqnB,EAAQjgC,SAASK,cAAc,SACrC4/B,EAAMsF,UAAYvqC,KAAKilC,MACvBA,EAAM1+B,YAAYvG,KAAKsqC,QAEvBtqC,KAAK6sB,UAAY,GACjB7sB,KAAKuG,YAAY0+B,EACnB,CAEUyE,oBACR,OAAO1pC,KAAKsqC,OAAOhrC,KACrB,CAEU2pC,SAAS3pC,GACjBU,KAAKsqC,OAAOhrC,MAAQA,GAAS,GAC7BU,KAAKsqC,OAAOtX,YAAc,EAC5B,CAEU4W,iBAAiBE,EAAMT,sBAC/BrpC,KAAKsqC,OAAOhrC,MAAQ,GACpBU,KAAKsqC,OAAOtX,YAAc8W,CAC5B,CAEIlpB,aAASqI,GACXjpB,KAAKsqC,OAAO7nB,gBAAgB,WAAYwG,EAC1C,EAzCc,GAAAha,GAAK,mBAGO,IAAzB5D,EAAK,CAAC5B,aAAc,M,6BAIrB,IADC6E,K,4BChBY,MAAMk8B,GAMnBt4B,aAAajI,GACX,OAAOA,aAAG,EAAHA,EAAKmC,MAAM,SAAU,EAC9B,CAGA8F,YAAY4O,GACV,OAAOA,EAAOzL,KAAK,IACrB,CAGAnD,uBAAuB4O,GACrB,OAAOA,EAAOpR,OAAM/G,GAAOA,IAAQmY,EAAO,IAC5C,CAGA5O,cAAiBu4B,EAAWC,GAC1B,OAAOF,GAAex6B,SAASy6B,EAAMC,IAASF,GAAex6B,SAAS06B,EAAMD,EAC9E,CAGAv4B,gBAAmBy4B,EAAYC,GAC7B,MAAM1qC,EAAM,IAAIuN,IAAIk9B,GACpB,OAAOC,EAASl7B,OAAM/G,GAAOzI,EAAIiO,IAAIxF,IACvC,CAIAuJ,oBAAuB1O,EAAQqnC,KAAWj1B,GACxC,OAAIA,EAAKhV,OAAe4pC,GAAeM,aAAatnC,EAAGgnC,GAAeM,aAAaD,KAAMj1B,IAClFi1B,EAAIrnC,EAAEpC,OAAOqM,IAAIjJ,UAAU2J,IAAK,IAAIV,IAAIo9B,IAAMrnC,CACvD,CAGA0O,cAAiBy4B,EAAYn3B,GAC3B,OAAOm3B,EAAMvpC,QAAOoP,GAAMA,IAAOgD,GACnC,E,2UC1BK,MAAMu3B,WAAyBzB,GAmBtBgB,aACZ,MAAMA,EAAStlC,SAASK,cAAc,cAKtC,OAJAilC,EAAOxiC,KAAO9H,KAAKilC,MACnBqF,EAAOpY,cAAgB6Y,GAAiB7Y,cACxCoY,EAAOtrB,QAAUhf,KAAKkf,OACtBorB,EAAOrE,OAAOjmC,KAAKkf,QACZorB,CACT,CAIcU,aACZ,MAAMA,EAAShmC,SAASK,cAAc,SAEtC,OADA2lC,EAAOT,UAAYvqC,KAAKilC,MACjB+F,CACT,CAIcC,qBACZ,OAAOjrC,KAAKsqC,OAAOpzB,QAAQrN,KAAI4W,GAAOA,EAAInhB,OAC5C,CAIc4f,aACZ,MAAMA,EAASla,SAASK,cAAc,UAKtC,OAJA6Z,EAAOzZ,aAAa,oBAAqB,IACzCyZ,EAAOe,SAAWjgB,KAAKigB,SACvBf,EAAOnc,GAAK,GAAGgoC,GAAiB97B,MjDtDb,EAAC+X,EAAS,KAGtBA,EAFMkkB,KAAKC,MAAMjW,SAAS,IAEV,IADV5rB,KAAK8hC,MAAsB,KAAhB9hC,KAAK+hC,SAAkB,MAAMnW,SAAS,IiDoDxBoW,KACtCtrC,KAAKwR,iBAAiB,UAAUhQ,SAAQ+e,GAAUrB,EAAOvR,IAAI4S,KACtDrB,CACT,CAEUtB,oBACRF,MAAME,oBACN5d,KAAKgrC,OAAOO,QAAUvrC,KAAKsqC,OAAOtrB,QAAQjc,GAE1C/C,KAAK6sB,UAAY,GACjB7sB,KAAKuG,YAAYvG,KAAKgrC,QACtBhrC,KAAKuG,YAAYvG,KAAKsqC,OACxB,CAEAb,QAAQlG,GACN,GAAkB,YAAdvjC,KAAKi9B,KAAoB,OAAOvf,MAAM+rB,QAAQlG,GAElD,MAAMN,EAAwB,CAC5B9jC,OAAQa,KAAKb,OACb+jC,UAAWljC,KAAKkjC,UAChBZ,SAAUtiC,KAAKupC,UACfnG,UAAWpjC,KAAKwrC,eAAetsC,KAAKc,KAAMA,KAAK0pC,sBAGjDnG,EAAMP,gBAAgBC,EACxB,CAGAuI,eAAelsC,EAAemsC,GAC5B,IAAKA,EAAW,OAAOnsC,GAAS,KAEhC,MAAMosC,EAAa1rC,KAAKirC,eAAejnC,QAAO,CAAC+Y,EAAQwD,IACrDiqB,GAAezwB,OAAOgD,EAAQwD,IAASiqB,GAAep+B,MAAMq/B,IAG9D,OAFAnsC,GAASosC,EAAWzqC,KAAK3B,GAElBkrC,GAAen1B,KAAKq2B,EAC7B,CAEA7B,WAAWtG,GACTvjC,KAAK2rC,QACL,MAAMC,EAAarI,EAAMn+B,aAAapF,KAAKb,OAAQa,KAAKkjC,WAExD,IAAK0I,EAAWhrC,OAEd,OADAZ,KAAK4gB,UAAW,EACT5gB,KAAK4pC,iBAAiBP,IAGjB,YAAdrpC,KAAKi9B,KAAqBj9B,KAAK6rC,YAAYD,GAAc5rC,KAAK8rC,WAAWF,EAC3E,CAGUC,YAAYD,GACpB,OAAKpB,GAAeuB,gBAAgBH,GAEd,OAAlBA,EAAW,IACbpB,GAAex6B,SAAShQ,KAAKirC,eAAgBT,GAAep+B,MAAMw/B,EAAW,KACtE5rC,KAAKipC,SAAS2C,EAAW,IAG3B5rC,KAAKigB,SAAWjgB,KAAKipC,SAAS,IAAMjpC,KAAK4pC,iBAAiBP,IAPTrpC,KAAK4pC,iBAAiBP,GAQhF,CAGUyC,WAAWF,GAEnB,MAAMI,EAAgBJ,EAAW/hC,KAAIlB,GAAO6hC,GAAeM,aAAa9qC,KAAKirC,eAAgBT,GAAep+B,MAAMzD,MAGlH,GAAI3I,KAAKirC,eAAejqC,SAAS,KAAOgrC,EAAct8B,OAAMu8B,IAAUA,EAAMrrC,SAC1E,OAAOZ,KAAKipC,SAAS,IAIvB,MAAMiD,EAAgB1B,GAAeM,gBAAgBkB,GAErD,OAAIhsC,KAAKigB,UAAYisB,EAActrC,OAAeZ,KAAKipC,SAASuB,GAAen1B,KAAK62B,IAE7ElsC,KAAK4pC,iBAAiBY,GAAeuB,gBAAgBH,GAC1DvC,GAAsBA,GAC1B,CAEUK,oBACR,OAAO1pC,KAAKsqC,OAAOxpB,OAAOzL,KAAK,IACjC,CAEU4zB,SAAS3pC,GACjBU,KAAKge,MAAMhe,KAAKqf,WAChB/f,EAAM8M,MAAM,KAAK5K,SAAQif,GAAOzgB,KAAKsqC,OAAOhqB,YAAYG,GAAK,KAC7DzgB,KAAK+d,KAAK/d,KAAKqf,UACjB,CAEUuqB,iBAAiBE,EAAMT,sBAC/B,MAAM8C,EAAqB,IAAIC,OAAOtC,EAAKiB,GAAiBsB,mBAC1D,GAAO,GACTF,EAAmBvrB,UAAW,EAE9B5gB,KAAKsqC,OAAOtrB,QAAQrR,IAAIw+B,EAAoB,GAC5CnsC,KAAKsqC,OAAOjc,QACd,CAIUie,qBACRtsC,KAAKkf,OAAOnF,OAAO/Z,KAAKirC,eAAez2B,QAAQu2B,GAAiBsB,mBAClE,CAQUE,kBAAkBhrC,GAC1B,GAA2B,eAAvBA,EAAEsmB,OAAOqb,UAA4B,OACzC,IAAIhR,EAAgB6Y,GAAiB7Y,cACd,OAAnB3wB,EAAEsmB,OAAOvoB,QAAgB4yB,GAAiB,sBAC9ClyB,KAAKsqC,OAAOpY,cAAgBA,CAC9B,CAEItR,aAASqI,GACXjpB,KAAKsqC,OAAO7nB,gBAAgB,WAAYwG,EAC1C,CAGU0iB,QACR3rC,KAAK4gB,UAAW,EAChB5gB,KAAKsqC,OAAOpzB,QAAQ1V,SAAQif,GAAOA,EAAIN,UAAW,IAClDngB,KAAKsqC,OAAOtrB,QAAQjF,OAAO/Z,KAAKirC,eAAez2B,QAAQu2B,GAAiBsB,mBAC1E,CAEOn6B,kBACLsM,eAAeG,YAAY,cAAc2D,MAAK,IAAM5E,MAAM+S,YAC5D,EAnLc,GAAAxhB,GAAK,qBAEL,GAAAo9B,kBAAoB,eAEnB,GAAAna,cAAgB,sBAGL,IAAzB7mB,EAAK,CAAC5B,aAAc,M,6BAMY,IAAhC4B,EAAK,CAAC5B,aAAc,a,4BAET,IAAXqC,K,gCAGD,IADCwC,K,4BAYD,IADCA,K,4BASD,IADCA,K,oCAOD,IADCA,K,4BA2GD,IADC4N,GAAO,W,wCAWR,IADCA,GAAO,CAACrW,MAAO,mBAAoB1G,OAAQ,aAAamkC,GAAQr0B,S,kXCnK5D,MAAMu9B,WAAuBlD,GAmBpBgB,aACZ,MAAMA,EAAStlC,SAASK,cAAc,SAGtC,OAFAilC,EAAO7pC,KAAO,WACd6pC,EAAOxiC,KAAO9H,KAAKilC,MACZqF,CACT,CAIcU,aACZ,MAAMA,EAAShmC,SAASK,cAAc,SAGtC,OAFA2lC,EAAOT,UAAYvqC,KAAKilC,MACxB+F,EAAO/E,OAAOjmC,KAAKsqC,QACZU,CACT,CAIcyB,2BACZ,MAAMzE,EAAShjC,SAASK,cAAc,OAEtC,OADA2iC,EAAOvrB,UAAU9O,IAAI,wBACdq6B,CACT,CAEUpqB,oBACRF,MAAME,oBACN5d,KAAK0sC,aAAa1sC,KAAKgrC,OAAQhrC,KAAK2sC,WACtC,CAEAlD,QAAQlG,GACN,GAAkB,YAAdvjC,KAAKi9B,KAAoB,OAAOvf,MAAM+rB,QAAQlG,GAElD,MAAMN,EAAwB,CAC5B9jC,OAAQa,KAAKb,OACb+jC,UAAWljC,KAAKkjC,UAChBZ,SAAUtiC,KAAKupC,UACfnG,UAAWpjC,KAAKojC,UAAUlkC,KAAKc,KAAMA,KAAK0pC,sBAG5CnG,EAAMP,gBAAgBC,EACxB,CAGAG,UAAU9jC,EAAwBmsC,GAChC,IAAKA,EAAW,OAAOnsC,GAAS,KAEhC,MAAMosC,EAAalB,GAAezwB,OAAOywB,GAAep+B,MAAMq/B,GAAYzrC,KAAKV,OAG/E,OAFAA,GAASosC,EAAWzqC,KAAKjB,KAAKV,OAEvBkrC,GAAen1B,KAAKq2B,EAC7B,CAEA7B,WAAWtG,GACTvjC,KAAK4gB,UAAW,EAChB,MAAMgrB,EAAarI,EAAMn+B,aAAapF,KAAKb,OAAQa,KAAKkjC,WAExD,IAAK0I,EAAWhrC,OAEd,OADAZ,KAAK4gB,UAAW,EACT5gB,KAAK4pC,iBAAiBP,IAGjB,YAAdrpC,KAAKi9B,KAAqBj9B,KAAK4sC,cAAchB,GAAc5rC,KAAK6sC,aAAajB,EAC/E,CAGUgB,cAAchB,GACtB,OAAKpB,GAAeuB,gBAAgBH,GAI7B5rC,KAAKipC,SAAUjpC,KAAKV,OAASssC,EAAW,KAAO5rC,KAAKV,MAAS,KAAOssC,EAAW,IAH7E5rC,KAAK4pC,iBAAiBP,GAIjC,CAGUwD,aAAajB,GACrB,MAAMkB,EAAoBnkC,GACxB6hC,GAAex6B,SAASw6B,GAAep+B,MAAMzD,GAAM,CAAC3I,KAAKV,QAE3D,OAAIssC,EAAWl8B,MAAMo9B,GAA0B9sC,KAAKipC,SAASjpC,KAAKV,OAC7DssC,EAAWtjC,KAAKwkC,GAEd9sC,KAAK4pC,iBAAiBP,IAFkBrpC,KAAKipC,SAAS,KAG/D,CAEUS,oBACR,OAAI1pC,KAAKV,QACAU,KAAKsqC,OAAOyC,SAAU/sC,KAAKV,QAG7BU,KAAKsqC,OAAOyC,SAAU,EAC/B,CAEU9D,SAAS3pC,GACbU,KAAKV,MACPU,KAAKsqC,OAAOyC,QAAUztC,IAAUU,KAAKV,MAErCU,KAAKsqC,OAAOyC,QAAoB,OAAVztC,EAExBU,KAAKysC,qBAAqB1yB,QAC5B,CAEU6vB,iBAAiBE,EAAMT,sBAC/BrpC,KAAKsqC,OAAOyC,SAAU,EACtB/sC,KAAKysC,qBAAqBlC,UAAYT,EACtC9pC,KAAKimC,OAAOjmC,KAAKysC,qBACnB,CAEI7rB,aAASqI,GACXjpB,KAAKysC,qBAAqBhwB,UAAU0B,OAAO,WAAY8K,GACvDjpB,KAAKsqC,OAAO7nB,gBAAgB,WAAYwG,EAC1C,EAhIc,GAAAha,GAAK,mBAGO,IAAzB5D,EAAK,CAAC5B,aAAc,M,6BAKK,IAAzB4B,EAAK,CAAC5B,aAAc,M,6BAMY,IAAhC4B,EAAK,CAAC5B,aAAc,a,4BAIrB,IADC6E,K,4BAUD,IADCA,K,4BAUD,IADCA,K,qXCzCI,MAAM0+B,WAAyB1D,GAY1B1rB,oBACRF,MAAME,oBAEN5d,KAAKgrC,OAAO/E,OAAOjmC,KAAKsqC,QACxBtqC,KAAKimC,OAAOjmC,KAAKgrC,QACjBhrC,KAAKimC,OAAOjmC,KAAKitC,YACnB,CAEUpvB,uBACR7d,KAAK6sB,UAAY,GACjBnP,MAAMG,sBACR,CAIcysB,aACZ,MAAMA,EAAStlC,SAASK,cAAc,SAOtC,OANAilC,EAAO7pC,KAAO,QAEd6pC,EAAO13B,IAAM5S,KAAK4S,IAClB03B,EAAO53B,IAAM1S,KAAK0S,IAClB43B,EAAO4C,KAAOltC,KAAKktC,KAEZ5C,CACT,CAIcU,aACZ,MAAMA,EAAShmC,SAASK,cAAc,SAEtC,OADA2lC,EAAOne,UAAY,SAAS7sB,KAAKilC,eAC1B+F,CACT,CAIciC,kBACZ,MAAMA,EAAcjoC,SAASK,cAAc,OAE3C,OADA4nC,EAAYxwB,UAAU9O,IAAI,gBACnBs/B,CACT,CAIUE,oBACRntC,KAAKitC,YAAYnqB,YAAc,UAAU9iB,KAAKsqC,OAAOhrC,OACvD,CAEUoqC,oBACR,OAAO1pC,KAAKsqC,OAAOhrC,KACrB,CAEU2pC,SAAS3pC,GACjBU,KAAKsqC,OAAOhrC,MAAQA,GAASU,KAAK4S,IAClC5S,KAAKmtC,mBACP,CAEUvD,iBAAiBE,EAAMT,sBAC/BrpC,KAAKsqC,OAAOhrC,MAAQU,KAAK4S,IACzB5S,KAAKitC,YAAYnqB,YAAcgnB,CACjC,CAEIlpB,aAASqI,GACXjpB,KAAKitC,YAAYxwB,UAAU0B,OAAO,WAAY8K,GAC9CjpB,KAAKsqC,OAAO7nB,gBAAgB,WAAYwG,EAC1C,EA5Ec,GAAAha,GAAK,qBAGO,IAAzB5D,EAAK,CAAC5B,aAAc,M,6BAEM,IAA1B4B,EAAK,CAAC5B,aAAc,O,2BAEM,IAA1B4B,EAAK,CAAC5B,aAAc,O,2BAEM,IAA1B4B,EAAK,CAAC5B,aAAc,O,4BAiBrB,IADC6E,K,4BAcD,IADCA,K,4BASD,IADCA,K,iCASD,IADC4N,GAAO,U,uCCrDVsW,GAAU/B,WACVuL,GAASvL,WACT7E,GAAa6E,WACb4O,GAAW5O,WACX/J,GAAc+J,WACd8Q,GAAS9Q,WACT8Q,GAAShmB,OCNP+nB,GAAQ7S,WACRwT,GAAWxT,WCAX4V,GAAU5V,WACVkV,GAAWlV,WACX0T,GAAY1T,WACZ6X,GAAU7X,WCGH5sB,QAAQC,IAAI,CACnB0oC,GAAe9tB,WACf2rB,GAAe3rB,WACfqsB,GAAiBrsB,WACjBsuB,GAAiBtuB,aDNI4D,MAAK,IAAMknB,GAAY/Y,aCL5C+b,GAAe/b,WACf4Z,GAAe5Z,WACfsa,GAAiBta,WACjBuc,GAAiBvc,U","sources":["webpack:///webpack/runtime/load script","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/bind.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/events/target.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/utils.js","webpack:///../src/plugins/editor/ace/utils.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/amd define","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/ensure chunk","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/functions.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/types.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/path.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/format.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/bool-attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/environment/export-ns.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/events/misc.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/array.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/memoize.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/memoize.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/compare.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/traversing.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/rect.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/api.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/scroll/parent.js","webpack:///../node_modules/@exadel/esl/modules/esl-traversing-query/core/esl-traversing-query.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/visible.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/window.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/listener.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/descriptors.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/api.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/listen.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/class.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/keys.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/prop.js","webpack:///../node_modules/@exadel/esl/modules/esl-base-element/core/esl-base-element.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-wrapper.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/raf.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/decorate.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select-renderer.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/json-attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/uid.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/environment/device-detector.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/delayed-task.js","webpack:///../node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/copy.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/ready.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/ready.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/rtl.js","webpack:///../node_modules/@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-item.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-list.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select-dropdown.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/merge.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-dpr.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-breakpoint.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/env-shortcuts.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-const.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-base.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-condition.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-containers.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-query.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule-list.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image-iobserver.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/sanitize.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image-strategies.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image.js","webpack:///../node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-placeholder.js","webpack:///../node_modules/@exadel/esl/modules/esl-trigger/core/esl-trigger.js","webpack:///../node_modules/@exadel/esl/modules/esl-alert/core/esl-alert.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/fixes/ie-fixes.js","webpack:///../src/core/base/model.ts","webpack:///../node_modules/@exadel/esl/modules/esl-utils/abstract/observable.js","webpack:///../src/core/base/root.ts","webpack:///../src/core/base/plugin.ts","webpack:///../src/core/preview/preview.ts","webpack:///../src/plugins/header/snippets/snippets.ts","webpack:///../src/plugins/header/options/option/option.ts","webpack:///../src/plugins/header/options/options.ts","webpack:///../src/plugins/header/header.ts","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/promise.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/debounce.js","webpack:///../src/plugins/editor/editor.ts","webpack:///../src/utils/warning-msg.ts","webpack:///../src/plugins/settings/setting.ts","webpack:///../src/plugins/settings/settings.ts","webpack:///../src/settings/text-setting/text-setting.ts","webpack:///../src/utils/token-list-utils.ts","webpack:///../src/settings/select-setting/select-setting.ts","webpack:///../src/settings/bool-setting/bool-setting.ts","webpack:///../src/settings/slider-setting/slider-setting.ts","webpack:///./src/playground.ts","webpack:///../src/core/registration.ts","webpack:///../src/plugins/registration.ts","webpack:///../src/settings/registration.ts"],"sourcesContent":["var inProgress = {};\n// data-webpack is not used as build has no uniqueName\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { getPropertyDescriptor } from '../misc/object/utils';\n/** Decorator \"bind\" allows to bind prototype method context to class instance */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function bind(target, propertyKey, descriptor) {\n    // Validation check\n    if (!descriptor || (typeof descriptor.value !== 'function')) {\n        throw new TypeError('Only class methods can be decorated via @bind');\n    }\n    // Original function\n    const originalFn = descriptor.value;\n    return descriptor = {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: function getBound() {\n            const proto = Object.getPrototypeOf(this);\n            const desc = getPropertyDescriptor(proto, propertyKey);\n            const isProtoCall = !desc || desc.get !== getBound;\n            return isProtoCall ? originalFn : (this[propertyKey] = originalFn.bind(this));\n        },\n        set(value) {\n            Object.defineProperty(this, propertyKey, {\n                value,\n                writable: true,\n                configurable: true,\n                enumerable: descriptor.enumerable\n            });\n        }\n    };\n}\n","/**\n * Synthetic implementation of EventTarget\n * Replicates behavior of native event\n * Doesn't give explicit access to callback storage\n */\nexport class SyntheticEventTarget {\n    constructor() {\n        this._listeners = {};\n    }\n    hasEventListener(type = 'change', minCount = 0) {\n        var _a;\n        if (typeof type !== 'string')\n            return this.hasEventListener('change', type || 0);\n        return ((_a = this._listeners[type]) === null || _a === void 0 ? void 0 : _a.length) > minCount;\n    }\n    addEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.addEventListener('change', type);\n        validateEventListenerType(callback);\n        if (this._listeners[type] && this._listeners[type].includes(callback))\n            return;\n        if (this._listeners[type])\n            this._listeners[type].push(callback);\n        else\n            Object.assign(this._listeners, { [type]: [callback] });\n    }\n    removeEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.removeEventListener('change', type);\n        validateEventListenerType(callback);\n        if (!this._listeners[type])\n            return;\n        this._listeners[type] = this._listeners[type].filter((cb) => cb !== callback);\n    }\n    dispatchEvent(e) {\n        var _a;\n        const target = () => this; // use get due IE specific\n        Object.defineProperty(e, 'target', { get: target, enumerable: true });\n        Object.defineProperty(e, 'currentTarget', { get: target, enumerable: true });\n        Object.defineProperty(e, 'srcElement', { get: target, enumerable: true });\n        (_a = this._listeners[e.type]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => {\n            if (typeof listener === 'function')\n                listener.call(this, e);\n            else\n                listener.handleEvent.call(listener, e);\n        });\n        return e.defaultPrevented;\n    }\n    /** @deprecated alias for `addEventListener` */\n    addListener(cb) {\n        this.addEventListener(cb);\n    }\n    /** @deprecated alias for `removeEventListener` */\n    removeListener(cb) {\n        this.removeEventListener(cb);\n    }\n}\nfunction validateEventListenerType(callback) {\n    if (!callback || typeof callback !== 'function' && typeof callback.handleEvent !== 'function') {\n        throw Error('Callback should be a function or EventListenerObject');\n    }\n}\n","/** @returns first defined param */\nexport function defined(...params) {\n    for (const param of params) {\n        if (param !== undefined)\n            return param;\n    }\n}\n/** Finds the closest property descriptor */\nexport function getPropertyDescriptor(o, prop) {\n    let proto = o;\n    while (proto) {\n        const desc = Object.getOwnPropertyDescriptor(proto, prop);\n        if (desc)\n            return desc;\n        proto = Object.getPrototypeOf(proto);\n    }\n}\nexport function extractValues(obj, filter) {\n    if (!obj)\n        return [];\n    const desc = [];\n    for (const key in obj) {\n        if (filter(obj[key], key))\n            desc.push(obj[key]);\n    }\n    return desc;\n}\n","/** Config interface to define inner {@link https://ace.c9.io/ Ace} editor's settings */\nexport interface EditorConfig {\n  /** Editor's appearance theme */\n  theme: string;\n  /** Position of the vertical line for wrapping */\n  printMarginColumn: number;\n  /** Limit of characters before wrapping */\n  wrap?: number | boolean;\n  /** Editor's default amount of lines (height) */\n  minLines? : number;\n  /** Editor's max amount of lines (height) */\n  maxLines? : number;\n}\n\n/** Enum to match themes to {@link https://github.com/ajaxorg/ace/tree/master/src/theme Ace styles}. */\nexport enum AceTheme {\n  /** Light editor theme */\n  Light = 'ace/theme/chrome',\n  /** Dark editor theme */\n  Dark = 'ace/theme/tomorrow_night',\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + (chunkId === 956 ? \"ace-editor\" : chunkId) + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t271: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk\"] = self[\"webpackChunk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","/** Function that does nothing */\nexport const noop = () => undefined;\n/** Function that returns the first argument */\nexport const identity = (arg) => arg;\n/** Resolves {@link PropertyProvider} function to the value */\nexport const resolveProperty = (val, origin) => typeof val === 'function' ? val.call(origin, origin) : val;\n","/** Checks that passed value is object, but not a callable-object (function) */\nexport const isObject = (obj) => !!obj && typeof obj === 'object';\n/** Checks that passed value is an object or function */\nexport const isObjectLike = (obj) => isObject(obj) || typeof obj === 'function';\n/** Checks if the passed value is primitive */\nexport const isPrimitive = (obj) => obj === null ||\n    typeof obj === 'undefined' ||\n    typeof obj === 'string' ||\n    typeof obj === 'number' ||\n    typeof obj === 'boolean' ||\n    typeof obj === 'symbol';\n/** Checks that passed object is prototype of some class */\nexport const isPrototype = (obj) => Object.hasOwnProperty.call(obj, 'constructor');\n/** Checks that passed object is array-like */\nexport const isArrayLike = (value) => {\n    if (!value || typeof value !== 'object')\n        return false;\n    if (Array.isArray(value))\n        return true;\n    if (typeof value.length !== 'number' || value.length < 0)\n        return false;\n    return !value.length || Object.hasOwnProperty.call(value, value.length - 1);\n};\n","import { isObjectLike } from './types';\n/** @returns PathKeyDef from the PathDef */\nconst toKeyDef = (key) => typeof key === 'object' ? key : { key };\n/** Parses path to full {@link PathKeyDef} array */\nexport const parseKeys = (path) => {\n    if (Array.isArray(path))\n        return path.map(toKeyDef);\n    return parseKeysPath(path || '.');\n};\n/** Parses string path to full {@link PathKeyDef} array */\nconst parseKeysPath = (path) => {\n    let start = 0;\n    const parts = [];\n    while (start < path.length) {\n        let end = start = start + +(path[start] === '.'); // skip initial '.'\n        if (path[start] === '[') { // handle index syntax\n            end = ++start; // start bracket ignored\n            while (end < path.length && path[end] !== ']')\n                ++end;\n            const key = path.substring(start, end);\n            const isIndex = !key || Math.floor(+key) === +key;\n            parts.push({ key, isIndex });\n            start = ++end; // skip end bracket\n        }\n        else { // handle simple key\n            while (end < path.length && path[end] !== '[' && path[end] !== '.')\n                ++end;\n            const key = path.substring(start, end);\n            parts.push({ key });\n            start = end;\n        }\n    }\n    return parts;\n};\n/**\n * Gets object property using \"path\" key\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param data - object\n * @param path - key path. string or {@link PathKey} array\n * @param defaultValue - default\n * @returns specified object property\n */\nexport const getByPath = (data, path, defaultValue) => {\n    const keys = parseKeys(path);\n    const result = keys.reduce((curr, { key }) => {\n        if (isObjectLike(curr))\n            return curr[key];\n        return undefined;\n    }, data);\n    return typeof result === 'undefined' ? defaultValue : result;\n};\n/**\n * Gets object property using \"path\" with a keys separated by `.`\n * @see getByPath\n */\nexport const get = (data, path, defaultValue) => getByPath(data, (path || '').split('.'), defaultValue);\n/**\n * Sets object property using \"path\" key\n * Creates empty object if sub-key value is not presented.\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax and collection creation):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param target - object\n * @param path - key path. string or {@link PathKey} array\n * @param value - value of property\n * @returns original object\n */\nexport const setByPath = (target, path, value) => {\n    const keys = parseKeys(path);\n    const depth = keys.length - 1;\n    keys.reduce((cur, { key, isIndex, isIndexed }, pos) => {\n        if (isIndex && !key)\n            key = cur.length || 0; // a[] only\n        if (pos !== depth && isObjectLike(cur[key]))\n            return cur[key]; // key already presented\n        if (isIndexed === undefined && pos !== depth)\n            isIndexed = keys[pos + 1].isIndex;\n        return cur[key] = (pos === depth) ? value : (isIndexed ? [] : {});\n    }, target);\n    return target;\n};\n/**\n * Sets object property using \"path\" with a keys separated by `.`\n * @see setByPath\n */\nexport const set = (target, path, value) => setByPath(target, (path || '').split('.'), value);\n","import { get } from './object';\n/** Converts string to kebab-case notation */\nexport const toKebabCase = (str) => {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\\s_]+/g, '-').toLowerCase();\n};\n/** Converts string to camelCase notation */\nexport const toCamelCase = (str) => {\n    return str.trim().replace(/[\\s-,_]+([a-zA-Z0-9]?)/g, (match, word) => word.toUpperCase());\n};\n/** Makes the first non-indent (space, tab, newline) letter in the string capitalized */\nexport const capitalize = (str) => {\n    let i = 0;\n    while (i < str.length && (str[i] === ' ' || str[i] === '\\t' || str[i] === '\\n'))\n        i++;\n    return str.slice(0, i) + str.charAt(i).toUpperCase() + str.slice(i + 1);\n};\n/** Unwraps string from parenthesis */\nexport const unwrapParenthesis = (str) => {\n    return str.trim().replace(/^\\((.*)\\)$/, '$1').trim();\n};\n/** Parses `null` and `undefined` as an empty string */\nexport const parseString = (val) => String(val !== null && val !== void 0 ? val : '');\n/** Parses string representation of the boolean value */\nexport const parseBoolean = (val) => val !== null && val !== 'false';\n/**\n * Parses number with the ability to pass an alternative fallback for NaN.\n * Note: falsy values except 0 are treated as NaN\n */\nexport const parseNumber = (str, nanValue) => {\n    if (str === 0)\n        return 0;\n    const value = +(str || NaN);\n    return isNaN(value) ? nanValue : value;\n};\n/**\n * Common function that returns coefficient aspect ratio\n * Supported formats: w:h, w/h, coefficient\n * @example\n * `16:9`, `16/9`, `1.77`\n * @param str - string to parse\n * @returns aspect ratio coefficient\n */\nexport function parseAspectRatio(str) {\n    const [w, h] = str.split(/[:/]/);\n    if (typeof h !== 'undefined')\n        return +w / +h;\n    return +w || 0;\n}\n/** Evaluates passed string or returns `defaultValue` */\nexport function evaluate(str, defaultValue) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-implied-eval\n        return str ? (new Function(`return ${str}`))() : defaultValue;\n    }\n    catch (e) {\n        console.warn('Cannot parse value ', str, e);\n        return defaultValue;\n    }\n}\n/** Default RegExp to match replacements in the string for the {@link format} function */\nexport const DEF_FORMAT_MATCHER = /{[{%]?([\\w.]+)[%}]?}/g;\n/** Replaces `{key}` patterns in the string from the source object */\nexport function format(str, source, matcher = DEF_FORMAT_MATCHER) {\n    return str.replace(matcher, (match, key) => {\n        const val = get(source, key);\n        return val === undefined ? match : val;\n    });\n}\n","/** @returns if attribute presented */\nexport function hasAttr($el, name) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    return $el.hasAttribute(name);\n}\nexport function getAttr($el, name, fallback = null) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    const value = $el.getAttribute(name);\n    return value === null ? fallback : value;\n}\n/** Set attribute */\nexport function setAttr($el, name, value) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    if (value === undefined || value === null || value === false) {\n        $el.removeAttribute(name);\n    }\n    else {\n        $el.setAttribute(name, value === true ? '' : value);\n    }\n}\n","import { identity } from '../misc/functions';\nimport { parseString, toKebabCase } from '../misc/format';\nimport { getAttr, setAttr } from '../dom/attr';\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value.\n * Maps string type property.\n * @param config - mapping configuration. See {@link AttrDescriptor}\n */\nexport const attr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        function get() {\n            const val = getAttr(this, attrName);\n            if (val === null && 'defaultValue' in config)\n                return config.defaultValue;\n            return (config.parser || parseString)(val);\n        }\n        function set(value) {\n            setAttr(this, attrName, (config.serializer || identity)(value));\n        }\n        Object.defineProperty(target, propName, config.readonly ? { get } : { get, set });\n    };\n};\n","import { hasAttr, setAttr } from '../dom/attr';\nimport { toKebabCase } from '../misc/format';\nfunction buildConditionalDescriptor(attrName, readOnly) {\n    function get() {\n        return hasAttr(this, attrName);\n    }\n    function set(value) {\n        setAttr(this, attrName, !!value);\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element boolean (marker) attribute state.\n * Maps boolean type property.\n * @param config - mapping configuration. See {@link BoolAttrDescriptor}\n */\nexport const boolAttr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildConditionalDescriptor(attrName, !!config.readonly));\n    };\n};\n","const NS_NAME = 'ESL';\n/**\n * Nested declaration helper\n */\nfunction define(root, name, value) {\n    name.split('.').reduce((obj, key, index, parts) => {\n        if (parts.length === index + 1) {\n            return (obj[key] = obj[key] || value);\n        }\n        const type = typeof obj[key];\n        if (type !== 'undefined' && type !== 'object' && type !== 'function') {\n            throw new Error(`Can not define ${value} on ${name}`);\n        }\n        return (obj[key] = obj[key] || {});\n    }, root);\n}\n/**\n * Method to manually declare key in library namespace\n * See {@link ExportNs} decorator for details\n */\nexport const exportNs = (name, module) => {\n    if (!(NS_NAME in window))\n        return;\n    define(window[NS_NAME], name, module);\n};\n/**\n * Decorator to declare function or class in a global ns\n * @param name - key path to declare in ESL global ns\n * NOTE: path parts should be separated by dots\n * @example\n * ```ts\n * @Export('Package.Component')\n * ```\n * NOTE: in case declaration contains components-packages, their origins will be mixed with declaration in a Runtime\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function ExportNs(name) {\n    return (module) => exportNs(name || module.name, module);\n}\n/** Declare ESL global */\nExportNs.declare = () => {\n    if ('ESL' in window)\n        return;\n    Object.defineProperty(window, 'ESL', { value: {} });\n};\n","/** Checks if the passed event is {@link MouseEvent} */\nexport const isMouseEvent = (event) => window.MouseEvent && event instanceof MouseEvent;\n/** Checks if the passed event is {@link TouchEvent} */\nexport const isTouchEvent = (event) => window.TouchEvent && event instanceof TouchEvent;\n/** Checks if the passed event is {@link PointerEvent} */\nexport const isPointerEvent = (event) => window.PointerEvent && event instanceof PointerEvent;\nconst PASSIVE_EVENTS = ['wheel', 'mousewheel', 'touchstart', 'touchmove'];\n/**\n * @returns true if the passed event should be passive by default\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n */\nexport const isPassiveByDefault = (event) => PASSIVE_EVENTS.includes(event);\n/** Gets the original CustomEvent source in case event bubbles from Shadow DOM */\nexport const getCompositeTarget = (e) => {\n    const targets = (e.composedPath && e.composedPath());\n    return targets ? targets[0] : e.target;\n};\n/** @returns touch point coordinates of {@link TouchEvent} or {@link PointerEvent} */\nexport const getTouchPoint = (event) => {\n    const source = isTouchEvent(event) ? event.changedTouches[0] : event;\n    return {\n        x: source.pageX,\n        y: source.pageY\n    };\n};\n/** @returns element offset point coordinates */\nexport const getOffsetPoint = (el) => {\n    const props = el.getBoundingClientRect();\n    const y = props.top + window.scrollY;\n    const x = props.left + window.scrollX;\n    return { x, y };\n};\n/**\n * Dispatches custom event.\n * Event bubbles and is cancelable by default, use `eventInit` to override that.\n * @param el - EventTarget to dispatch event\n * @param eventName - name of the event to dispatch\n * @param eventInit - object that specifies characteristics of the event. See {@link CustomEventInit}\n */\nexport const dispatchCustomEvent = (el, eventName, eventInit) => {\n    const init = Object.assign({\n        bubbles: true,\n        composed: true,\n        cancelable: true\n    }, eventInit || {});\n    return el.dispatchEvent(new CustomEvent(eventName, init));\n};\n","import { identity } from './functions';\nimport { isArrayLike } from './object';\n/** Split array into tuples */\nexport const tuple = (arr) => arr.reduce((acc, el) => {\n    if (acc.length === 0 || acc[acc.length - 1].length >= 2)\n        acc.push([]);\n    acc[acc.length - 1].push(el);\n    return acc;\n}, []);\n/** Flat array - unwraps one level of nested arrays */\nexport const flat = (arr) => arr.reduce((acc, el) => el ? acc.concat(el) : acc, []);\n/** Wraps passed object or primitive to array */\nexport const wrap = (arr) => {\n    if (arr === undefined || arr === null)\n        return [];\n    if (Array.isArray(arr))\n        return arr;\n    return [arr];\n};\nexport function unwrap(value) {\n    return isArrayLike(value) ? value[0] : value;\n}\n/** Makes array values unique */\nexport const uniq = (arr) => {\n    if (arr.length < 2)\n        return arr.slice(0);\n    const result = [];\n    const set = new Set();\n    arr.forEach((item) => set.add(item));\n    set.forEach((item) => result.push(item));\n    return result;\n};\nexport function range(n, filler = identity) {\n    const arr = Array(n);\n    let i = 0;\n    while (i < n)\n        arr[i] = filler(i++);\n    return arr;\n}\n/**\n * @returns object with a criteria value as a key and an array of original items that belongs to the current criteria value\n */\nexport const groupBy = (array, group) => {\n    return array.reduce((obj, el) => {\n        const key = group(el);\n        obj[key] ? obj[key].push(el) : obj[key] = [el];\n        return obj;\n    }, {});\n};\n","/**\n * Memoization decorator function. Caches the original function result according to hash generated from arguments.\n * In case the hash function returns `undefined` value will not be memoized.\n * @see MemoHashFn Hash function signature.\n */\nexport function memoizeFn(fn, hashFn = defaultArgsHashFn) {\n    function memo(...args) {\n        const key = hashFn(...args);\n        if (key !== null && typeof key !== 'string') {\n            console.warn(`Can't cache value for ${fn.name} call.`);\n            return fn.apply(this, args);\n        }\n        if (!memo.cache.has(key)) {\n            memo.cache.set(key, fn.apply(this, args));\n        }\n        return memo.cache.get(key);\n    }\n    memo.cache = new Map();\n    memo.clear = () => memo.cache.clear();\n    memo.has = (...args) => {\n        const key = hashFn(...args);\n        return key === undefined ? false : memo.cache.has(key);\n    };\n    return memo;\n}\n/**\n * Default arguments hash function.\n * Supports only 0-1 arguments with a primitive type.\n */\nexport function defaultArgsHashFn(...args) {\n    if (args.length === 0)\n        return null;\n    if (args.length > 1)\n        return;\n    if (typeof args[0] !== 'string' && typeof args[0] !== 'number' && typeof args[0] !== 'boolean')\n        return;\n    return String(args[0]);\n}\n","import { defaultArgsHashFn, memoizeFn } from '../misc/memoize';\nimport { isPrototype, getPropertyDescriptor } from '../misc/object';\n/**\n * Memoization decorator helper.\n * @see memoizeFn Original memoizeFn function decorator.\n */\nexport function memoize(hashFn = defaultArgsHashFn) {\n    return function (target, prop, descriptor) {\n        if (!descriptor || typeof (descriptor.value || descriptor.get) !== 'function') {\n            throw new TypeError('Only get accessors or class methods can be decorated via @memoize');\n        }\n        if (isPrototype(target)) {\n            // Object members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeGetter(descriptor.get, prop));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeMethod(descriptor.value, prop, hashFn));\n        }\n        else {\n            // Static members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeFn(descriptor.get));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeFn(descriptor.value, hashFn));\n        }\n    };\n}\n// Lock storage to prevent cache logic for some key\nconst locks = new WeakMap();\nconst defineOwnKeySafe = (obj, prop, value) => {\n    locks.set(obj, prop); // IE try to get key with the prototype instance call, so we lock it\n    Object.defineProperty(obj, prop, { value, writable: true, configurable: true });\n    locks.delete(obj); // Free property key\n};\n/** Cache getter result as an object own property */\nfunction memoizeGetter(originalMethod, prop) {\n    return function () {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const value = originalMethod.call(this);\n        defineOwnKeySafe(this, prop, value);\n        return value;\n    };\n}\n/** Cache method memo function in the current context on call */\nfunction memoizeMethod(originalMethod, prop, hashFn) {\n    return function (...args) {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const memo = memoizeFn(originalMethod, hashFn);\n        defineOwnKeySafe(this, prop, memo);\n        return memo.apply(this, args);\n    };\n}\n/**\n * Clear memoization cache for passed target and property.\n * Accepts not own properties.\n * Note: be sure that you targeting memoized property or function.\n * Clear utility has no 100% check to prevent modifying incorrect (not memoized) property keys\n */\nmemoize.clear = function (target, property) {\n    if (Array.isArray(property))\n        return property.forEach((prop) => memoize.clear(target, prop));\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return;\n    if (typeof desc.get === 'function' && typeof desc.get.clear === 'function')\n        return desc.get.clear();\n    if (typeof desc.value === 'function' && typeof desc.value.clear === 'function')\n        return desc.value.clear();\n    if (Object.hasOwnProperty.call(target, property))\n        delete target[property];\n};\n/** Check if property has cache for the passed params */\nmemoize.has = function (target, property, ...params) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return false;\n    if (typeof desc.get === 'function' && typeof desc.get.has === 'function')\n        return desc.get.has(...params);\n    if (typeof desc.value === 'function' && typeof desc.value.has === 'function')\n        return desc.value.has(...params);\n    return Object.hasOwnProperty.call(target, property);\n};\n","import { isObject } from './types';\n/** Deeply compares passed objects */\nexport function isEqual(obj1, obj2) {\n    if (Object.is(obj1, obj2))\n        return true;\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (isObject(obj1) && isObject(obj2)) {\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n        if (keys1.length !== keys2.length)\n            return false;\n        return !keys1.some((key) => !isEqual(obj1[key], obj2[key]));\n    }\n    return false;\n}\n/** @deprecated alias for `isEqual` method */\nexport const deepCompare = isEqual;\n/** Check if arr and arr mask has intersection */\nfunction isIntersect(arrObj, arrMask, comparer) {\n    return arrMask.every((key) => arrObj.some((itm) => comparer(itm, key)));\n}\n/**\n * Checks if all keys presented in the `mask` are equal to the `obj` keys\n * Note: array order is not taken into account and uses intersection strategy\n */\nexport function isSimilar(obj, mask, deep = true) {\n    if (Array.isArray(obj) && Array.isArray(mask))\n        return isIntersect(obj, mask, deep ? isSimilar : Object.is);\n    if (!isObject(obj) || !isObject(mask))\n        return Object.is(obj, mask);\n    return Object.keys(mask).every((key) => (deep ? isSimilar : Object.is)(obj[key], mask[key]));\n}\n","/** Check that `nodeA` and `nodeB` are from the same tree path */\nexport const isRelativeNode = (nodeA, nodeB) => {\n    return !!(nodeA && nodeB) && (nodeA.contains(nodeB) || nodeB.contains(nodeA));\n};\n/** Create function that finds next dom element, that matches selector, in the sequence declared by `next` function */\nexport const createSequenceFinder = (next, includeSelf = false) => {\n    return function (base, predicate) {\n        if (!predicate)\n            return includeSelf ? base : next(base);\n        for (let target = includeSelf ? base : next(base); target; target = next(target)) {\n            if (typeof predicate === 'string' && target.matches(predicate))\n                return target;\n            if (typeof predicate === 'function' && predicate.call(target, target))\n                return target;\n        }\n        return null;\n    };\n};\n/** Checks if element matches passed selector or exact predicate function */\nexport const isMatches = (el, matcher) => {\n    if (typeof matcher === 'string')\n        return el.matches(matcher);\n    if (typeof matcher === 'function')\n        return matcher(el);\n    return typeof matcher === 'undefined';\n};\n/** @returns first matching next sibling or null*/\nexport const findNext = createSequenceFinder((el) => el.nextElementSibling);\n/** @returns first matching previous sibling or null*/\nexport const findPrev = createSequenceFinder((el) => el.previousElementSibling);\n/** @returns first matching parent or null*/\nexport const findParent = createSequenceFinder((el) => el.parentElement);\n/** @returns first matching ancestor starting from passed element or null*/\nexport const findClosest = createSequenceFinder((el) => el.parentElement, true);\n/** @returns first matching host element starting from passed element*/\nexport const findHost = createSequenceFinder((el) => {\n    const root = el.getRootNode();\n    return (root instanceof ShadowRoot) ? root.host : null;\n}, true);\n/** @returns Array of all matching elements in subtree or empty array */\nexport const findAll = (base, sel) => {\n    return sel ? Array.from(base.querySelectorAll(sel)) : [base];\n};\n/** @returns Array of all matching children or empty array */\nexport const findChildren = (base, sel) => {\n    return Array.from(base.children).filter((el) => !sel || el.matches(sel));\n};\n/**\n * Find closest parent node of `node` by `predicate`.\n * Optional `skipSelf` to skip initial node\n */\nexport const findClosestBy = (node, predicate, skipSelf = false) => {\n    let current = skipSelf && node ? node.parentNode : node;\n    while (current) {\n        if (predicate(current))\n            return current;\n        current = current.parentNode;\n    }\n    return null;\n};\n/** @deprecated Cumulative traversing utility set */\nexport class TraversingUtils {\n}\nTraversingUtils.isRelative = isRelativeNode;\nTraversingUtils.closestBy = findClosestBy;\nTraversingUtils.createSequenceFinder = createSequenceFinder;\nTraversingUtils.findNext = findNext;\nTraversingUtils.findPrev = findPrev;\nTraversingUtils.findParent = findParent;\nTraversingUtils.findClosest = findClosest;\nTraversingUtils.findAll = findAll;\nTraversingUtils.findChildren = findChildren;\n","/**\n * A Rect describes the size and position of a rectangle.\n */\nexport class Rect {\n    /**\n     * The static method creates a new Rect instance from a rect-like object.\n     * @param rect - rect-like object\n     */\n    static from(rect = {}) {\n        return new this(rect.x || rect.left, rect.y || rect.top, rect.width, rect.height);\n    }\n    /**\n     * The static method checks the equality of the two Rect instances.\n     * @param rect1 - first instance of Rect\n     * @param rect2 - second instance of Rect\n     */\n    static isEqual(rect1, rect2) {\n        return rect1.x === rect2.x && rect1.y === rect2.y && rect1.width === rect2.width && rect1.height === rect2.height;\n    }\n    /**\n     * The static method returns intersection Rect of two Rect instances\n     * @param rect1 - first instance of Rect\n     * @param rect2 - second instance of Rect\n     */\n    static intersect(rect1, rect2) {\n        const top = Math.max(rect1.top, rect2.top);\n        const left = Math.max(rect1.left, rect2.left);\n        const bottom = Math.min(rect1.bottom, rect2.bottom);\n        const right = Math.min(rect1.right, rect2.right);\n        const width = Math.max(right - left, 0);\n        const height = Math.max(bottom - top, 0);\n        return Rect.from({ top, left, width, height });\n    }\n    constructor(x, y, width, height) {\n        /** The X coordinate of the Rect's origin (top-left corner of the rectangle). */\n        this.x = 0;\n        /** The Y coordinate of the Rect's origin (top-left corner of the rectangle). */\n        this.y = 0;\n        /** The width of the Rect. */\n        this.width = 0;\n        /** The height of the Rect. */\n        this.height = 0;\n        this.x = x || 0;\n        this.y = y || 0;\n        this.width = width || 0;\n        this.height = height || 0;\n    }\n    /**\n     * Get the top coordinate value of the Rect (has the same value as y).\n     */\n    get top() {\n        return this.y;\n    }\n    /**\n     * Get the left coordinate value of the Rect (has the same value as x).\n     */\n    get left() {\n        return this.x;\n    }\n    /**\n     * Get the right coordinate value of the DOMRect.\n     */\n    get right() {\n        return this.x + this.width;\n    }\n    /**\n     * Get the bottom coordinate value of the Rect.\n     */\n    get bottom() {\n        return this.y + this.height;\n    }\n    /**\n     * Get the center X coordinate value of the Rect.\n     */\n    get cx() {\n        return this.x + this.width / 2;\n    }\n    /**\n     * Get the center Y coordinate value of the Rect.\n     */\n    get cy() {\n        return this.y + this.height / 2;\n    }\n    grow(incrementX, incrementY = incrementX) {\n        this.y -= incrementY;\n        this.x -= incrementX;\n        this.height += 2 * incrementY;\n        this.width += 2 * incrementX;\n        return this;\n    }\n    shrink(decrementX, decrementY = decrementX) {\n        return this.grow(-decrementX, -decrementY);\n    }\n    /** @returns the numeric value of rectangle area */\n    get area() {\n        return this.height * this.width;\n    }\n}\n","/**\n * Get the Element that is the root element of the document.\n * @param element - element for which to get the document element\n * */\nexport const getDocument = (element = window) => {\n    return (element instanceof Window ? element.document : element.ownerDocument).documentElement;\n};\n/**\n * Get the name of node.\n * @param element - element for which to get the name\n */\nexport const getNodeName = (element) => {\n    return element && !(element instanceof Window) ? (element.nodeName).toLowerCase() : '';\n};\n/**\n * Get the parent of the specified element in the DOM tree.\n * @param element - element for which to get the parent\n */\nexport const getParentNode = (element) => {\n    if (getNodeName(element) === 'html')\n        return element;\n    return (window.ShadowRoot\n        ? element instanceof ShadowRoot\n            ? element.host\n            : element.assignedSlot || element.parentNode\n        : element.parentNode) || getDocument(element);\n};\n","import { getNodeName, getParentNode } from '../api';\n/**\n * Get the list of all scroll parents, up the list of ancestors until we get to the top window object.\n * @param element - element for which you want to get the list of all scroll parents\n * @param list - array of elements to concatenate with the list of all scroll parents of element (optional)\n */\nexport function getListScrollParents(element, list = []) {\n    var _a;\n    const scrollParent = getScrollParent(element);\n    const isBody = scrollParent === ((_a = element.ownerDocument) === null || _a === void 0 ? void 0 : _a.body);\n    const target = isBody\n        ? isScrollable(scrollParent) ? scrollParent : []\n        : scrollParent;\n    const updatedList = list.concat(target);\n    return isBody\n        ? updatedList\n        : updatedList.concat(getListScrollParents(getParentNode(scrollParent)));\n}\n/**\n * Get the scroll parent of the specified element in the DOM tree.\n * @param node - element for which to get the scroll parent\n */\nexport function getScrollParent(node) {\n    var _a;\n    if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n        return (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.body;\n    }\n    if (node instanceof HTMLElement && isScrollable(node)) {\n        return node;\n    }\n    return getScrollParent(getParentNode(node));\n}\n/**\n * Check that element is scroll parent.\n * @param element - element for checking\n * */\nexport function isScrollable(element) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    const { overflow, overflowX, overflowY } = getComputedStyle(element);\n    return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLTraversingQuery_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { tuple, wrap, uniq } from '../../esl-utils/misc/array';\nimport { unwrapParenthesis } from '../../esl-utils/misc/format';\nimport { findAll, findChildren, findNext, findParent, findClosest, findPrev } from '../../esl-utils/dom/traversing';\nimport { isVisible } from '../../esl-utils/dom/visible';\n/**\n * Traversing Query utility to find element via extended selector query\n * Extended query supports\n * - plain CSS selectors\n * - relative selectors (selectors that don't start from a plain selector will use passed base Element as a root)\n * - ::next and ::prev sibling pseudo-selectors\n * - ::parent, ::closest and ::child pseudo-selectors\n * - ::find pseudo-selector\n * - ::first, ::last and :nth(#) limitation pseudo-selectors\n * - ::filter, ::not filtration pseudo-selectors\n *\n * @example\n * - `#id .class [attr]` - find by CSS selector in a current document\n * - ` ` - get current base element\n * - `::next` - get next sibling element\n * - `::prev` - get previous sibling element\n * - `::parent` - get base element parent\n * - `::parent(#id .class [attr])` - find the closest parent matching passed selector\n * - `::closest(#id .class [attr])` - find the closest ancestor including base element that matches passed selector\n * - `::child(#id .class [attr])` - find direct child element(s) that match passed selector\n * - `::find(#id .class [attr])` - find child element(s) that match passed selector\n * - `::find(buttons, a)::not([hidden])` - find all buttons and anchors that are not have hidden attribute\n * - `::find(buttons, a)::filter(:first-child)` - find all buttons and anchors that are first child in container\n * - `::parent::child(some-tag)` - find direct child element(s) that match tag 'some-tag' in the parent\n * - `#id .class [attr]::parent` - find parent of element matching selector '#id .class [attr]' in document\n * - `::find(.row)::last::parent` - find parent of the last element matching selector '.row' from the base element subtree\n */\nlet ESLTraversingQuery = ESLTraversingQuery_1 = class ESLTraversingQuery {\n    /**\n     * @returns RegExp that selects all known processors in query string\n     * e.g. /(::parent|::closest|::child|::next|::prev)/\n     */\n    static get PROCESSORS_REGEX() {\n        const keys = Object.keys(this.ELEMENT_PROCESSORS).concat(Object.keys(this.COLLECTION_PROCESSORS));\n        return new RegExp(`(${keys.join('|')})`, 'g');\n    }\n    static isCollectionProcessor([name]) {\n        return !!name && (name in this.COLLECTION_PROCESSORS);\n    }\n    static processElement(el, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.ELEMENT_PROCESSORS))\n            return [];\n        return wrap(this.ELEMENT_PROCESSORS[name](el, sel));\n    }\n    static processCollection(els, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.COLLECTION_PROCESSORS))\n            return [];\n        return wrap(this.COLLECTION_PROCESSORS[name](els, sel));\n    }\n    static traverseChain(collection, processors, findFirst) {\n        if (!processors.length || !collection.length)\n            return collection;\n        const [processor, ...rest] = processors;\n        if (this.isCollectionProcessor(processor)) {\n            const processedItem = this.processCollection(collection, processor);\n            return this.traverseChain(processedItem, rest, findFirst);\n        }\n        const result = [];\n        for (const target of collection) {\n            const processedItem = this.processElement(target, processor);\n            const resultCollection = this.traverseChain(processedItem, rest, findFirst);\n            if (!resultCollection.length)\n                continue;\n            if (findFirst)\n                return resultCollection.slice(0, 1);\n            result.push(...resultCollection);\n        }\n        return uniq(result);\n    }\n    /** Split multiple queries separated by comma (respects query brackets) */\n    // This can be solved by RegEx /(?<!\\([^\\)]*),(?![^\\(]*\\))/g)/, when the WebKit browser implements this feature\n    static splitQueries(str) {\n        let last = 0;\n        let stack = 0;\n        const result = [];\n        for (let i = 0; i < str.length; i++) {\n            if (str[i] === '(')\n                stack++;\n            if (str[i] === ')')\n                stack = Math.max(0, stack - 1);\n            if (str[i] === ',' && !stack) {\n                result.push(str.substring(last, i).trim());\n                last = i + 1;\n            }\n        }\n        result.push(str.substring(last).trim());\n        return result;\n    }\n    static traverse(query, findFirst, base, scope = document) {\n        const found = [];\n        for (const part of ESLTraversingQuery_1.splitQueries(query)) {\n            const els = this.traverseQuery(part, findFirst, base, scope);\n            if (findFirst && els.length)\n                return [els[0]];\n            found.push(...els);\n        }\n        return uniq(found);\n    }\n    static traverseQuery(query, findFirst, base, scope = document) {\n        const parts = query.split(this.PROCESSORS_REGEX).map((term) => term.trim());\n        const rootSel = parts.shift();\n        const baseCollection = base ? [base] : [];\n        const initial = rootSel ? Array.from(scope.querySelectorAll(rootSel)) : baseCollection;\n        return this.traverseChain(initial, tuple(parts), findFirst);\n    }\n    /** @returns first matching element reached via {@link ESLTraversingQuery} rules */\n    static first(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, true, base, scope)[0] || null;\n    }\n    /** @returns Array of all matching elements reached via {@link ESLTraversingQuery} rules */\n    static all(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, false, base, scope);\n    }\n};\nESLTraversingQuery.ELEMENT_PROCESSORS = {\n    '::find': findAll,\n    '::next': findNext,\n    '::prev': findPrev,\n    '::child': findChildren,\n    '::parent': findParent,\n    '::closest': findClosest\n};\nESLTraversingQuery.COLLECTION_PROCESSORS = {\n    '::first': (list) => list.slice(0, 1),\n    '::last': (list) => list.slice(-1),\n    '::nth': (list, sel) => {\n        const index = sel ? +sel : NaN;\n        return wrap(list[index - 1]);\n    },\n    '::not': (list, sel) => list.filter((el) => !el.matches(sel || '')),\n    '::visible': (list) => list.filter((el) => (el instanceof HTMLElement) && isVisible(el)),\n    '::filter': (list, sel) => list.filter((el) => el.matches(sel || ''))\n};\nESLTraversingQuery = ESLTraversingQuery_1 = __decorate([\n    ExportNs('TraversingQuery')\n], ESLTraversingQuery);\nexport { ESLTraversingQuery };\n/** @deprecated alias for {@link ESLTraversingQuery} */\nexport const TraversingQuery = ESLTraversingQuery;\n","import { Rect } from './rect';\nimport { getListScrollParents } from './scroll';\nimport { findClosestBy, findHost } from './traversing';\nimport { getWindowRect } from './window';\n/**\n * Checks if the specified element is visible\n * @param el - element to be checked\n * @param options - object of additional visibility options to include\n */\nexport function isVisible(el, options = { visibility: true }) {\n    if (!el.getClientRects().length)\n        return false;\n    if (options.visibility && findHost(el, (host) => getComputedStyle(host).visibility === 'hidden'))\n        return false;\n    if (options.opacity &&\n        findClosestBy(el, (parent) => parent instanceof Element && getComputedStyle(parent).opacity === '0'))\n        return false;\n    return !(options.viewport && !isInViewport(el));\n}\n/**\n * Checks if the specified element is inside the viewport\n * @param el - element to be checked\n */\nexport function isInViewport(el) {\n    const wndIntersection = Rect.intersect(getWindowRect(), Rect.from(el.getBoundingClientRect()));\n    if (wndIntersection.area === 0)\n        return false;\n    return !getListScrollParents(el).some((parent) => Rect.intersect(wndIntersection, Rect.from(parent.getBoundingClientRect())).area === 0);\n}\n","import { Rect } from './rect';\n/**\n * Get the window object associated with a document of the specified element.\n * @param node - element for which to get window\n * */\nexport function getWindow(node) {\n    if (node === null)\n        return window;\n    if (node instanceof Window)\n        return node;\n    const ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n}\n/**\n * Get the size and position of the window.\n * @returns\n */\nexport function getWindowRect(wnd = window) {\n    return Rect.from({\n        x: wnd.scrollX || wnd.pageXOffset,\n        y: wnd.scrollY || wnd.pageYOffset,\n        width: wnd.innerWidth || wnd.document.documentElement.clientWidth,\n        height: wnd.innerHeight || wnd.document.documentElement.clientHeight\n    });\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { wrap } from '../../esl-utils/misc/array';\nimport { resolveProperty } from '../../esl-utils/misc/functions';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { isObject } from '../../esl-utils/misc/object/types';\nimport { isSimilar } from '../../esl-utils/misc/object/compare';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { isPassiveByDefault } from '../../esl-utils/dom/events/misc';\n/** Key to store listeners on the host */\nconst LISTENERS = (window.Symbol || String)('__esl_listeners');\n/**\n * Splits and deduplicates event string\n * @returns array of unique events presented in events string\n */\nexport const splitEvents = (events) => {\n    const terms = (events || '').split(' ').map((term) => term.trim());\n    const deduplicate = new Set();\n    return terms.filter((term) => {\n        if (!term || deduplicate.has(term))\n            return false;\n        deduplicate.add(term);\n        return true;\n    });\n};\n/**\n * `EventListener` instance, used as an 'inner' record to process subscriptions made by `ESLEventUtils`\n * Uses `EventListenerObject` interface to subscribe on event.\n *\n * Use Chrome console `getEventListeners` method to check subscribers details when debugging ESLEventListener subscriptions.\n * */\nexport class ESLEventListener {\n    constructor(host, event, handler, desc) {\n        this.host = host;\n        this.event = event;\n        this.handler = handler;\n        const defaults = {\n            capture: false,\n            passive: isPassiveByDefault(event)\n        };\n        Object.assign(this, defaults, desc, { event });\n    }\n    /** @returns target element to listen */\n    get $targets() {\n        if (!isObject(this.host))\n            return [];\n        const target = resolveProperty(this.target, this.host);\n        if (isObject(target))\n            return wrap(target);\n        const $host = '$host' in this.host ? this.host.$host : this.host;\n        if (typeof target === 'string')\n            return ESLTraversingQuery.all(target, $host);\n        if (typeof target === 'undefined' && $host instanceof HTMLElement)\n            return [$host];\n        return [];\n    }\n    /** @returns resolved selector to check event target */\n    get delegate() {\n        return resolveProperty(this.selector, this.host);\n    }\n    /**\n     * Checks if the passed criteria matches current event listener\n     * - `string` type criteria checked by the `event` name\n     * - `function` type criteria checked by the `handler` reference\n     * - `object` type criteria checked as descriptor using `isSimilar` comparer\n     * Note: `function` (handler) marcher has a priority over descriptor check, so handler function own properties will be ignored\n     */\n    matches(desc) {\n        if (typeof desc === 'string')\n            return this.event === desc;\n        if (typeof desc === 'function')\n            return this.handler === desc;\n        if (typeof desc === 'object')\n            return isSimilar(this, desc, false);\n        return false;\n    }\n    /**\n     * Memoized builder for bound and decorated low level subscription.\n     * Implements DOM API {@link EventListenerObject.handleEvent}\n     */\n    get handleEvent() {\n        const handlerBound = this.handler.bind(this.host);\n        const handlerFull = this.once ? ((e) => (handlerBound(e), this.unsubscribe())) : handlerBound;\n        return this.selector ? (e) => this.isDelegatedTarget(e) && handlerFull(e) : handlerFull;\n    }\n    /** Checks if the passed event can be handled by the current event listener */\n    isDelegatedTarget(e) {\n        const target = e.target;\n        const current = e.currentTarget;\n        const delegate = this.delegate;\n        if (typeof delegate !== 'string')\n            return true;\n        if (!delegate || !(target instanceof HTMLElement) || !(current instanceof HTMLElement))\n            return false;\n        return current.contains(target.closest(delegate));\n    }\n    /**\n     * (Re-)Subscribes event listener instance\n     * @returns if subscription was successful\n     */\n    subscribe() {\n        const { passive, capture } = this;\n        this.unsubscribe();\n        memoize.clear(this, '$targets');\n        memoize.clear(this, 'handleEvent');\n        if (!this.$targets.length)\n            return false;\n        this.$targets.forEach((el) => el.addEventListener(this.event, this, { passive, capture }));\n        ESLEventListener.add(this.host, this);\n        return true;\n    }\n    /** Unsubscribes event listener instance */\n    unsubscribe() {\n        const { capture } = this;\n        if (!memoize.has(this, '$targets'))\n            return;\n        this.$targets.forEach((el) => el.removeEventListener(this.event, this, { capture }));\n        ESLEventListener.remove(this.host, this);\n    }\n    /**\n     * Gets stored listeners array the passed `host` object\n     * Supports additional filtration criteria\n     */\n    static get(host, ...criteria) {\n        if (!isObject(host))\n            return [];\n        const listeners = (host[LISTENERS] || []);\n        if (!criteria.length)\n            return listeners;\n        return listeners.filter((listener) => criteria.every(listener.matches, listener));\n    }\n    /** Adds listener to the listener store of the host object */\n    static add(host, instance) {\n        if (!isObject(host))\n            return;\n        if (!Object.hasOwnProperty.call(host, LISTENERS))\n            host[LISTENERS] = [];\n        host[LISTENERS].push(instance);\n    }\n    /** Removes listener from the listener store of the host object */\n    static remove(host, instance) {\n        const listeners = ESLEventListener.get(host);\n        const value = listeners.filter((listener) => listener !== instance);\n        Object.defineProperty(host, LISTENERS, { value, configurable: true });\n    }\n    /**\n     * Subscribes `handler` function with the passed event type or {@link ESLListenerDescriptor} with event type declared\n     * @param host - host object (listeners context) to associate subscription\n     * @param handler - handler function to subscribe\n     * @param descriptor - event or {@link ESLListenerDescriptor} with defined event type\n     */\n    static subscribe(host, handler, descriptor = handler) {\n        if (typeof handler !== 'function')\n            return [];\n        const eventDesc = handler !== descriptor ? Object.assign({}, handler, descriptor) : descriptor;\n        const listeners = ESLEventListener.createOrResolve(host, handler, eventDesc);\n        return listeners.filter((listener) => listener.subscribe());\n    }\n    /** Creates or resolves existing event listeners by handler and descriptors */\n    static createOrResolve(host, handler, desc) {\n        if (!isObject(host))\n            return [];\n        const eventString = resolveProperty(desc.event, host);\n        const listeners = [];\n        for (const event of splitEvents(eventString)) {\n            const subscribed = ESLEventListener.get(host, event, handler, {\n                target: desc.target,\n                selector: desc.selector,\n                capture: !!desc.capture\n            });\n            if (subscribed.length)\n                listeners.push(...subscribed);\n            else\n                listeners.push(new ESLEventListener(host, event, handler, desc));\n        }\n        return listeners;\n    }\n}\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"$targets\", null);\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"handleEvent\", null);\n","import { isObject } from '../../esl-utils/misc/object/types';\n/** Key to store listeners on the host */\nconst DESCRIPTORS = (window.Symbol || String)('__esl_descriptors');\n/**\n * @param host - host object\n * @param createIfNotExists - create keys store on the host if not exists\n * @returns object own descriptors keys or an empty array\n */\nfunction getOwnDescriptors(host, createIfNotExists = false) {\n    if (Object.hasOwnProperty.call(host, DESCRIPTORS))\n        return host[DESCRIPTORS];\n    const value = [];\n    if (createIfNotExists)\n        Object.defineProperty(host, DESCRIPTORS, { value, configurable: true });\n    return value;\n}\n/** Collects descriptors key from the whole prototype chain */\nfunction getDescriptorsKeysFor(host) {\n    const store = {};\n    for (let proto = host; proto && proto !== Object.prototype; proto = Object.getPrototypeOf(proto)) {\n        getOwnDescriptors(proto).forEach((key) => store[key] = true);\n    }\n    return Object.keys(store);\n}\n/** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\nexport function isEventDescriptor(obj) {\n    if (typeof obj !== 'function' || !Object.hasOwnProperty.call(obj, 'event'))\n        return false;\n    return typeof obj.event === 'string' || typeof obj.event === 'function';\n}\n/** Gets {@link ESLListenerDescriptorFn}s of the passed object */\nexport function getAutoDescriptors(host) {\n    if (!isObject(host))\n        return [];\n    const keys = getDescriptorsKeysFor(host);\n    const values = keys.map((key) => host[key]);\n    return values.filter((desc) => isEventDescriptor(desc) && desc.auto === true);\n}\n/**\n * Decorates passed `key` of the `host` as an {@link ESLListenerDescriptorFn} using `desc` meta information\n * @param host - object holder of the function to decorate\n * @param key - string key of the function in holder object\n * @param desc - descriptor meta information to assign\n * @returns ESLListenerDescriptorFn created on the host\n */\nexport function initDescriptor(host, key, desc) {\n    const fn = host[key];\n    if (typeof fn !== 'function')\n        throw new TypeError(`[ESL] Init Descriptor: ${key} is not a function`);\n    // Inherit event meta information from the prototype key\n    if (desc.inherit) {\n        const superDesc = Object.getPrototypeOf(host)[key];\n        if (!isEventDescriptor(superDesc))\n            throw new ReferenceError(`[ESL] Init Descriptor: no parent event descriptor found for ${key}`);\n        desc = Object.assign({ auto: false }, superDesc, desc);\n    }\n    else {\n        desc = Object.assign({ auto: false }, desc);\n    }\n    // Marks key to be auto-collectable\n    if (desc.auto) {\n        const value = getOwnDescriptors(host, true);\n        if (!value.includes(key))\n            value.push(key);\n    }\n    return Object.assign(fn, desc);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { dispatchCustomEvent } from '../../esl-utils/dom/events/misc';\nimport { ESLEventListener } from './listener';\nimport { getAutoDescriptors, isEventDescriptor, initDescriptor } from './descriptors';\nlet ESLEventUtils = class ESLEventUtils {\n    /**\n     * Gets currently subscribed listeners of the host\n     * @param host - host object (listeners context) to associate subscription\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners list\n     */\n    static listeners(host, ...criteria) {\n        return ESLEventListener.get(host, ...criteria);\n    }\n    static subscribe(host, eventDesc, handler = eventDesc) {\n        if (arguments.length === 1) {\n            const descriptors = getAutoDescriptors(host);\n            // TODO: flatMap when ES5 will be out of support list\n            return descriptors.reduce((acc, desc) => acc.concat(ESLEventListener.subscribe(host, desc)), []);\n        }\n        if (typeof eventDesc === 'string')\n            eventDesc = { event: eventDesc };\n        const listeners = ESLEventListener.subscribe(host, handler, eventDesc);\n        if (!listeners.length)\n            console.warn('[ESL]: Empty subscription %o', Object.assign({}, eventDesc, { handler }));\n        return listeners;\n    }\n    /**\n     * Unsubscribes {@link ESLEventListener}(s) from the object\n     * @param host - host element that stores subscriptions (listeners context)\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners to remove\n     */\n    static unsubscribe(host, ...criteria) {\n        const listeners = ESLEventListener.get(host, ...criteria);\n        listeners.forEach((listener) => listener.unsubscribe());\n        return listeners;\n    }\n};\n/**\n * Dispatches custom event. Alias for {@link dispatchCustomEvent}\n * @see dispatchCustomEvent\n */\nESLEventUtils.dispatch = dispatchCustomEvent;\n/** @deprecated alias for {@link getAutoDescriptors} */\nESLEventUtils.descriptors = getAutoDescriptors;\n/** Gets {@link ESLListenerDescriptorFn}s of the passed object */\nESLEventUtils.getAutoDescriptors = getAutoDescriptors;\n/**\n * Decorates passed `key` of the `host` as an {@link ESLListenerDescriptorFn} using `desc` meta information\n * @param host - object holder of the function to decorate\n * @param key - string key of the function in holder object\n * @param desc - descriptor meta information to assign\n * @returns ESLListenerDescriptorFn created on the host\n */\nESLEventUtils.initDescriptor = initDescriptor;\n/** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\nESLEventUtils.isEventDescriptor = isEventDescriptor;\nESLEventUtils = __decorate([\n    ExportNs('EventUtils')\n], ESLEventUtils);\nexport { ESLEventUtils };\n/** @deprecated alias for {@link ESLEventUtils} */\nexport const EventUtils = ESLEventUtils;\n","import { ESLEventUtils } from '../../esl-event-listener/core';\nexport function listen(desc) {\n    return function listener(target, propertyKey) {\n        // Map short event or event provider value to descriptor object\n        desc = typeof desc === 'string' || typeof desc === 'function' ? { event: desc } : desc;\n        // Makes auto collectable/subscribable description if not inherited\n        desc = Object.assign(desc.inherit ? {} : { auto: true }, desc);\n        ESLEventUtils.initDescriptor(target, propertyKey, desc);\n    };\n}\n","import { wrap } from '../misc/array';\n/** Store locks for key element classes*/\nconst lockStore = new WeakMap();\n/** Mange className lock for the element */\nconst lock = (el, className, locker) => {\n    const elLocks = lockStore.get(el) || new Map();\n    const classLocks = elLocks.get(className) || new Set();\n    classLocks.add(locker);\n    elLocks.set(className, classLocks);\n    lockStore.set(el, elLocks);\n};\n/**\n * Manage className unlock for the element\n * @returns true if className have no locks\n */\nconst unlock = (el, className, locker) => {\n    const elLocks = lockStore.get(el);\n    if (!elLocks)\n        return true;\n    const classLocks = elLocks.get(className);\n    if (!classLocks)\n        return true;\n    classLocks.delete(locker);\n    return !classLocks.size;\n};\n/**\n * Add single class to the element.\n * Supports inversion and locker management.\n */\nconst add = (el, className, locker) => {\n    if (className[0] === '!')\n        return remove(el, className.substring(1), locker);\n    if (locker)\n        lock(el, className, locker);\n    el.classList.add(className);\n};\n/**\n * Remove single class from the element.\n * Supports inversion and locker management.\n */\nconst remove = (el, className, locker) => {\n    if (className[0] === '!')\n        return add(el, className.substring(1), locker);\n    if (locker && !unlock(el, className, locker))\n        return;\n    if (!locker)\n        CSSClassUtils.unlock(el, className);\n    el.classList.remove(className);\n};\n/**\n * Check if the element matches passed CSS class.\n * Supports inversion.\n */\nconst has = (el, className) => {\n    if (className[0] === '!')\n        return !has(el, className.substring(1));\n    return el.classList.contains(className);\n};\n/**\n * CSS class manipulation utilities.\n *\n * Allows manipulating with CSS classes with the following set of sub-features:\n * - JQuery-like enumeration - you can pass multiple tokens separated by space\n * - safe checks - empty or falsy token sting will be ignored without throwing an error\n * - inversion syntax - tokens that start from '!' will be processed with inverted action\n * (e.g. addCls(el, '!class') - will remove 'class' from the element, while removeCls(el, '!class') adds 'class' to the element)\n * - class locks - you can manipulate with classes using `locker` option that takes into account the modification initiator.\n * That means the class added in 'locker' mode will not be removed until all initiators that requested add class have requested its removal.\n * */\nexport class CSSClassUtils {\n    /** Splitting passed token string into CSS class names array. */\n    static splitTokens(tokenString) {\n        return (tokenString || '').split(' ').filter((str) => !!str);\n    }\n    /**\n     * Add all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static add(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => add(el, className, locker)));\n    }\n    /**\n     * Remove all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static remove(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => remove(el, className, locker)));\n    }\n    /**\n     * Toggle all classes from the class token string on the element to the passed state.\n     * @see CSSClassUtils\n     * */\n    static toggle(els, cls, state, locker) {\n        (state ? CSSClassUtils.add : CSSClassUtils.remove)(els, cls, locker);\n    }\n    /**\n     * Check if all class from token string matches to the element or elements.\n     * @see CSSClassUtils\n     * */\n    static has(els, cls) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        return wrap(els).every((el) => tokens.every((className) => has(el, className)));\n    }\n    /** Remove all lockers for the element or passed element className */\n    static unlock(els, className) {\n        if (className) {\n            wrap(els).forEach((el) => { var _a; return (_a = lockStore.get(el)) === null || _a === void 0 ? void 0 : _a.delete(className); });\n        }\n        else {\n            wrap(els).forEach((el) => lockStore.delete(el));\n        }\n    }\n}\n","export const TAB = 'Tab';\nexport const ENTER = 'Enter';\nexport const ESC = 'Escape';\nexport const SPACE = ' ';\nexport const BACKSPACE = 'Backspace';\nexport const ALT = 'Alt';\nexport const SHIFT = 'Shift';\nexport const CONTROL = 'Control';\nexport const PAUSE = 'Pause';\nexport const END = 'End';\nexport const HOME = 'Home';\nexport const DELETE = 'Delete';\nexport const PAGE_UP = 'PageUp';\nexport const PAGE_DOWN = 'PageDown';\nexport const ARROW_LEFT = 'ArrowLeft';\nexport const ARROW_UP = 'ArrowUp';\nexport const ARROW_RIGHT = 'ArrowRight';\nexport const ARROW_DOWN = 'ArrowDown';\nexport const SYSTEM_KEYS = [TAB, ALT, SHIFT, CONTROL, PAGE_UP, PAGE_DOWN, ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN];\n","/**\n * `@prop` is auxiliary decorator to define a field on the prototype level.\n *` @prop` can be used to override decorated property from the parent level\n *\n * You can also use an @override decorator in combination with ECMA Script class property definition:\n * `@prop() public field: any = initial value;`\n *\n * The class property initial value is a part of object creation, so it goes to the object itself,\n * while the @override value is defined on the prototype level.\n *\n * @param value - value to setup in prototype\n * @param prototypeConfig - prototype property configuration\n */\nexport function prop(value, prototypeConfig = {}) {\n    return function (obj, name) {\n        if (Object.hasOwnProperty.call(obj, name)) {\n            throw new TypeError('Can\\'t override own property');\n        }\n        Object.defineProperty(obj, name, {\n            value,\n            writable: !prototypeConfig.readonly,\n            enumerable: !prototypeConfig.enumerable,\n            configurable: true\n        });\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { prop } from '../../esl-utils/decorators';\nimport { ESLEventUtils } from '../../esl-utils/dom/events';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\n/**\n * Base class for ESL custom elements\n * Allows defining custom element with the optional custom tag name\n */\nexport class ESLBaseElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this._connected = false;\n    }\n    connectedCallback() {\n        this._connected = true;\n        this.classList.add(this.constructor.is);\n        ESLEventUtils.subscribe(this);\n    }\n    disconnectedCallback() {\n        this._connected = false;\n        ESLEventUtils.unsubscribe(this);\n    }\n    /** Check that the element is connected and `connectedCallback` has been executed */\n    get connected() {\n        return this._connected;\n    }\n    $$on(event, handler) {\n        return ESLEventUtils.subscribe(this, event, handler);\n    }\n    /** Unsubscribes event listener */\n    $$off(...condition) {\n        return ESLEventUtils.unsubscribe(this, ...condition);\n    }\n    /**\n     * Gets or sets CSS classes for the current element.\n     * @param cls - CSS classes query {@link CSSClassUtils}\n     * @param value - boolean to set CSS class(es) state or undefined to skip mutation\n     * @returns current classes state or passed state\n     */\n    $$cls(cls, value) {\n        if (value === undefined)\n            return CSSClassUtils.has(this, cls);\n        CSSClassUtils.toggle(this, cls, value);\n        return value;\n    }\n    /**\n     * Gets or sets an attribute for the current element.\n     * If the `value` param is undefined then skips mutation.\n     * @param name - attribute name\n     * @param value - string attribute value, boolean attribute state or `null` to delete attribute\n     * @returns the current attribute value or previous value for mutation\n     */\n    $$attr(name, value) {\n        const prevValue = this.getAttribute(name);\n        if (value !== undefined)\n            setAttr(this, name, value);\n        return prevValue;\n    }\n    /**\n     * Dispatches component custom event.\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    $$fire(eventName, eventInit) {\n        return ESLEventUtils.dispatch(this, eventName, eventInit);\n    }\n    /**\n     * Register component in the {@link customElements} registry\n     * @param tagName - custom tag name to register custom element\n     */\n    static register(tagName) {\n        tagName = tagName || this.is;\n        if (!tagName)\n            throw new Error('Can not define custom element');\n        const constructor = customElements.get(tagName);\n        if (constructor) {\n            if (constructor.is !== tagName)\n                throw new Error('Element declaration tag inconsistency');\n            return;\n        }\n        if (this.is !== tagName) {\n            this.is = tagName;\n        }\n        customElements.define(tagName, this);\n    }\n    /** Shortcut for `customElements.whenDefined(currentCustomElement)` */\n    static get registered() {\n        return customElements.whenDefined(this.is);\n    }\n    static create() {\n        return document.createElement(this.is);\n    }\n}\n/** Custom element tag name */\nESLBaseElement.is = '';\n__decorate([\n    prop('esl:refresh')\n], ESLBaseElement.prototype, \"REFRESH_EVENT\", void 0);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement, listen } from '../../../esl-base-element/core';\nimport { ESLEventUtils } from '../../../esl-utils/dom/events';\n/**\n * Base class for {@link HTMLSelectElement} wrapper element, implements {@link ESLSelectModel} options source\n */\nexport class ESLSelectWrapper extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._mutationObserver = new MutationObserver(this._onTargetMutation.bind(this));\n    }\n    /** Native select that is wrapped */\n    get $select() {\n        return this._$select;\n    }\n    set $select(select) {\n        const prev = this._$select;\n        this._$select = select;\n        this._onTargetChange(select, prev);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._mutationObserver.disconnect();\n    }\n    _onChange(event) { }\n    _onListChange() { }\n    _onTargetChange(newTarget, oldTarget) {\n        this.$$on(this._onChange);\n        this._mutationObserver.disconnect();\n        const type = this.constructor;\n        if (newTarget)\n            this._mutationObserver.observe(newTarget, type.observationConfig);\n    }\n    _onTargetMutation(changes) {\n        const isListChange = (change) => change.addedNodes.length + change.removedNodes.length > 0;\n        changes.some(isListChange) ? this._onListChange() : this._onChange();\n    }\n    _onReset(event) {\n        if (!event.target || event.target !== this.form)\n            return;\n        setTimeout(() => this._onChange(event));\n    }\n    get multiple() {\n        return this.$select && this.$select.multiple;\n    }\n    get options() {\n        return this.$select ? Array.from(this.$select.options) : [];\n    }\n    get selectedOptions() {\n        return this.options.filter((item) => item.selected);\n    }\n    getOption(value) {\n        return this.options.find((item) => item.value === value);\n    }\n    setSelected(value, state) {\n        if (!this.$select)\n            return;\n        const option = this.getOption(value);\n        option && (option.selected = state);\n        ESLEventUtils.dispatch(this.$select, 'change');\n    }\n    isSelected(value) {\n        const opt = this.getOption(value);\n        return !!opt && opt.selected;\n    }\n    hasSelected() {\n        return this.options.some((item) => item.selected);\n    }\n    isAllSelected() {\n        return this.options.every((item) => item.selected || item.disabled);\n    }\n    setAllSelected(state) {\n        if (!this.multiple || !this.$select)\n            return;\n        this.options.forEach((item) => item.selected = !item.disabled && state);\n        ESLEventUtils.dispatch(this.$select, 'change');\n    }\n    // Proxy select methods and values\n    get value() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    get values() {\n        return this.selectedOptions.map((item) => item.value);\n    }\n    get form() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.form;\n    }\n    get name() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.name;\n    }\n    set name(name) {\n        this.$select && (this.$select.name = name);\n    }\n    get required() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.required;\n    }\n    set required(required) {\n        this.$select && (this.$select.required = required);\n    }\n    // Validation API values\n    get validity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.validity;\n    }\n    get validationMessage() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.validationMessage;\n    }\n    get willValidate() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.willValidate;\n    }\n    // Validation API methods\n    checkValidity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.checkValidity();\n    }\n    reportValidity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.reportValidity();\n    }\n    setCustomValidity(error) {\n        var _a;\n        (_a = this.$select) === null || _a === void 0 ? void 0 : _a.setCustomValidity(error);\n    }\n}\nESLSelectWrapper.observationConfig = {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['value', 'selected', 'disabled'],\n    childList: true,\n    characterData: true\n};\n__decorate([\n    listen({\n        event: 'change',\n        target: (el) => el.$select\n    })\n], ESLSelectWrapper.prototype, \"_onChange\", null);\n__decorate([\n    listen({\n        event: 'reset',\n        target: (el) => el.ownerDocument\n    })\n], ESLSelectWrapper.prototype, \"_onReset\", null);\n","/**\n * Postpone action after next render\n */\nexport const afterNextRender = (callback) => requestAnimationFrame(() => requestAnimationFrame(callback));\n/**\n * Postpone action after a couple of renders\n */\nexport const skipOneRender = (callback) => requestAnimationFrame(() => afterNextRender(callback));\n/**\n * Decorate function to schedule execution after next render\n * @returns decorated function\n */\nexport const rafDecorator = (fn) => {\n    let lastArgs = null; // null if no calls requested\n    return function (...args) {\n        if (lastArgs === null) {\n            requestAnimationFrame(() => {\n                lastArgs && fn.call(this, ...lastArgs);\n                lastArgs = null;\n            });\n        }\n        lastArgs = args;\n    };\n};\n","import { getPropertyDescriptor } from '../misc/object/utils';\n/**\n * Common TS decorator to apply decorator function\n * (like {@link debounce}, {@link throttle}, {@link rafDecorator})\n * to the class method\n * @param decorator - function decorator, should accept decorated method as first argument\n * @param args - additional arguments to pass into `decorator`\n */\nexport function decorate(decorator, ...args) {\n    return function (target, propertyKey, descriptor) {\n        if (!descriptor || typeof descriptor.value !== 'function') {\n            throw new TypeError('Only class methods can be decorated');\n        }\n        const originalFn = descriptor.value;\n        return descriptor = {\n            enumerable: descriptor.enumerable,\n            configurable: true,\n            get: function getBound() {\n                // Skip own properties\n                const proto = Object.getPrototypeOf(this);\n                // Find the closest descriptor for property\n                const desc = getPropertyDescriptor(proto, propertyKey);\n                // Return original function in case of prototype or super call\n                if (!desc || desc.get !== getBound)\n                    return originalFn;\n                // Create a new decorated instance of function\n                const decoratedFn = decorator(originalFn.bind(this), ...args);\n                // Copy original function own keys\n                Object.assign(decoratedFn, originalFn);\n                // Defines own property with the decorated instance\n                return this[propertyKey] = decoratedFn;\n            },\n            set(value) {\n                Object.defineProperty(this, propertyKey, {\n                    value,\n                    writable: true,\n                    configurable: true,\n                    enumerable: descriptor.enumerable\n                });\n            }\n        };\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '../../../esl-base-element/core';\nimport { format } from '../../../esl-utils/misc/format';\nimport { rafDecorator } from '../../../esl-utils/async/raf';\nimport { attr, boolAttr, decorate, listen } from '../../../esl-utils/decorators';\n/**\n * ESLSelectRenderer component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom element to render {@link ESLSelect} inline field\n */\nexport class ESLSelectRenderer extends ESLBaseElement {\n    constructor() {\n        super();\n        this.$remove = document.createElement('button');\n        this.$remove.type = 'button';\n        this.$remove.setAttribute('aria-label', 'Clear');\n        this.$remove.classList.add('esl-select-clear-btn');\n        this.$remove.classList.add('icon-nav-close-menu');\n        this.$container = document.createElement('div');\n        this.$container.classList.add('esl-select-text-container');\n        this.$text = document.createElement('span');\n        this.$text.classList.add('esl-select-text');\n        this.$container.appendChild(this.$text);\n        this.$rest = document.createElement('span');\n        this.$rest.classList.add('esl-select-text');\n        this.$container.appendChild(this.$rest);\n    }\n    /** ESLSelect owner */\n    get owner() {\n        if (!this.parentElement || !this.parentElement.matches('esl-select'))\n            return null;\n        return this.parentElement;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$container);\n        this.appendChild(this.$remove);\n        Promise.resolve().then(() => this.render());\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeChild(this.$container);\n        this.removeChild(this.$remove);\n    }\n    /** Rerender component with markers */\n    render() {\n        if (!this.owner)\n            return;\n        const selected = this.owner.selectedOptions;\n        this.hasValue = !!selected.length;\n        this.toggleAttribute('multiple', this.owner.multiple);\n        this.applyItems(selected.map((item) => item.text));\n    }\n    /** Render item with a visible items limit */\n    apply(items, limit) {\n        const length = items.length;\n        const rest = length - limit;\n        const options = { rest, length, limit };\n        this.$text.textContent = items.slice(0, limit).join(', ');\n        if (rest > 0) {\n            this.$rest.textContent = format(this.moreLabelFormat || '', options);\n        }\n        else {\n            this.$rest.textContent = '';\n        }\n    }\n    /** Render items using adaptive algorithm */\n    applyItems(items) {\n        let size = 0;\n        do {\n            this.apply(items, ++size); // Render with extended limit while it not fits to the container\n        } while (size <= items.length && this.$container.scrollWidth <= this.$container.clientWidth);\n        this.apply(items, size - 1); // Render last limit that fits\n    }\n    /** Handle clear button click */\n    _onClear(e) {\n        if (!this.owner)\n            return;\n        this.owner.setAllSelected(false);\n        e.stopPropagation();\n        e.preventDefault();\n    }\n    _onResize() {\n        this.render();\n    }\n}\nESLSelectRenderer.is = 'esl-select-renderer';\n__decorate([\n    attr()\n], ESLSelectRenderer.prototype, \"emptyText\", void 0);\n__decorate([\n    attr()\n], ESLSelectRenderer.prototype, \"moreLabelFormat\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectRenderer.prototype, \"hasValue\", void 0);\n__decorate([\n    listen({\n        event: 'esl:change:value',\n        target: (el) => el.owner\n    })\n], ESLSelectRenderer.prototype, \"render\", null);\n__decorate([\n    listen({ event: 'click', selector: '.esl-select-clear-btn' })\n], ESLSelectRenderer.prototype, \"_onClear\", null);\n__decorate([\n    listen({ event: 'resize', target: window }),\n    decorate(rafDecorator)\n], ESLSelectRenderer.prototype, \"_onResize\", null);\n","import { getAttr, setAttr } from '../dom/attr';\nimport { toKebabCase, evaluate } from '../misc/format';\nfunction buildJsonAttrDescriptor(attrName, readOnly, defaultValue) {\n    function get() {\n        const attrContent = getAttr(this, attrName, '').trim();\n        return evaluate(attrContent, defaultValue);\n    }\n    function set(value) {\n        try {\n            if (typeof value !== 'object')\n                throw Error('value should be object');\n            setAttr(this, attrName, value ? JSON.stringify(value) : false);\n        }\n        catch (e) {\n            console.error('[ESL] jsonAttr: Can not set json value ', e);\n        }\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value using JSON (de-)serialization rules.\n * Maps object type property.\n * @param config - mapping configuration. See {@link JsonAttrDescriptor}\n */\nexport const jsonAttr = (config = {}) => {\n    config = Object.assign({ defaultValue: {} }, config);\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildJsonAttrDescriptor(attrName, !!config.readonly, config.defaultValue));\n    };\n};\n","const ns = window || global;\nconst sequences = ns.__esl_sequences__ || new Map();\nns.__esl_sequences__ = sequences;\n/** Create and return sequential id */\nexport const sequentialUID = (name, prefix = name) => {\n    const uid = (sequences.get(name) || 0) + 1;\n    sequences.set(name, uid);\n    return prefix + uid;\n};\n/** Return random unique identifier */\nexport const randUID = (prefix = '') => {\n    const time = Date.now().toString(32);\n    const rand = Math.round(Math.random() * 1024 * 1024).toString(32);\n    return prefix + time + '-' + rand;\n};\n/**\n * Generate unique id\n * @deprecated Alias for {@link randUID}\n */\nexport const generateUId = randUID;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from './export-ns';\nconst { userAgent, vendor, platform } = window.navigator;\n// IE Detection\nexport const isTrident = /trident/i.test(userAgent);\nexport const isIE = isTrident;\n// Edge Detection\nexport const isEdgeHTML = /edg([ea]|ios)/i.test(userAgent);\nexport const isBlinkEdge = /\\sedg\\//i.test(userAgent);\nexport const isEdge = isEdgeHTML || isBlinkEdge;\n// Gecko\nexport const isGecko = /gecko/i.test(userAgent) && !/like gecko/i.test(userAgent);\nexport const isFirefox = /firefox|iceweasel|fxios/i.test(userAgent);\n// Opera / Chrome\nexport const isOpera = /(?:^opera.+?version|opr)/.test(userAgent);\nexport const isChrome = !isOpera && /google inc/.test(vendor);\n// Webkit\nexport const isWebkit = /(apple)?webkit/i.test(userAgent);\n// Safari\nexport const isSafari = isWebkit && /^((?!chrome|android).)*safari/i.test(userAgent);\n// Blink\nexport const isBlink = isWebkit && !isSafari;\n// Bot detection\nexport const isBot = /Chrome-Lighthouse|Google Page Speed Insights/i.test(userAgent);\n// Mobile\nexport const isAndroid = /Android/i.test(userAgent);\nexport const isMobileIOS13 = /* iOS 13+ detection */ (platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nexport const isMobileIOS = /iPad|iPhone|iPod/.test(platform) || isMobileIOS13;\nexport const isLegacyMobile = /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport const isMobile = isMobileIOS || isAndroid || isLegacyMobile;\nexport const isMobileSafari = isMobileIOS && isWebkit && /CriOS/i.test(userAgent);\n// Touch Detection\nexport const isTouchDevice = (() => {\n    const navApi = window.navigator;\n    if (navApi.maxTouchPoints || navApi.msMaxTouchPoints)\n        return true;\n    return ('ontouchstart' in window) || ('DocumentTouch' in window && document instanceof Touch);\n})();\n// Hover check\n// Note: always true for IE\nexport const hasHover = !matchMedia('(hover: none)').matches;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nexport const TOUCH_EVENTS = (() => {\n    const isTouch = isTouchDevice;\n    return {\n        START: isTouch ? 'touchstart' : 'pointerdown',\n        MOVE: isTouch ? 'touchmove' : 'pointermove',\n        END: isTouch ? 'touchend' : 'pointerup'\n    };\n})();\n/**\n * Device detection utility\n * @readonly\n */\nlet DeviceDetector = class DeviceDetector {\n};\n// IE Detection\nDeviceDetector.isTrident = isTrident;\nDeviceDetector.isIE = isIE;\n// Edge Detection\nDeviceDetector.isEdgeHTML = isEdgeHTML;\nDeviceDetector.isBlinkEdge = isBlinkEdge;\nDeviceDetector.isEdge = isEdge;\n// Gecko\nDeviceDetector.isGecko = isGecko;\nDeviceDetector.isFirefox = isFirefox;\n// Opera / Chrome\nDeviceDetector.isOpera = isOpera;\nDeviceDetector.isChrome = isChrome;\n// Webkit\nDeviceDetector.isWebkit = isWebkit;\n// Safari\nDeviceDetector.isSafari = isSafari;\n// Blink\nDeviceDetector.isBlink = isBlink;\n// Bot detection\nDeviceDetector.isBot = isBot;\n// Mobile\nDeviceDetector.isAndroid = isAndroid;\nDeviceDetector.isMobileIOS13 = isMobileIOS13;\nDeviceDetector.isMobileIOS = isMobileIOS;\nDeviceDetector.isLegacyMobile = isLegacyMobile;\nDeviceDetector.isMobile = isMobile;\nDeviceDetector.isMobileSafari = isMobileSafari;\n// Touch Detection\nDeviceDetector.isTouchDevice = isTouchDevice;\n// Hover check\n// Note: always true for IE\nDeviceDetector.hasHover = hasHover;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nDeviceDetector.TOUCH_EVENTS = TOUCH_EVENTS;\nDeviceDetector = __decorate([\n    ExportNs('DeviceDetector')\n], DeviceDetector);\nexport { DeviceDetector };\n","/**\n * Task placeholder with a single place for executing deferred task.\n * Only one task can be planed per DelayedTask instance.\n * @see put DelayedTask.put behaviour description.\n */\nexport class DelayedTask {\n    constructor() {\n        this._fn = null;\n        this._timeout = null;\n        /** Execute deferred task immediately */\n        this.run = () => {\n            this._timeout = null;\n            this._fn && this._fn();\n        };\n    }\n    /** @returns Function of currently deferred (planned) task */\n    get fn() {\n        return this._fn;\n    }\n    /**\n     * Cancel deferred task and planning passed\n     * @param task - task function\n     * @param delay - time to delay task execution\n     *  - pass negative or false to execute task immediately\n     *  - pass 0 to plan task to the macrotask\n     *  - pass positive number x to delay task on x ms.\n     * */\n    put(task, delay = false) {\n        const prev = this.cancel();\n        if (typeof task === 'function') {\n            if (delay && typeof delay === 'string')\n                delay = +delay;\n            if (typeof delay === 'number' && delay >= 0) {\n                this._fn = task;\n                this._timeout = window.setTimeout(this.run, delay);\n            }\n            else {\n                task();\n            }\n        }\n        return prev;\n    }\n    /** Cancel deferred (planned) task */\n    cancel() {\n        const prev = this._fn;\n        (typeof this._timeout === 'number') && clearTimeout(this._timeout);\n        this._fn = this._timeout = null;\n        return prev;\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleable_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESC, SYSTEM_KEYS } from '../../esl-utils/dom/keys';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { prop, attr, jsonAttr, boolAttr, listen } from '../../esl-utils/decorators';\nimport { defined, copyDefinedKeys } from '../../esl-utils/misc/object';\nimport { sequentialUID } from '../../esl-utils/misc/uid';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { DelayedTask } from '../../esl-utils/async/delayed-task';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { isMatches } from '../../esl-utils/dom/traversing';\nconst activators = new WeakMap();\n/**\n * ESLToggleable component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleable - a custom element, that is used as a base for \"Popup-like\" components creation\n */\nlet ESLToggleable = ESLToggleable_1 = class ESLToggleable extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Inner state */\n        this._open = false;\n        /** Inner show/hide task manager instance */\n        this._task = new DelayedTask();\n        /** Marker for current hover listener state */\n        this._trackHover = false;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (!this.id && !this.noAutoId) {\n            const tag = this.constructor.is;\n            this.id = sequentialUID(tag, tag + '-');\n        }\n        this.initiallyOpened = this.hasAttribute('open');\n        this.setInitialState();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        activators.delete(this);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        switch (attrName) {\n            case 'open':\n                if (this.open === this.hasAttribute('open'))\n                    return;\n                this.toggle(this.open, { initiator: 'attribute', showDelay: 0, hideDelay: 0 });\n                break;\n            case 'group':\n                this.$$fire(this.GROUP_CHANGED_EVENT, {\n                    detail: { oldGroupName: oldVal, newGroupName: newVal }\n                });\n                break;\n        }\n    }\n    /** Set initial state of the Toggleable */\n    setInitialState() {\n        if (this.initialParams) {\n            this.toggle(this.initiallyOpened, this.initialParams);\n        }\n    }\n    /** Bind outside action event listeners */\n    bindOutsideEventTracking(track) {\n        track ? this.$$on(this._onOutsideAction) : this.$$off(this._onOutsideAction);\n    }\n    /** Bind hover events listeners for the Toggleable itself */\n    bindHoverStateTracking(track, hideDelay) {\n        if (!DeviceDetector.hasHover)\n            return;\n        this._trackHoverDelay = track && hideDelay !== undefined ? +hideDelay : undefined;\n        if (this._trackHover === track)\n            return;\n        this._trackHover = track;\n        track ? this.$$on(this._onMouseEnter) : this.$$off(this._onMouseEnter);\n        track ? this.$$on(this._onMouseLeave) : this.$$off(this._onMouseLeave);\n    }\n    /** Function to merge the result action params */\n    mergeDefaultParams(params) {\n        return Object.assign({}, this.defaultParams, copyDefinedKeys(params));\n    }\n    /** Toggle the element state */\n    toggle(state = !this.open, params) {\n        return state ? this.show(params) : this.hide(params);\n    }\n    /** Change the element state to active */\n    show(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.showTask.bind(this, params), defined(params.showDelay, params.delay));\n        this.bindOutsideEventTracking(this.closeOnOutsideAction);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Change the element state to inactive */\n    hide(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.hideTask.bind(this, params), defined(params.hideDelay, params.delay));\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Actual show task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    showTask(params) {\n        if (!params.force && this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_SHOW_EVENT, { detail: { params } }))\n            return;\n        this.activator = params.activator;\n        this.open = true;\n        this.onShow(params);\n        if (!params.silent)\n            this.$$fire(this.SHOW_EVENT, { detail: { params }, cancelable: false });\n    }\n    /** Actual hide task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    hideTask(params) {\n        if (!params.force && !this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_HIDE_EVENT, { detail: { params } }))\n            return;\n        this.open = false;\n        this.onHide(params);\n        this.bindOutsideEventTracking(false);\n        if (!params.silent)\n            this.$$fire(this.HIDE_EVENT, { detail: { params }, cancelable: false });\n    }\n    /**\n     * Actions to execute on show toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Adds CSS classes, update a11y and fire {@link ESLToggleable.REFRESH_EVENT} event by default.\n     */\n    onShow(params) {\n        CSSClassUtils.add(this, this.activeClass);\n        CSSClassUtils.add(document.body, this.bodyClass, this);\n        this.updateA11y();\n        this.$$fire(this.REFRESH_EVENT); // To notify other components about content change\n    }\n    /**\n     * Actions to execute on hide toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Removes CSS classes and update a11y by default.\n     */\n    onHide(params) {\n        CSSClassUtils.remove(this, this.activeClass);\n        CSSClassUtils.remove(document.body, this.bodyClass, this);\n        this.updateA11y();\n    }\n    /** Active state marker */\n    get open() {\n        return this._open;\n    }\n    set open(value) {\n        this.toggleAttribute('open', this._open = value);\n    }\n    /** Last component that has activated the element. Uses {@link ESLToggleableActionParams.activator}*/\n    get activator() {\n        return activators.get(this);\n    }\n    set activator(el) {\n        el ? activators.set(this, el) : activators.delete(this);\n    }\n    /** Returns the element to apply a11y attributes */\n    get $a11yTarget() {\n        const target = this.getAttribute('a11y-target');\n        if (target === 'none')\n            return null;\n        return target ? this.querySelector(target) : this;\n    }\n    /** Called on show and on hide actions to update a11y state accordingly */\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-hidden', String(!this._open));\n    }\n    /** @returns if the passed event should trigger hide action */\n    isOutsideAction(e) {\n        const target = e.target;\n        // target is inside current toggleable\n        if (this.contains(target))\n            return false;\n        // target is inside last activator\n        if (this.activator && this.activator.contains(target))\n            return false;\n        // Event is not a system command key\n        return !(e instanceof KeyboardEvent && SYSTEM_KEYS.includes(e.key));\n    }\n    _onCloseClick(e) {\n        this.hide({ initiator: 'close', activator: e.target, event: e });\n    }\n    _onOutsideAction(e) {\n        if (!this.isOutsideAction(e))\n            return;\n        // Used 0 delay to decrease priority of the request\n        this.hide({ initiator: 'outsideaction', hideDelay: 0, event: e });\n    }\n    _onKeyboardEvent(e) {\n        if (this.closeOnEsc && e.key === ESC) {\n            this.hide({ initiator: 'keyboard', event: e });\n        }\n    }\n    _onMouseEnter(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseenter', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.show(Object.assign(baseParams, this.trackHoverParams));\n    }\n    _onMouseLeave(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseleave', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.hide(Object.assign(baseParams, this.trackHoverParams));\n    }\n    /** Prepares toggle request events param */\n    buildRequestParams(e) {\n        const detail = e.detail || {};\n        if (!isMatches(this, detail.match))\n            return null;\n        return Object.assign({}, detail, { event: e });\n    }\n    /** Actions to execute on show request */\n    _onShowRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.show(params);\n    }\n    /** Actions to execute on hide request */\n    _onHideRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.hide(params);\n    }\n};\nESLToggleable.is = 'esl-toggleable';\nESLToggleable.observedAttributes = ['open', 'group'];\n__decorate([\n    prop('esl:before:show')\n], ESLToggleable.prototype, \"BEFORE_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:before:hide')\n], ESLToggleable.prototype, \"BEFORE_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show')\n], ESLToggleable.prototype, \"SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:hide')\n], ESLToggleable.prototype, \"HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:after:show')\n], ESLToggleable.prototype, \"AFTER_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:after:hide')\n], ESLToggleable.prototype, \"AFTER_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show:request')\n], ESLToggleable.prototype, \"SHOW_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:hide:request')\n], ESLToggleable.prototype, \"HIDE_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:change:group')\n], ESLToggleable.prototype, \"GROUP_CHANGED_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"bodyClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLToggleable.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ name: 'group' })\n], ESLToggleable.prototype, \"groupName\", void 0);\n__decorate([\n    attr({ name: 'close-on' })\n], ESLToggleable.prototype, \"closeTrigger\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"noAutoId\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLToggleable.prototype, \"initialParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"defaultParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"trackHoverParams\", void 0);\n__decorate([\n    listen({\n        event: 'click',\n        selector: (el) => el.closeTrigger || ''\n    })\n], ESLToggleable.prototype, \"_onCloseClick\", null);\n__decorate([\n    listen({\n        auto: false,\n        event: 'keydown mouseup touchend',\n        target: document.body,\n        capture: true\n    })\n], ESLToggleable.prototype, \"_onOutsideAction\", null);\n__decorate([\n    listen('keydown')\n], ESLToggleable.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseenter' })\n], ESLToggleable.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseleave' })\n], ESLToggleable.prototype, \"_onMouseLeave\", null);\n__decorate([\n    listen((el) => el.SHOW_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onShowRequest\", null);\n__decorate([\n    listen((el) => el.HIDE_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onHideRequest\", null);\nESLToggleable = ESLToggleable_1 = __decorate([\n    ExportNs('Toggleable')\n], ESLToggleable);\nexport { ESLToggleable };\n","/** Makes a plain copy of obj with properties satisfying the predicate\n * If no predicate provided copies all own properties */\nexport function copy(obj, predicate = () => true) {\n    const result = Object.assign({}, obj || {});\n    Object.keys(result).forEach((key) => {\n        (!predicate(key, result[key])) && delete result[key];\n    });\n    return result;\n}\n/** Makes a flat copy without undefined keys */\nexport function copyDefinedKeys(obj) {\n    return copy(obj || {}, (key, value) => value !== void 0);\n}\n/** Omits copying provided properties from object */\nexport function omit(obj, keys) {\n    return copy(obj, (key) => !keys.includes(key));\n}\n","import { onDocumentReady } from '../dom/ready';\n/** Defer method execution to the next task with dom ready state precondition */\nexport function ready(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== 'function') {\n        throw new TypeError('Only class methods can be decorated via document ready decorator');\n    }\n    const fn = descriptor.value;\n    descriptor.value = function (...arg) {\n        onDocumentReady(() => fn.call(this, ...arg));\n    };\n}\n","/**\n * Execute callback in bounds of the next task with dom ready state precondition\n */\nexport function onDocumentReady(callback) {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', function fn() {\n            document.removeEventListener('DOMContentLoaded', fn);\n            setTimeout(() => callback());\n        });\n    }\n    else {\n        setTimeout(() => callback());\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { memoize } from '../decorators/memoize';\n// TODO: functional\nexport class RTLUtils {\n    /** Check if the element in a RTL direction context */\n    static isRtl(el) {\n        return getComputedStyle(el || document.body).direction === 'rtl';\n    }\n    /**\n     * @returns RTL scroll type (lazy, memoized)\n     */\n    static get scrollType() {\n        let scrollType = 'default';\n        const el = createDummyEl();\n        document.body.appendChild(el);\n        if (el.scrollLeft <= 0) {\n            el.scrollLeft = 2;\n            scrollType = el.scrollLeft < 2 ? 'negative' : 'reverse';\n        }\n        document.body.removeChild(el);\n        return scrollType;\n    }\n    static normalizeScrollLeft(el, value = null, isRtl = RTLUtils.isRtl(el)) {\n        value = (value === null) ? el.scrollLeft : value;\n        switch (isRtl ? RTLUtils.scrollType : '') {\n            case 'negative':\n                return el.scrollWidth - el.clientWidth + value;\n            case 'reverse':\n                return el.scrollWidth - el.clientWidth - value;\n            default:\n                return value;\n        }\n    }\n}\n__decorate([\n    memoize()\n], RTLUtils, \"scrollType\", null);\n/** Creates the dummy test element with a horizontal scroll presented */\nfunction createDummyEl() {\n    const el = document.createElement('div');\n    el.appendChild(document.createTextNode('ESL!'));\n    el.dir = 'rtl';\n    Object.assign(el.style, {\n        position: 'absolute',\n        top: '-1000px',\n        width: '4px',\n        height: '1px',\n        fontSize: '14px',\n        overflow: 'scroll'\n    });\n    return el;\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { bind, ready, attr, boolAttr, listen } from '../../esl-utils/decorators';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { isMouseEvent, isTouchEvent, getTouchPoint, getOffsetPoint } from '../../esl-utils/dom/events';\nimport { isRelativeNode } from '../../esl-utils/dom/traversing';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { RTLUtils } from '../../esl-utils/dom/rtl';\n/**\n * ESLScrollbar is a reusable web component that replaces the browser's default scrollbar with\n * a custom scrollbar implementation.\n *\n * @author Yuliya Adamskaya\n */\nlet ESLScrollbar = class ESLScrollbar extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredDrag = rafDecorator((e) => this._onPointerDrag(e));\n        this._deferredRefresh = rafDecorator(() => this.refresh());\n        this._scrollTimer = 0;\n        this._resizeObserver = new ResizeObserver(this._deferredRefresh);\n        this._mutationObserver = new MutationObserver((rec) => this.updateContentObserve(rec));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n        this.findTarget();\n    }\n    disconnectedCallback() {\n        this.unbindTargetEvents();\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'target')\n            this.findTarget();\n        if (attrName === 'horizontal')\n            this.refresh();\n    }\n    findTarget() {\n        this.$target = this.target ?\n            ESLTraversingQuery.first(this.target, this) :\n            null;\n    }\n    /** Target element to observe and scroll */\n    get $target() {\n        return this._$target || null;\n    }\n    set $target(content) {\n        this.unbindTargetEvents();\n        this._$target = content;\n        this.bindTargetEvents();\n        this._deferredRefresh();\n    }\n    render() {\n        this.innerHTML = '';\n        this.$scrollbarTrack = document.createElement('div');\n        this.$scrollbarTrack.className = this.trackClass;\n        this.$scrollbarThumb = document.createElement('div');\n        this.$scrollbarThumb.className = this.thumbClass;\n        this.$scrollbarTrack.appendChild(this.$scrollbarThumb);\n        this.appendChild(this.$scrollbarTrack);\n    }\n    bindTargetEvents() {\n        if (!this.$target)\n            return;\n        // Container resize/scroll observers/listeners\n        if (document.documentElement === this.$target) {\n            this.$$on({ event: 'scroll resize', target: window }, this._onScrollOrResize);\n        }\n        else {\n            this.$$on({ event: 'scroll', target: this.$target }, this._onScrollOrResize);\n            this._resizeObserver.observe(this.$target);\n        }\n        // Subscribes to the child elements resizes\n        this._mutationObserver.observe(this.$target, { childList: true });\n        Array.from(this.$target.children).forEach((el) => this._resizeObserver.observe(el));\n    }\n    /** Resubscribes resize observer on child elements when container content changes */\n    updateContentObserve(recs = []) {\n        if (!this.$target)\n            return;\n        const contentChanges = recs.filter((rec) => rec.type === 'childList');\n        contentChanges.forEach((rec) => {\n            Array.from(rec.addedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.observe(el));\n            Array.from(rec.removedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.unobserve(el));\n        });\n        if (contentChanges.length)\n            this._deferredRefresh();\n    }\n    unbindTargetEvents() {\n        if (!this.$target)\n            return;\n        this.$$off(this._onScrollOrResize);\n        if (document.documentElement !== this.$target) {\n            this._resizeObserver.disconnect();\n            this._mutationObserver.disconnect();\n        }\n    }\n    /** @readonly Scrollable distance size value (px) */\n    get scrollableSize() {\n        if (!this.$target)\n            return 0;\n        return this.horizontal ?\n            this.$target.scrollWidth - this.$target.clientWidth :\n            this.$target.scrollHeight - this.$target.clientHeight;\n    }\n    /** @readonly Track size value (px) */\n    get trackOffset() {\n        return this.horizontal ? this.$scrollbarTrack.offsetWidth : this.$scrollbarTrack.offsetHeight;\n    }\n    /** @readonly Thumb size value (px) */\n    get thumbOffset() {\n        return this.horizontal ? this.$scrollbarThumb.offsetWidth : this.$scrollbarThumb.offsetHeight;\n    }\n    /** @readonly Relative thumb size value (between 0.0 and 1.0) */\n    get thumbSize() {\n        // behave as native scroll\n        if (!this.$target || !this.$target.scrollWidth || !this.$target.scrollHeight)\n            return 1;\n        const areaSize = this.horizontal ? this.$target.clientWidth : this.$target.clientHeight;\n        const scrollSize = this.horizontal ? this.$target.scrollWidth : this.$target.scrollHeight;\n        return Math.min((areaSize + 1) / scrollSize, 1);\n    }\n    /** Relative position value (between 0.0 and 1.0) */\n    get position() {\n        if (!this.$target)\n            return 0;\n        const scrollOffset = this.horizontal ? RTLUtils.normalizeScrollLeft(this.$target) : this.$target.scrollTop;\n        return this.scrollableSize ? (scrollOffset / this.scrollableSize) : 0;\n    }\n    set position(position) {\n        this.scrollTargetTo(this.scrollableSize * this.normalizePosition(position));\n        this.update();\n    }\n    /** Normalizes position value (between 0.0 and 1.0) */\n    normalizePosition(position) {\n        const relativePosition = Math.min(1, Math.max(0, position));\n        if (!RTLUtils.isRtl(this.$target) || !this.horizontal)\n            return relativePosition;\n        return RTLUtils.scrollType === 'negative' ? (relativePosition - 1) : (1 - relativePosition);\n    }\n    /** Scrolls target element to passed position */\n    scrollTargetTo(pos) {\n        if (!this.$target)\n            return;\n        this.$target.scrollTo({\n            [this.horizontal ? 'left' : 'top']: pos,\n            behavior: this.dragging ? 'auto' : 'smooth'\n        });\n    }\n    /** Updates thumb size and position */\n    update() {\n        this.$$fire('esl:change:scroll', { bubbles: false });\n        if (!this.$scrollbarThumb || !this.$scrollbarTrack)\n            return;\n        const thumbSize = this.trackOffset * this.thumbSize;\n        const thumbPosition = (this.trackOffset - thumbSize) * this.position;\n        const style = {\n            [this.horizontal ? 'left' : 'top']: `${thumbPosition}px`,\n            [this.horizontal ? 'width' : 'height']: `${thumbSize}px`\n        };\n        Object.assign(this.$scrollbarThumb.style, style);\n    }\n    /** Updates auxiliary markers */\n    updateMarkers() {\n        const { position, thumbSize } = this;\n        this.toggleAttribute('at-start', thumbSize < 1 && position <= 0);\n        this.toggleAttribute('at-end', thumbSize < 1 && position >= 1);\n        this.toggleAttribute('inactive', thumbSize >= 1);\n    }\n    /** Refreshes scroll state and position */\n    refresh() {\n        this.update();\n        this.updateMarkers();\n    }\n    /** Returns position from MouseEvent coordinates (not normalized) */\n    toPosition(event) {\n        const { horizontal, thumbOffset, trackOffset } = this;\n        const point = getTouchPoint(event);\n        const offset = getOffsetPoint(this.$scrollbarTrack);\n        const pointPosition = horizontal ? point.x - offset.x : point.y - offset.y;\n        const freeTrackArea = trackOffset - thumbOffset; // size of free track px\n        const clickPositionNoOffset = pointPosition - thumbOffset / 2;\n        return clickPositionNoOffset / freeTrackArea;\n    }\n    // Event listeners\n    /** Handles `mousedown` / `touchstart` event to manage thumb drag start and scroll clicks */\n    _onPointerDown(event) {\n        this._initialPosition = this.position;\n        this._pointerPosition = this.toPosition(event);\n        const point = getTouchPoint(event);\n        this._initialMousePosition = this.horizontal ? point.x : point.y;\n        if (event.target === this.$scrollbarThumb) {\n            this._onThumbPointerDown(event); // Drag start handler\n        }\n        else {\n            this._onPointerDownTick(true); // Continuous scroll and click handler\n        }\n        // Subscribes inverse handlers\n        isMouseEvent(event) && this.$$on({ event: 'mouseup', target: window }, this._onPointerUp);\n        isTouchEvent(event) && this.$$on({ event: 'touchend', target: window }, this._onPointerUp);\n        // Prevents default text selection, etc.\n        if (!isTouchEvent(event))\n            event.preventDefault();\n    }\n    /** Handles a scroll click / continuous scroll*/\n    _onPointerDownTick(first) {\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        const position = this.position;\n        const allowedOffset = (first ? 1 : 1.5) * this.thumbSize;\n        this.position = Math.min(position + allowedOffset, Math.max(position - allowedOffset, this._pointerPosition));\n        if (this.position === this._pointerPosition || this.noContinuousScroll)\n            return;\n        this._scrollTimer = window.setTimeout(this._onPointerDownTick, 400);\n    }\n    /** Handles thumb drag start */\n    _onThumbPointerDown(event) {\n        var _a;\n        this.toggleAttribute('dragging', true);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.setProperty('scroll-behavior', 'auto');\n        // Attaches drag listeners\n        this.$$on(this._onBodyClick);\n        isMouseEvent(event) && this.$$on({ event: 'mousemove', target: window }, this._onPointerMove);\n        isTouchEvent(event) && this.$$on({ event: 'touchmove', target: window }, this._onPointerMove);\n    }\n    /** Sets position on drag */\n    _onPointerDrag(event) {\n        const point = getTouchPoint(event);\n        const mousePosition = this.horizontal ? point.x : point.y;\n        const positionChange = mousePosition - this._initialMousePosition;\n        const scrollableAreaHeight = this.trackOffset - this.thumbOffset;\n        const absChange = scrollableAreaHeight ? (positionChange / scrollableAreaHeight) : 0;\n        this.position = this._initialPosition + absChange;\n        this.updateMarkers();\n    }\n    /** `mousemove` document handler for thumb drag event. Active only if drag action is active */\n    _onPointerMove(event) {\n        if (!this.dragging)\n            return;\n        // Request position update\n        this._deferredDrag(event);\n        // Prevents default text selection, etc.\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    /** `mouseup` short-time document handler for drag end action */\n    _onPointerUp(event) {\n        var _a;\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        this.toggleAttribute('dragging', false);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.removeProperty('scroll-behavior');\n        // Unbinds drag listeners\n        this.$$off(this._onPointerMove);\n        this.$$off(this._onPointerUp);\n    }\n    /** Body `click` short-time handler to prevent clicks event on thumb drag. Handles capture phase */\n    _onBodyClick(event) {\n        event.stopImmediatePropagation();\n    }\n    /**\n     * Handler for refresh event\n     * @param event - instance of 'esl:refresh' event.\n     */\n    _onRefresh(event) {\n        if (!(event.target instanceof Element))\n            return;\n        if (!isRelativeNode(event.target.parentNode, this.$target))\n            return;\n        this._deferredRefresh();\n    }\n    /**\n     * Handler for scroll and resize events\n     * @param event - instance of 'resize' or 'scroll' event\n     */\n    _onScrollOrResize(event) {\n        if (event.type === 'scroll' && this.dragging)\n            return;\n        this._deferredRefresh();\n    }\n};\nESLScrollbar.is = 'esl-scrollbar';\nESLScrollbar.observedAttributes = ['target', 'horizontal'];\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"horizontal\", void 0);\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"noContinuousScroll\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLScrollbar.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-thumb' })\n], ESLScrollbar.prototype, \"thumbClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-track' })\n], ESLScrollbar.prototype, \"trackClass\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"dragging\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"inactive\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atStart\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atEnd\", void 0);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"disconnectedCallback\", null);\n__decorate([\n    listen('mousedown touchstart')\n], ESLScrollbar.prototype, \"_onPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDownTick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onThumbPointerDown\", null);\n__decorate([\n    listen({ auto: false, event: 'click', target: window, once: true, capture: true })\n], ESLScrollbar.prototype, \"_onBodyClick\", null);\n__decorate([\n    listen({\n        event: (el) => el.REFRESH_EVENT,\n        target: window\n    })\n], ESLScrollbar.prototype, \"_onRefresh\", null);\nESLScrollbar = __decorate([\n    ExportNs('Scrollbar')\n], ESLScrollbar);\nexport { ESLScrollbar };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLSelectItem_1;\nimport { ESLBaseElement } from '../../../esl-base-element/core';\nimport { attr, boolAttr } from '../../../esl-utils/decorators';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\n/**\n * ESLSelectItem component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectItem - inner component to render an option\n */\nlet ESLSelectItem = ESLSelectItem_1 = class ESLSelectItem extends ESLBaseElement {\n    connectedCallback() {\n        super.connectedCallback();\n        this.tabIndex = 0;\n        this.setAttribute('role', 'checkbox');\n        this.setAttribute('aria-selected', String(this.selected));\n    }\n    attributeChangedCallback(attrName) {\n        if (attrName === 'selected') {\n            this.setAttribute('aria-selected', String(this.selected));\n        }\n        if (attrName === 'disabled') {\n            this.setAttribute('aria-disabled', String(this.disabled));\n        }\n    }\n    update(option) {\n        if (option)\n            this.original = option;\n        this.value = this.original.value;\n        this.disabled = this.original.disabled;\n        this.selected = this.original.selected;\n        this.textContent = this.original.text;\n    }\n    /** Helper to create an option item */\n    static build(option) {\n        const item = document.createElement(ESLSelectItem_1.is);\n        item.update(option);\n        return item;\n    }\n};\nESLSelectItem.is = 'esl-select-item';\nESLSelectItem.observedAttributes = ['selected', 'disabled'];\n__decorate([\n    attr()\n], ESLSelectItem.prototype, \"value\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectItem.prototype, \"selected\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectItem.prototype, \"disabled\", void 0);\nESLSelectItem = ESLSelectItem_1 = __decorate([\n    ExportNs('SelectItem')\n], ESLSelectItem);\nexport { ESLSelectItem };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { bind, attr, boolAttr, listen } from '../../../esl-utils/decorators';\nimport { ARROW_DOWN, ARROW_UP, ENTER, SPACE } from '../../../esl-utils/dom/keys';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { ESLScrollbar } from '../../../esl-scrollbar/core';\nimport { ESLSelectItem } from './esl-select-item';\nimport { ESLSelectWrapper } from './esl-select-wrapper';\n/**\n * ESLSelectList component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectList is a component to show selectable list of items. Decorates native HTMLSelectElement\n */\nlet ESLSelectList = class ESLSelectList extends ESLSelectWrapper {\n    static register() {\n        ESLSelectItem.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this.$list = document.createElement('div');\n        this.$list.setAttribute('role', 'list');\n        this.$list.classList.add('esl-scrollable-content');\n        this.$list.classList.add('esl-select-list-container');\n        this.$scroll = document.createElement(ESLScrollbar.is);\n        this.$scroll.target = '::prev';\n        this.$selectAll = document.createElement(ESLSelectItem.is);\n        this.$selectAll.classList.add('esl-select-all-item');\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        if (attrName === 'select-all-label') {\n            this.$selectAll.textContent = newVal;\n        }\n        if (attrName === 'disabled') {\n            this._updateDisabled();\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$selectAll);\n        this.appendChild(this.$list);\n        this.appendChild(this.$scroll);\n        this.bindSelect();\n        this._updateDisabled();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.appendChild(this.$selectAll);\n        this.appendChild(this.$list);\n        this.appendChild(this.$scroll);\n    }\n    bindSelect() {\n        const target = this.querySelector('[esl-select-target]');\n        if (!target || !(target instanceof HTMLSelectElement))\n            return;\n        this.$select = target;\n    }\n    _renderItems() {\n        if (!this.$select)\n            return;\n        this.$list.innerHTML = '';\n        this.$items = this.options.map(ESLSelectItem.build);\n        if (this.pinSelected) {\n            this._renderGroup(this.$items.filter((option) => option.selected));\n            this._renderGroup(this.$items.filter((option) => !option.selected));\n        }\n        else {\n            this._renderGroup(this.$items);\n        }\n        this.toggleAttribute('multiple', this.multiple);\n    }\n    _renderGroup(items) {\n        items.forEach((item) => this.$list.appendChild(item));\n        const [last] = items.slice(-1);\n        last && last.classList.add('last-in-group');\n    }\n    _updateSelectAll() {\n        if (!this.multiple) {\n            this.$selectAll.removeAttribute('tabindex');\n            return;\n        }\n        this.$selectAll.tabIndex = 0;\n        this.$selectAll.selected = this.isAllSelected();\n        this.$selectAll.textContent = this.selectAllLabel;\n    }\n    _updateDisabled() {\n        this.setAttribute('aria-disabled', String(this.disabled));\n        if (!this.$select)\n            return;\n        this.$select.disabled = this.disabled;\n    }\n    _onTargetChange(newTarget, oldTarget) {\n        super._onTargetChange(newTarget, oldTarget);\n        this._updateSelectAll();\n        this._renderItems();\n    }\n    _onChange() {\n        this._updateSelectAll();\n        this.$items.forEach((item) => item.update());\n    }\n    _onListChange() {\n        this._renderItems();\n    }\n    _onClick(e) {\n        if (this.disabled)\n            return;\n        const target = e.target;\n        if (!target || !(target instanceof ESLSelectItem))\n            return;\n        if (target.classList.contains('esl-select-all-item')) {\n            this.setAllSelected(!target.selected);\n        }\n        else {\n            this.setSelected(target.value, !target.selected);\n        }\n    }\n    _onKeydown(e) {\n        if ([ENTER, SPACE].includes(e.key)) {\n            this._onClick(e);\n            e.preventDefault();\n        }\n        if ([ARROW_UP, ARROW_DOWN].includes(e.key)) {\n            const index = this.$items.indexOf(document.activeElement);\n            const count = this.$items.length;\n            const increment = e.key === ARROW_UP ? -1 : 1;\n            if (index === -1)\n                return;\n            this.$items[(index + increment + count) % count].focus();\n            e.preventDefault();\n        }\n    }\n};\nESLSelectList.is = 'esl-select-list';\nESLSelectList.observedAttributes = ['select-all-label', 'disabled'];\n__decorate([\n    attr({ defaultValue: 'Select All' })\n], ESLSelectList.prototype, \"selectAllLabel\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectList.prototype, \"disabled\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectList.prototype, \"pinSelected\", void 0);\n__decorate([\n    bind\n], ESLSelectList.prototype, \"_onTargetChange\", null);\n__decorate([\n    listen({ inherit: true })\n], ESLSelectList.prototype, \"_onChange\", null);\n__decorate([\n    bind\n], ESLSelectList.prototype, \"_onListChange\", null);\n__decorate([\n    listen('click')\n], ESLSelectList.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLSelectList.prototype, \"_onKeydown\", null);\nESLSelectList = __decorate([\n    ExportNs('SelectList')\n], ESLSelectList);\nexport { ESLSelectList };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLToggleable } from '../../../esl-toggleable/core/esl-toggleable';\nimport { bind, prop, listen } from '../../../esl-utils/decorators';\nimport { TAB } from '../../../esl-utils/dom/keys';\nimport { rafDecorator } from '../../../esl-utils/async/raf';\nimport { ESLSelectList } from '../../esl-select-list/core';\n/**\n * ESLSelectDropdown component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom component to render {@link ESLSelect} dropdown section\n * Uses {@link ESLSelectList} to render the content\n */\nexport class ESLSelectDropdown extends ESLToggleable {\n    static register() {\n        ESLSelectList.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this._deferredUpdatePosition = rafDecorator(() => this.updatePosition());\n        this.closeOnEsc = true;\n        this.closeOnOutsideAction = true;\n        this.$list = document.createElement(ESLSelectList.is);\n    }\n    setInitialState() { }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$list);\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeChild(this.$list);\n    }\n    onShow(params) {\n        document.body.appendChild(this);\n        this._disposeTimeout && window.clearTimeout(this._disposeTimeout);\n        this.$$cls(this.$owner.dropdownClass, true);\n        this.$list.pinSelected = this.$owner.pinSelected;\n        this.$list.selectAllLabel = this.$owner.selectAllLabel;\n        this.$list.$select = this.$owner.$select;\n        super.onShow(params);\n        const focusable = this.querySelector('[tabindex]');\n        focusable === null || focusable === void 0 ? void 0 : focusable.focus({ preventScroll: true });\n        this.updatePosition();\n    }\n    onHide(params) {\n        const select = this.activator;\n        super.onHide(params);\n        this._disposeTimeout = window.setTimeout(() => {\n            if (this.parentNode !== document.body)\n                return;\n            document.body.removeChild(this);\n        }, 1000);\n        select && setTimeout(() => select.focus({ preventScroll: true }), 0);\n    }\n    _onKeyboardEvent(e) {\n        super._onKeyboardEvent(e);\n        if (e.key === TAB)\n            this._onTabKey(e);\n    }\n    _onTabKey(e) {\n        const els = this.querySelectorAll('[tabindex]');\n        const first = els[0];\n        const last = els[els.length - 1];\n        if (first && e.target === last && !e.shiftKey)\n            first.focus();\n        if (last && e.target === first && e.shiftKey)\n            last.focus();\n    }\n    _onResize() {\n        if (!this.activator)\n            return;\n        this._deferredUpdatePosition();\n    }\n    updatePosition() {\n        if (!this.activator)\n            return;\n        const windowY = window.scrollY || window.pageYOffset;\n        const rect = this.activator.getBoundingClientRect();\n        this.style.top = `${windowY + rect.top + rect.height}px`;\n        this.style.left = `${rect.left}px`;\n        this.style.width = `${rect.width}px`;\n    }\n}\nESLSelectDropdown.is = 'esl-select-dropdown';\n__decorate([\n    prop()\n], ESLSelectDropdown.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    prop()\n], ESLSelectDropdown.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    listen('keydown')\n], ESLSelectDropdown.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    listen({ event: 'resize', target: window })\n], ESLSelectDropdown.prototype, \"_onResize\", null);\n__decorate([\n    bind\n], ESLSelectDropdown.prototype, \"updatePosition\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { attr, boolAttr, listen } from '../../../esl-utils/decorators';\nimport { CSSClassUtils } from '../../../esl-utils/dom/class';\nimport { ENTER, SPACE } from '../../../esl-utils/dom/keys';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { ESLEventUtils } from '../../../esl-utils/dom/events';\nimport { ESLSelectWrapper } from '../../esl-select-list/core/esl-select-wrapper';\nimport { ESLSelectRenderer } from './esl-select-renderer';\nimport { ESLSelectDropdown } from './esl-select-dropdown';\n/**\n * ESLSelect component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelect is a component on top of native select that brings more customization features.\n * Uses \"select with dropdown\" view. Supports both single and multiple selection.\n */\nlet ESLSelect = class ESLSelect extends ESLSelectWrapper {\n    static register() {\n        ESLSelectDropdown.register();\n        ESLSelectRenderer.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this.$renderer = document.createElement(ESLSelectRenderer.is);\n        this.$dropdown = document.createElement(ESLSelectDropdown.is);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (attrName === 'disabled')\n            this._updateDisabled();\n        if (attrName === 'dropdown-class') {\n            this.$dropdown.$$cls(oldVal, false);\n            this.$dropdown.$$cls(newVal, true);\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.$select = this.querySelector('[esl-select-target]');\n        if (!this.$select)\n            return;\n        this._prepare();\n        this._updateDisabled();\n        this._updateMarkers();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._dispose();\n    }\n    /** Catches the focus */\n    focus(options) {\n        this.$select.focus(options);\n    }\n    /** Updates select component */\n    update(valueChanged = true) {\n        this._updateMarkers();\n        if (!valueChanged)\n            return;\n        // TODO: silent updates\n        ESLEventUtils.dispatch(this, 'esl:change:value', { detail: { event: null } });\n    }\n    _prepare() {\n        this.$renderer.className = this.$select.className;\n        this.$renderer.emptyText = this.placeholder;\n        this.$renderer.moreLabelFormat = this.moreLabelFormat;\n        this.$dropdown.$owner = this;\n        this.appendChild(this.$renderer);\n    }\n    _dispose() {\n        this.$select.className = this.$renderer.className;\n        this.removeChild(this.$renderer);\n    }\n    _updateMarkers() {\n        const hasValue = this.hasSelected();\n        this.toggleAttribute('has-value', hasValue);\n        CSSClassUtils.toggle(this, this.hasValueClass, hasValue);\n        const focusEl = document.activeElement;\n        const hasFocus = this.open || (focusEl && this.contains(focusEl));\n        CSSClassUtils.toggle(this, this.hasFocusClass, !!hasFocus);\n    }\n    _updateDisabled() {\n        this.setAttribute('aria-disabled', String(this.disabled));\n        if (!this.$select)\n            return;\n        this.$select.disabled = this.disabled;\n        if (this.disabled && this.open)\n            this.$dropdown.hide();\n    }\n    _onChange(event) {\n        this._updateMarkers();\n        ESLEventUtils.dispatch(this, 'esl:change:value', { detail: { event } });\n    }\n    _onFocusOut() {\n        this._updateMarkers();\n    }\n    _onClick() {\n        if (this.disabled)\n            return;\n        this.$dropdown.toggle(!this.$dropdown.open, {\n            activator: this,\n            initiator: 'select'\n        });\n    }\n    _onKeydown(e) {\n        if ([ENTER, SPACE].includes(e.key)) {\n            this.click();\n            e.preventDefault();\n        }\n    }\n    _onPopupStateChange(e) {\n        this.open = this.$dropdown.open;\n        this._updateMarkers();\n    }\n};\nESLSelect.is = 'esl-select';\nESLSelect.observedAttributes = ['disabled', 'dropdown-class'];\n__decorate([\n    attr()\n], ESLSelect.prototype, \"placeholder\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"hasValueClass\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"hasFocusClass\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"dropdownClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'Select All' })\n], ESLSelect.prototype, \"selectAllLabel\", void 0);\n__decorate([\n    attr({ defaultValue: '+ {rest} more...' })\n], ESLSelect.prototype, \"moreLabelFormat\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"open\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"disabled\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"pinSelected\", void 0);\n__decorate([\n    listen({ inherit: true })\n], ESLSelect.prototype, \"_onChange\", null);\n__decorate([\n    listen('focusout')\n], ESLSelect.prototype, \"_onFocusOut\", null);\n__decorate([\n    listen('click')\n], ESLSelect.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLSelect.prototype, \"_onKeydown\", null);\n__decorate([\n    listen({\n        event: 'esl:show esl:hide',\n        target: (el) => el.$dropdown\n    })\n], ESLSelect.prototype, \"_onPopupStateChange\", null);\nESLSelect = __decorate([\n    ExportNs('Select')\n], ESLSelect);\nexport { ESLSelect };\n","import { isObject } from './types';\nexport function deepMerge(...objects) {\n    return objects.reduce((res, obj) => {\n        if (typeof obj === 'undefined')\n            return res;\n        if (typeof res === 'undefined')\n            res = Array.isArray(obj) ? [] : {};\n        if (!isObject(obj) || !isObject(res))\n            return obj;\n        Object.keys(obj).forEach((key) => {\n            res[key] = isObject(obj[key]) ? deepMerge(res[key], obj[key]) : obj[key];\n        });\n        return res;\n    }, undefined);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenDPR_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\n/**\n * DPR preprocessor. Used to replace DPR shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenDPR = ESLScreenDPR_1 = class ESLScreenDPR {\n    static toDPI(dpr) {\n        return (96 * dpr).toFixed(1);\n    }\n    static process(match) {\n        if (!ESLScreenDPR_1.VALUE_REGEXP.test(match))\n            return;\n        const dpr = parseFloat(match);\n        if (dpr < 0 || isNaN(dpr))\n            return;\n        if (ESLScreenDPR_1.ignoreBotsDpr && DeviceDetector.isBot && dpr > 1)\n            return 'not all';\n        if (DeviceDetector.isSafari)\n            return `(-webkit-min-device-pixel-ratio: ${dpr})`;\n        return `(min-resolution: ${ESLScreenDPR_1.toDPI(dpr)}dpi)`;\n    }\n};\nESLScreenDPR.VALUE_REGEXP = /(\\d(\\.\\d)?)x/;\n/** Option to exclude dpr greater then 2 for bots */\nESLScreenDPR.ignoreBotsDpr = false;\nESLScreenDPR = ESLScreenDPR_1 = __decorate([\n    ExportNs('ScreenDPR')\n], ESLScreenDPR);\nexport { ESLScreenDPR };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenBreakpoints_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst registry = new Map();\n/**\n * ESL Screen Breakpoints registry\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Screen Breakpoint registry is used to provide custom breakpoints for {@link ESLMediaQuery}\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenBreakpoints = ESLScreenBreakpoints_1 = class ESLScreenBreakpoints {\n    /**\n     * Add or replace breakpoint shortcut that can be used inside ESLMediaQuery\n     * @param name - name of shortcut\n     * @param minWidth - min width for breakpoint\n     * @param maxWidth - max width for breakpoint\n     */\n    static add(name, minWidth, maxWidth) {\n        name = name.toLowerCase();\n        if (ESLScreenBreakpoints_1.BP_NAME_REGEXP.test(name)) {\n            const current = registry.get(name);\n            registry.set(name, new ESLScreenBreakpoint(name, minWidth, maxWidth));\n            return current;\n        }\n        throw new Error('The shortcut should consist only of Latin characters and be at least one character long.');\n    }\n    /** Removes screen breakpoint */\n    static remove(name) {\n        return registry.delete(name.toLowerCase());\n    }\n    /** @returns known breakpoint shortcut instance */\n    static get(name) {\n        return registry.get((name || '').toLowerCase());\n    }\n    /** All available breakpoints names */\n    static get names() {\n        const keys = [];\n        registry.forEach((value, key) => keys.push(key));\n        return keys;\n    }\n    /** @returns breakpoints shortcut replacement */\n    static process(term) {\n        const [, sign, bp] = term.match(ESLScreenBreakpoints_1.BP_REGEXP) || [];\n        const shortcut = ESLScreenBreakpoints_1.get(bp);\n        if (!shortcut)\n            return;\n        if (sign === '+')\n            return shortcut.mediaQueryGE;\n        if (sign === '-')\n            return shortcut.mediaQueryLE;\n        return shortcut.mediaQuery;\n    }\n};\nESLScreenBreakpoints.BP_REGEXP = /^([+-]?)([a-z]+)/i;\nESLScreenBreakpoints.BP_NAME_REGEXP = /^[a-z]+/i;\nESLScreenBreakpoints = ESLScreenBreakpoints_1 = __decorate([\n    ExportNs('ScreenBreakpoints')\n], ESLScreenBreakpoints);\nexport { ESLScreenBreakpoints };\n/** ESL Screen Breakpoint description */\nexport class ESLScreenBreakpoint {\n    constructor(name, min, max) {\n        this.name = name;\n        this.min = min;\n        this.max = max;\n    }\n    get mediaQuery() {\n        return `(min-width: ${this.min}px) and (max-width: ${this.max}px)`;\n    }\n    get mediaQueryGE() {\n        return `(min-width: ${this.min}px)`;\n    }\n    get mediaQueryLE() {\n        return `(max-width: ${this.max}px)`;\n    }\n    toString() {\n        return `[${this.name}]: ${this.min} to ${this.max}`;\n    }\n}\n// Defaults\nESLScreenBreakpoints.add('xs', 1, 767);\nESLScreenBreakpoints.add('sm', 768, 991);\nESLScreenBreakpoints.add('md', 992, 1199);\nESLScreenBreakpoints.add('lg', 1200, 1599);\nESLScreenBreakpoints.add('xl', 1600, 999999);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst shortcuts = new Map();\n/**\n * Static shortcuts preprocessor. Used to store device related shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLEnvShortcuts = class ESLEnvShortcuts {\n    /**\n     * Add mapping\n     * @param shortcut - term to find in query\n     * @param value - media query string or boolean result (that represents `all` or `not all` conditions)\n     */\n    static add(shortcut, value) {\n        if (!['boolean', 'string'].includes(typeof value))\n            value = false;\n        shortcuts.set(shortcut.toLowerCase(), value);\n    }\n    /** Remove mapping for passed shortcut term */\n    static remove(shortcut) {\n        return shortcuts.delete(shortcut.toLowerCase());\n    }\n    /** Replaces shortcut to registered result */\n    static process(match) {\n        if (shortcuts.has(match))\n            return shortcuts.get(match);\n    }\n};\n// For debug purposes\nESLEnvShortcuts._shortcuts = shortcuts;\nESLEnvShortcuts = __decorate([\n    ExportNs('EnvShortcuts')\n], ESLEnvShortcuts);\nexport { ESLEnvShortcuts };\n// Touch check\nESLEnvShortcuts.add('touch', DeviceDetector.isTouchDevice);\n// Basic device type shortcuts\nESLEnvShortcuts.add('bot', DeviceDetector.isBot);\nESLEnvShortcuts.add('mobile', DeviceDetector.isMobile);\nESLEnvShortcuts.add('desktop', !DeviceDetector.isMobile);\nESLEnvShortcuts.add('android', DeviceDetector.isAndroid);\nESLEnvShortcuts.add('ios', DeviceDetector.isMobileIOS);\n// Basic browser shortcuts\nESLEnvShortcuts.add('ie', DeviceDetector.isIE);\nESLEnvShortcuts.add('edge', DeviceDetector.isEdgeHTML);\nESLEnvShortcuts.add('gecko', DeviceDetector.isGecko);\nESLEnvShortcuts.add('webkit', DeviceDetector.isWebkit);\nESLEnvShortcuts.add('blink', DeviceDetector.isBlink);\nESLEnvShortcuts.add('safari', DeviceDetector.isSafari);\nESLEnvShortcuts.add('safari-ios', DeviceDetector.isMobileSafari);\n","/**\n * Const media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Ignores listeners always return the same result.\n * Have only two instances: {@link ALL} and {@link NOT_ALL}\n */\nclass MediaQueryConstCondition {\n    constructor(_matches) {\n        this._matches = _matches;\n    }\n    get matches() {\n        return this._matches;\n    }\n    addListener() { }\n    addEventListener() { }\n    removeListener() { }\n    removeEventListener() { }\n    dispatchEvent() {\n        return false;\n    }\n    optimize() {\n        return this;\n    }\n    toString() {\n        return this._matches ? 'all' : 'not all';\n    }\n    /** Compares const media condition with the passed query instance or string */\n    eq(val) {\n        return String(val).trim() === this.toString();\n    }\n}\nexport const ALL = new MediaQueryConstCondition(true);\nexport const NOT_ALL = new MediaQueryConstCondition(false);\n","/** Custom event dispatched by {@link ESLMediaQuery} instances */\nexport class ESLMediaChangeEvent extends Event {\n    constructor(matches) {\n        super('change');\n        this.matches = matches;\n    }\n    /** Returns serialized value of the current {@link ESLMediaQuery} */\n    get media() {\n        return String(this.target);\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ALL, NOT_ALL } from './media-query-const';\nimport { ESLMediaChangeEvent } from './media-query-base';\n/**\n * Simple media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Wraps matchMedia instance\n */\nexport class MediaQueryCondition extends SyntheticEventTarget {\n    constructor(query, inverted = false) {\n        super();\n        this._inverted = inverted;\n        this._mq = matchMedia(query.trim() || 'all');\n        this._onChange = this._onChange.bind(this);\n    }\n    get matches() {\n        return this._inverted ? !this._mq.matches : this._mq.matches;\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.hasEventListener(1))\n            return;\n        if (typeof this._mq.addEventListener === 'function') {\n            this._mq.addEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.addListener(this._onChange);\n        }\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        if (typeof this._mq.removeEventListener === 'function') {\n            this._mq.removeEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.removeListener(this._onChange);\n        }\n    }\n    /** Optimize query. Can simplify query to {@link MediaQueryConstCondition} */\n    optimize() {\n        if (ALL.eq(this))\n            return this._inverted ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(this))\n            return this._inverted ? ALL : NOT_ALL;\n        return this;\n    }\n    toString() {\n        const query = this._mq.media;\n        const inverted = this._inverted;\n        const complex = inverted && /\\)[\\s\\w]+\\(/.test(query);\n        return (inverted ? 'not ' : '') + (complex ? `(${query})` : query);\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        this.dispatchEvent(new ESLMediaChangeEvent(this._mq.matches));\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ESLMediaChangeEvent } from './media-query-base';\nimport { ALL, NOT_ALL } from './media-query-const';\n/**\n * Abstract multiple media conditions container\n * @author Alexey Stsefanovich (ala'n)\n *\n * Observe all child items. Dispatch changes when the whole condition result is changed\n */\nclass MediaQueryContainer extends SyntheticEventTarget {\n    constructor(items = []) {\n        super();\n        this.items = items;\n        this._matches = this.matches;\n        this._onChange = this._onChange.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.hasEventListener(1))\n            return;\n        this.items.forEach((item) => item.addEventListener('change', this._onChange));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        this.items.forEach((item) => item.removeEventListener('change', this._onChange));\n    }\n    optimize() {\n        return this;\n    }\n    get matches() {\n        return false;\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        const { matches } = this;\n        if (this._matches === matches)\n            return;\n        this.dispatchEvent(new ESLMediaChangeEvent(this._matches = matches));\n    }\n}\n/** Conjunction (AND) group of media conditions */\nexport class MediaQueryConjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.every((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => NOT_ALL.eq(item)))\n            return NOT_ALL;\n        const items = optimizedItems.filter((item) => !ALL.eq(item));\n        if (items.length === 0)\n            return ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryConjunction(items);\n    }\n    toString() {\n        return this.items.join(' and ');\n    }\n}\n/** Disjunction (OR) group of media conditions */\nexport class MediaQueryDisjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.some((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => ALL.eq(item)))\n            return ALL;\n        const items = optimizedItems.filter((item) => !NOT_ALL.eq(item));\n        if (items.length === 0)\n            return NOT_ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryDisjunction(items);\n    }\n    toString(pretty = false) {\n        return this.items.join(pretty ? ' or ' : ', ');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaQuery_1;\nimport { memoize } from '../../esl-utils/decorators';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLScreenDPR } from './common/screen-dpr';\nimport { ESLScreenBreakpoints } from './common/screen-breakpoint';\nimport { ESLEnvShortcuts } from './common/env-shortcuts';\nimport { ALL, NOT_ALL } from './conditions/media-query-const';\nimport { MediaQueryCondition } from './conditions/media-query-condition';\nimport { MediaQueryConjunction, MediaQueryDisjunction } from './conditions/media-query-containers';\n/**\n * ESL Media Query\n * @implements EventTarget\n * Provides special media condition syntax - ESLMediaQuery\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n *\n * Utility to support extended MediaQuery features\n * Supports\n * - CSS MediaQuery matching check\n * - DPR display queries (`@x1|@x2|@x3`)\n * - Registered screen default sizes (breakpoints) shortcuts (`@[-|+](XS|SM|MD|LG|XL)`)\n * - Device and browser shortcuts (`@MOBILE|@DESKTOP|@IE`)\n * - Custom static shortcuts and custom query preprocessors\n * - `not` logic operation (can have multiple not operators before any term of the query)\n * - `or` or `,` logical operator (have a lowest priority)\n * - Query matching change listeners\n * - Implements {@link EventTarget}, compatible with {@link ESLEventListener}\n *\n * Building query process:\n *\n * [Building query logical tree] - [preprocess nodes queries] - [building native MediaQueryList nodes] - [query tree optimization]\n */\nlet ESLMediaQuery = ESLMediaQuery_1 = class ESLMediaQuery {\n    /** Adds {@link IMediaQueryPreprocessor} instance for query preprocessing step */\n    static use(preprocessor) {\n        this._preprocessors.unshift(preprocessor);\n        return this;\n    }\n    /** Cached method to create {@link ESLMediaQuery} condition instance from query string */\n    static for(query) {\n        return ESLMediaQuery_1.from(query);\n    }\n    /** Creates {@link ESLMediaQuery} condition instance from query string */\n    static from(query) {\n        const conjunctions = query.split(/\\sor\\s|,/).map((term) => {\n            const conditions = term.split(/\\sand\\s/).map(ESLMediaQuery_1.parseSimpleQuery);\n            return new MediaQueryConjunction(conditions);\n        });\n        return new MediaQueryDisjunction(conjunctions).optimize();\n    }\n    /** Preprocess simple query term by applying replacers and shortcuts rules */\n    static preprocess(term) {\n        if (!this.SHORTCUT_PATTERN.test(term))\n            return term;\n        const shortcut = term.trim().substring(1).toLowerCase();\n        for (const replacer of this._preprocessors) {\n            const result = replacer.process(shortcut);\n            if (typeof result === 'string')\n                return result;\n            if (typeof result === 'boolean')\n                return result ? 'all' : 'not all';\n        }\n        return term;\n    }\n    /** Creates simple {@link ESLMediaQuery} condition */\n    static parseSimpleQuery(term) {\n        const query = term.replace(/^\\s*not\\s+/, '');\n        const queryInverted = query !== term;\n        const processedQuery = ESLMediaQuery_1.preprocess(query);\n        const sanitizedQuery = processedQuery.replace(/^\\s*not\\s+/, '');\n        const resultInverted = processedQuery !== sanitizedQuery;\n        const invert = queryInverted !== resultInverted;\n        if (ALL.eq(sanitizedQuery))\n            return invert ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(sanitizedQuery))\n            return invert ? ALL : NOT_ALL;\n        return new MediaQueryCondition(sanitizedQuery, invert);\n    }\n};\n/** Always true condition */\nESLMediaQuery.ALL = ALL;\n/** Always false condition */\nESLMediaQuery.NOT_ALL = NOT_ALL;\nESLMediaQuery.SHORTCUT_PATTERN = /@([a-z0-9.+-]+)/i;\nESLMediaQuery._preprocessors = [];\n__decorate([\n    memoize()\n], ESLMediaQuery, \"for\", null);\nESLMediaQuery = ESLMediaQuery_1 = __decorate([\n    ExportNs('MediaQuery')\n], ESLMediaQuery);\nexport { ESLMediaQuery };\n// Register otb preprocessors\nESLMediaQuery.use(ESLScreenDPR);\nESLMediaQuery.use(ESLScreenBreakpoints);\nESLMediaQuery.use(ESLEnvShortcuts);\n","import { ESLMediaQuery } from './esl-media-query';\n/**\n * ESL Media Rule\n * @author Yuliya Adamskaya\n *\n * Helper class to wrap {@link ESLMediaQuery} with the payload value\n * @see ESLMediaQuery\n * @see ESLMediaRuleList\n */\nexport class ESLMediaRule {\n    constructor(payload, query = '') {\n        this.query = ESLMediaQuery.for(query);\n        this.payload = payload;\n    }\n    /** @returns if the inner {@link ESLMediaQuery} is matching current device configuration */\n    get matches() {\n        return this.query.matches;\n    }\n    addEventListener(type, callback = type) {\n        this.query.addEventListener(callback);\n    }\n    removeEventListener(type, callback = type) {\n        this.query.removeEventListener(callback);\n    }\n    toString() {\n        const val = typeof this.payload === 'object' ?\n            JSON.stringify(this.payload) :\n            String(this.payload);\n        return `${this.query} => ${val}`;\n    }\n    /**\n     * Creates the {@link ESLMediaRule} instance from payload string, query and valueParser.\n     * If the payload parse result is undefined then rule will be undefined.\n     */\n    static create(payload, query, parser) {\n        const payloadValue = parser(payload.trim());\n        if (typeof payloadValue === 'undefined')\n            return undefined;\n        return new ESLMediaRule(payloadValue, query.trim());\n    }\n    /** Parses the rule string to the {@link ESLMediaRule} instance */\n    static parse(lex, parser) {\n        const parts = lex.split('=>');\n        const query = parts.length === 2 ? parts[0] : '';\n        const payload = parts.length === 2 ? parts[1] : parts[0];\n        return ESLMediaRule.create(payload, query, parser);\n    }\n    /** Shortcut to create always active {@link ESLMediaRule} with passed value */\n    static all(payload) {\n        return new ESLMediaRule(payload, 'all');\n    }\n    /** Shortcut to create always inactive {@link ESLMediaRule} */\n    static empty() {\n        return new ESLMediaRule(undefined, 'all');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaRuleList_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { evaluate } from '../../esl-utils/misc/format';\nimport { deepMerge, isEqual } from '../../esl-utils/misc/object';\nimport { SyntheticEventTarget } from '../../esl-utils/dom/events';\nimport { ESLMediaRule } from './esl-media-rule';\n/** Custom event dispatched by {@link ESLMediaRuleList} instances */\nexport class ESLMediaRuleListEvent extends Event {\n    constructor(current, previous) {\n        super('change');\n        Object.assign(this, { current, previous });\n    }\n}\n/**\n * ESLMediaRuleList - {@link ESLMediaRule} observable collection\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Represents observable object that wraps environment to value mapping\n */\nlet ESLMediaRuleList = ESLMediaRuleList_1 = class ESLMediaRuleList extends SyntheticEventTarget {\n    static parse(query, ...common) {\n        const parser = typeof common[common.length - 1] === 'function' ? common.pop() : String;\n        const value = common.pop();\n        return typeof value === 'string' ?\n            ESLMediaRuleList_1.parseTuple(query, value, parser) :\n            ESLMediaRuleList_1.parseQuery(query, parser);\n    }\n    static parseQuery(query, parser = String) {\n        const rules = query.split('|')\n            .map((lex) => ESLMediaRule.parse(lex, parser))\n            .filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(rules);\n    }\n    static parseTuple(mask, values, parser = String) {\n        const queries = mask.split('|');\n        const valueList = values.split('|');\n        while (valueList.length < queries.length && valueList.length !== 0)\n            valueList.push(valueList[valueList.length - 1]);\n        if (valueList.length !== queries.length)\n            throw Error('Value doesn\\'t correspond to mask');\n        const rules = queries.map((query, i) => ESLMediaRule.create(valueList[i], query, parser));\n        const validRules = rules.filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(validRules);\n    }\n    constructor(rules) {\n        super();\n        this._rules = rules;\n        this._onMatchChanged = this._onMatchChanged.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.hasEventListener(1))\n            return;\n        this._value = this.computedValue;\n        this.rules.forEach((rule) => rule.addEventListener(this._onMatchChanged));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        delete this._value;\n        this.rules.forEach((rule) => rule.removeEventListener(this._onMatchChanged));\n    }\n    /** Array of {@link ESLMediaRule}s that forms the current {@link ESLMediaRuleList} */\n    get rules() {\n        return this._rules;\n    }\n    /** All active {@link ESLMediaRule}s */\n    get active() {\n        return this.rules.filter((rule) => rule.matches);\n    }\n    /** Value of the last of active rules */\n    get activeValue() {\n        var _a;\n        return (_a = this.active.pop()) === null || _a === void 0 ? void 0 : _a.payload;\n    }\n    /** All active rule values */\n    get activeValues() {\n        return this.active.map((rule) => rule.payload);\n    }\n    /**\n     * Current value of {@link ESLMediaRuleList} object\n     * Uses cache if current object is under observation\n     */\n    get value() {\n        if (!this.hasEventListener())\n            return this.computedValue;\n        return Object.hasOwnProperty.call(this, '_value') ? this._value : this.computedValue;\n    }\n    /** Always computed value of the current {@link ESLMediaRuleList} object */\n    get computedValue() {\n        return deepMerge(undefined, ...this.activeValues);\n    }\n    /** Handles inner rules state change */\n    _onMatchChanged() {\n        const curValue = this.value;\n        const newValue = this.computedValue;\n        if (isEqual(curValue, newValue))\n            return;\n        this._value = newValue;\n        this.dispatchEvent(new ESLMediaRuleListEvent(newValue, curValue));\n    }\n    /** @returns serialized {@link ESLMediaRuleList} object representation*/\n    toString() {\n        return this.rules.join('|');\n    }\n};\n/** String value parser (default) */\nESLMediaRuleList.STRING_PARSER = String;\n/** Object value parser. Uses {@link evaluate} to parse value */\nESLMediaRuleList.OBJECT_PARSER = (val) => evaluate(val);\nESLMediaRuleList = ESLMediaRuleList_1 = __decorate([\n    ExportNs('MediaRuleList')\n], ESLMediaRuleList);\nexport { ESLMediaRuleList };\n","import { DeviceDetector } from '../../esl-utils/environment/device-detector';\nlet iObserver;\n/** ESL Image lazy loading IntersectionObserver instance */\nexport function getIObserver() {\n    if (!iObserver) {\n        iObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(handleViewport);\n        }, {\n            threshold: [0.01],\n            rootMargin: DeviceDetector.isMobile ? '250px' : '500px' // rootMargin value for IntersectionObserver\n        });\n    }\n    return iObserver;\n}\nfunction handleViewport(entry) {\n    const image = entry.target;\n    // Check that entry is going to appear in the viewport area\n    if (entry.isIntersecting || entry.intersectionRatio > 0) {\n        image.triggerLoad();\n    }\n}\n","/** checks if the attribute is dangerous */\nconst isDangerousAttribute = (name, value) => {\n    const val = value.replace(/\\s+/g, '').toLowerCase();\n    if (['src', 'data', 'href', 'xlink:href'].includes(name)\n        && (val.includes('javascript:') || val.includes('data:text/html')))\n        return true;\n    return name.indexOf('on') === 0;\n};\n/** loops through each attribute, if it's dangerous, remove it */\nconst removeDangerousAttributes = (el) => {\n    Array.from(el.attributes).forEach(({ name, value }) => {\n        if (isDangerousAttribute(name, value)) {\n            el.removeAttribute(name);\n        }\n    });\n};\n/** removes malicious attributes from element and its children */\nconst sanitizeElAttributes = (body) => {\n    Array.from(body.children).forEach((el) => {\n        removeDangerousAttributes(el);\n        sanitizeElAttributes(el);\n    });\n};\n/** removes script elements inside element */\nconst removeScripts = (body) => {\n    const scripts = body.querySelectorAll('script');\n    Array.from(scripts).forEach((script) => script.remove());\n};\nconst filterElements = (body, allowedTopLevelTags) => {\n    if (!allowedTopLevelTags.length)\n        return;\n    Array.from(body.childNodes).forEach((el) => {\n        if (!allowedTopLevelTags.includes(el.tagName))\n            body.removeChild(el);\n    });\n};\n/**\n * Sanitizes html string from malicious attributes, values, and scripts\n * Can also filter elements at the top nesting level by tag names.\n * @param html - html string to sanitize\n * @param allowedTopLevelTags - array of allowed tag names\n */\nexport function sanitize(html, allowedTopLevelTags = []) {\n    // converts the string to an HTML document\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const body = doc.body || document.createElement('body');\n    // sanitizes html\n    removeScripts(body);\n    sanitizeElAttributes(body);\n    // filter allowed tags\n    filterElements(body, allowedTopLevelTags);\n    return body.innerHTML;\n}\n","import { sanitize } from '../../esl-utils/dom/sanitize';\nexport const EMPTY_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\nexport const isEmptyImage = (src) => src === EMPTY_IMAGE;\nexport const STRATEGIES = {\n    'cover': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n        },\n        clear(img) {\n            img.style.backgroundImage = '';\n        }\n    },\n    'save-ratio': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n            if (shadowImg.width === 0)\n                return;\n            img.style.paddingTop = isEmpty ? '' : `${(shadowImg.height * 100 / shadowImg.width)}%`;\n        },\n        clear(img) {\n            img.style.paddingTop = '';\n            img.style.backgroundImage = '';\n        }\n    },\n    'fit': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.removeAttribute('width');\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'origin': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.width = shadowImg.width / window.devicePixelRatio;\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'inner-svg': {\n        apply(img, shadowImg) {\n            const request = new XMLHttpRequest();\n            request.open('GET', shadowImg.src, true);\n            request.onreadystatechange = () => {\n                if (request.readyState !== 4 || request.status !== 200)\n                    return;\n                img.innerHTML = sanitize(request.responseText, ['svg']);\n            };\n            request.send();\n        },\n        clear(img) {\n            img.innerHTML = '';\n        }\n    }\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLImage_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { bind, prop, attr, boolAttr } from '../../esl-utils/decorators';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { ESLMediaRuleList } from '../../esl-media-query/core';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core/esl-traversing-query';\nimport { getIObserver } from './esl-image-iobserver';\nimport { EMPTY_IMAGE, STRATEGIES, isEmptyImage } from './esl-image-strategies';\nconst isLoadState = (state) => ['error', 'loaded', 'ready'].includes(state);\n/**\n * ESLImage - custom element, that provides flexible ways to include images on web pages.\n * Was originally developed as an alternative to `<picture>` element, but with more features inside.\n *\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\nlet ESLImage = ESLImage_1 = class ESLImage extends ESLBaseElement {\n    connectedCallback() {\n        super.connectedCallback();\n        this.alt =\n            this.alt || this.getAttribute('aria-label') || this.getAttribute('data-alt') || '';\n        this.updateA11y();\n        this.srcRules.addEventListener(this._onMediaMatchChange);\n        if (this.lazyObservable) {\n            this.removeAttribute('lazy-triggered');\n            getIObserver().observe(this);\n            this._detachLazyTrigger = function () {\n                getIObserver().unobserve(this);\n                this._detachLazyTrigger = null;\n            };\n        }\n        this.refresh();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._detachLazyTrigger && this._detachLazyTrigger();\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        switch (attrName) {\n            case 'aria-label':\n                this.alt = newVal || '';\n                break;\n            case 'alt':\n            case 'role':\n                this.updateA11y();\n                break;\n            case 'data-src':\n                this.srcRules = ESLMediaRuleList.parse(newVal);\n                this.refresh();\n                break;\n            case 'data-src-base':\n                this.refresh();\n                break;\n            case 'mode':\n                this.changeMode(oldVal, newVal);\n                break;\n            case 'lazy-triggered':\n                this.lazyTriggered && this.update();\n                break;\n        }\n    }\n    get srcRules() {\n        if (!this._srcRules) {\n            this.srcRules = ESLMediaRuleList.parse(this.src);\n        }\n        return this._srcRules;\n    }\n    set srcRules(rules) {\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n        this._srcRules = rules;\n        this._srcRules.addEventListener(this._onMediaMatchChange);\n    }\n    get currentSrc() {\n        return this._currentSrc;\n    }\n    get empty() {\n        return !this._currentSrc || isEmptyImage(this._currentSrc);\n    }\n    get canUpdate() {\n        return this.lazyTriggered || this.lazy === 'none';\n    }\n    get lazyObservable() {\n        return this.lazy !== 'none' && this.lazy !== 'manual';\n    }\n    get originalWidth() {\n        return this._shadowImageElement ? this._shadowImageElement.width : 0;\n    }\n    get originalHeight() {\n        return this._shadowImageElement ? this._shadowImageElement.height : 0;\n    }\n    triggerLoad() {\n        this.setAttribute('lazy-triggered', '');\n    }\n    changeMode(oldVal, newVal) {\n        oldVal = oldVal || 'save-ratio';\n        newVal = newVal || 'save-ratio';\n        if (oldVal === newVal)\n            return;\n        if (!STRATEGIES[newVal]) {\n            this.mode = oldVal;\n            throw new Error('ESL Image: Unsupported mode: ' + newVal);\n        }\n        this.clearImage();\n        if (this.loaded)\n            this.syncImage();\n    }\n    update(force = false) {\n        if (!this.canUpdate)\n            return;\n        const src = this.getPath(this.srcRules.activeValue);\n        if (this._currentSrc !== src || !this.ready || force) {\n            this._currentSrc = src;\n            this._shadowImg.src = src;\n            if (this.refreshOnUpdate || !this.ready) {\n                this.syncImage();\n            }\n            if (this._shadowImg.complete) {\n                this._shadowImgError ? this._onError() : this._onLoad();\n            }\n        }\n        this._detachLazyTrigger && this._detachLazyTrigger();\n    }\n    updateA11y() {\n        const role = this.getAttribute('role') || 'img';\n        this.setAttribute('role', role);\n        this.innerImage && (this.innerImage.alt = this.alt);\n        if (role === 'img')\n            this.setAttribute('aria-label', this.alt);\n    }\n    getPath(src) {\n        if (!src || src === '0' || src === 'none') {\n            return ESLImage_1.EMPTY_IMAGE;\n        }\n        return this.srcBase + src;\n    }\n    refresh() {\n        this.removeAttribute('loaded');\n        this.removeAttribute('ready');\n        this.updateContainerClasses();\n        this.clearImage();\n        this.update(true);\n    }\n    syncImage() {\n        const strategy = STRATEGIES[this.mode];\n        this._strategy = strategy;\n        strategy && strategy.apply(this, this._shadowImg);\n    }\n    clearImage() {\n        this._strategy && this._strategy.clear(this);\n        this._strategy = null;\n    }\n    get innerImage() {\n        return this._innerImg;\n    }\n    attachInnerImage() {\n        if (!this._innerImg) {\n            this._innerImg = this.querySelector(`img.${this.innerImageClass}`) ||\n                this._shadowImg.cloneNode();\n            this._innerImg.className = this.innerImageClass;\n        }\n        if (!this._innerImg.parentNode) {\n            this.appendChild(this._innerImg);\n        }\n        this._innerImg.alt = this.alt;\n        return this._innerImg;\n    }\n    removeInnerImage() {\n        if (!this.innerImage)\n            return;\n        this.removeChild(this.innerImage);\n        setTimeout(() => {\n            if (this._innerImg && !this._innerImg.parentNode) {\n                this._innerImg = null;\n            }\n        });\n    }\n    get _shadowImg() {\n        if (!this._shadowImageElement) {\n            this._shadowImageElement = new Image();\n            this._shadowImageElement.onload = this._onLoad;\n            this._shadowImageElement.onerror = this._onError;\n        }\n        return this._shadowImageElement;\n    }\n    get _shadowImgError() {\n        if (!this._shadowImg.complete)\n            return false;\n        if (this._shadowImg.src.slice(-4) === '.svg')\n            return false;\n        return this._shadowImg.naturalHeight <= 0;\n    }\n    _onLoad() {\n        this.syncImage();\n        this._onReadyState(true);\n        this.updateContainerClasses();\n    }\n    _onError() {\n        this._onReadyState(false);\n        this.updateContainerClasses();\n    }\n    _onMediaMatchChange() {\n        this.update();\n    }\n    _onReadyState(successful) {\n        if (this.ready)\n            return;\n        this.toggleAttribute('loaded', successful);\n        this.toggleAttribute('error', !successful);\n        this.toggleAttribute('ready', true);\n        this.$$fire(successful ? this.LOAD_EVENT : this.ERROR_EVENT, { bubbles: false });\n        this.$$fire(this.READY_EVENT, { bubbles: false });\n    }\n    updateContainerClasses() {\n        if (this.containerClass === null)\n            return;\n        const cls = this.containerClass || this.constructor.DEFAULT_CONTAINER_CLS;\n        const state = isLoadState(this.containerClassState) && this[this.containerClassState];\n        const targetEl = ESLTraversingQuery.first(this.containerClassTarget, this);\n        targetEl && CSSClassUtils.toggle(targetEl, cls, state);\n    }\n};\nESLImage.is = 'esl-image';\nESLImage.observedAttributes = ['alt', 'role', 'mode', 'aria-label', 'data-src', 'data-src-base', 'lazy-triggered'];\n/** Default container class value */\nESLImage.DEFAULT_CONTAINER_CLS = 'img-container-loaded';\nESLImage.STRATEGIES = STRATEGIES;\nESLImage.EMPTY_IMAGE = EMPTY_IMAGE;\n__decorate([\n    prop('ready')\n], ESLImage.prototype, \"READY_EVENT\", void 0);\n__decorate([\n    prop('load')\n], ESLImage.prototype, \"LOAD_EVENT\", void 0);\n__decorate([\n    prop('error')\n], ESLImage.prototype, \"ERROR_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLImage.prototype, \"alt\", void 0);\n__decorate([\n    attr({ defaultValue: 'save-ratio' })\n], ESLImage.prototype, \"mode\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"src\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"srcBase\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLImage.prototype, \"lazy\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"lazyTriggered\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"refreshOnUpdate\", void 0);\n__decorate([\n    attr({ defaultValue: 'inner-image' })\n], ESLImage.prototype, \"innerImageClass\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLImage.prototype, \"containerClass\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLImage.prototype, \"containerClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'ready' })\n], ESLImage.prototype, \"containerClassState\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"ready\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"loaded\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"error\", void 0);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onLoad\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onError\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onMediaMatchChange\", null);\nESLImage = ESLImage_1 = __decorate([\n    ExportNs('Image')\n], ESLImage);\nexport { ESLImage };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleablePlaceholder_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nlet ESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = class ESLToggleablePlaceholder extends ESLBaseElement {\n    /** reates a placeholder for a given element of the toggleable's descendant */\n    static from($el) {\n        const $placeholder = document.createElement(this.is);\n        $placeholder.$origin = $el;\n        return $placeholder;\n    }\n    connectedCallback() {\n        this.copyAttributesFromOrigin();\n        super.connectedCallback();\n    }\n    /** Builds attribute name for copy */\n    buildAttrName(name) {\n        return name === 'id' ? 'original-id' : name;\n    }\n    /** Copies allowed attributes from origin to this element */\n    copyAttributesFromOrigin() {\n        const { $origin } = this;\n        if (!$origin)\n            return;\n        this.constructor.allowedAttrs.forEach((name) => {\n            const value = $origin.getAttribute(name);\n            if (value) {\n                this.setAttribute(this.buildAttrName(name), value);\n            }\n        });\n        // sanitize class list of placeholder from the tag name of origin's element\n        this.classList.remove($origin.constructor.is);\n    }\n};\nESLToggleablePlaceholder.is = 'esl-toggleable-placeholder';\n/** List of attributes allowed to copy from origin to this element */\nESLToggleablePlaceholder.allowedAttrs = ['id', 'class'];\nESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = __decorate([\n    ExportNs('ToggleablePlaceholder')\n], ESLToggleablePlaceholder);\nexport { ESLToggleablePlaceholder };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { attr, boolAttr, prop, listen, ready } from '../../esl-utils/decorators';\nimport { parseNumber } from '../../esl-utils/misc/format';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ENTER, SPACE, ESC } from '../../esl-utils/dom/keys';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { ESLMediaQuery } from '../../esl-media-query/core';\nimport { ESLToggleablePlaceholder } from '../../esl-toggleable/core';\nlet ESLTrigger = class ESLTrigger extends ESLBaseElement {\n    attributeChangedCallback(attrName) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target')\n            return this.updateTargetFromSelector();\n    }\n    /** Target observable Toggleable */\n    get $target() {\n        return this._$target;\n    }\n    set $target(newPopupInstance) {\n        this.$$off(this._onTargetStateChange);\n        this._$target = newPopupInstance;\n        this.$$on(this._onTargetStateChange);\n        this._onTargetStateChange();\n    }\n    /** Element target to setup aria attributes */\n    get $a11yTarget() {\n        return this.a11yTarget ? this.querySelector(this.a11yTarget) : this;\n    }\n    /** Value to setup aria-label */\n    get a11yLabel() {\n        if (!this.$target)\n            return null;\n        return (this.$target.open ? this.a11yLabelActive : this.a11yLabelInactive) || null;\n    }\n    /** Marker to allow track hover */\n    get allowHover() {\n        return DeviceDetector.hasHover && ESLMediaQuery.for(this.trackHover).matches;\n    }\n    /** Marker to allow track clicks */\n    get allowClick() {\n        return ESLMediaQuery.for(this.trackClick).matches;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.updateTargetFromSelector();\n        this.initA11y();\n    }\n    /** Update `$target` Toggleable  from `target` selector */\n    updateTargetFromSelector() {\n        if (!this.target)\n            return;\n        this.$target = ESLTraversingQuery.first(this.target, this);\n        if (this.$target instanceof ESLToggleablePlaceholder && this.$target.$origin) {\n            // change target if it is an instance of the placeholder element\n            this.$target = this.$target.$origin;\n        }\n    }\n    /** Check if the event target should be ignored */\n    isTargetIgnored(target) {\n        if (!target || !(target instanceof HTMLElement) || !this.ignore)\n            return false;\n        const $ignore = target.closest(this.ignore);\n        // Ignore only inner elements (but do not ignore the trigger itself)\n        return !!$ignore && $ignore !== this && this.contains($ignore);\n    }\n    /** Merge params to pass to the toggleable */\n    mergeToggleableParams(...params) {\n        return Object.assign({\n            initiator: 'trigger',\n            activator: this\n        }, ...params);\n    }\n    /** Show target toggleable with passed params */\n    showTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.showDelay)\n        }, params);\n        if (this.$target && typeof this.$target.show === 'function') {\n            this.$target.show(actionParams);\n        }\n    }\n    /** Hide target toggleable with passed params */\n    hideTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.hideDelay)\n        }, params);\n        if (this.$target && typeof this.$target.hide === 'function') {\n            this.$target.hide(actionParams);\n        }\n    }\n    /** Toggles target toggleable with passed params */\n    toggleTarget(params = {}, state = !this.active) {\n        state ? this.showTarget(params) : this.hideTarget(params);\n    }\n    /**\n     * Updates trigger state according to toggleable state\n     * Does not produce `esl:change:active` event\n     */\n    updateState() {\n        var _a;\n        const isActive = !!((_a = this.$target) === null || _a === void 0 ? void 0 : _a.open);\n        const wasActive = this.active;\n        this.toggleAttribute('active', isActive);\n        const clsTarget = ESLTraversingQuery.first(this.activeClassTarget, this);\n        clsTarget && CSSClassUtils.toggle(clsTarget, this.activeClass, isActive);\n        this.updateA11y();\n        return isActive !== wasActive;\n    }\n    /** Handles ESLToggleable state change */\n    _onTargetStateChange(originalEvent) {\n        if (!this.updateState())\n            return;\n        const detail = { active: this.active, originalEvent };\n        this.$$fire(this.CHANGE_EVENT, { detail });\n    }\n    /** Handles `click` event */\n    _onClick(event) {\n        if (!this.allowClick || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        this._onPrimaryEvent(event);\n    }\n    /** Handles `keydown` event */\n    _onKeydown(event) {\n        if (![ENTER, SPACE, ESC].includes(event.key) || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        if (event.key === ESC) {\n            if (this.ignoreEsc)\n                return;\n            this.hideTarget({ event });\n        }\n        else {\n            this._onPrimaryEvent(event);\n        }\n    }\n    /** Handles target primary (observed) event */\n    _onPrimaryEvent(event) {\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles hover `mouseenter` event */\n    _onMouseEnter(event) {\n        if (!this.allowHover)\n            return;\n        const delay = parseNumber(this.hoverShowDelay);\n        this.toggleTarget({ event, delay }, this.mode !== 'hide');\n        event.preventDefault();\n    }\n    /** Handles hover `mouseleave` event */\n    _onMouseLeave(event) {\n        if (!this.allowHover)\n            return;\n        if (this.mode === 'show' || this.mode === 'hide')\n            return;\n        const delay = parseNumber(this.hoverHideDelay);\n        this.hideTarget({ event, delay, trackHover: true });\n        event.preventDefault();\n    }\n    /** Set initial a11y attributes. Do nothing if trigger contains actionable element */\n    initA11y() {\n        if (this.$a11yTarget !== this)\n            return;\n        if (!this.hasAttribute('role'))\n            this.setAttribute('role', 'button');\n        if (this.getAttribute('role') === 'button' && !this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n    }\n    /** Update aria attributes */\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (this.a11yLabelActive !== null || this.a11yLabelInactive !== null) {\n            setAttr(target, 'aria-label', this.a11yLabel);\n        }\n        setAttr(target, 'aria-expanded', String(this.active));\n        if (this.$target && this.$target.id) {\n            setAttr(target, 'aria-controls', this.$target.id);\n        }\n    }\n};\nESLTrigger.is = 'esl-trigger';\nESLTrigger.observedAttributes = ['target'];\n__decorate([\n    prop('esl:change:active')\n], ESLTrigger.prototype, \"CHANGE_EVENT\", void 0);\n__decorate([\n    prop('esl:show esl:hide')\n], ESLTrigger.prototype, \"OBSERVED_EVENTS\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLTrigger.prototype, \"active\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'a[href]' })\n], ESLTrigger.prototype, \"ignore\", void 0);\n__decorate([\n    attr({ defaultValue: '::next' })\n], ESLTrigger.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'toggle' })\n], ESLTrigger.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'all' })\n], ESLTrigger.prototype, \"trackClick\", void 0);\n__decorate([\n    attr({ defaultValue: 'not all' })\n], ESLTrigger.prototype, \"trackHover\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"a11yTarget\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelActive\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelInactive\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"showDelay\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"hideDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverShowDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverHideDelay\", void 0);\n__decorate([\n    boolAttr()\n], ESLTrigger.prototype, \"ignoreEsc\", void 0);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"connectedCallback\", null);\n__decorate([\n    listen({\n        event: (that) => that.OBSERVED_EVENTS,\n        target: (that) => that.$target\n    })\n], ESLTrigger.prototype, \"_onTargetStateChange\", null);\n__decorate([\n    listen('click')\n], ESLTrigger.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLTrigger.prototype, \"_onKeydown\", null);\n__decorate([\n    listen('mouseenter')\n], ESLTrigger.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen('mouseleave')\n], ESLTrigger.prototype, \"_onMouseLeave\", null);\nESLTrigger = __decorate([\n    ExportNs('Trigger')\n], ESLTrigger);\nexport { ESLTrigger };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLAlert_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { attr, jsonAttr, prop, listen } from '../../esl-utils/decorators';\nimport { isMatches } from '../../esl-utils/dom/traversing';\nimport { ESLToggleable } from '../../esl-toggleable/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { createZIndexIframe } from '../../esl-utils/fixes/ie-fixes';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\n/**\n * ESLAlert component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLAlert is a component to show small notifications on your pages. ESLAlert can have multiple instances on the page.\n */\nlet ESLAlert = ESLAlert_1 = class ESLAlert extends ESLToggleable {\n    /** Creates global alert instance (using body element as a base) */\n    static init(options) {\n        let alert = document.querySelector(`body > ${ESLAlert_1.is}`);\n        if (!alert) {\n            alert = document.createElement(ESLAlert_1.is);\n            options && Object.assign(alert, options);\n            document.body.appendChild(alert);\n        }\n        return alert;\n    }\n    mergeDefaultParams(params) {\n        const type = this.constructor;\n        return Object.assign({}, type.defaultConfig, this.defaultParams || {}, params || {});\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target') {\n            this.$target = ESLTraversingQuery.first(this.target);\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.setAttribute('role', this.getAttribute('role') || 'alert');\n        this.$content = document.createElement('div');\n        this.$content.className = 'esl-alert-content';\n        this.innerHTML = '';\n        this.appendChild(this.$content);\n        if (DeviceDetector.isIE)\n            this.appendChild(createZIndexIframe());\n        if (this.target) {\n            this.$target = ESLTraversingQuery.first(this.target, this);\n        }\n    }\n    /** Target element to listen to activation events */\n    get $target() {\n        return this._$target;\n    }\n    set $target($el) {\n        this._$target = $el;\n        this.$$on(this._onShowRequest);\n        this.$$on(this._onHideRequest);\n    }\n    onShow(params) {\n        if (this._clearTimeout)\n            window.clearTimeout(this._clearTimeout);\n        if (params.html || params.text) {\n            this.render(params);\n            super.onShow(params);\n        }\n        this.hide(params);\n    }\n    onHide(params) {\n        super.onHide(params);\n        this._clearTimeout = window.setTimeout(() => this.clear(), params.hideTime);\n    }\n    render({ text, html, cls }) {\n        CSSClassUtils.remove(this, this.activeCls);\n        CSSClassUtils.add(this, this.activeCls = cls);\n        if (html)\n            this.$content.innerHTML = html;\n        if (text)\n            this.$content.textContent = text;\n    }\n    clear() {\n        this.$content.innerHTML = '';\n        CSSClassUtils.remove(this, this.activeCls);\n    }\n    buildRequestParams(e) {\n        const detail = e.detail || {};\n        if (!isMatches(this, detail.match))\n            return null;\n        if (e.type === this.SHOW_REQUEST_EVENT)\n            return Object.assign({}, detail, { force: true });\n        if (e.type === this.HIDE_REQUEST_EVENT)\n            return Object.assign({ hideDelay: 0 }, detail, { force: true });\n        return null;\n    }\n    _onHideRequest(e) {\n        super._onHideRequest(e);\n        e.stopPropagation();\n    }\n    _onShowRequest(e) {\n        super._onShowRequest(e);\n        e.stopPropagation();\n    }\n};\nESLAlert.is = 'esl-alert';\nESLAlert.observedAttributes = ['target'];\n/** Default show/hide params for all ESLAlert instances */\nESLAlert.defaultConfig = {\n    hideTime: 300,\n    hideDelay: 2500\n};\n__decorate([\n    prop('esl:alert:show')\n], ESLAlert.prototype, \"SHOW_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:alert:hide')\n], ESLAlert.prototype, \"HIDE_REQUEST_EVENT\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLAlert.prototype, \"target\", void 0);\n__decorate([\n    jsonAttr()\n], ESLAlert.prototype, \"defaultParams\", void 0);\n__decorate([\n    listen({ inherit: true, target: (el) => el.$target })\n], ESLAlert.prototype, \"_onHideRequest\", null);\n__decorate([\n    listen({ inherit: true, target: (el) => el.$target })\n], ESLAlert.prototype, \"_onShowRequest\", null);\nESLAlert = ESLAlert_1 = __decorate([\n    ExportNs('Alert')\n], ESLAlert);\nexport { ESLAlert };\n","/** Fix IE browser to allow to display alert under iframe */\nexport function createZIndexIframe() {\n    const iframe = document.createElement('iframe');\n    iframe.className = 'ie-zindex-fix';\n    iframe.src = 'about:blank';\n    return iframe;\n}\n","import {Observable} from '@exadel/esl/modules/esl-utils/abstract/observable';\nimport {UIPPlugin} from './plugin';\nimport {UIPRoot} from './root';\n\n/** Type for function to change attribute's current value */\nexport type TransformSignature = (current: string | null) => string | boolean | null;\n\n/** Config for changing attribute's value */\nexport type ChangeAttrConfig = {\n  /** CSS query to find target elements */\n  target: string,\n  /** Attribute to change */\n  attribute: string,\n  /** Changes initiator */\n  modifier: UIPPlugin | UIPRoot\n} & ({\n  /** New {@link attribute} value */\n  value: string | boolean\n} | {\n  /**\n   * Function to transform(update)\n   * {@link attribute} value\n   */\n  transform: TransformSignature\n});\n\n/** Type for both <script> or <template> containers */\nexport type SnippetTemplate = HTMLTemplateElement | HTMLScriptElement;\n\n\n/**\n * State holder class to store current UIP markup state\n * Provides methods to modify the state\n * @extends Observable\n */\nexport class UIPStateModel extends Observable {\n  /** Current markup state */\n  private _html = new DOMParser().parseFromString('', 'text/html').body;\n  /** Last {@link UIPPlugin} element which changed markup */\n  private _lastModifier: UIPPlugin | UIPRoot;\n  /** Marker whether state changes were dispatched */\n  private _isFired = false;\n\n  /** Snippets {@link SnippetTemplate template-holders} */\n  private _snippets: SnippetTemplate[];\n  /** Current active {@link SnippetTemplate template-holder} */\n  private _activeSnippet: SnippetTemplate;\n\n  /**\n   * Sets current markup state to the passed one\n   * @param markup - new state\n   * @param modifier - plugin, that initiates the change\n   */\n  public setHtml(markup: string, modifier: UIPPlugin | UIPRoot) {\n    const root = new DOMParser().parseFromString(markup, 'text/html').body;\n\n    if (!root || root.innerHTML !== this.html) {\n      this._html = root;\n      this._lastModifier = modifier;\n      this.dispatchChange();\n    }\n  }\n\n  /** Current markup state getter */\n  public get html(): string {\n    return this._html ? this._html.innerHTML : '';\n  }\n\n  /** Last markup state modifier */\n  public get lastModifier(): UIPPlugin | UIPRoot {\n    return this._lastModifier;\n  }\n\n  /** Snippets template-holders getter */\n  public get snippets(): SnippetTemplate[] {\n    return this._snippets;\n  }\n\n  /** Sets snippets template-holders */\n  public set snippets(snippets: SnippetTemplate[]) {\n    this._snippets = snippets;\n  }\n\n  /** Current active {@link SnippetTemplate} getter */\n  public get activeSnippet(): SnippetTemplate {\n    if (!this._activeSnippet) {\n      this._activeSnippet = this.snippets\n        .find((snippet: SnippetTemplate) => snippet.hasAttribute('active')) || this.snippets[0];\n    }\n    return this._activeSnippet;\n  }\n\n  public set activeSnippet(snippet: SnippetTemplate) {\n    this._activeSnippet.removeAttribute('active');\n    snippet.setAttribute('active', '');\n    this._activeSnippet = snippet;\n  }\n\n  /** Changes current active snippet */\n  public applySnippet(snippet: SnippetTemplate, modifier: UIPPlugin | UIPRoot) {\n    if (!snippet) return;\n    this.activeSnippet = snippet;\n    this.setHtml(snippet.innerHTML, modifier);\n  }\n\n  /**\n   * Gets attribute values for the matched set of elements\n   * @param target - CSS sector to define target elements\n   * @param attr - attribute name\n   * @returns array of matched elements attribute value (uses the element placement order)\n   */\n  public getAttribute(target: string, attr: string): (string | null)[] {\n    return Array.from(this._html.querySelectorAll(target)).map(el => el.getAttribute(attr));\n  }\n\n  /** Applies change config to current markup */\n  public changeAttribute(cfg: ChangeAttrConfig) {\n    const {target, attribute, modifier} = cfg;\n    const elements = Array.from(this._html.querySelectorAll(target));\n    if (!elements.length) return;\n\n    UIPStateModel.setAttribute(elements, attribute, 'transform' in cfg ? cfg.transform : cfg.value);\n    this._lastModifier = modifier;\n    this.dispatchChange();\n  }\n\n  /** Plans microtask to dispatch model change event */\n  protected dispatchChange() {\n    if (!this._isFired) {\n      this._isFired = true;\n      Promise.resolve().then(() => {\n        this.fire();\n        this._isFired = false;\n      });\n    }\n  }\n\n  /**\n   * Changes element attribute according to `transform` argument\n   * @param elements - elements to apply changes\n   * @param attr - attribute name\n   * @param transform - value or function to change attribute value\n   */\n  protected static setAttribute(elements: Element[], attr: string, transform: TransformSignature | string | boolean): void {\n    elements.forEach(el => {\n      const transformed = typeof transform === 'function' ? transform(el.getAttribute(attr)) : transform;\n      if (typeof transformed === 'string') {\n        el.setAttribute(attr, transformed);\n      } else {\n        transformed ? el.setAttribute(attr, '') : el.removeAttribute(attr);\n      }\n    });\n  }\n}\n","/**\n * Abstract Observable implementation\n * @author Yuliya Adamskaya\n */\nexport class Observable {\n    constructor() {\n        this._listeners = new Set();\n    }\n    addListener(listener) {\n        this._listeners.add(listener);\n    }\n    removeListener(listener) {\n        this._listeners.delete(listener);\n    }\n    fire(...args) {\n        this._listeners.forEach((listener) => {\n            try {\n                listener.apply(this, args);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n}\n","import {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {boolAttr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport type {AnyToVoidFnSignature} from '@exadel/esl/modules/esl-utils/misc/functions';\n\nimport {SnippetTemplate, UIPStateModel} from './model';\n\n/**\n * UI Playground root custom element definition\n * Container element for {@link UIPPlugin} components\n * Defines the bounds of UI Playground instance\n * Shares the {@link UIPStateModel} instance between {@link UIPPlugin}-s\n */\nexport class UIPRoot extends ESLBaseElement {\n  public static is = 'uip-root';\n  static observedAttributes = ['dark-theme', 'settings-collapsed', 'editor-collapsed', 'rtl-direction'];\n\n  /** CSS query for snippets */\n  public static SNIPPET_SEL = '[uip-snippet]';\n\n  /** Indicates that the UIP components' theme is dark */\n  @boolAttr() public darkTheme: boolean;\n  /** Collapsed settings state marker */\n  @boolAttr() public settingsCollapsed: boolean;\n  /** Collapsed editor state marker */\n  @boolAttr() public editorCollapsed: boolean;\n  /** Indicates that the direction of the preview content is RTL direction */\n  @boolAttr() public rtlDirection: boolean;\n\n  /** {@link UIPStateModel} instance to store UI Playground state */\n  @memoize()\n  public get model(): UIPStateModel {\n    return new UIPStateModel();\n  }\n\n  /** Collects snippets template-holders */\n  public get $snippets(): SnippetTemplate[] {\n    return Array.from(this.querySelectorAll(UIPRoot.SNIPPET_SEL));\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.initSnippets();\n  }\n\n  /** Alias for {@link this.model.addListener} */\n  public addStateListener(listener: AnyToVoidFnSignature) {\n    this.model.addListener(listener);\n  }\n\n  /** Alias for {@link this.model.removeListener} */\n  public removeStateListener(listener: AnyToVoidFnSignature) {\n    this.model.removeListener(listener);\n  }\n\n  /** Initial initialization of snippets */\n  protected initSnippets(): void {\n    this.model.snippets = this.$snippets;\n    this.model.applySnippet(this.model.activeSnippet, this);\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string | null, newVal: string | null) {\n    if (oldVal === newVal) return;\n    if (['rtl-direction', 'dark-theme'].includes(attrName)) {\n      this.classList.toggle(attrName, newVal !== null);\n    }\n    // setTimeout to let other plugins init before dispatching\n    setTimeout(() => {\n      EventUtils.dispatch(this, 'uip:configchange', {\n        bubbles: false,\n        detail: {\n          attribute: attrName,\n          value: newVal\n        }\n      });\n    });\n  }\n}\n","import {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\n\nimport {UIPRoot} from './root';\nimport {UIPStateModel} from './model';\n\n/**\n * Base class for UI Playground plugins\n * Implements basic relation and styles\n */\nexport abstract class UIPPlugin extends ESLBaseElement {\n  static observedAttributes = ['label'];\n\n  /** Visible label */\n  @attr() public label: string;\n\n  /** Closest playground {@link UIPRoot} element */\n  @memoize()\n  protected get root(): UIPRoot | null {\n    return this.closest(`${UIPRoot.is}`) as UIPRoot;\n  }\n\n  /** Returns {@link UIPStateModel} from root instance */\n  protected get model(): UIPStateModel | null {\n    return this.root ? this.root.model : null;\n  }\n\n  /** {@link UIPPlugin} section wrapper */\n  @memoize()\n  protected get $inner() {\n    const $inner = document.createElement('div');\n    const pluginType = this.constructor as typeof UIPPlugin;\n    $inner.className = `${pluginType.is}-inner uip-plugin-inner`;\n    return $inner;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.classList.add('uip-plugin');\n    this.root?.addStateListener(this._onRootStateChange);\n    this.root && this._onRootStateChange();\n  }\n\n  protected disconnectedCallback() {\n    this.root?.removeStateListener(this._onRootStateChange);\n    super.disconnectedCallback();\n    memoize.clear(this, 'root');\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (attrName === 'label') this.setAttribute('aria-label', newVal);\n  }\n\n  /** Handles {@link UIPRoot} state changes */\n  protected _onRootStateChange(): void {}\n}\n","import {bind} from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport {UIPPlugin} from '../base/plugin';\n\n/**\n * Preview {@link UIPPlugin} custom element definition\n * Element that displays active markup\n * @extends UIPPlugin\n */\nexport class UIPPreview extends UIPPlugin {\n  static is = 'uip-preview';\n  static observedAttributes: string[] = ['resizable'];\n\n  /** Changes preview markup from state changes */\n  @bind\n  protected _onRootStateChange(): void {\n    if (this.$inner.parentElement === this) this.removeChild(this.$inner);\n    this.$inner.innerHTML = this.model!.html;\n    this.appendChild(this.$inner);\n  }\n\n  protected disconnectedCallback() {\n    if (this.$inner.parentElement === this) this.removeChild(this.$inner);\n    super.disconnectedCallback();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string): void {\n    if (attrName === 'resizable' && newVal === null) {\n      this.clearInlineSize();\n      this.$inner.classList.remove('resizable');\n    } else {\n      this.$inner.classList.add('resizable');\n    }\n  }\n\n  /** Resets element both inline height and width properties */\n  protected clearInlineSize() {\n    this.$inner.style.removeProperty('height');\n    this.$inner.style.removeProperty('width');\n  }\n}\n","import {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport type {ESLScrollbar} from '@exadel/esl/modules/esl-scrollbar/core';\n\nimport {UIPPlugin} from '../../../core/base/plugin';\nimport {SnippetTemplate} from '../../../core/base/model';\n\n/**\n * Snippets {@link UIPPlugin} custom element definition\n * Container class for snippets (component's templates)\n * @extends UIPPlugin\n */\nexport class UIPSnippets extends UIPPlugin {\n  public static is = 'uip-snippets';\n  /** CSS Class for snippets list item */\n  public static LIST_ITEM = 'snippets-list-item';\n  /** CSS Class added to active snippet */\n  public static ACTIVE_ITEM = 'active';\n  /** Index of current snippet list item */\n  public currentIndex: number;\n\n  /** Snippets container element */\n  @memoize()\n  protected get $snippetList(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-list';\n    return $el;\n  }\n\n  /** Active snippet title */\n  @memoize()\n  protected get $title(): HTMLElement {\n    const $el = document.createElement('span');\n    $el.className = 'snippets-title';\n    return $el;\n  }\n\n  /** Snippets dropdown element */\n  @memoize()\n  protected get $dropdown(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-dropdown';\n    return $el;\n  }\n\n  /** Dropdown control element */\n  @memoize()\n  protected get $dropdownControl(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-dropdown-control';\n    return $el;\n  }\n\n  /** Dropdown wrapper element */\n  @memoize()\n  protected get $dropdownWrapper(): HTMLElement {\n    const $el = document.createElement('div');\n    $el.className = 'snippets-dropdown-wrapper';\n    return $el;\n  }\n\n  /** Snippets list from dropdown element*/\n  @memoize()\n  public get $items(): HTMLElement[] {\n    const items = this.querySelectorAll(`.${UIPSnippets.LIST_ITEM}`);\n    return Array.from(items) as HTMLElement[];\n  }\n\n  /** {@link ESLScrollbar} scroll element */\n  @memoize()\n  public get $scroll(): ESLScrollbar {\n    const $scroll = document.createElement('esl-scrollbar');\n    $scroll.setAttribute('target', '::prev');\n    return $scroll;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.render();\n    // Initial update\n    setTimeout(() => this.$active = this.$active || this.$items[0]);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles `mouseup` event to\n   * manage dropdown open state\n   */\n  @listen({event: 'mouseup', target: document.body})\n  protected onOutsideAction(e: Event) {\n    if (!this.classList.contains('dropdown-open')) return;\n    const target = e.target as HTMLElement;\n    if (this.contains(target)) return false;\n    this.toggleDropdown();\n  }\n\n  /** Active snippet element */\n  public get $active(): HTMLElement | null {\n    return this.$items.find(item => item.classList.contains(UIPSnippets.ACTIVE_ITEM)) || null;\n  }\n  /** Sets active snippet element */\n  public set $active(snippet: HTMLElement | null) {\n    this.$items.forEach((item) => item.classList.toggle(UIPSnippets.ACTIVE_ITEM, snippet === item));\n    this.updateTitleText();\n  }\n\n  /** Initializes snippets layout */\n  protected render(): void {\n    const snippets = this.model!.snippets;\n    if (!snippets.length) return;\n\n    snippets.length > 1\n      ? this.renderDropdown(snippets, this.$title)\n      : this.appendChild(this.$title);\n  }\n\n  /** Renders dropdown element for a case with multiple snippets */\n  protected renderDropdown(snippets: SnippetTemplate[], title: HTMLElement) {\n\n    snippets\n      .map((snippet: SnippetTemplate) => this.buildListItem(snippet))\n      .forEach((item) => item && this.$snippetList.appendChild(item));\n\n    this.$snippetList.classList.add('esl-scrollable-content');\n    this.$dropdownWrapper.appendChild(this.$snippetList);\n    this.$scroll && this.$dropdownWrapper.appendChild(this.$scroll);\n\n    this.$dropdownControl.appendChild(title);\n    this.appendChild(this.$dropdownControl);\n\n    this.$dropdown.appendChild(this.$dropdownWrapper);\n    this.appendChild(this.$dropdown);\n  }\n\n  /** Builds snippets list item */\n  protected buildListItem(snippet: SnippetTemplate) {\n    const label = snippet.getAttribute('label');\n    if (!label) return;\n\n    const $li = document.createElement('li');\n    $li.classList.add(UIPSnippets.LIST_ITEM);\n    $li.textContent = label;\n    snippet === this.model?.activeSnippet && $li.classList.add(UIPSnippets.ACTIVE_ITEM);\n    return $li;\n  }\n\n  /** Updates dropdown title with the name of active snippet */\n  protected updateTitleText(): void {\n    if (this.model) {\n      this.$title.textContent = `${this.model.activeSnippet.getAttribute('label')}`;\n    }\n  }\n\n  /** Handles `click` event to manage active snippet */\n  @listen({event: 'click', selector: '.snippets-list-item'})\n  protected _onItemClick(event: Event) {\n    const target = event.target as HTMLElement;\n    const index = this.$items.indexOf(target);\n    if (index < 0) return;\n\n    this.toggleDropdown();\n\n    if (this.currentIndex !== index && this.model) {\n      this.model.applySnippet(this.model.snippets[index], this);\n      this.$active = target;\n      this.currentIndex = index;\n    }\n  }\n\n  /**\n   * Handles dropdown control `click` event to\n   * manage dropdown open state\n   */\n  @listen({event: 'click', selector: '.snippets-dropdown-control'})\n  protected _onDropdownClick() {\n    this.toggleDropdown();\n  }\n\n  /** Toggles dropdown open state */\n  public toggleDropdown(): void {\n    this.classList.toggle('dropdown-open');\n  }\n}\n","import {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {ENTER, SPACE} from '@exadel/esl/modules/esl-utils/dom/keys';\n\nimport type {UIPOptions} from '../options';\nimport {UIPRoot} from '../../../../core/base/root';\n\n/** Config used to create options */\nexport type OptionConfig = {\n  /** Attribute name used as absence marker of option icon */\n  attrName: string;\n  /** Controlled attribute to toggle on root */\n  optionValue: string;\n  /** Callback to indicate if option should be rendered */\n  canActivate?: (scope: UIPOptions) => boolean;\n};\n\n/** Custom element to toggle {@link UIPRoot} attributes */\nexport class UIPOption extends ESLBaseElement {\n  public static is = 'uip-option';\n\n  /** {@link UIPRoot's} attribute which is changed by option */\n  @attr() public attribute: string;\n  public _active: boolean;\n\n  /** Closest playground {@link UIPRoot} element */\n  protected $root: UIPRoot;\n  protected config: OptionConfig;\n\n  /** Builds option element from {@link OptionConfig} */\n  static createEl(optionConfig: OptionConfig): UIPOption {\n    const option = document.createElement('uip-option') as UIPOption;\n    option.setAttribute('attribute', optionConfig.optionValue);\n    option.config = optionConfig;\n    return option;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.$root = this.closest('.uip-root') as UIPRoot;\n    this.classList.add(`${this.attribute}-option`);\n    this.tabIndex = 0;\n    this.active = this.$root.hasAttribute(this.config.optionValue);\n  }\n\n  /** Checks whether option is in its active state */\n  public get active(): boolean {\n    return this.$$cls('active');\n  }\n\n  /** Setter for `active` class */\n  public set active(val: boolean) {\n    this.$$cls('active', val);\n  }\n\n  /** Handles option `click` event */\n  @listen('click')\n  protected _onClick() {\n    this.toggleState();\n    this.$$fire('uip:option:changed');\n  }\n\n  /** Handles option `keydown` event */\n  @listen('keydown')\n  protected _onKeydown(e: KeyboardEvent) {\n    if (ENTER !== e.key && SPACE !== e.key) return;\n    this.toggleState();\n    this.$$fire('uip:option:changed');\n  }\n\n  /** Toggles option active state */\n  public toggleState(force?: boolean) {\n    this.active = force === undefined ? !this.active : force;\n  }\n}\n","import {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPPlugin} from '../../../core/base/plugin';\nimport {OptionConfig, UIPOption} from './option/option';\n\n/**\n * Options {@link UIPPlugin} custom element definition\n * Custom element to provide controls for changing UIP visual appearance.\n * @extends UIPPlugin\n */\nexport class UIPOptions extends UIPPlugin {\n  public static is = 'uip-options';\n  public static observedAttributes = ['hide-theme', 'hide-direction', 'hide-settings', 'hide-editor'];\n\n  /** Map that stores {@link UIPOption} instances */\n  public options = new Map<string, UIPOption>();\n\n  /** List of configs to create options */\n  protected static UIPOptionsConfig: OptionConfig[] = [\n    {\n      attrName: 'hide-theme',\n      optionValue: 'dark-theme',\n      canActivate: (component) => !component.hasAttribute('hide-theme')\n    },\n    {\n      attrName: 'hide-direction',\n      optionValue: 'rtl-direction',\n      canActivate: (component) => !component.hasAttribute('hide-direction')\n    },\n    {\n      attrName: 'hide-settings',\n      optionValue: 'settings-collapsed',\n      canActivate: (component) => !component.hasAttribute('hide-settings') &&\n        !!component.root?.querySelector('uip-settings')\n    },\n    {\n      attrName: 'hide-editor',\n      optionValue: 'editor-collapsed',\n      canActivate: (component) => !component.hasAttribute('hide-editor') &&\n        !!component.root?.querySelector('uip-editor')\n    }\n  ];\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.render();\n  }\n\n  protected disconnectedCallback() {\n    this.innerHTML = '';\n    super.disconnectedCallback();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string | null, newVal: string | null) {\n    if (oldVal === newVal || !this.options) return;\n\n    const config = UIPOptions.UIPOptionsConfig.find(elem => elem.attrName === attrName);\n    if (!config) return;\n\n    if (newVal === null) this.render([config]); // case to add option icon\n    if (newVal !== null) { // case to remove option icon\n      const option = this.options.get(config.optionValue);\n      if (!option) return;\n      this.options.delete(config.optionValue);\n      option.remove();\n    }\n  }\n\n  /**\n   * Renders options from passed configs array or\n   * by default from {@link UIPOptions.UIPOptionsConfig}\n   */\n  protected render(optionsCfg = UIPOptions.UIPOptionsConfig) {\n    optionsCfg = optionsCfg.filter(option => !option.canActivate || option.canActivate(this));\n    optionsCfg.forEach((option) => this.options.set(option.optionValue, UIPOption.createEl(option)));\n    this.options.forEach(option => this.append(option));\n  }\n\n  /**\n   * Handles {@link UIPRoot} `uip:configchange` event to\n   * manage {@link UIPOption} active state\n   */\n  @listen({event: 'uip:configchange', target: '::parent(.uip-root)'})\n  protected _onRootConfigChange(e: CustomEvent) {\n    const option = this.options.get(e.detail.attribute);\n    option?.toggleState(e.detail.value !== null);\n  }\n\n  /**\n   * Handles {@link UIPOption} `click` event\n   * to manage {@link UIPRoot} options attributes\n   */\n  @listen('click')\n  protected _onOptionClick(e: Event) {\n    e.stopPropagation();\n    const option = e.target as UIPOption;\n    this.root?.toggleAttribute(option.attribute, option.active);\n  }\n\n  public static register(tagName?: string) {\n    UIPOption.register();\n    UIPOption.registered.then(() => super.register.call(this, tagName));\n  }\n}\n","import {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {UIPPlugin} from '../../core/base/plugin';\nimport {UIPOptions, UIPSnippets} from '../registration';\n\n/**\n * Header {@link UIPPlugin} custom element definition\n * Container for {@link UIPSnippets} and {@link UIPOptions} elements\n * @extends UIPPlugin\n */\nexport class UIPHeader extends UIPPlugin {\n  static is = 'uip-header';\n\n  protected connectedCallback(): void {\n    super.connectedCallback();\n    this.childElementCount || this.autofill();\n  }\n\n  /** Default configuration rendering */\n  protected autofill(): void {\n    this.renderSnippets();\n    this.renderOptions();\n    this.renderCopy();\n  }\n\n  /** Renders {@link UIPSnippets} element */\n  protected renderSnippets(): void {\n    if (this.model?.snippets.length) {\n      const snippetsEl = document.createElement(UIPSnippets.is) as UIPSnippets;\n      this.prepend(snippetsEl);\n    }\n  }\n\n  /** Renders {@link UIPOptions} element */\n  protected renderOptions(): void {\n    const optionsEl = document.createElement(UIPOptions.is) as UIPSnippets;\n    this.append(optionsEl);\n  }\n\n  /** Renders copy icon */\n  protected renderCopy(): void {\n    const icon = document.createElement('button');\n    icon.title = 'copy markup';\n    icon.classList.add('copy-icon');\n    this.append(icon);\n  }\n\n  /** Handles copy icon click */\n  @listen({event: 'click', selector: '.copy-icon'})\n  protected _onCopyClick() {\n    navigator.clipboard.writeText(this.model!.html).then(() => {\n      EventUtils.dispatch(this, 'esl:alert:show', {\n        detail: {\n          text: 'Markup copied',\n          cls: 'uip-alert-info'\n        }\n      });\n    });\n  }\n}\n","/**\n * @returns Promise that will be resolved or rejected in `timeout` with an optional `payload`\n * If `isReject` is `true` the result promise will be rejected, otherwise (by default) the result promise will be resolved\n */\nexport function promisifyTimeout(timeout, payload, isReject) {\n    return new Promise((resolve, reject) => setTimeout((isReject ? reject : resolve).bind(null, payload), timeout));\n}\n/**\n * @returns Promise that will be resolved by dispatching `event` on `target`\n * Or it will be rejected in `timeout` if it's specified\n * Optional `options` for addEventListener can be also specified\n */\nexport function promisifyEvent(target, event, timeout, options) {\n    return new Promise((resolve, reject) => {\n        function eventCallback(e) {\n            target.removeEventListener(event, eventCallback, options);\n            resolve(e);\n        }\n        target.addEventListener(event, eventCallback, options);\n        if (typeof timeout === 'number' && timeout >= 0) {\n            setTimeout(() => reject(new Error('Rejected by timeout')), timeout);\n        }\n    });\n}\n/**\n * Short helper to make Promise from element state marker\n * @returns Promise that will be resolved if the target `marker` property is truthful or `event` is dispatched\n * @example\n * `const imgReady = promisifyMarker(eslImage, 'ready');`\n */\nexport function promisifyMarker(target, marker, event = marker) {\n    if (target[marker])\n        return Promise.resolve(target);\n    return promisifyEvent(target, event).then(() => target);\n}\n/**\n * Call `callback` limited by `tryCount` amount of times with interval in `timeout` ms\n * @returns Promise that will be resolved as soon as callback returns truthy value, or reject it by limit.\n */\nexport function tryUntil(callback, tryCount = 2, timeout = 100) {\n    return new Promise((resolve, reject) => {\n        (function check() {\n            let result;\n            try {\n                result = callback();\n            }\n            catch (_a) {\n                result = undefined;\n            }\n            if (result || (tryCount--) < 0) {\n                result ? resolve(result) : reject(new Error('Rejected by limit of tries'));\n            }\n            else {\n                setTimeout(check, timeout);\n            }\n        })();\n    });\n}\n/**\n * Call async callback in a sequence passed number of times\n * Initial call starts as a microtask\n * @param callback - async chain function\n * @param count - count o calls\n * @returns sequence end promise\n */\nexport function repeatSequence(callback, count = 1) {\n    if (count < 1)\n        return Promise.reject();\n    if (count === 1)\n        return Promise.resolve().then(callback);\n    return repeatSequence(callback, count - 1).then(callback);\n}\n/**\n * Create Deferred Object that wraps promise and its resolve and reject callbacks\n */\nexport function createDeferred() {\n    let reject;\n    let resolve;\n    // Both reject and resolve will be assigned anyway while the Promise constructing.\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\n/**\n * Safe wrap for Promise.resolve to use in Promise chain\n * @example\n * `const resolvedPromise = rejectedPromise.catch(resolvePromise);`\n */\nexport function resolvePromise(arg) {\n    return Promise.resolve(arg);\n}\n/**\n * Safe wrap for Promise.reject to use in Promise chain\n * @example\n * `const rejectedPromise = resolvedPromise.then(rejectPromise);`\n */\nexport function rejectPromise(arg) {\n    return Promise.reject(arg);\n}\n/**\n * Promise utils helper class\n * Note: use individual methods in case you need correct \"tree shaking\"\n */\nexport class PromiseUtils {\n}\nPromiseUtils.fromTimeout = promisifyTimeout;\nPromiseUtils.fromEvent = promisifyEvent;\nPromiseUtils.fromMarker = promisifyMarker;\nPromiseUtils.repeat = repeatSequence;\nPromiseUtils.tryUntil = tryUntil;\nPromiseUtils.deferred = createDeferred;\nPromiseUtils.resolve = resolvePromise;\nPromiseUtils.reject = rejectPromise;\n","import { createDeferred } from './promise';\n/**\n * Creates a debounced function that implements {@link Debounced}.\n * Debounced function delays invoking func until after wait milliseconds have elapsed\n * since the last time the debounced function was invoked.\n * The func is invoked with the last arguments provided to the debounced function.\n * @param fn - function to decorate\n * @param wait - time to debounce\n * @param thisArg - optional context to call original function, use debounced method call context if not defined\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function debounce(fn, wait = 10, thisArg) {\n    let timeout = null;\n    let deferred = null;\n    function debouncedSubject(...args) {\n        deferred = deferred || createDeferred();\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = window.setTimeout(() => {\n            timeout = null;\n            // fn.apply to save call context\n            deferred.resolve(fn.apply(thisArg || this, args));\n            deferred = null;\n        }, wait);\n    }\n    function cancel() {\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = null;\n        deferred === null || deferred === void 0 ? void 0 : deferred.reject();\n        deferred = null;\n    }\n    Object.defineProperty(debouncedSubject, 'promise', {\n        get: () => deferred ? deferred.promise : Promise.resolve()\n    });\n    Object.defineProperty(debouncedSubject, 'cancel', {\n        writable: false,\n        enumerable: false,\n        value: cancel\n    });\n    return debouncedSubject;\n}\n","import {debounce} from '@exadel/esl/modules/esl-utils/async/debounce';\nimport {jsonAttr} from '@exadel/esl/modules/esl-base-element/core';\nimport {bind, decorate, memoize, listen} from '@exadel/esl/modules/esl-utils/decorators';\n\nimport {UIPPlugin} from '../../core/registration';\nimport {EditorConfig, AceTheme} from './ace/utils';\nimport type {AceEditor} from './ace/ace-editor';\n\n/**\n * Editor {@link UIPPlugin} custom element definition\n * Uses ACE UI code editor to provide an ability to modify UIP state markup\n * @extends UIPPlugin\n */\nexport class UIPEditor extends UIPPlugin {\n  public static is = 'uip-editor';\n  /** Attribute to trigger editor's collapsing */\n  private static collapsedAttribute = 'editor-collapsed';\n\n  /** Editor's {@link EditorConfig} passed through attribute */\n  @jsonAttr({defaultValue: {}})\n  public editorConfig: Partial<EditorConfig>;\n  /** Wrapped {@link https://ace.c9.io/ Ace} editor instance */\n  protected editor: AceEditor;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.innerHTML = '';\n    this.appendChild(this.$inner);\n\n    if (this.root && !this.root.hasAttribute(UIPEditor.collapsedAttribute)) {\n      this.initEditor();\n    }\n  }\n\n  protected disconnectedCallback(): void {\n    this.editor?.destroy();\n    this.resizeObserver.unobserve(this);\n    super.disconnectedCallback();\n  }\n\n  /** Initialize inner {@link https://ace.c9.io/ Ace} editor */\n  protected initEditor(): Promise<void> {\n    if (this.editor) {\n      return Promise.resolve();\n    }\n\n    return import(/* webpackChunkName: \"ace-editor\" */ './ace/ace-editor').then((Ace) => {\n      this.resizeObserver.observe(this);\n      this.editor = new Ace.Editor(this.$inner);\n      this.editor.setConfig(this.editorConfig);\n      this._onRootStateChange();\n    });\n  }\n\n  /** Callback to call on editor's content changes */\n  @listen('change')\n  @decorate(debounce, 1000)\n  protected _onChange() {\n    this.model!.setHtml(this.editor.getValue(), this);\n  }\n\n  /** Change editor's markup from markup state changes */\n  @bind\n  protected _onRootStateChange(): void {\n    if (this.model!.lastModifier === this) return;\n\n    const markup = this.model!.html;\n    setTimeout(() => this.editor && this.editor.setValue(markup));\n  }\n\n  /**\n   * Merge passed editorConfig with current editorConfig\n   * @param {Partial<EditorConfig>} editorConfig - config to merge\n   */\n  public updateEditorConfig(editorConfig: Partial<EditorConfig>): void {\n    this.editorConfig = {\n      ...this.editorConfig,\n      ...editorConfig,\n    };\n\n    this.editor?.setConfig(this.editorConfig);\n  }\n\n  /**\n   * Observer to prevent editor's content from overflowing\n   * when toggling settings section or sidebar\n   */\n  @memoize()\n  protected get resizeObserver(): ResizeObserver {\n    return new ResizeObserver(debounce(() => this.editor.resize(), 500));\n  }\n\n  /** Callback to catch theme changes from {@link UIPRoot} */\n  @listen({event: 'uip:configchange', target: '::parent(.uip-root)'})\n  protected _onRootConfigChange(e: CustomEvent) {\n    const attr = e.detail.attribute;\n    const value = e.detail.value;\n\n    switch (attr) {\n      case 'dark-theme':\n        return this.updateEditorConfig({theme: value === null ? AceTheme.Light : AceTheme.Dark});\n      case 'editor-collapsed':\n        value === null && this.initEditor();\n        return;\n      default:\n        return;\n    }\n  }\n}\n","/**\n * Object with messages used to indicate\n * the type of warning\n */\nexport const WARNING_MSG = {\n  inconsistent: 'Inconsistent value',\n  multiple: 'Multiple values',\n  invalid: 'Invalid setting value',\n  noTarget: 'No setting target',\n  noMatch: 'No select match'\n};\n","import {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport {UIPSettings} from './settings';\nimport {WARNING_MSG} from '../../utils/warning-msg';\nimport {getAttr, setAttr} from '@exadel/esl/modules/esl-utils/dom/attr';\n\n/**\n * Custom element for manipulating with elements attributes\n * Custom settings should extend this class\n * to become connected with {@link UIPSettings}\n */\nexport abstract class UIPSetting extends ESLBaseElement {\n  static is = 'uip-setting';\n\n  /** {@link target} attribute which is changed by setting */\n  @attr() public attribute: string;\n  /** Target to which setting's changes are attached */\n  public get target(): string {\n    return getAttr(this, 'target', this.$settings.target);\n  }\n  /** Sets target to which setting's changes are attached */\n  public set target(target: string) {\n    setAttr(this, 'target', target);\n  }\n\n  /** Closest {@link UIPSettings} element */\n  @memoize()\n  public get $settings() {\n    return this.closest(UIPSettings.is) as UIPSettings;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.classList.add(UIPSetting.is);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles setting value change and\n   * dispatches `uip:change` event\n   */\n  @listen('change')\n  protected _onChange(e: Event): void {\n    e.preventDefault();\n    EventUtils.dispatch(this, 'uip:change');\n  }\n\n  /**\n   * Changes markup in {@link UIPStateModel}\n   * with setting's value\n   */\n  public applyTo(model: UIPStateModel): void {\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      value: this.getDisplayedValue(),\n      modifier: this.$settings\n    };\n    this.isValid() ? model.changeAttribute(cfg) : this.setInconsistency(WARNING_MSG.invalid);\n  }\n\n  /**\n   * Updates setting's value with\n   * active markup from {@link UIPStateModel}\n   */\n  public updateFrom(model: UIPStateModel): void {\n    this.disabled = false;\n    const values = model.getAttribute(this.target, this.attribute);\n\n    if (!values.length) {\n      this.disabled = true;\n      this.setInconsistency(WARNING_MSG.noTarget);\n    } else if (values.some(value => value !== values[0])) {\n      this.setInconsistency(WARNING_MSG.multiple);\n    } else {\n      this.setValue(values[0]);\n    }\n  }\n\n  /**\n   * Checks whether setting's value is valid or not\n   * Use for custom validation\n   */\n  protected isValid(): boolean {\n    return true;\n  }\n\n  /**\n   * Indicates setting's incorrect state\n   * (e.g. multiple attribute values or no target provided)\n   */\n  protected setInconsistency(msg: string = WARNING_MSG.inconsistent): void {\n    return;\n  }\n\n  /**\n   * Disable setting\n   * By default is used when there are no setting's targets\n   */\n  set disabled(force: boolean) {\n    return;\n  }\n\n  /**\n   * Gets setting's value\n   * to update markup in {@link UIPStateModel}\n   */\n  protected abstract getDisplayedValue(): string | boolean;\n\n  /**\n   * Sets setting's value\n   * after processing markup in {@link UIPStateModel}\n   */\n  protected abstract setValue(value: string | null): void;\n}\n","import {bind} from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport type {ESLScrollbar} from '@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar';\n\nimport {UIPPlugin} from '../../core/base/plugin';\nimport {UIPSetting} from './setting';\n\n/**\n * Settings {@link UIPPlugin} custom element definition\n * Container for {@link UIPSetting}\n * @extends UIPPlugin\n */\nexport class UIPSettings extends UIPPlugin {\n  public static is = 'uip-settings';\n\n  /**\n   * Attribute to set all inner {@link UIPSetting settings'}\n   * {@link UIPSetting#target targets}\n   */\n  @attr() public target: string;\n  @attr({defaultValue: 'Settings'}) public label: string;\n\n  /** {@link ESLScrollbar} scroll element */\n  @memoize()\n  public get $scroll(): ESLScrollbar {\n    const $scroll = document.createElement('esl-scrollbar');\n    $scroll.setAttribute('target', '::prev(.settings-list)');\n    return $scroll;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.updateInner();\n  }\n\n  /** Initializes settings layout */\n  protected updateInner() {\n    const $settingsList = document.createElement('div');\n    $settingsList.className = 'settings-list esl-scrollable-content';\n    [...this.childNodes].forEach( (node: HTMLElement) => {\n      $settingsList.appendChild(node);\n    });\n    this.$inner.appendChild($settingsList);\n    this.$scroll && this.$inner.appendChild(this.$scroll);\n    this.appendChild(this.$inner);\n  }\n\n  protected disconnectedCallback(): void {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles `uip:change` event to\n   * apply changes to the state\n   */\n  @listen('uip:change')\n  protected _onSettingChanged(e: any) {\n    e.stopPropagation();\n    if (!this.model) return;\n    (e.target as UIPSetting).applyTo(this.model);\n  }\n\n  /** Collects all {@link UIPSetting} items */\n  protected get settings(): UIPSetting[] {\n    return Array.from(this.getElementsByClassName(UIPSetting.is)) as UIPSetting[];\n  }\n\n  /** Updates {@link UIPSetting} values */\n  @bind\n  protected _onRootStateChange(): void {\n    this.settings.forEach(setting => setting.updateFrom(this.model!));\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\n/**\n * Custom setting for inputting attribute's value\n * @extends UIPSetting\n */\nexport class UIPTextSetting extends UIPSetting {\n  public static is = 'uip-text-setting';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n\n  /** Text input to change setting's value */\n  @memoize()\n  protected get $field(): HTMLInputElement {\n    const $field = document.createElement('input');\n    $field.type = 'text';\n    $field.name = this.label;\n    return $field;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    const label = document.createElement('label');\n    label.innerText = this.label;\n    label.appendChild(this.$field);\n\n    this.innerHTML = '';\n    this.appendChild(label);\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.value;\n  }\n\n  protected setValue(value: string | null): void {\n    this.$field.value = value || '';\n    this.$field.placeholder = '';\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.value = '';\n    this.$field.placeholder = msg;\n  }\n\n  set disabled(force: boolean) {\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","/** Class for processing attribute's tokens */\nexport default class TokenListUtils {\n\n  /**\n   * Divides string by whitespace regexp\n   * @return array of items or empty array\n   */\n  static split(str: string | null): string[] {\n    return str?.split(/\\s+/) || [];\n  }\n\n  /** Creates new string by concatenating all passed elements */\n  static join(values: any[]): string {\n    return values.join(' ');\n  }\n\n  /** Checks if all array elements are equal */\n  static hasSameElements(values: any[]): boolean {\n    return values.every(val => val === values[0]);\n  }\n\n  /** Checks whether two arrays have same elements or not */\n  static equals<T>(arr1: T[], arr2: T[]): boolean {\n    return TokenListUtils.contains(arr1, arr2) && TokenListUtils.contains(arr2, arr1);\n  }\n\n  /** Checks if array contains all elements from subArray */\n  static contains<T>(array: T[], subArray: T[]): boolean {\n    const set = new Set(array);\n    return subArray.every(val => set.has(val));\n  }\n\n  /** Gets array which contains only common elements from arrays */\n  static intersection<T>(...rest: T[][]): T[];\n  static intersection<T>(a: T[], b: T[], ...rest: T[][]): T[] {\n    if (rest.length) return TokenListUtils.intersection(a, TokenListUtils.intersection(b, ...rest));\n    return b ? a.filter(Set.prototype.has, new Set(b)) : a;\n  }\n\n  /** Removes all element appearances from array */\n  static remove<T>(array: T[], element: T): T[] {\n    return array.filter(el => el !== element);\n  }\n}\n","import {attr, boolAttr, listen} from '@exadel/esl/modules/esl-base-element/core';\nimport {randUID} from '@exadel/esl/modules/esl-utils/misc/uid';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport type {ESLSelect} from '@exadel/esl/modules/esl-forms/esl-select/core';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport TokenListUtils from '../../utils/token-list-utils';\nimport {WARNING_MSG} from '../../utils/warning-msg';\nimport {UIPRoot} from '../../registration';\n\n\n/**\n * Custom setting for selecting attribute's value\n * @extends UIPSetting\n */\nexport class UIPSelectSetting extends UIPSetting {\n  public static is = 'uip-select-setting';\n  /** Option displayed when setting has inconsistent state */\n  public static inconsistentValue = 'inconsistent';\n  /** CSS selector for dropdown element */\n  private static dropdownClass = 'uip-select-dropdown';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n  /**\n   * Attribute to set mode for setting\n   * `replace` - replacing [attribute's]{@link UIPSetting#attribute} value with setting's value\n   * `append` - appending [attribute's]{@link UIPSetting#attribute} value to attribute's value\n   */\n  @attr({defaultValue: 'replace'}) public mode: 'replace' | 'append';\n  /** Indicates whether setting supports multiple values selected or not */\n  @boolAttr() public multiple: boolean;\n  /** Select field to change setting's value */\n  @memoize()\n  protected get $field(): ESLSelect {\n    const $field = document.createElement('esl-select');\n    $field.name = this.label;\n    $field.dropdownClass = UIPSelectSetting.dropdownClass;\n    $field.$select = this.select;\n    $field.append(this.select);\n    return $field;\n  }\n\n  /** Label element for input */\n  @memoize()\n  protected get $label(): HTMLLabelElement {\n    const $label = document.createElement('label');\n    $label.innerText = this.label;\n    return $label;\n  }\n\n  /** Collects all options' values */\n  @memoize()\n  protected get settingOptions(): string[] {\n    return this.$field.options.map(opt => opt.value);\n  }\n\n  /** Initialization of {@link ESLSelect} */\n  @memoize()\n  protected get select(): HTMLSelectElement {\n    const select = document.createElement('select');\n    select.setAttribute('esl-select-target', '');\n    select.multiple = this.multiple;\n    select.id = `${UIPSelectSetting.is}-${randUID()}`;\n    this.querySelectorAll('option').forEach(option => select.add(option));\n    return select;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.$label.htmlFor = this.$field.$select.id;\n\n    this.innerHTML = '';\n    this.appendChild(this.$label);\n    this.appendChild(this.$field);\n  }\n\n  applyTo(model: UIPStateModel) {\n    if (this.mode === 'replace') return super.applyTo(model);\n\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      modifier: this.$settings,\n      transform: this.transformValue.bind(this, this.getDisplayedValue())\n    };\n\n    model.changeAttribute(cfg);\n  }\n\n  /** Function to transform(update) attribute value */\n  transformValue(value: string, attrValue: string | null ) {\n    if (!attrValue) return value || null;\n\n    const attrTokens = this.settingOptions.reduce((tokens, option) =>\n      TokenListUtils.remove(tokens, option), TokenListUtils.split(attrValue));\n    value && attrTokens.push(value);\n\n    return TokenListUtils.join(attrTokens);\n  }\n\n  updateFrom(model: UIPStateModel) {\n    this.reset();\n    const attrValues = model.getAttribute(this.target, this.attribute);\n\n    if (!attrValues.length) {\n      this.disabled = true;\n      return this.setInconsistency(WARNING_MSG.noTarget);\n    }\n\n    this.mode === 'replace' ? this.replaceFrom(attrValues) : this.appendFrom(attrValues);\n  }\n\n  /** Updates setting's value for replace {@link mode} */\n  protected replaceFrom(attrValues: (string | null)[]): void {\n    if (!TokenListUtils.hasSameElements(attrValues)) return this.setInconsistency(WARNING_MSG.multiple);\n\n    if (attrValues[0] !== null &&\n      TokenListUtils.contains(this.settingOptions, TokenListUtils.split(attrValues[0]))) {\n      return this.setValue(attrValues[0]);\n    }\n\n    return this.multiple ? this.setValue('') : this.setInconsistency(WARNING_MSG.noMatch);\n  }\n\n  /** Updates setting's value for {@link mode} = \"append\" */\n  protected appendFrom(attrValues: (string | null)[]): void {\n    // array of each attribute's value intersection with select options\n    const valuesOptions = attrValues.map(val => TokenListUtils.intersection(this.settingOptions, TokenListUtils.split(val)));\n\n    // make empty option active if no options intersections among attribute values\n    if (this.settingOptions.includes('') && valuesOptions.every(inter => !inter.length)) {\n      return this.setValue('');\n    }\n\n    // common options among all attribute values\n    const commonOptions = TokenListUtils.intersection(...valuesOptions);\n\n    if (this.multiple || commonOptions.length) return this.setValue(TokenListUtils.join(commonOptions));\n\n    return this.setInconsistency(TokenListUtils.hasSameElements(attrValues) ?\n      WARNING_MSG.noMatch : WARNING_MSG.multiple);\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.values.join(' ');\n  }\n\n  protected setValue(value: string): void {\n    this.$$off(this._onChange);\n    value.split(' ').forEach(opt => this.$field.setSelected(opt, true));\n    this.$$on(this._onChange);\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    const inconsistentOption = new Option(msg, UIPSelectSetting.inconsistentValue,\n      false, true);\n    inconsistentOption.disabled = true;\n\n    this.$field.$select.add(inconsistentOption, 0);\n    this.$field.update();\n  }\n\n  /** Handles setting `change` event to clear inconsistent value */\n  @listen('change')\n  protected clearInconsistency(): void {\n    this.select.remove(this.settingOptions.indexOf(UIPSelectSetting.inconsistentValue));\n  }\n\n\n  /**\n   * Handles {@link UIPRoot} `uip:configchange` event to\n   * manage dropdown theme\n   */\n  @listen({event: 'uip:configchange', target: `::parent(.${UIPRoot.is})`})\n  protected onRootThemeChange(e: CustomEvent): void {\n    if (e.detail.attribute !== 'dark-theme') return;\n    let dropdownClass = UIPSelectSetting.dropdownClass;\n    if (e.detail.value !== null) dropdownClass += ' uip-dark-dropdown';\n    this.$field.dropdownClass = dropdownClass;\n  }\n\n  set disabled(force: boolean) {\n    this.$field.toggleAttribute('disabled', force);\n  }\n\n  /** Resets {@link $field} value. */\n  protected reset(): void {\n    this.disabled = false;\n    this.$field.options.forEach(opt => opt.selected = false);\n    this.$field.$select.remove(this.settingOptions.indexOf(UIPSelectSetting.inconsistentValue));\n  }\n\n  public static register() {\n    customElements.whenDefined('esl-select').then(() => super.register());\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport TokenListUtils from '../../utils/token-list-utils';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\n/**\n * Custom setting to add/remove attributes or append values to attribute\n * @extends UIPSetting\n */\nexport class UIPBoolSetting extends UIPSetting {\n  public static is = 'uip-bool-setting';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n  /**\n   * Value for updating [attribute's]{@link UIPSetting#attribute} value\n   * If it's unset, setting adds/removes [attribute]{@link UIPSetting#attribute}\n   */\n  @attr({defaultValue: ''}) public value: string;\n  /**\n   * Attribute to set mode for setting\n   * `replace` - replacing [attribute's]{@link UIPSetting#attribute} value with setting's value\n   * `append` - appending [attribute's]{@link UIPSetting#attribute} value to attribute's value\n   */\n  @attr({defaultValue: 'replace'}) public mode: 'replace' | 'append';\n\n  /** Checkbox field to change setting's value */\n  @memoize()\n  protected get $field(): HTMLInputElement {\n    const $field = document.createElement('input');\n    $field.type = 'checkbox';\n    $field.name = this.label;\n    return $field;\n  }\n\n  /** Label element for input */\n  @memoize()\n  protected get $label(): HTMLLabelElement {\n    const $label = document.createElement('label');\n    $label.innerText = this.label;\n    $label.append(this.$field);\n    return $label;\n  }\n\n  /** Container element for displaying inconsistency message */\n  @memoize()\n  protected get $inconsistencyMarker(): HTMLElement {\n    const marker = document.createElement('div');\n    marker.classList.add('inconsistency-marker');\n    return marker;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.insertBefore(this.$label, this.firstChild);\n  }\n\n  applyTo(model: UIPStateModel): void {\n    if (this.mode === 'replace') return super.applyTo(model);\n\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      modifier: this.$settings,\n      transform: this.transform.bind(this, this.getDisplayedValue()),\n    };\n\n    model.changeAttribute(cfg);\n  }\n\n  /** Function to transform(update) attribute value */\n  transform(value: string | false,  attrValue: string | null): string | null {\n    if (!attrValue) return value || null;\n\n    const attrTokens = TokenListUtils.remove(TokenListUtils.split(attrValue), this.value);\n    value && attrTokens.push(this.value);\n\n    return TokenListUtils.join(attrTokens);\n  }\n\n  updateFrom(model: UIPStateModel): void {\n    this.disabled = false;\n    const attrValues = model.getAttribute(this.target, this.attribute);\n\n    if (!attrValues.length) {\n      this.disabled = true;\n      return this.setInconsistency(WARNING_MSG.noTarget);\n    }\n\n    this.mode === 'replace' ? this.updateReplace(attrValues) : this.updateAppend(attrValues);\n  }\n\n  /** Updates setting's value for replace {@link mode} */\n  protected updateReplace(attrValues: (string | null)[]): void {\n    if (!TokenListUtils.hasSameElements(attrValues)) {\n      return this.setInconsistency(WARNING_MSG.multiple);\n    }\n\n    return this.setValue((this.value && attrValues[0] !== this.value) ? null : attrValues[0]);\n  }\n\n  /** Updates setting's value for append {@link mode} */\n  protected updateAppend(attrValues: (string | null)[]): void {\n    const containsFunction = (val: string | null) =>\n      TokenListUtils.contains(TokenListUtils.split(val), [this.value]);\n\n    if (attrValues.every(containsFunction)) return this.setValue(this.value);\n    if (!attrValues.some(containsFunction)) return this.setValue(null);\n\n    return this.setInconsistency(WARNING_MSG.multiple);\n  }\n\n  protected getDisplayedValue(): string | false {\n    if (this.value) {\n      return this.$field.checked ? this.value : false;\n    }\n\n    return this.$field.checked ? '' : false;\n  }\n\n  protected setValue(value: string | null): void {\n    if (this.value) {\n      this.$field.checked = value === this.value;\n    } else {\n      this.$field.checked = value !== null;\n    }\n    this.$inconsistencyMarker.remove();\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.checked = false;\n    this.$inconsistencyMarker.innerText = msg;\n    this.append(this.$inconsistencyMarker);\n  }\n\n  set disabled(force: boolean) {\n    this.$inconsistencyMarker.classList.toggle('disabled', force);\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\nexport class UIPSliderSetting extends UIPSetting {\n  public static is = 'uip-slider-setting';\n\n  /** Setting's visible name. */\n  @attr({defaultValue: ''}) public label: string;\n  /** Minimum range value. */\n  @attr({defaultValue: '0'}) public min: string;\n  /** Maximum range value. */\n  @attr({defaultValue: '0'}) public max: string;\n  /** Step for range. */\n  @attr({defaultValue: '0'}) public step: string;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    this.$label.append(this.$field);\n    this.append(this.$label);\n    this.append(this.$fieldValue);\n  }\n\n  protected disconnectedCallback() {\n    this.innerHTML = '';\n    super.disconnectedCallback();\n  }\n\n  /** Range input to change setting's value */\n  @memoize()\n  protected get $field(): HTMLInputElement {\n    const $field = document.createElement('input');\n    $field.type = 'range';\n\n    $field.min = this.min;\n    $field.max = this.max;\n    $field.step = this.step;\n\n    return $field;\n  }\n\n  /** Label element for input */\n  @memoize()\n  protected get $label(): HTMLLabelElement {\n    const $label = document.createElement('label');\n    $label.innerHTML = `<span>${this.label}</span>`;\n    return $label;\n  }\n\n  /** Container for current value */\n  @memoize()\n  protected get $fieldValue(): HTMLDivElement {\n    const $fieldValue = document.createElement('div');\n    $fieldValue.classList.add('slider-value');\n    return $fieldValue;\n  }\n\n  /** Handles `input` event to display its current value */\n  @listen('input')\n  protected updateSliderValue() {\n    this.$fieldValue.textContent = `Value: ${this.$field.value}`;\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.value;\n  }\n\n  protected setValue(value: string | null): void {\n    this.$field.value = value || this.min;\n    this.updateSliderValue();\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.value = this.min;\n    this.$fieldValue.textContent = msg;\n  }\n\n  set disabled(force: boolean) {\n    this.$fieldValue.classList.toggle('disabled', force);\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","import {ESLSelect} from '@exadel/esl/modules/esl-forms/esl-select/core';\nimport {ESLImage} from '@exadel/esl/modules/esl-image/core';\nimport {ESLScrollbar} from '@exadel/esl/modules/esl-scrollbar/core';\nimport {ESLTrigger} from '@exadel/esl/modules/esl-trigger/core';\nimport {ESLToggleable} from '@exadel/esl/modules/esl-toggleable/core';\nimport {ESLAlert} from '@exadel/esl/modules/esl-alert/core';\n\nimport {init} from '../../src/registration';\n\nESLSelect.register();\nESLImage.register();\nESLScrollbar.register();\nESLTrigger.register();\nESLToggleable.register();\nESLAlert.register();\nESLAlert.init();\ninit();\n","import {UIPRoot} from './base/root';\nimport {UIPStateModel, ChangeAttrConfig} from './base/model';\nimport {UIPPlugin} from './base/plugin';\n\nimport {UIPPreview} from './preview/preview';\n\nexport {UIPRoot, UIPPlugin, UIPStateModel, UIPPreview, ChangeAttrConfig};\n\nexport const registerCore = () => {\n  UIPRoot.register();\n  UIPPreview.register();\n};\n","import {UIPHeader} from './header/header';\nimport {UIPOptions} from './header/options/options';\nimport {UIPSnippets} from './header/snippets/snippets';\nimport {UIPEditor} from './editor/editor';\nimport {UIPSettings} from './settings/settings';\nimport {registeredSettings} from '../registration';\n\nexport {UIPOptions, UIPEditor, UIPSettings, UIPSnippets, UIPHeader};\n\nexport const registerPlugins = () => {\n  UIPHeader.register();\n  UIPOptions.register();\n  UIPSnippets.register();\n  UIPEditor.register();\n  registeredSettings().then(() => UIPSettings.register());\n};\n","import {UIPSetting} from '../plugins/settings/setting';\nimport {UIPTextSetting} from './text-setting/text-setting';\nimport {UIPSelectSetting} from './select-setting/select-setting';\nimport {UIPBoolSetting} from './bool-setting/bool-setting';\nimport {UIPSliderSetting} from './slider-setting/slider-setting';\n\nexport {UIPSetting, UIPTextSetting, UIPBoolSetting, UIPSelectSetting, UIPSliderSetting};\n\nexport const registerSettings = () => {\n  UIPBoolSetting.register();\n  UIPTextSetting.register();\n  UIPSelectSetting.register();\n  UIPSliderSetting.register();\n};\n\nexport const registeredSettings = () => {\n  return Promise.all([\n  UIPBoolSetting.registered,\n  UIPTextSetting.registered,\n  UIPSelectSetting.registered,\n  UIPSliderSetting.registered,\n  ]);\n};\n"],"names":["inProgress","bind","target","propertyKey","descriptor","value","TypeError","originalFn","enumerable","configurable","get","getBound","proto","Object","getPrototypeOf","this","desc","set","defineProperty","writable","SyntheticEventTarget","constructor","_listeners","hasEventListener","type","minCount","_a","length","addEventListener","callback","validateEventListenerType","includes","push","assign","removeEventListener","filter","cb","dispatchEvent","e","forEach","listener","call","handleEvent","defaultPrevented","addListener","removeListener","Error","defined","params","param","undefined","getPropertyDescriptor","o","prop","getOwnPropertyDescriptor","AceTheme","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","id","loaded","__webpack_modules__","m","amdD","n","getter","__esModule","d","a","definition","key","f","chunkId","Promise","all","keys","reduce","promises","u","g","globalThis","Function","window","obj","prototype","hasOwnProperty","l","url","done","script","needAttach","scripts","document","getElementsByTagName","i","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","fn","setTimeout","head","appendChild","r","Symbol","toStringTag","nmd","paths","children","scriptUrl","importScripts","location","currentScript","replace","p","installedChunks","j","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","self","arg","resolveProperty","val","origin","isObject","toKeyDef","parseKeysPath","path","start","parts","end","substring","isIndex","Math","floor","getByPath","defaultValue","result","Array","isArray","map","parseKeys","curr","toKebabCase","str","toLowerCase","unwrapParenthesis","trim","parseString","String","parseNumber","nanValue","NaN","isNaN","evaluate","console","warn","DEF_FORMAT_MATCHER","getAttr","$el","fallback","$host","setAttr","removeAttribute","attr","config","propName","attrName","dataAttr","buildAttrName","parser","readonly","serializer","boolAttr","readOnly","hasAttribute","buildConditionalDescriptor","ExportNs","root","split","index","exportNs","declare","isMouseEvent","MouseEvent","isTouchEvent","TouchEvent","PASSIVE_EVENTS","isPassiveByDefault","getTouchPoint","source","changedTouches","x","pageX","y","pageY","wrap","arr","uniq","slice","Set","item","add","memoizeFn","hashFn","defaultArgsHashFn","memo","args","apply","cache","has","Map","clear","memoize","originalMethod","locks","defineOwnKeySafe","memoizeGetter","memoizeMethod","WeakMap","delete","isEqual","obj1","obj2","is","keys1","keys2","isSimilar","mask","deep","arrObj","arrMask","comparer","every","itm","property","isRelativeNode","nodeA","nodeB","contains","createSequenceFinder","next","includeSelf","base","predicate","matches","isMatches","el","matcher","findNext","nextElementSibling","findPrev","previousElementSibling","findParent","parentElement","findClosest","findHost","getRootNode","ShadowRoot","host","findAll","sel","from","querySelectorAll","findChildren","findClosestBy","node","skipSelf","current","TraversingUtils","isRelative","closestBy","Rect","static","rect","left","top","width","height","rect1","rect2","max","bottom","min","right","cx","cy","grow","incrementX","incrementY","shrink","decrementX","decrementY","area","getNodeName","element","Window","getParentNode","assignedSlot","ownerDocument","documentElement","getDocument","getListScrollParents","list","scrollParent","getScrollParent","isBody","body","isScrollable","updatedList","concat","indexOf","HTMLElement","overflow","overflowX","overflowY","getComputedStyle","test","ESLTraversingQuery_1","ESLTraversingQuery","PROCESSORS_REGEX","ELEMENT_PROCESSORS","COLLECTION_PROCESSORS","RegExp","join","selString","els","collection","processors","findFirst","processor","rest","isCollectionProcessor","processedItem","processCollection","traverseChain","processElement","resultCollection","last","stack","query","scope","found","part","splitQueries","traverseQuery","term","rootSel","shift","baseCollection","initial","acc","traverse","options","visibility","getClientRects","opacity","parent","Element","viewport","wndIntersection","intersect","wnd","scrollX","pageXOffset","scrollY","pageYOffset","innerWidth","clientWidth","innerHeight","clientHeight","getWindowRect","getBoundingClientRect","isInViewport","isVisible","decorators","c","arguments","Reflect","decorate","__decorate","LISTENERS","ESLEventListener","handler","defaults","capture","passive","$targets","delegate","selector","handlerBound","handlerFull","once","unsubscribe","isDelegatedTarget","currentTarget","closest","subscribe","remove","criteria","listeners","instance","eventDesc","createOrResolve","eventString","events","terms","deduplicate","splitEvents","subscribed","DESCRIPTORS","getOwnDescriptors","createIfNotExists","isEventDescriptor","getAutoDescriptors","store","getDescriptorsKeysFor","auto","ESLEventUtils","dispatch","eventName","eventInit","init","bubbles","composed","cancelable","CustomEvent","descriptors","initDescriptor","inherit","superDesc","ReferenceError","EventUtils","listen","lockStore","className","locker","elLocks","classLocks","lock","classList","size","unlock","CSSClassUtils","tokenString","cls","tokens","splitTokens","state","ENTER","ESC","SPACE","ARROW_UP","ARROW_DOWN","SYSTEM_KEYS","prototypeConfig","ESLBaseElement","super","_connected","connectedCallback","disconnectedCallback","connected","$$on","$$off","condition","$$cls","toggle","$$attr","prevValue","$$fire","tagName","customElements","define","registered","whenDefined","ESLSelectWrapper","_mutationObserver","MutationObserver","_onTargetMutation","$select","_$select","select","_onTargetChange","disconnect","_onChange","_onListChange","newTarget","oldTarget","observe","observationConfig","changes","change","addedNodes","removedNodes","_onReset","form","multiple","selectedOptions","selected","getOption","find","setSelected","option","isSelected","opt","hasSelected","isAllSelected","disabled","setAllSelected","values","required","validity","validationMessage","willValidate","checkValidity","reportValidity","setCustomValidity","subtree","attributes","attributeFilter","childList","characterData","rafDecorator","lastArgs","requestAnimationFrame","decorator","decoratedFn","ESLSelectRenderer","$remove","$container","$text","$rest","owner","then","render","hasValue","toggleAttribute","applyItems","text","items","limit","textContent","match","format","moreLabelFormat","scrollWidth","_onClear","stopPropagation","preventDefault","_onResize","jsonAttr","JSON","stringify","buildJsonAttrDescriptor","ns","sequences","__esl_sequences__","userAgent","vendor","platform","navigator","isTrident","isIE","isEdgeHTML","isBlinkEdge","isEdge","isGecko","isFirefox","isOpera","isChrome","isWebkit","isSafari","isBlink","isBot","isAndroid","isMobileIOS13","maxTouchPoints","isMobileIOS","isLegacyMobile","isMobile","isMobileSafari","isTouchDevice","navApi","msMaxTouchPoints","Touch","hasHover","matchMedia","TOUCH_EVENTS","START","MOVE","END","DeviceDetector","DelayedTask","_fn","_timeout","run","put","task","delay","cancel","activators","ESLToggleable","_open","_task","_trackHover","noAutoId","tag","prefix","uid","sequentialUID","initiallyOpened","setInitialState","attributeChangedCallback","oldVal","newVal","open","initiator","showDelay","hideDelay","GROUP_CHANGED_EVENT","detail","oldGroupName","newGroupName","initialParams","bindOutsideEventTracking","track","_onOutsideAction","bindHoverStateTracking","_trackHoverDelay","_onMouseEnter","_onMouseLeave","mergeDefaultParams","defaultParams","copy","show","hide","showTask","closeOnOutsideAction","trackHover","hideTask","force","silent","BEFORE_SHOW_EVENT","activator","onShow","SHOW_EVENT","BEFORE_HIDE_EVENT","onHide","HIDE_EVENT","activeClass","bodyClass","updateA11y","REFRESH_EVENT","$a11yTarget","querySelector","targetEl","isOutsideAction","KeyboardEvent","_onCloseClick","_onKeyboardEvent","closeOnEsc","baseParams","trackHoverParams","buildRequestParams","_onShowRequest","_onHideRequest","observedAttributes","closeTrigger","SHOW_REQUEST_EVENT","HIDE_REQUEST_EVENT","ready","readyState","RTLUtils","direction","scrollType","createTextNode","dir","style","position","fontSize","createDummyEl","scrollLeft","isRtl","ESLScrollbar","_deferredDrag","_onPointerDrag","_deferredRefresh","refresh","_scrollTimer","_resizeObserver","ResizeObserver","rec","updateContentObserve","findTarget","unbindTargetEvents","$target","first","_$target","content","bindTargetEvents","innerHTML","$scrollbarTrack","trackClass","$scrollbarThumb","thumbClass","_onScrollOrResize","recs","contentChanges","unobserve","scrollableSize","horizontal","scrollHeight","trackOffset","offsetWidth","offsetHeight","thumbOffset","thumbSize","areaSize","scrollSize","scrollOffset","normalizeScrollLeft","scrollTop","scrollTargetTo","normalizePosition","update","relativePosition","pos","scrollTo","behavior","dragging","thumbPosition","updateMarkers","toPosition","point","offset","props","getOffsetPoint","_onPointerDown","_initialPosition","_pointerPosition","_initialMousePosition","_onThumbPointerDown","_onPointerDownTick","_onPointerUp","allowedOffset","noContinuousScroll","setProperty","_onBodyClick","_onPointerMove","positionChange","scrollableAreaHeight","absChange","removeProperty","stopImmediatePropagation","_onRefresh","ESLSelectItem_1","ESLSelectItem","tabIndex","original","ESLSelectList","register","$list","$scroll","$selectAll","_updateDisabled","bindSelect","HTMLSelectElement","_renderItems","$items","build","pinSelected","_renderGroup","_updateSelectAll","selectAllLabel","_onClick","_onKeydown","activeElement","count","increment","focus","ESLSelectDropdown","_deferredUpdatePosition","updatePosition","_disposeTimeout","$owner","dropdownClass","focusable","preventScroll","_onTabKey","shiftKey","windowY","ESLSelect","$renderer","$dropdown","_prepare","_updateMarkers","_dispose","valueChanged","emptyText","placeholder","hasValueClass","focusEl","hasFocus","hasFocusClass","_onFocusOut","click","_onPopupStateChange","deepMerge","objects","res","ESLScreenDPR_1","ESLScreenDPR","dpr","toFixed","VALUE_REGEXP","parseFloat","ignoreBotsDpr","toDPI","ESLScreenBreakpoints_1","registry","ESLScreenBreakpoints","minWidth","maxWidth","BP_NAME_REGEXP","ESLScreenBreakpoint","names","sign","bp","BP_REGEXP","shortcut","mediaQueryGE","mediaQueryLE","mediaQuery","toString","shortcuts","ESLEnvShortcuts","_shortcuts","MediaQueryConstCondition","_matches","optimize","eq","ALL","NOT_ALL","ESLMediaChangeEvent","Event","media","MediaQueryCondition","inverted","_inverted","_mq","MediaQueryContainer","MediaQueryConjunction","optimizedItems","MediaQueryDisjunction","pretty","ESLMediaQuery_1","ESLMediaQuery","preprocessor","_preprocessors","unshift","conjunctions","conditions","parseSimpleQuery","SHORTCUT_PATTERN","replacer","process","queryInverted","processedQuery","preprocess","sanitizedQuery","invert","use","ESLMediaRule","payload","payloadValue","lex","create","ESLMediaRuleList_1","ESLMediaRuleListEvent","previous","iObserver","ESLMediaRuleList","common","pop","parseTuple","parseQuery","rules","parse","rule","queries","valueList","validRules","_rules","_onMatchChanged","_value","computedValue","active","activeValue","activeValues","curValue","newValue","getIObserver","IntersectionObserver","entries","handleViewport","threshold","rootMargin","entry","image","isIntersecting","intersectionRatio","triggerLoad","STRING_PARSER","OBJECT_PARSER","sanitizeElAttributes","isDangerousAttribute","removeDangerousAttributes","EMPTY_IMAGE","isEmptyImage","STRATEGIES","img","shadowImg","isEmpty","backgroundImage","paddingTop","innerImg","attachInnerImage","removeInnerImage","devicePixelRatio","XMLHttpRequest","onreadystatechange","status","html","allowedTopLevelTags","DOMParser","parseFromString","removeScripts","childNodes","filterElements","sanitize","responseText","send","ESLImage_1","ESLImage","alt","srcRules","_onMediaMatchChange","lazyObservable","_detachLazyTrigger","_srcRules","changeMode","lazyTriggered","currentSrc","_currentSrc","empty","canUpdate","lazy","originalWidth","_shadowImageElement","originalHeight","mode","clearImage","syncImage","getPath","_shadowImg","refreshOnUpdate","complete","_shadowImgError","_onError","_onLoad","role","innerImage","srcBase","updateContainerClasses","strategy","_strategy","_innerImg","innerImageClass","cloneNode","Image","naturalHeight","_onReadyState","successful","LOAD_EVENT","ERROR_EVENT","READY_EVENT","containerClass","DEFAULT_CONTAINER_CLS","isLoadState","containerClassState","containerClassTarget","ESLToggleablePlaceholder","$placeholder","$origin","copyAttributesFromOrigin","allowedAttrs","ESLTrigger","updateTargetFromSelector","newPopupInstance","_onTargetStateChange","a11yTarget","a11yLabel","a11yLabelActive","a11yLabelInactive","allowHover","allowClick","trackClick","initA11y","isTargetIgnored","ignore","$ignore","mergeToggleableParams","showTarget","actionParams","hideTarget","toggleTarget","updateState","isActive","wasActive","clsTarget","activeClassTarget","originalEvent","CHANGE_EVENT","_onPrimaryEvent","ignoreEsc","hoverShowDelay","hoverHideDelay","that","OBSERVED_EVENTS","ESLAlert_1","ESLAlert","alert","defaultConfig","$content","iframe","createZIndexIframe","_clearTimeout","hideTime","activeCls","UIPStateModel","fire","_html","_isFired","setHtml","markup","modifier","_lastModifier","dispatchChange","lastModifier","snippets","_snippets","activeSnippet","_activeSnippet","snippet","applySnippet","changeAttribute","cfg","attribute","elements","transform","transformed","UIPRoot","model","$snippets","SNIPPET_SEL","initSnippets","addStateListener","removeStateListener","UIPPlugin","$inner","pluginType","_onRootStateChange","UIPPreview","clearInlineSize","UIPSnippets","$snippetList","$title","$dropdownControl","$dropdownWrapper","LIST_ITEM","$active","onOutsideAction","toggleDropdown","ACTIVE_ITEM","updateTitleText","renderDropdown","title","buildListItem","label","$li","_onItemClick","currentIndex","_onDropdownClick","UIPOption","optionConfig","optionValue","$root","toggleState","UIPOptions","UIPOptionsConfig","elem","optionsCfg","canActivate","createEl","append","_onRootConfigChange","_onOptionClick","component","UIPHeader","childElementCount","autofill","renderSnippets","renderOptions","renderCopy","snippetsEl","prepend","optionsEl","icon","_onCopyClick","clipboard","writeText","promisifyEvent","eventCallback","createDeferred","rej","PromiseUtils","debounce","wait","thisArg","deferred","debouncedSubject","fromTimeout","isReject","fromEvent","fromMarker","marker","repeat","repeatSequence","tryUntil","tryCount","check","UIPEditor","collapsedAttribute","initEditor","editor","destroy","resizeObserver","Ace","Editor","setConfig","editorConfig","getValue","setValue","updateEditorConfig","resize","theme","WARNING_MSG","UIPSetting","$settings","UIPSettings","applyTo","getDisplayedValue","isValid","setInconsistency","updateFrom","msg","updateInner","$settingsList","_onSettingChanged","settings","getElementsByClassName","setting","UIPTextSetting","$field","innerText","TokenListUtils","arr1","arr2","array","subArray","b","intersection","UIPSelectSetting","$label","settingOptions","Date","now","round","random","randUID","htmlFor","transformValue","attrValue","attrTokens","reset","attrValues","replaceFrom","appendFrom","hasSameElements","valuesOptions","inter","commonOptions","inconsistentOption","Option","inconsistentValue","clearInconsistency","onRootThemeChange","UIPBoolSetting","$inconsistencyMarker","insertBefore","firstChild","updateReplace","updateAppend","containsFunction","checked","UIPSliderSetting","$fieldValue","step","updateSliderValue"],"sourceRoot":""}