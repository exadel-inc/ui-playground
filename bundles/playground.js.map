{"version":3,"file":"playground.js","mappings":"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","sources":["webpack:///../node_modules/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.js","webpack:///../node_modules/prismjs/prism.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/functions.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/types.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/path.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/format.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/api.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/abstract/dom-target.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/bool-attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/environment/export-ns.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/events/misc.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/array.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/compare.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/memoize.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/utils.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/memoize.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/rect.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/window.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/scroll/parent.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/traversing.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/visible.js","webpack:///../node_modules/@exadel/esl/modules/esl-traversing-query/core/esl-traversing-query.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/listener.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/descriptors.js","webpack:///../node_modules/@exadel/esl/modules/esl-event-listener/core/api.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/listen.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/class.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/keys.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/prop.js","webpack:///../node_modules/@exadel/esl/modules/esl-base-element/core/esl-base-element.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-wrapper.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/raf.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/decorate.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select-renderer.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/json-attr.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/ready.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/ready.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/decorators/bind.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/uid.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/environment/device-detector.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/delayed-task.js","webpack:///../node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/copy.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/rtl.js","webpack:///../node_modules/@exadel/esl/modules/esl-popup/core/esl-popup-position.js","webpack:///../node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-placeholder.js","webpack:///../node_modules/@exadel/esl/modules/esl-popup/core/esl-popup-placeholder.js","webpack:///../node_modules/@exadel/esl/modules/esl-popup/core/esl-popup.js","webpack:///../node_modules/@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-item.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select-list/core/esl-select-list.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select-dropdown.js","webpack:///../node_modules/@exadel/esl/modules/esl-forms/esl-select/core/esl-select.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/misc/object/merge.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/events/target.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-dpr.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-breakpoint.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/common/env-shortcuts.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-const.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-base.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-condition.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-containers.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-query.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule.js","webpack:///../node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule-list.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image-iobserver.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/dom/sanitize.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image-strategies.js","webpack:///../node_modules/@exadel/esl/modules/esl-image/core/esl-image.js","webpack:///../node_modules/@exadel/esl/modules/esl-trigger/core/esl-trigger.js","webpack:///../node_modules/@exadel/esl/modules/esl-alert/core/esl-alert.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/fixes/ie-fixes.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/abstract/observable.js","webpack:///../src/core/base/model.ts","webpack:///../src/core/base/root.ts","webpack:///../node_modules/jsx-dom/lib/index.js","webpack:///../src/core/base/plugin.tsx","webpack:///../src/core/preview/preview.ts","webpack:///../src/plugins/header/options/OptionIcons.tsx","webpack:///../src/plugins/header/snippets/snippets.tsx","webpack:///../src/plugins/header/options/option/option.tsx","webpack:///../src/plugins/header/options/options.ts","webpack:///../src/plugins/header/header.tsx","webpack:///../node_modules/codejar/dist/codejar.js","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/promise/defered.js","webpack:///../src/plugins/editor/editor.tsx","webpack:///../node_modules/@exadel/esl/modules/esl-utils/async/debounce.js","webpack:///../src/utils/warning-msg.ts","webpack:///../src/plugins/settings/setting.ts","webpack:///../src/plugins/settings/settings.tsx","webpack:///../src/settings/text-setting/text-setting.tsx","webpack:///../src/utils/token-list-utils.ts","webpack:///../src/settings/select-setting/select-setting.ts","webpack:///../src/settings/bool-setting/bool-setting.tsx","webpack:///../src/settings/slider-setting/slider-setting.tsx","webpack:///./src/playground.ts","webpack:///../src/core/registration.ts","webpack:///../src/plugins/registration.ts","webpack:///../src/settings/registration.ts"],"sourcesContent":["(function () {\n\n\tif (typeof Prism === 'undefined') {\n\t\treturn;\n\t}\n\n\tvar assign = Object.assign || function (obj1, obj2) {\n\t\tfor (var name in obj2) {\n\t\t\tif (obj2.hasOwnProperty(name)) {\n\t\t\t\tobj1[name] = obj2[name];\n\t\t\t}\n\t\t}\n\t\treturn obj1;\n\t};\n\n\tfunction NormalizeWhitespace(defaults) {\n\t\tthis.defaults = assign({}, defaults);\n\t}\n\n\tfunction toCamelCase(value) {\n\t\treturn value.replace(/-(\\w)/g, function (match, firstChar) {\n\t\t\treturn firstChar.toUpperCase();\n\t\t});\n\t}\n\n\tfunction tabLen(str) {\n\t\tvar res = 0;\n\t\tfor (var i = 0; i < str.length; ++i) {\n\t\t\tif (str.charCodeAt(i) == '\\t'.charCodeAt(0)) {\n\t\t\t\tres += 3;\n\t\t\t}\n\t\t}\n\t\treturn str.length + res;\n\t}\n\n\tvar settingsConfig = {\n\t\t'remove-trailing': 'boolean',\n\t\t'remove-indent': 'boolean',\n\t\t'left-trim': 'boolean',\n\t\t'right-trim': 'boolean',\n\t\t'break-lines': 'number',\n\t\t'indent': 'number',\n\t\t'remove-initial-line-feed': 'boolean',\n\t\t'tabs-to-spaces': 'number',\n\t\t'spaces-to-tabs': 'number',\n\t};\n\n\tNormalizeWhitespace.prototype = {\n\t\tsetDefaults: function (defaults) {\n\t\t\tthis.defaults = assign(this.defaults, defaults);\n\t\t},\n\t\tnormalize: function (input, settings) {\n\t\t\tsettings = assign(this.defaults, settings);\n\n\t\t\tfor (var name in settings) {\n\t\t\t\tvar methodName = toCamelCase(name);\n\t\t\t\tif (name !== 'normalize' && methodName !== 'setDefaults' &&\n\t\t\t\t\tsettings[name] && this[methodName]) {\n\t\t\t\t\tinput = this[methodName].call(this, input, settings[name]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t/*\n\t\t * Normalization methods\n\t\t */\n\t\tleftTrim: function (input) {\n\t\t\treturn input.replace(/^\\s+/, '');\n\t\t},\n\t\trightTrim: function (input) {\n\t\t\treturn input.replace(/\\s+$/, '');\n\t\t},\n\t\ttabsToSpaces: function (input, spaces) {\n\t\t\tspaces = spaces|0 || 4;\n\t\t\treturn input.replace(/\\t/g, new Array(++spaces).join(' '));\n\t\t},\n\t\tspacesToTabs: function (input, spaces) {\n\t\t\tspaces = spaces|0 || 4;\n\t\t\treturn input.replace(RegExp(' {' + spaces + '}', 'g'), '\\t');\n\t\t},\n\t\tremoveTrailing: function (input) {\n\t\t\treturn input.replace(/\\s*?$/gm, '');\n\t\t},\n\t\t// Support for deprecated plugin remove-initial-line-feed\n\t\tremoveInitialLineFeed: function (input) {\n\t\t\treturn input.replace(/^(?:\\r?\\n|\\r)/, '');\n\t\t},\n\t\tremoveIndent: function (input) {\n\t\t\tvar indents = input.match(/^[^\\S\\n\\r]*(?=\\S)/gm);\n\n\t\t\tif (!indents || !indents[0].length) {\n\t\t\t\treturn input;\n\t\t\t}\n\n\t\t\tindents.sort(function (a, b) { return a.length - b.length; });\n\n\t\t\tif (!indents[0].length) {\n\t\t\t\treturn input;\n\t\t\t}\n\n\t\t\treturn input.replace(RegExp('^' + indents[0], 'gm'), '');\n\t\t},\n\t\tindent: function (input, tabs) {\n\t\t\treturn input.replace(/^[^\\S\\n\\r]*(?=\\S)/gm, new Array(++tabs).join('\\t') + '$&');\n\t\t},\n\t\tbreakLines: function (input, characters) {\n\t\t\tcharacters = (characters === true) ? 80 : characters|0 || 80;\n\n\t\t\tvar lines = input.split('\\n');\n\t\t\tfor (var i = 0; i < lines.length; ++i) {\n\t\t\t\tif (tabLen(lines[i]) <= characters) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar line = lines[i].split(/(\\s+)/g);\n\t\t\t\tvar len = 0;\n\n\t\t\t\tfor (var j = 0; j < line.length; ++j) {\n\t\t\t\t\tvar tl = tabLen(line[j]);\n\t\t\t\t\tlen += tl;\n\t\t\t\t\tif (len > characters) {\n\t\t\t\t\t\tline[j] = '\\n' + line[j];\n\t\t\t\t\t\tlen = tl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlines[i] = line.join('');\n\t\t\t}\n\t\t\treturn lines.join('\\n');\n\t\t}\n\t};\n\n\t// Support node modules\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = NormalizeWhitespace;\n\t}\n\n\tPrism.plugins.NormalizeWhitespace = new NormalizeWhitespace({\n\t\t'remove-trailing': true,\n\t\t'remove-indent': true,\n\t\t'left-trim': true,\n\t\t'right-trim': true,\n\t\t/*'break-lines': 80,\n\t\t'indent': 2,\n\t\t'remove-initial-line-feed': false,\n\t\t'tabs-to-spaces': 4,\n\t\t'spaces-to-tabs': 4*/\n\t});\n\n\tPrism.hooks.add('before-sanity-check', function (env) {\n\t\tvar Normalizer = Prism.plugins.NormalizeWhitespace;\n\n\t\t// Check settings\n\t\tif (env.settings && env.settings['whitespace-normalization'] === false) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check classes\n\t\tif (!Prism.util.isActive(env.element, 'whitespace-normalization', true)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Simple mode if there is no env.element\n\t\tif ((!env.element || !env.element.parentNode) && env.code) {\n\t\t\tenv.code = Normalizer.normalize(env.code, env.settings);\n\t\t\treturn;\n\t\t}\n\n\t\t// Normal mode\n\t\tvar pre = env.element.parentNode;\n\t\tif (!env.code || !pre || pre.nodeName.toLowerCase() !== 'pre') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (env.settings == null) { env.settings = {}; }\n\n\t\t// Read settings from 'data-' attributes\n\t\tfor (var key in settingsConfig) {\n\t\t\tif (Object.hasOwnProperty.call(settingsConfig, key)) {\n\t\t\t\tvar settingType = settingsConfig[key];\n\t\t\t\tif (pre.hasAttribute('data-' + key)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar value = JSON.parse(pre.getAttribute('data-' + key) || 'true');\n\t\t\t\t\t\tif (typeof value === settingType) {\n\t\t\t\t\t\t\tenv.settings[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (_error) {\n\t\t\t\t\t\t// ignore error\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar children = pre.childNodes;\n\t\tvar before = '';\n\t\tvar after = '';\n\t\tvar codeFound = false;\n\n\t\t// Move surrounding whitespace from the <pre> tag into the <code> tag\n\t\tfor (var i = 0; i < children.length; ++i) {\n\t\t\tvar node = children[i];\n\n\t\t\tif (node == env.element) {\n\t\t\t\tcodeFound = true;\n\t\t\t} else if (node.nodeName === '#text') {\n\t\t\t\tif (codeFound) {\n\t\t\t\t\tafter += node.nodeValue;\n\t\t\t\t} else {\n\t\t\t\t\tbefore += node.nodeValue;\n\t\t\t\t}\n\n\t\t\t\tpre.removeChild(node);\n\t\t\t\t--i;\n\t\t\t}\n\t\t}\n\n\t\tif (!env.element.children.length || !Prism.plugins.KeepMarkup) {\n\t\t\tenv.code = before + env.code + after;\n\t\t\tenv.code = Normalizer.normalize(env.code, env.settings);\n\t\t} else {\n\t\t\t// Preserve markup for keep-markup plugin\n\t\t\tvar html = before + env.element.innerHTML + after;\n\t\t\tenv.element.innerHTML = Normalizer.normalize(html, env.settings);\n\t\t\tenv.code = env.element.textContent;\n\t\t}\n\t});\n\n}());\n","\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\n/// <reference lib=\"WebWorker\"/>\n\nvar _self = (typeof window !== 'undefined')\n\t? window   // if in browser\n\t: (\n\t\t(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)\n\t\t\t? self // if in worker\n\t\t\t: {}   // if in node js\n\t);\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n *\n * @license MIT <https://opensource.org/licenses/MIT>\n * @author Lea Verou <https://lea.verou.me>\n * @namespace\n * @public\n */\nvar Prism = (function (_self) {\n\n\t// Private helper vars\n\tvar lang = /(?:^|\\s)lang(?:uage)?-([\\w-]+)(?=\\s|$)/i;\n\tvar uniqueId = 0;\n\n\t// The grammar object for plaintext\n\tvar plainTextGrammar = {};\n\n\n\tvar _ = {\n\t\t/**\n\t\t * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the\n\t\t * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load\n\t\t * additional languages or plugins yourself.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.\n\t\t *\n\t\t * You obviously have to change this value before the automatic highlighting started. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.manual = true;\n\t\t * // add a new <script> to load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tmanual: _self.Prism && _self.Prism.manual,\n\t\t/**\n\t\t * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses\n\t\t * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your\n\t\t * own worker, you don't want it to do this.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not add its own listeners to the worker.\n\t\t *\n\t\t * You obviously have to change this value before Prism executes. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.disableWorkerMessageHandler = true;\n\t\t * // Load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tdisableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n\n\t\t/**\n\t\t * A namespace for utility methods.\n\t\t *\n\t\t * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may\n\t\t * change or disappear at any time.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t */\n\t\tutil: {\n\t\t\tencode: function encode(tokens) {\n\t\t\t\tif (tokens instanceof Token) {\n\t\t\t\t\treturn new Token(tokens.type, encode(tokens.content), tokens.alias);\n\t\t\t\t} else if (Array.isArray(tokens)) {\n\t\t\t\t\treturn tokens.map(encode);\n\t\t\t\t} else {\n\t\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the name of the type of the given value.\n\t\t\t *\n\t\t\t * @param {any} o\n\t\t\t * @returns {string}\n\t\t\t * @example\n\t\t\t * type(null)      === 'Null'\n\t\t\t * type(undefined) === 'Undefined'\n\t\t\t * type(123)       === 'Number'\n\t\t\t * type('foo')     === 'String'\n\t\t\t * type(true)      === 'Boolean'\n\t\t\t * type([1, 2])    === 'Array'\n\t\t\t * type({})        === 'Object'\n\t\t\t * type(String)    === 'Function'\n\t\t\t * type(/abc+/)    === 'RegExp'\n\t\t\t */\n\t\t\ttype: function (o) {\n\t\t\t\treturn Object.prototype.toString.call(o).slice(8, -1);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns a unique number for the given object. Later calls will still return the same number.\n\t\t\t *\n\t\t\t * @param {Object} obj\n\t\t\t * @returns {number}\n\t\t\t */\n\t\t\tobjId: function (obj) {\n\t\t\t\tif (!obj['__id']) {\n\t\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\n\t\t\t\t}\n\t\t\t\treturn obj['__id'];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Creates a deep clone of the given object.\n\t\t\t *\n\t\t\t * The main intended use of this function is to clone language definitions.\n\t\t\t *\n\t\t\t * @param {T} o\n\t\t\t * @param {Record<number, any>} [visited]\n\t\t\t * @returns {T}\n\t\t\t * @template T\n\t\t\t */\n\t\t\tclone: function deepClone(o, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar clone; var id;\n\t\t\t\tswitch (_.util.type(o)) {\n\t\t\t\t\tcase 'Object':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = /** @type {Record<string, any>} */ ({});\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\tfor (var key in o) {\n\t\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tclone[key] = deepClone(o[key], visited);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tcase 'Array':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\t(/** @type {Array} */(/** @type {any} */(o))).forEach(function (v, i) {\n\t\t\t\t\t\t\tclone[i] = deepClone(v, visited);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.\n\t\t\t *\n\t\t\t * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @returns {string}\n\t\t\t */\n\t\t\tgetLanguage: function (element) {\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar m = lang.exec(element.className);\n\t\t\t\t\tif (m) {\n\t\t\t\t\t\treturn m[1].toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn 'none';\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Sets the Prism `language-xxxx` class of the given element.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} language\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tsetLanguage: function (element, language) {\n\t\t\t\t// remove all `language-xxxx` classes\n\t\t\t\t// (this might leave behind a leading space)\n\t\t\t\telement.className = element.className.replace(RegExp(lang, 'gi'), '');\n\n\t\t\t\t// add the new `language-xxxx` class\n\t\t\t\t// (using `classList` will automatically clean up spaces for us)\n\t\t\t\telement.classList.add('language-' + language);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the script element that is currently executing.\n\t\t\t *\n\t\t\t * This does __not__ work for line script element.\n\t\t\t *\n\t\t\t * @returns {HTMLScriptElement | null}\n\t\t\t */\n\t\t\tcurrentScript: function () {\n\t\t\t\tif (typeof document === 'undefined') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif ('currentScript' in document && 1 < 2 /* hack to trip TS' flow analysis */) {\n\t\t\t\t\treturn /** @type {any} */ (document.currentScript);\n\t\t\t\t}\n\n\t\t\t\t// IE11 workaround\n\t\t\t\t// we'll get the src of the current script by parsing IE11's error stack trace\n\t\t\t\t// this will not work for inline scripts\n\n\t\t\t\ttry {\n\t\t\t\t\tthrow new Error();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Get file src url from stack. Specifically works with the format of stack traces in IE.\n\t\t\t\t\t// A stack will look like this:\n\t\t\t\t\t//\n\t\t\t\t\t// Error\n\t\t\t\t\t//    at _.util.currentScript (http://localhost/components/prism-core.js:119:5)\n\t\t\t\t\t//    at Global code (http://localhost/components/prism-core.js:606:1)\n\n\t\t\t\t\tvar src = (/at [^(\\r\\n]*\\((.*):[^:]+:[^:]+\\)$/i.exec(err.stack) || [])[1];\n\t\t\t\t\tif (src) {\n\t\t\t\t\t\tvar scripts = document.getElementsByTagName('script');\n\t\t\t\t\t\tfor (var i in scripts) {\n\t\t\t\t\t\t\tif (scripts[i].src == src) {\n\t\t\t\t\t\t\t\treturn scripts[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns whether a given class is active for `element`.\n\t\t\t *\n\t\t\t * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated\n\t\t\t * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the\n\t\t\t * given class is just the given class with a `no-` prefix.\n\t\t\t *\n\t\t\t * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is\n\t\t\t * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its\n\t\t\t * ancestors have the given class or the negated version of it, then the default activation will be returned.\n\t\t\t *\n\t\t\t * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated\n\t\t\t * version of it, the class is considered active.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} className\n\t\t\t * @param {boolean} [defaultActivation=false]\n\t\t\t * @returns {boolean}\n\t\t\t */\n\t\t\tisActive: function (element, className, defaultActivation) {\n\t\t\t\tvar no = 'no-' + className;\n\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar classList = element.classList;\n\t\t\t\t\tif (classList.contains(className)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (classList.contains(no)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn !!defaultActivation;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tlanguages: {\n\t\t\t/**\n\t\t\t * The grammar for plain, unformatted text.\n\t\t\t */\n\t\t\tplain: plainTextGrammar,\n\t\t\tplaintext: plainTextGrammar,\n\t\t\ttext: plainTextGrammar,\n\t\t\ttxt: plainTextGrammar,\n\n\t\t\t/**\n\t\t\t * Creates a deep copy of the language with the given id and appends the given tokens.\n\t\t\t *\n\t\t\t * If a token in `redef` also appears in the copied language, then the existing token in the copied language\n\t\t\t * will be overwritten at its original position.\n\t\t\t *\n\t\t\t * ## Best practices\n\t\t\t *\n\t\t\t * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)\n\t\t\t * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to\n\t\t\t * understand the language definition because, normally, the order of tokens matters in Prism grammars.\n\t\t\t *\n\t\t\t * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.\n\t\t\t * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.\n\t\t\t *\n\t\t\t * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.\n\t\t\t * @param {Grammar} redef The new tokens to append.\n\t\t\t * @returns {Grammar} The new language created.\n\t\t\t * @public\n\t\t\t * @example\n\t\t\t * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {\n\t\t\t *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token\n\t\t\t *     // at its original position\n\t\t\t *     'comment': { ... },\n\t\t\t *     // CSS doesn't have a 'color' token, so this token will be appended\n\t\t\t *     'color': /\\b(?:red|green|blue)\\b/\n\t\t\t * });\n\t\t\t */\n\t\t\textend: function (id, redef) {\n\t\t\t\tvar lang = _.util.clone(_.languages[id]);\n\n\t\t\t\tfor (var key in redef) {\n\t\t\t\t\tlang[key] = redef[key];\n\t\t\t\t}\n\n\t\t\t\treturn lang;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Inserts tokens _before_ another token in a language definition or any other grammar.\n\t\t\t *\n\t\t\t * ## Usage\n\t\t\t *\n\t\t\t * This helper method makes it easy to modify existing languages. For example, the CSS language definition\n\t\t\t * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded\n\t\t\t * in HTML through `<style>` elements. To do this, it needs to modify `Prism.languages.markup` and add the\n\t\t\t * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do\n\t\t\t * this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.markup.style = {\n\t\t\t *     // token\n\t\t\t * };\n\t\t\t * ```\n\t\t\t *\n\t\t\t * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens\n\t\t\t * before existing tokens. For the CSS example above, you would use it like this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'cdata', {\n\t\t\t *     'style': {\n\t\t\t *         // token\n\t\t\t *     }\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Special cases\n\t\t\t *\n\t\t\t * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar\n\t\t\t * will be ignored.\n\t\t\t *\n\t\t\t * This behavior can be used to insert tokens after `before`:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'comment', {\n\t\t\t *     'comment': Prism.languages.markup.comment,\n\t\t\t *     // tokens after 'comment'\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Limitations\n\t\t\t *\n\t\t\t * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object\n\t\t\t * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave\n\t\t\t * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily\n\t\t\t * deleting properties which is necessary to insert at arbitrary positions.\n\t\t\t *\n\t\t\t * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.\n\t\t\t * Instead, it will create a new object and replace all references to the target object with the new one. This\n\t\t\t * can be done without temporarily deleting properties, so the iteration order is well-defined.\n\t\t\t *\n\t\t\t * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if\n\t\t\t * you hold the target object in a variable, then the value of the variable will not change.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * var oldMarkup = Prism.languages.markup;\n\t\t\t * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });\n\t\t\t *\n\t\t\t * assert(oldMarkup !== Prism.languages.markup);\n\t\t\t * assert(newMarkup === Prism.languages.markup);\n\t\t\t * ```\n\t\t\t *\n\t\t\t * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the\n\t\t\t * object to be modified.\n\t\t\t * @param {string} before The key to insert before.\n\t\t\t * @param {Grammar} insert An object containing the key-value pairs to be inserted.\n\t\t\t * @param {Object<string, any>} [root] The object containing `inside`, i.e. the object that contains the\n\t\t\t * object to be modified.\n\t\t\t *\n\t\t\t * Defaults to `Prism.languages`.\n\t\t\t * @returns {Grammar} The new grammar object.\n\t\t\t * @public\n\t\t\t */\n\t\t\tinsertBefore: function (inside, before, insert, root) {\n\t\t\t\troot = root || /** @type {any} */ (_.languages);\n\t\t\t\tvar grammar = root[inside];\n\t\t\t\t/** @type {Grammar} */\n\t\t\t\tvar ret = {};\n\n\t\t\t\tfor (var token in grammar) {\n\t\t\t\t\tif (grammar.hasOwnProperty(token)) {\n\n\t\t\t\t\t\tif (token == before) {\n\t\t\t\t\t\t\tfor (var newToken in insert) {\n\t\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Do not insert token which also occur in insert. See #1525\n\t\t\t\t\t\tif (!insert.hasOwnProperty(token)) {\n\t\t\t\t\t\t\tret[token] = grammar[token];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar old = root[inside];\n\t\t\t\troot[inside] = ret;\n\n\t\t\t\t// Update references in other language definitions\n\t\t\t\t_.languages.DFS(_.languages, function (key, value) {\n\t\t\t\t\tif (value === old && key != inside) {\n\t\t\t\t\t\tthis[key] = ret;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\t// Traverse a language definition with Depth First Search\n\t\t\tDFS: function DFS(o, callback, type, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar objId = _.util.objId;\n\n\t\t\t\tfor (var i in o) {\n\t\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\t\tcallback.call(o, i, o[i], type || i);\n\n\t\t\t\t\t\tvar property = o[i];\n\t\t\t\t\t\tvar propertyType = _.util.type(property);\n\n\t\t\t\t\t\tif (propertyType === 'Object' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, null, visited);\n\t\t\t\t\t\t} else if (propertyType === 'Array' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, i, visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tplugins: {},\n\n\t\t/**\n\t\t * This is the most high-level function in Prisms API.\n\t\t * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on\n\t\t * each one of them.\n\t\t *\n\t\t * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.\n\t\t *\n\t\t * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAll: function (async, callback) {\n\t\t\t_.highlightAllUnder(document, async, callback);\n\t\t},\n\n\t\t/**\n\t\t * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls\n\t\t * {@link Prism.highlightElement} on each one of them.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-highlightall`\n\t\t * 2. `before-all-elements-highlight`\n\t\t * 3. All hooks of {@link Prism.highlightElement} for each element.\n\t\t *\n\t\t * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.\n\t\t * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAllUnder: function (container, async, callback) {\n\t\t\tvar env = {\n\t\t\t\tcallback: callback,\n\t\t\t\tcontainer: container,\n\t\t\t\tselector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n\t\t\t};\n\n\t\t\t_.hooks.run('before-highlightall', env);\n\n\t\t\tenv.elements = Array.prototype.slice.apply(env.container.querySelectorAll(env.selector));\n\n\t\t\t_.hooks.run('before-all-elements-highlight', env);\n\n\t\t\tfor (var i = 0, element; (element = env.elements[i++]);) {\n\t\t\t\t_.highlightElement(element, async === true, env.callback);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Highlights the code inside a single element.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-sanity-check`\n\t\t * 2. `before-highlight`\n\t\t * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.\n\t\t * 4. `before-insert`\n\t\t * 5. `after-highlight`\n\t\t * 6. `complete`\n\t\t *\n\t\t * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for\n\t\t * the element's language.\n\t\t *\n\t\t * @param {Element} element The element containing the code.\n\t\t * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.\n\t\t * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers\n\t\t * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is\n\t\t * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).\n\t\t *\n\t\t * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for\n\t\t * asynchronous highlighting to work. You can build your own bundle on the\n\t\t * [Download page](https://prismjs.com/download.html).\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.\n\t\t * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightElement: function (element, async, callback) {\n\t\t\t// Find language\n\t\t\tvar language = _.util.getLanguage(element);\n\t\t\tvar grammar = _.languages[language];\n\n\t\t\t// Set language on the element, if not present\n\t\t\t_.util.setLanguage(element, language);\n\n\t\t\t// Set language on the parent, for styling\n\t\t\tvar parent = element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre') {\n\t\t\t\t_.util.setLanguage(parent, language);\n\t\t\t}\n\n\t\t\tvar code = element.textContent;\n\n\t\t\tvar env = {\n\t\t\t\telement: element,\n\t\t\t\tlanguage: language,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tcode: code\n\t\t\t};\n\n\t\t\tfunction insertHighlightedCode(highlightedCode) {\n\t\t\t\tenv.highlightedCode = highlightedCode;\n\n\t\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t}\n\n\t\t\t_.hooks.run('before-sanity-check', env);\n\n\t\t\t// plugins may change/add the parent/element\n\t\t\tparent = env.element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre' && !parent.hasAttribute('tabindex')) {\n\t\t\t\tparent.setAttribute('tabindex', '0');\n\t\t\t}\n\n\t\t\tif (!env.code) {\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_.hooks.run('before-highlight', env);\n\n\t\t\tif (!env.grammar) {\n\t\t\t\tinsertHighlightedCode(_.util.encode(env.code));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (async && _self.Worker) {\n\t\t\t\tvar worker = new Worker(_.filename);\n\n\t\t\t\tworker.onmessage = function (evt) {\n\t\t\t\t\tinsertHighlightedCode(evt.data);\n\t\t\t\t};\n\n\t\t\t\tworker.postMessage(JSON.stringify({\n\t\t\t\t\tlanguage: env.language,\n\t\t\t\t\tcode: env.code,\n\t\t\t\t\timmediateClose: true\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tinsertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Low-level function, only use if you know what youre doing. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns a string with the HTML produced.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-tokenize`\n\t\t * 2. `after-tokenize`\n\t\t * 3. `wrap`: On each {@link Token}.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @param {string} language The name of the language definition passed to `grammar`.\n\t\t * @returns {string} The highlighted HTML.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');\n\t\t */\n\t\thighlight: function (text, grammar, language) {\n\t\t\tvar env = {\n\t\t\t\tcode: text,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tlanguage: language\n\t\t\t};\n\t\t\t_.hooks.run('before-tokenize', env);\n\t\t\tif (!env.grammar) {\n\t\t\t\tthrow new Error('The language \"' + env.language + '\" has no grammar.');\n\t\t\t}\n\t\t\tenv.tokens = _.tokenize(env.code, env.grammar);\n\t\t\t_.hooks.run('after-tokenize', env);\n\t\t\treturn Token.stringify(_.util.encode(env.tokens), env.language);\n\t\t},\n\n\t\t/**\n\t\t * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns an array with the tokenized code.\n\t\t *\n\t\t * When the language definition includes nested tokens, the function is called recursively on each of these tokens.\n\t\t *\n\t\t * This method could be useful in other contexts as well, as a very crude parser.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @returns {TokenStream} An array of strings and tokens, a token stream.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * let code = `var foo = 0;`;\n\t\t * let tokens = Prism.tokenize(code, Prism.languages.javascript);\n\t\t * tokens.forEach(token => {\n\t\t *     if (token instanceof Prism.Token && token.type === 'number') {\n\t\t *         console.log(`Found numeric literal: ${token.content}`);\n\t\t *     }\n\t\t * });\n\t\t */\n\t\ttokenize: function (text, grammar) {\n\t\t\tvar rest = grammar.rest;\n\t\t\tif (rest) {\n\t\t\t\tfor (var token in rest) {\n\t\t\t\t\tgrammar[token] = rest[token];\n\t\t\t\t}\n\n\t\t\t\tdelete grammar.rest;\n\t\t\t}\n\n\t\t\tvar tokenList = new LinkedList();\n\t\t\taddAfter(tokenList, tokenList.head, text);\n\n\t\t\tmatchGrammar(text, tokenList, grammar, tokenList.head, 0);\n\n\t\t\treturn toArray(tokenList);\n\t\t},\n\n\t\t/**\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thooks: {\n\t\t\tall: {},\n\n\t\t\t/**\n\t\t\t * Adds the given callback to the list of callbacks for the given hook.\n\t\t\t *\n\t\t\t * The callback will be invoked when the hook it is registered for is run.\n\t\t\t * Hooks are usually directly run by a highlight function but you can also run hooks yourself.\n\t\t\t *\n\t\t\t * One callback function can be registered to multiple hooks and the same hook multiple times.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {HookCallback} callback The callback function which is given environment variables.\n\t\t\t * @public\n\t\t\t */\n\t\t\tadd: function (name, callback) {\n\t\t\t\tvar hooks = _.hooks.all;\n\n\t\t\t\thooks[name] = hooks[name] || [];\n\n\t\t\t\thooks[name].push(callback);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Runs a hook invoking all registered callbacks with the given environment variables.\n\t\t\t *\n\t\t\t * Callbacks will be invoked synchronously and in the order in which they were registered.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {Object<string, any>} env The environment variables of the hook passed to all callbacks registered.\n\t\t\t * @public\n\t\t\t */\n\t\t\trun: function (name, env) {\n\t\t\t\tvar callbacks = _.hooks.all[name];\n\n\t\t\t\tif (!callbacks || !callbacks.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, callback; (callback = callbacks[i++]);) {\n\t\t\t\t\tcallback(env);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tToken: Token\n\t};\n\t_self.Prism = _;\n\n\n\t// Typescript note:\n\t// The following can be used to import the Token type in JSDoc:\n\t//\n\t//   @typedef {InstanceType<import(\"./prism-core\")[\"Token\"]>} Token\n\n\t/**\n\t * Creates a new token.\n\t *\n\t * @param {string} type See {@link Token#type type}\n\t * @param {string | TokenStream} content See {@link Token#content content}\n\t * @param {string|string[]} [alias] The alias(es) of the token.\n\t * @param {string} [matchedStr=\"\"] A copy of the full string this token was created from.\n\t * @class\n\t * @global\n\t * @public\n\t */\n\tfunction Token(type, content, alias, matchedStr) {\n\t\t/**\n\t\t * The type of the token.\n\t\t *\n\t\t * This is usually the key of a pattern in a {@link Grammar}.\n\t\t *\n\t\t * @type {string}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.type = type;\n\t\t/**\n\t\t * The strings or tokens contained by this token.\n\t\t *\n\t\t * This will be a token stream if the pattern matched also defined an `inside` grammar.\n\t\t *\n\t\t * @type {string | TokenStream}\n\t\t * @public\n\t\t */\n\t\tthis.content = content;\n\t\t/**\n\t\t * The alias(es) of the token.\n\t\t *\n\t\t * @type {string|string[]}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.alias = alias;\n\t\t// Copy of the full string this token was created from\n\t\tthis.length = (matchedStr || '').length | 0;\n\t}\n\n\t/**\n\t * A token stream is an array of strings and {@link Token Token} objects.\n\t *\n\t * Token streams have to fulfill a few properties that are assumed by most functions (mostly internal ones) that process\n\t * them.\n\t *\n\t * 1. No adjacent strings.\n\t * 2. No empty strings.\n\t *\n\t *    The only exception here is the token stream that only contains the empty string and nothing else.\n\t *\n\t * @typedef {Array<string | Token>} TokenStream\n\t * @global\n\t * @public\n\t */\n\n\t/**\n\t * Converts the given token or token stream to an HTML representation.\n\t *\n\t * The following hooks will be run:\n\t * 1. `wrap`: On each {@link Token}.\n\t *\n\t * @param {string | Token | TokenStream} o The token or token stream to be converted.\n\t * @param {string} language The name of current language.\n\t * @returns {string} The HTML representation of the token or token stream.\n\t * @memberof Token\n\t * @static\n\t */\n\tToken.stringify = function stringify(o, language) {\n\t\tif (typeof o == 'string') {\n\t\t\treturn o;\n\t\t}\n\t\tif (Array.isArray(o)) {\n\t\t\tvar s = '';\n\t\t\to.forEach(function (e) {\n\t\t\t\ts += stringify(e, language);\n\t\t\t});\n\t\t\treturn s;\n\t\t}\n\n\t\tvar env = {\n\t\t\ttype: o.type,\n\t\t\tcontent: stringify(o.content, language),\n\t\t\ttag: 'span',\n\t\t\tclasses: ['token', o.type],\n\t\t\tattributes: {},\n\t\t\tlanguage: language\n\t\t};\n\n\t\tvar aliases = o.alias;\n\t\tif (aliases) {\n\t\t\tif (Array.isArray(aliases)) {\n\t\t\t\tArray.prototype.push.apply(env.classes, aliases);\n\t\t\t} else {\n\t\t\t\tenv.classes.push(aliases);\n\t\t\t}\n\t\t}\n\n\t\t_.hooks.run('wrap', env);\n\n\t\tvar attributes = '';\n\t\tfor (var name in env.attributes) {\n\t\t\tattributes += ' ' + name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n\t\t}\n\n\t\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + attributes + '>' + env.content + '</' + env.tag + '>';\n\t};\n\n\t/**\n\t * @param {RegExp} pattern\n\t * @param {number} pos\n\t * @param {string} text\n\t * @param {boolean} lookbehind\n\t * @returns {RegExpExecArray | null}\n\t */\n\tfunction matchPattern(pattern, pos, text, lookbehind) {\n\t\tpattern.lastIndex = pos;\n\t\tvar match = pattern.exec(text);\n\t\tif (match && lookbehind && match[1]) {\n\t\t\t// change the match to remove the text matched by the Prism lookbehind group\n\t\t\tvar lookbehindLength = match[1].length;\n\t\t\tmatch.index += lookbehindLength;\n\t\t\tmatch[0] = match[0].slice(lookbehindLength);\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * @param {string} text\n\t * @param {LinkedList<string | Token>} tokenList\n\t * @param {any} grammar\n\t * @param {LinkedListNode<string | Token>} startNode\n\t * @param {number} startPos\n\t * @param {RematchOptions} [rematch]\n\t * @returns {void}\n\t * @private\n\t *\n\t * @typedef RematchOptions\n\t * @property {string} cause\n\t * @property {number} reach\n\t */\n\tfunction matchGrammar(text, tokenList, grammar, startNode, startPos, rematch) {\n\t\tfor (var token in grammar) {\n\t\t\tif (!grammar.hasOwnProperty(token) || !grammar[token]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar patterns = grammar[token];\n\t\t\tpatterns = Array.isArray(patterns) ? patterns : [patterns];\n\n\t\t\tfor (var j = 0; j < patterns.length; ++j) {\n\t\t\t\tif (rematch && rematch.cause == token + ',' + j) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar patternObj = patterns[j];\n\t\t\t\tvar inside = patternObj.inside;\n\t\t\t\tvar lookbehind = !!patternObj.lookbehind;\n\t\t\t\tvar greedy = !!patternObj.greedy;\n\t\t\t\tvar alias = patternObj.alias;\n\n\t\t\t\tif (greedy && !patternObj.pattern.global) {\n\t\t\t\t\t// Without the global flag, lastIndex won't work\n\t\t\t\t\tvar flags = patternObj.pattern.toString().match(/[imsuy]*$/)[0];\n\t\t\t\t\tpatternObj.pattern = RegExp(patternObj.pattern.source, flags + 'g');\n\t\t\t\t}\n\n\t\t\t\t/** @type {RegExp} */\n\t\t\t\tvar pattern = patternObj.pattern || patternObj;\n\n\t\t\t\tfor ( // iterate the token list and keep track of the current token/string position\n\t\t\t\t\tvar currentNode = startNode.next, pos = startPos;\n\t\t\t\t\tcurrentNode !== tokenList.tail;\n\t\t\t\t\tpos += currentNode.value.length, currentNode = currentNode.next\n\t\t\t\t) {\n\n\t\t\t\t\tif (rematch && pos >= rematch.reach) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar str = currentNode.value;\n\n\t\t\t\t\tif (tokenList.length > text.length) {\n\t\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (str instanceof Token) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeCount = 1; // this is the to parameter of removeBetween\n\t\t\t\t\tvar match;\n\n\t\t\t\t\tif (greedy) {\n\t\t\t\t\t\tmatch = matchPattern(pattern, pos, text, lookbehind);\n\t\t\t\t\t\tif (!match || match.index >= text.length) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar from = match.index;\n\t\t\t\t\t\tvar to = match.index + match[0].length;\n\t\t\t\t\t\tvar p = pos;\n\n\t\t\t\t\t\t// find the node that contains the match\n\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\twhile (from >= p) {\n\t\t\t\t\t\t\tcurrentNode = currentNode.next;\n\t\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// adjust pos (and p)\n\t\t\t\t\t\tp -= currentNode.value.length;\n\t\t\t\t\t\tpos = p;\n\n\t\t\t\t\t\t// the current node is a Token, then the match starts inside another Token, which is invalid\n\t\t\t\t\t\tif (currentNode.value instanceof Token) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// find the last node which is affected by this match\n\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\tvar k = currentNode;\n\t\t\t\t\t\t\tk !== tokenList.tail && (p < to || typeof k.value === 'string');\n\t\t\t\t\t\t\tk = k.next\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tremoveCount++;\n\t\t\t\t\t\t\tp += k.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoveCount--;\n\n\t\t\t\t\t\t// replace with the new match\n\t\t\t\t\t\tstr = text.slice(pos, p);\n\t\t\t\t\t\tmatch.index -= pos;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = matchPattern(pattern, 0, str, lookbehind);\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// eslint-disable-next-line no-redeclare\n\t\t\t\t\tvar from = match.index;\n\t\t\t\t\tvar matchStr = match[0];\n\t\t\t\t\tvar before = str.slice(0, from);\n\t\t\t\t\tvar after = str.slice(from + matchStr.length);\n\n\t\t\t\t\tvar reach = pos + str.length;\n\t\t\t\t\tif (rematch && reach > rematch.reach) {\n\t\t\t\t\t\trematch.reach = reach;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeFrom = currentNode.prev;\n\n\t\t\t\t\tif (before) {\n\t\t\t\t\t\tremoveFrom = addAfter(tokenList, removeFrom, before);\n\t\t\t\t\t\tpos += before.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tremoveRange(tokenList, removeFrom, removeCount);\n\n\t\t\t\t\tvar wrapped = new Token(token, inside ? _.tokenize(matchStr, inside) : matchStr, alias, matchStr);\n\t\t\t\t\tcurrentNode = addAfter(tokenList, removeFrom, wrapped);\n\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\taddAfter(tokenList, currentNode, after);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (removeCount > 1) {\n\t\t\t\t\t\t// at least one Token object was removed, so we have to do some rematching\n\t\t\t\t\t\t// this can only happen if the current pattern is greedy\n\n\t\t\t\t\t\t/** @type {RematchOptions} */\n\t\t\t\t\t\tvar nestedRematch = {\n\t\t\t\t\t\t\tcause: token + ',' + j,\n\t\t\t\t\t\t\treach: reach\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmatchGrammar(text, tokenList, grammar, currentNode.prev, pos, nestedRematch);\n\n\t\t\t\t\t\t// the reach might have been extended because of the rematching\n\t\t\t\t\t\tif (rematch && nestedRematch.reach > rematch.reach) {\n\t\t\t\t\t\t\trematch.reach = nestedRematch.reach;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @typedef LinkedListNode\n\t * @property {T} value\n\t * @property {LinkedListNode<T> | null} prev The previous node.\n\t * @property {LinkedListNode<T> | null} next The next node.\n\t * @template T\n\t * @private\n\t */\n\n\t/**\n\t * @template T\n\t * @private\n\t */\n\tfunction LinkedList() {\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar head = { value: null, prev: null, next: null };\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar tail = { value: null, prev: head, next: null };\n\t\thead.next = tail;\n\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.head = head;\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.tail = tail;\n\t\tthis.length = 0;\n\t}\n\n\t/**\n\t * Adds a new node with the given value to the list.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {T} value\n\t * @returns {LinkedListNode<T>} The added node.\n\t * @template T\n\t */\n\tfunction addAfter(list, node, value) {\n\t\t// assumes that node != list.tail && values.length >= 0\n\t\tvar next = node.next;\n\n\t\tvar newNode = { value: value, prev: node, next: next };\n\t\tnode.next = newNode;\n\t\tnext.prev = newNode;\n\t\tlist.length++;\n\n\t\treturn newNode;\n\t}\n\t/**\n\t * Removes `count` nodes after the given node. The given node will not be removed.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {number} count\n\t * @template T\n\t */\n\tfunction removeRange(list, node, count) {\n\t\tvar next = node.next;\n\t\tfor (var i = 0; i < count && next !== list.tail; i++) {\n\t\t\tnext = next.next;\n\t\t}\n\t\tnode.next = next;\n\t\tnext.prev = node;\n\t\tlist.length -= i;\n\t}\n\t/**\n\t * @param {LinkedList<T>} list\n\t * @returns {T[]}\n\t * @template T\n\t */\n\tfunction toArray(list) {\n\t\tvar array = [];\n\t\tvar node = list.head.next;\n\t\twhile (node !== list.tail) {\n\t\t\tarray.push(node.value);\n\t\t\tnode = node.next;\n\t\t}\n\t\treturn array;\n\t}\n\n\n\tif (!_self.document) {\n\t\tif (!_self.addEventListener) {\n\t\t\t// in Node.js\n\t\t\treturn _;\n\t\t}\n\n\t\tif (!_.disableWorkerMessageHandler) {\n\t\t\t// In worker\n\t\t\t_self.addEventListener('message', function (evt) {\n\t\t\t\tvar message = JSON.parse(evt.data);\n\t\t\t\tvar lang = message.language;\n\t\t\t\tvar code = message.code;\n\t\t\t\tvar immediateClose = message.immediateClose;\n\n\t\t\t\t_self.postMessage(_.highlight(code, _.languages[lang], lang));\n\t\t\t\tif (immediateClose) {\n\t\t\t\t\t_self.close();\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\n\t\treturn _;\n\t}\n\n\t// Get current script and highlight\n\tvar script = _.util.currentScript();\n\n\tif (script) {\n\t\t_.filename = script.src;\n\n\t\tif (script.hasAttribute('data-manual')) {\n\t\t\t_.manual = true;\n\t\t}\n\t}\n\n\tfunction highlightAutomaticallyCallback() {\n\t\tif (!_.manual) {\n\t\t\t_.highlightAll();\n\t\t}\n\t}\n\n\tif (!_.manual) {\n\t\t// If the document state is \"loading\", then we'll use DOMContentLoaded.\n\t\t// If the document state is \"interactive\" and the prism.js script is deferred, then we'll also use the\n\t\t// DOMContentLoaded event because there might be some plugins or languages which have also been deferred and they\n\t\t// might take longer one animation frame to execute which can create a race condition where only some plugins have\n\t\t// been loaded when Prism.highlightAll() is executed, depending on how fast resources are loaded.\n\t\t// See https://github.com/PrismJS/prism/issues/2102\n\t\tvar readyState = document.readyState;\n\t\tif (readyState === 'loading' || readyState === 'interactive' && script && script.defer) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', highlightAutomaticallyCallback);\n\t\t} else {\n\t\t\tif (window.requestAnimationFrame) {\n\t\t\t\twindow.requestAnimationFrame(highlightAutomaticallyCallback);\n\t\t\t} else {\n\t\t\t\twindow.setTimeout(highlightAutomaticallyCallback, 16);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn _;\n\n}(_self));\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = Prism;\n}\n\n// hack for components to work correctly in node.js\nif (typeof global !== 'undefined') {\n\tglobal.Prism = Prism;\n}\n\n// some additional documentation/types\n\n/**\n * The expansion of a simple `RegExp` literal to support additional properties.\n *\n * @typedef GrammarToken\n * @property {RegExp} pattern The regular expression of the token.\n * @property {boolean} [lookbehind=false] If `true`, then the first capturing group of `pattern` will (effectively)\n * behave as a lookbehind group meaning that the captured text will not be part of the matched text of the new token.\n * @property {boolean} [greedy=false] Whether the token is greedy.\n * @property {string|string[]} [alias] An optional alias or list of aliases.\n * @property {Grammar} [inside] The nested grammar of this token.\n *\n * The `inside` grammar will be used to tokenize the text value of each token of this kind.\n *\n * This can be used to make nested and even recursive language definitions.\n *\n * Note: This can cause infinite recursion. Be careful when you embed different languages or even the same language into\n * each another.\n * @global\n * @public\n */\n\n/**\n * @typedef Grammar\n * @type {Object<string, RegExp | GrammarToken | Array<RegExp | GrammarToken>>}\n * @property {Grammar} [rest] An optional grammar object that will be appended to this grammar.\n * @global\n * @public\n */\n\n/**\n * A function which will invoked after an element was successfully highlighted.\n *\n * @callback HighlightCallback\n * @param {Element} element The element successfully highlighted.\n * @returns {void}\n * @global\n * @public\n */\n\n/**\n * @callback HookCallback\n * @param {Object<string, any>} env The environment variables of the hook.\n * @returns {void}\n * @global\n * @public\n */\n\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n\t'comment': {\n\t\tpattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n\t\tgreedy: true\n\t},\n\t'prolog': {\n\t\tpattern: /<\\?[\\s\\S]+?\\?>/,\n\t\tgreedy: true\n\t},\n\t'doctype': {\n\t\t// https://www.w3.org/TR/xml/#NT-doctypedecl\n\t\tpattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'internal-subset': {\n\t\t\t\tpattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: null // see below\n\t\t\t},\n\t\t\t'string': {\n\t\t\t\tpattern: /\"[^\"]*\"|'[^']*'/,\n\t\t\t\tgreedy: true\n\t\t\t},\n\t\t\t'punctuation': /^<!|>$|[[\\]]/,\n\t\t\t'doctype-tag': /^DOCTYPE/i,\n\t\t\t'name': /[^\\s<>'\"]+/\n\t\t}\n\t},\n\t'cdata': {\n\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\tgreedy: true\n\t},\n\t'tag': {\n\t\tpattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'tag': {\n\t\t\t\tpattern: /^<\\/?[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^<\\/?/,\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'special-attr': [],\n\t\t\t'attr-value': {\n\t\t\t\tpattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^(\\s*)[\"']|[\"']$/,\n\t\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\t'punctuation': /\\/?>/,\n\t\t\t'attr-name': {\n\t\t\t\tpattern: /[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t'entity': [\n\t\t{\n\t\t\tpattern: /&[\\da-z]{1,8};/i,\n\t\t\talias: 'named-entity'\n\t\t},\n\t\t/&#x?[\\da-f]{1,8};/i\n\t]\n};\n\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] =\n\tPrism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n\n\tif (env.type === 'entity') {\n\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\n\t}\n});\n\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n\t/**\n\t * Adds an inlined language to markup.\n\t *\n\t * An example of an inlined language is CSS with `<style>` tags.\n\t *\n\t * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addInlined('style', 'css');\n\t */\n\tvalue: function addInlined(tagName, lang) {\n\t\tvar includedCdataInside = {};\n\t\tincludedCdataInside['language-' + lang] = {\n\t\t\tpattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\t\tincludedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n\n\t\tvar inside = {\n\t\t\t'included-cdata': {\n\t\t\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\t\t\tinside: includedCdataInside\n\t\t\t}\n\t\t};\n\t\tinside['language-' + lang] = {\n\t\t\tpattern: /[\\s\\S]+/,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\n\t\tvar def = {};\n\t\tdef[tagName] = {\n\t\t\tpattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () { return tagName; }), 'i'),\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true,\n\t\t\tinside: inside\n\t\t};\n\n\t\tPrism.languages.insertBefore('markup', 'cdata', def);\n\t}\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n\t/**\n\t * Adds an pattern to highlight languages embedded in HTML attributes.\n\t *\n\t * An example of an inlined language is CSS with `style` attributes.\n\t *\n\t * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addAttribute('style', 'css');\n\t */\n\tvalue: function (attrName, lang) {\n\t\tPrism.languages.markup.tag.inside['special-attr'].push({\n\t\t\tpattern: RegExp(\n\t\t\t\t/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source,\n\t\t\t\t'i'\n\t\t\t),\n\t\t\tlookbehind: true,\n\t\t\tinside: {\n\t\t\t\t'attr-name': /^[^\\s=]+/,\n\t\t\t\t'attr-value': {\n\t\t\t\t\tpattern: /=[\\s\\S]+/,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'value': {\n\t\t\t\t\t\t\tpattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\talias: [lang, 'language-' + lang],\n\t\t\t\t\t\t\tinside: Prism.languages[lang]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/\"|'/\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\n\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\n(function (Prism) {\n\n\tvar string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n\n\tPrism.languages.css = {\n\t\t'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n\t\t'atrule': {\n\t\t\tpattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n\t\t\tinside: {\n\t\t\t\t'rule': /^@[\\w-]+/,\n\t\t\t\t'selector-function-argument': {\n\t\t\t\t\tpattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'selector'\n\t\t\t\t},\n\t\t\t\t'keyword': {\n\t\t\t\t\tpattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n\t\t\t\t\tlookbehind: true\n\t\t\t\t}\n\t\t\t\t// See rest below\n\t\t\t}\n\t\t},\n\t\t'url': {\n\t\t\t// https://drafts.csswg.org/css-values-3/#urls\n\t\t\tpattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n\t\t\tgreedy: true,\n\t\t\tinside: {\n\t\t\t\t'function': /^url/i,\n\t\t\t\t'punctuation': /^\\(|\\)$/,\n\t\t\t\t'string': {\n\t\t\t\t\tpattern: RegExp('^' + string.source + '$'),\n\t\t\t\t\talias: 'url'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t'selector': {\n\t\t\tpattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n\t\t\tlookbehind: true\n\t\t},\n\t\t'string': {\n\t\t\tpattern: string,\n\t\t\tgreedy: true\n\t\t},\n\t\t'property': {\n\t\t\tpattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'important': /!important\\b/i,\n\t\t'function': {\n\t\t\tpattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'punctuation': /[(){};:,]/\n\t};\n\n\tPrism.languages.css['atrule'].inside.rest = Prism.languages.css;\n\n\tvar markup = Prism.languages.markup;\n\tif (markup) {\n\t\tmarkup.tag.addInlined('style', 'css');\n\t\tmarkup.tag.addAttribute('style', 'css');\n\t}\n\n}(Prism));\n\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n\t'comment': [\n\t\t{\n\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^\\\\:])\\/\\/.*/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t}\n\t],\n\t'string': {\n\t\tpattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n\t\tgreedy: true\n\t},\n\t'class-name': {\n\t\tpattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\t'punctuation': /[.\\\\]/\n\t\t}\n\t},\n\t'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n\t'boolean': /\\b(?:false|true)\\b/,\n\t'function': /\\b\\w+(?=\\()/,\n\t'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n\t'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n\t'punctuation': /[{}[\\];(),.:]/\n};\n\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n\t'class-name': [\n\t\tPrism.languages.clike['class-name'],\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n\t\t\tlookbehind: true\n\t\t}\n\t],\n\t'keyword': [\n\t\t{\n\t\t\tpattern: /((?:^|\\})\\s*)catch\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t],\n\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n\t'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n\t'number': {\n\t\tpattern: RegExp(\n\t\t\t/(^|[^\\w$])/.source +\n\t\t\t'(?:' +\n\t\t\t(\n\t\t\t\t// constant\n\t\t\t\t/NaN|Infinity/.source +\n\t\t\t\t'|' +\n\t\t\t\t// binary integer\n\t\t\t\t/0[bB][01]+(?:_[01]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// octal integer\n\t\t\t\t/0[oO][0-7]+(?:_[0-7]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// hexadecimal integer\n\t\t\t\t/0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal bigint\n\t\t\t\t/\\d+(?:_\\d+)*n/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal number (integer or float) but no bigint\n\t\t\t\t/(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source\n\t\t\t) +\n\t\t\t')' +\n\t\t\t/(?![\\w$])/.source\n\t\t),\n\t\tlookbehind: true\n\t},\n\t'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\n\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\n\nPrism.languages.insertBefore('javascript', 'keyword', {\n\t'regex': {\n\t\tpattern: RegExp(\n\t\t\t// lookbehind\n\t\t\t// eslint-disable-next-line regexp/no-dupe-characters-character-class\n\t\t\t/((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n\t\t\t// Regex pattern:\n\t\t\t// There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n\t\t\t// classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n\t\t\t// with the only syntax, so we have to define 2 different regex patterns.\n\t\t\t/\\//.source +\n\t\t\t'(?:' +\n\t\t\t/(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source +\n\t\t\t'|' +\n\t\t\t// `v` flag syntax. This supports 3 levels of nested character classes.\n\t\t\t/(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source +\n\t\t\t')' +\n\t\t\t// lookahead\n\t\t\t/(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source\n\t\t),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'regex-source': {\n\t\t\t\tpattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'language-regex',\n\t\t\t\tinside: Prism.languages.regex\n\t\t\t},\n\t\t\t'regex-delimiter': /^\\/|\\/$/,\n\t\t\t'regex-flags': /^[a-z]+$/,\n\t\t}\n\t},\n\t// This must be declared before keyword because we use \"function\" inside the look-forward\n\t'function-variable': {\n\t\tpattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n\t\talias: 'function'\n\t},\n\t'parameter': [\n\t\t{\n\t\t\tpattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t}\n\t],\n\t'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\n\nPrism.languages.insertBefore('javascript', 'string', {\n\t'hashbang': {\n\t\tpattern: /^#!.*/,\n\t\tgreedy: true,\n\t\talias: 'comment'\n\t},\n\t'template-string': {\n\t\tpattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'template-punctuation': {\n\t\t\t\tpattern: /^`|`$/,\n\t\t\t\talias: 'string'\n\t\t\t},\n\t\t\t'interpolation': {\n\t\t\t\tpattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\tpattern: /^\\$\\{|\\}$/,\n\t\t\t\t\t\talias: 'punctuation'\n\t\t\t\t\t},\n\t\t\t\t\trest: Prism.languages.javascript\n\t\t\t\t}\n\t\t\t},\n\t\t\t'string': /[\\s\\S]+/\n\t\t}\n\t},\n\t'string-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\talias: 'property'\n\t}\n});\n\nPrism.languages.insertBefore('javascript', 'operator', {\n\t'literal-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\talias: 'property'\n\t},\n});\n\nif (Prism.languages.markup) {\n\tPrism.languages.markup.tag.addInlined('script', 'javascript');\n\n\t// add attribute support for all DOM events.\n\t// https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n\tPrism.languages.markup.tag.addAttribute(\n\t\t/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,\n\t\t'javascript'\n\t);\n}\n\nPrism.languages.js = Prism.languages.javascript;\n\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n\n\tif (typeof Prism === 'undefined' || typeof document === 'undefined') {\n\t\treturn;\n\t}\n\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n\tif (!Element.prototype.matches) {\n\t\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\t}\n\n\tvar LOADING_MESSAGE = 'Loading';\n\tvar FAILURE_MESSAGE = function (status, message) {\n\t\treturn ' Error ' + status + ' while fetching file: ' + message;\n\t};\n\tvar FAILURE_EMPTY_MESSAGE = ' Error: File does not exist or is empty';\n\n\tvar EXTENSIONS = {\n\t\t'js': 'javascript',\n\t\t'py': 'python',\n\t\t'rb': 'ruby',\n\t\t'ps1': 'powershell',\n\t\t'psm1': 'powershell',\n\t\t'sh': 'bash',\n\t\t'bat': 'batch',\n\t\t'h': 'c',\n\t\t'tex': 'latex'\n\t};\n\n\tvar STATUS_ATTR = 'data-src-status';\n\tvar STATUS_LOADING = 'loading';\n\tvar STATUS_LOADED = 'loaded';\n\tvar STATUS_FAILED = 'failed';\n\n\tvar SELECTOR = 'pre[data-src]:not([' + STATUS_ATTR + '=\"' + STATUS_LOADED + '\"])'\n\t\t+ ':not([' + STATUS_ATTR + '=\"' + STATUS_LOADING + '\"])';\n\n\t/**\n\t * Loads the given file.\n\t *\n\t * @param {string} src The URL or path of the source file to load.\n\t * @param {(result: string) => void} success\n\t * @param {(reason: string) => void} error\n\t */\n\tfunction loadFile(src, success, error) {\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('GET', src, true);\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState == 4) {\n\t\t\t\tif (xhr.status < 400 && xhr.responseText) {\n\t\t\t\t\tsuccess(xhr.responseText);\n\t\t\t\t} else {\n\t\t\t\t\tif (xhr.status >= 400) {\n\t\t\t\t\t\terror(FAILURE_MESSAGE(xhr.status, xhr.statusText));\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror(FAILURE_EMPTY_MESSAGE);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\txhr.send(null);\n\t}\n\n\t/**\n\t * Parses the given range.\n\t *\n\t * This returns a range with inclusive ends.\n\t *\n\t * @param {string | null | undefined} range\n\t * @returns {[number, number | undefined] | undefined}\n\t */\n\tfunction parseRange(range) {\n\t\tvar m = /^\\s*(\\d+)\\s*(?:(,)\\s*(?:(\\d+)\\s*)?)?$/.exec(range || '');\n\t\tif (m) {\n\t\t\tvar start = Number(m[1]);\n\t\t\tvar comma = m[2];\n\t\t\tvar end = m[3];\n\n\t\t\tif (!comma) {\n\t\t\t\treturn [start, start];\n\t\t\t}\n\t\t\tif (!end) {\n\t\t\t\treturn [start, undefined];\n\t\t\t}\n\t\t\treturn [start, Number(end)];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tPrism.hooks.add('before-highlightall', function (env) {\n\t\tenv.selector += ', ' + SELECTOR;\n\t});\n\n\tPrism.hooks.add('before-sanity-check', function (env) {\n\t\tvar pre = /** @type {HTMLPreElement} */ (env.element);\n\t\tif (pre.matches(SELECTOR)) {\n\t\t\tenv.code = ''; // fast-path the whole thing and go to complete\n\n\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADING); // mark as loading\n\n\t\t\t// add code element with loading message\n\t\t\tvar code = pre.appendChild(document.createElement('CODE'));\n\t\t\tcode.textContent = LOADING_MESSAGE;\n\n\t\t\tvar src = pre.getAttribute('data-src');\n\n\t\t\tvar language = env.language;\n\t\t\tif (language === 'none') {\n\t\t\t\t// the language might be 'none' because there is no language set;\n\t\t\t\t// in this case, we want to use the extension as the language\n\t\t\t\tvar extension = (/\\.(\\w+)$/.exec(src) || [, 'none'])[1];\n\t\t\t\tlanguage = EXTENSIONS[extension] || extension;\n\t\t\t}\n\n\t\t\t// set language classes\n\t\t\tPrism.util.setLanguage(code, language);\n\t\t\tPrism.util.setLanguage(pre, language);\n\n\t\t\t// preload the language\n\t\t\tvar autoloader = Prism.plugins.autoloader;\n\t\t\tif (autoloader) {\n\t\t\t\tautoloader.loadLanguages(language);\n\t\t\t}\n\n\t\t\t// load file\n\t\t\tloadFile(\n\t\t\t\tsrc,\n\t\t\t\tfunction (text) {\n\t\t\t\t\t// mark as loaded\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADED);\n\n\t\t\t\t\t// handle data-range\n\t\t\t\t\tvar range = parseRange(pre.getAttribute('data-range'));\n\t\t\t\t\tif (range) {\n\t\t\t\t\t\tvar lines = text.split(/\\r\\n?|\\n/g);\n\n\t\t\t\t\t\t// the range is one-based and inclusive on both ends\n\t\t\t\t\t\tvar start = range[0];\n\t\t\t\t\t\tvar end = range[1] == null ? lines.length : range[1];\n\n\t\t\t\t\t\tif (start < 0) { start += lines.length; }\n\t\t\t\t\t\tstart = Math.max(0, Math.min(start - 1, lines.length));\n\t\t\t\t\t\tif (end < 0) { end += lines.length; }\n\t\t\t\t\t\tend = Math.max(0, Math.min(end, lines.length));\n\n\t\t\t\t\t\ttext = lines.slice(start, end).join('\\n');\n\n\t\t\t\t\t\t// add data-start for line numbers\n\t\t\t\t\t\tif (!pre.hasAttribute('data-start')) {\n\t\t\t\t\t\t\tpre.setAttribute('data-start', String(start + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// highlight code\n\t\t\t\t\tcode.textContent = text;\n\t\t\t\t\tPrism.highlightElement(code);\n\t\t\t\t},\n\t\t\t\tfunction (error) {\n\t\t\t\t\t// mark as failed\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_FAILED);\n\n\t\t\t\t\tcode.textContent = error;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\n\tPrism.plugins.fileHighlight = {\n\t\t/**\n\t\t * Executes the File Highlight plugin for all matching `pre` elements under the given container.\n\t\t *\n\t\t * Note: Elements which are already loaded or currently loading will not be touched by this method.\n\t\t *\n\t\t * @param {ParentNode} [container=document]\n\t\t */\n\t\thighlight: function highlight(container) {\n\t\t\tvar elements = (container || document).querySelectorAll(SELECTOR);\n\n\t\t\tfor (var i = 0, element; (element = elements[i++]);) {\n\t\t\t\tPrism.highlightElement(element);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar logged = false;\n\t/** @deprecated Use `Prism.plugins.fileHighlight.highlight` instead. */\n\tPrism.fileHighlight = function () {\n\t\tif (!logged) {\n\t\t\tconsole.warn('Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead.');\n\t\t\tlogged = true;\n\t\t}\n\t\tPrism.plugins.fileHighlight.highlight.apply(this, arguments);\n\t};\n\n}());\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","/** Function that does nothing */\nexport const noop = () => undefined;\n/** Function that returns the first argument */\nexport const identity = (arg) => arg;\n/** Resolves {@link PropertyProvider} function to the value */\nexport const resolveProperty = (val, origin) => typeof val === 'function' ? val.call(origin, origin) : val;\n","/** Checks that passed value is object, but not a callable-object (function) */\nexport const isObject = (obj) => !!obj && typeof obj === 'object';\n/** Checks that passed value is an object or function */\nexport const isObjectLike = (obj) => isObject(obj) || typeof obj === 'function';\n/** Checks if the passed value is primitive */\nexport const isPrimitive = (obj) => obj === null ||\n    typeof obj === 'undefined' ||\n    typeof obj === 'string' ||\n    typeof obj === 'number' ||\n    typeof obj === 'boolean' ||\n    typeof obj === 'symbol';\n/** Checks that passed object is prototype of some class */\nexport const isPrototype = (obj) => Object.hasOwnProperty.call(obj, 'constructor');\n/** Checks that passed object is array-like */\nexport const isArrayLike = (value) => {\n    if (!value || typeof value !== 'object')\n        return false;\n    if (Array.isArray(value))\n        return true;\n    if (typeof value.length !== 'number' || value.length < 0)\n        return false;\n    return !value.length || Object.hasOwnProperty.call(value, value.length - 1);\n};\n/** Checks that passed value is a plain object */\nexport const isPlainObject = (obj) => {\n    if (!isObjectLike(obj))\n        return false;\n    const proto = Object.getPrototypeOf(obj);\n    return proto === null || proto === Object.prototype;\n};\n","import { isObjectLike } from './types';\n/** @returns PathKeyDef from the PathDef */\nconst toKeyDef = (key) => typeof key === 'object' ? key : { key };\n/** Parses path to full {@link PathKeyDef} array */\nexport const parseKeys = (path) => {\n    if (Array.isArray(path))\n        return path.map(toKeyDef);\n    return parseKeysPath(path || '.');\n};\n/** Parses string path to full {@link PathKeyDef} array */\nconst parseKeysPath = (path) => {\n    let start = 0;\n    const parts = [];\n    while (start < path.length) {\n        let end = start = start + +(path[start] === '.'); // skip initial '.'\n        if (path[start] === '[') { // handle index syntax\n            end = ++start; // start bracket ignored\n            while (end < path.length && path[end] !== ']')\n                ++end;\n            const key = path.substring(start, end);\n            const isIndex = !key || Math.floor(+key) === +key;\n            parts.push({ key, isIndex });\n            start = ++end; // skip end bracket\n        }\n        else { // handle simple key\n            while (end < path.length && path[end] !== '[' && path[end] !== '.')\n                ++end;\n            const key = path.substring(start, end);\n            parts.push({ key });\n            start = end;\n        }\n    }\n    return parts;\n};\n/**\n * Gets object property using \"path\" key\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param data - object\n * @param path - key path. string or {@link PathKey} array\n * @param defaultValue - default\n * @returns specified object property\n */\nexport const getByPath = (data, path, defaultValue) => {\n    const keys = parseKeys(path);\n    const result = keys.reduce((curr, { key }) => {\n        if (isObjectLike(curr))\n            return curr[key];\n        return undefined;\n    }, data);\n    return typeof result === 'undefined' ? defaultValue : result;\n};\n/**\n * Gets object property using \"path\" with a keys separated by `.`\n * @see getByPath\n */\nexport const get = (data, path, defaultValue) => getByPath(data, (path || '').split('.'), defaultValue);\n/**\n * Sets object property using \"path\" key\n * Creates empty object if sub-key value is not presented.\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax and collection creation):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param target - object\n * @param path - key path. string or {@link PathKey} array\n * @param value - value of property\n * @returns original object\n */\nexport const setByPath = (target, path, value) => {\n    const keys = parseKeys(path);\n    const depth = keys.length - 1;\n    keys.reduce((cur, { key, isIndex, isIndexed }, pos) => {\n        if (isIndex && !key)\n            key = cur.length || 0; // a[] only\n        if (pos !== depth && isObjectLike(cur[key]))\n            return cur[key]; // key already presented\n        if (isIndexed === undefined && pos !== depth)\n            isIndexed = keys[pos + 1].isIndex;\n        return cur[key] = (pos === depth) ? value : (isIndexed ? [] : {});\n    }, target);\n    return target;\n};\n/**\n * Sets object property using \"path\" with a keys separated by `.`\n * @see setByPath\n */\nexport const set = (target, path, value) => setByPath(target, (path || '').split('.'), value);\n","import { get } from './object';\n/** Converts string to kebab-case notation */\nexport const toKebabCase = (str) => {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\\s_]+/g, '-').toLowerCase();\n};\n/** Converts string to camelCase notation */\nexport const toCamelCase = (str) => {\n    return str.trim().replace(/[\\s-,_]+([a-zA-Z0-9]?)/g, (match, word) => word.toUpperCase());\n};\n/** Makes the first non-indent (space, tab, newline) letter in the string capitalized */\nexport const capitalize = (str) => {\n    let i = 0;\n    while (i < str.length && (str[i] === ' ' || str[i] === '\\t' || str[i] === '\\n'))\n        i++;\n    return str.slice(0, i) + str.charAt(i).toUpperCase() + str.slice(i + 1);\n};\n/** Unwraps string from parenthesis */\nexport const unwrapParenthesis = (str) => {\n    return str.trim().replace(/^\\((.*)\\)$/, '$1').trim();\n};\n/**\n * Serialize to boolean string (`'true'|'false'`)\n * Preserve null, undefined and empty string\n */\nexport const toBooleanAttribute = (val) => {\n    if (val === null || val === undefined)\n        return val;\n    return String(!!val && val !== 'false' && val !== '0');\n};\n/** Parses `null` and `undefined` as an empty string */\nexport const parseString = (val) => String(val !== null && val !== void 0 ? val : '');\n/** Parses string representation of the boolean value */\nexport const parseBoolean = (val) => val !== null && val !== 'false' && val !== '0';\n/**\n * Parses number with the ability to pass an alternative fallback for NaN.\n * Note: falsy values except 0 are treated as NaN\n */\nexport const parseNumber = (str, nanValue) => {\n    if (str === 0)\n        return 0;\n    const value = +(str || NaN);\n    return isNaN(value) ? nanValue : value;\n};\n/**\n * Common function that returns coefficient aspect ratio\n * Supported formats: w:h, w/h, coefficient\n * @example\n * `16:9`, `16/9`, `1.77`\n * @param str - string to parse\n * @returns aspect ratio coefficient\n */\nexport function parseAspectRatio(str) {\n    const [w, h] = str.split(/[:/]/);\n    if (typeof h !== 'undefined')\n        return +w / +h;\n    return +w || 0;\n}\n/** Evaluates passed string or returns `defaultValue` */\nexport function evaluate(str, defaultValue) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-implied-eval\n        return str ? (new Function(`return ${str}`))() : defaultValue;\n    }\n    catch (e) {\n        console.warn('[ESL]: Cannot parse value ', str, e);\n        return defaultValue;\n    }\n}\n/** Default RegExp to match replacements in the string for the {@link format} function */\nexport const DEF_FORMAT_MATCHER = /{[{%]?([\\w.]+)[%}]?}/g;\n/** Replaces `{key}` patterns in the string from the source object */\nexport function format(str, source, matcher = DEF_FORMAT_MATCHER) {\n    return str.replace(matcher, (match, key) => {\n        const val = get(source, key);\n        return val === undefined ? match : val;\n    });\n}\n","import { isObject, isPlainObject } from '../misc/object/types';\n/** Checks that passed value is an DOM Element Node */\nexport const isElement = (el) => {\n    return isObject(el) && el.nodeType === 1 && !isPlainObject(el);\n};\n/**\n * Get the Element that is the root element of the document.\n * @param element - element for which to get the document element\n * */\nexport const getDocument = (element = window) => {\n    return (element instanceof Window ? element.document : element.ownerDocument).documentElement;\n};\n/**\n * Get the name of node.\n * @param element - element for which to get the name\n */\nexport const getNodeName = (element) => {\n    return element && !(element instanceof Window) ? (element.nodeName).toLowerCase() : '';\n};\n/**\n * Get the parent of the specified element in the DOM tree.\n * @param element - element for which to get the parent\n */\nexport const getParentNode = (element) => {\n    if (getNodeName(element) === 'html')\n        return element;\n    return (window.ShadowRoot\n        ? element instanceof ShadowRoot\n            ? element.host\n            : element.assignedSlot || element.parentNode\n        : element.parentNode) || getDocument(element);\n};\n","import { isElement } from '../dom/api';\nimport { isObject } from '../misc/object';\nexport function resolveDomTarget(obj) {\n    if (isElement(obj))\n        return obj;\n    if (isObject(obj) && isElement(obj.$host))\n        return obj.$host;\n    return null;\n}\n","import { resolveDomTarget } from '../abstract/dom-target';\n/** @returns true if attribute presented */\nexport function hasAttr($el, name) {\n    if (Array.isArray($el))\n        return $el.every((element) => hasAttr(element, name));\n    if (!($el = resolveDomTarget($el)))\n        return false;\n    return $el.hasAttribute(name);\n}\nexport function getAttr($el, name, fallback = null) {\n    if (Array.isArray($el))\n        return getAttr($el[0], name);\n    if (!($el = resolveDomTarget($el)))\n        return null;\n    const value = $el.getAttribute(name);\n    return value === null ? fallback : value;\n}\n/** Sets attribute */\nexport function setAttr($el, name, value) {\n    if (Array.isArray($el)) {\n        $el.forEach((element) => setAttr(element, name, value));\n        return;\n    }\n    if (!($el = resolveDomTarget($el)))\n        return;\n    if (value === undefined || value === null || value === false) {\n        $el.removeAttribute(name);\n    }\n    else {\n        $el.setAttribute(name, value === true ? '' : value);\n    }\n}\n","import { identity } from '../misc/functions';\nimport { parseString, toKebabCase } from '../misc/format';\nimport { getAttr, setAttr } from '../dom/attr';\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value.\n * Maps string type property.\n * @param config - mapping configuration. See {@link AttrDescriptor}\n */\nexport const attr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        function get() {\n            const val = getAttr(this, attrName);\n            if (val === null && 'defaultValue' in config)\n                return config.defaultValue;\n            return (config.parser || parseString)(val);\n        }\n        function set(value) {\n            setAttr(this, attrName, (config.serializer || identity)(value));\n        }\n        Object.defineProperty(target, propName, config.readonly ? { get } : { get, set });\n        return {};\n    };\n};\n","import { hasAttr, setAttr } from '../dom/attr';\nimport { toKebabCase } from '../misc/format';\nfunction buildConditionalDescriptor(attrName, readOnly) {\n    function get() {\n        return hasAttr(this, attrName);\n    }\n    function set(value) {\n        setAttr(this, attrName, !!value);\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element boolean (marker) attribute state.\n * Maps boolean type property.\n * @param config - mapping configuration. See {@link BoolAttrDescriptor}\n */\nexport const boolAttr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildConditionalDescriptor(attrName, !!config.readonly));\n        return {};\n    };\n};\n","const NS_NAME = 'ESL';\n/**\n * Nested declaration helper\n */\nfunction define(root, name, value) {\n    name.split('.').reduce((obj, key, index, parts) => {\n        if (parts.length === index + 1) {\n            return (obj[key] = obj[key] || value);\n        }\n        const type = typeof obj[key];\n        if (type !== 'undefined' && type !== 'object' && type !== 'function') {\n            throw new Error(`Can not define ${value} on ${name}`);\n        }\n        return (obj[key] = obj[key] || {});\n    }, root);\n}\n/**\n * Method to manually declare key in library namespace\n * See {@link ExportNs} decorator for details\n */\nexport const exportNs = (name, module) => {\n    if (!(NS_NAME in window))\n        return;\n    define(window[NS_NAME], name, module);\n};\n/**\n * Decorator to declare function or class in a global ns\n * @param name - key path to declare in ESL global ns\n * NOTE: path parts should be separated by dots\n * @example\n * ```ts\n * @Export('Package.Component')\n * ```\n * NOTE: in case declaration contains components-packages, their origins will be mixed with declaration in a Runtime\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function ExportNs(name) {\n    return (module) => exportNs(name || module.name, module);\n}\n/** Declare ESL global */\nExportNs.declare = () => {\n    if ('ESL' in window)\n        return;\n    Object.defineProperty(window, 'ESL', { value: {} });\n};\n","/** Checks if the passed event is {@link MouseEvent} */\nexport const isMouseEvent = (event) => window.MouseEvent && event instanceof MouseEvent;\n/** Checks if the passed event is {@link TouchEvent} */\nexport const isTouchEvent = (event) => window.TouchEvent && event instanceof TouchEvent;\n/** Checks if the passed event is {@link PointerEvent} */\nexport const isPointerEvent = (event) => window.PointerEvent && event instanceof PointerEvent;\nconst PASSIVE_EVENTS = ['wheel', 'mousewheel', 'touchstart', 'touchmove'];\n/**\n * @returns true if the passed event should be passive by default\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n */\nexport const isPassiveByDefault = (event) => PASSIVE_EVENTS.includes(event);\n/** Gets the original CustomEvent source in case event bubbles from Shadow DOM */\nexport const getCompositeTarget = (e) => {\n    const targets = (e.composedPath && e.composedPath());\n    return targets ? targets[0] : e.target;\n};\n/** @returns touch point coordinates of {@link TouchEvent} or {@link PointerEvent} */\nexport const getTouchPoint = (event) => {\n    const source = isTouchEvent(event) ? event.changedTouches[0] : event;\n    return {\n        x: source.pageX,\n        y: source.pageY\n    };\n};\n/** @returns element offset point coordinates */\nexport const getOffsetPoint = (el) => {\n    const props = el.getBoundingClientRect();\n    const y = props.top + window.scrollY;\n    const x = props.left + window.scrollX;\n    return { x, y };\n};\n/**\n * Dispatches custom event.\n * Event bubbles and is cancelable by default, use `eventInit` to override that.\n * @param el - EventTarget to dispatch event\n * @param eventName - name of the event to dispatch\n * @param eventInit - object that specifies characteristics of the event. See {@link CustomEventInit}\n */\nexport const dispatchCustomEvent = (el, eventName, eventInit) => {\n    const init = Object.assign({\n        bubbles: true,\n        composed: true,\n        cancelable: true\n    }, eventInit || {});\n    return el.dispatchEvent(new CustomEvent(eventName, init));\n};\n/**\n * Overrides {@link Event} `target` property\n * @param event - {@link Event} to override\n * @param key - {@link Event} property\n * @param target - {@link EventTarget} to setup\n * @returns original event\n */\nexport const overrideEvent = (event, key, target) => {\n    const provider = typeof target === 'function' ? target : (() => target);\n    Object.defineProperty(event, key, {\n        get: provider,\n        enumerable: true,\n        configurable: true\n    });\n    return event;\n};\n","import { identity } from './functions';\nimport { isArrayLike } from './object';\n/** Split array into tuples */\nexport const tuple = (arr) => arr.reduce((acc, el) => {\n    if (acc.length === 0 || acc[acc.length - 1].length >= 2)\n        acc.push([]);\n    acc[acc.length - 1].push(el);\n    return acc;\n}, []);\n/** Flat array - unwraps one level of nested arrays */\nexport const flat = (arr) => arr.reduce((acc, el) => el ? acc.concat(el) : acc, []);\n/** Wraps passed object or primitive to array */\nexport const wrap = (arr) => {\n    if (arr === undefined || arr === null)\n        return [];\n    if (Array.isArray(arr))\n        return arr;\n    return [arr];\n};\nexport function unwrap(value) {\n    return isArrayLike(value) ? value[0] : value;\n}\n/** Makes array values unique */\nexport const uniq = (arr) => {\n    if (arr.length < 2)\n        return arr.slice(0);\n    const result = [];\n    const set = new Set();\n    arr.forEach((item) => set.add(item));\n    set.forEach((item) => result.push(item));\n    return result;\n};\nexport function range(n, filler = identity) {\n    const arr = Array(n);\n    let i = 0;\n    while (i < n)\n        arr[i] = filler(i++);\n    return arr;\n}\n/**\n * @returns object with a criteria value as a key and an array of original items that belongs to the current criteria value\n */\nexport const groupBy = (array, group) => {\n    return array.reduce((obj, el) => {\n        const key = group(el);\n        obj[key] ? obj[key].push(el) : obj[key] = [el];\n        return obj;\n    }, {});\n};\n","import { isObject } from './types';\n/** Deeply compares passed objects */\nexport function isEqual(obj1, obj2) {\n    if (Object.is(obj1, obj2))\n        return true;\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (isObject(obj1) && isObject(obj2)) {\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n        if (keys1.length !== keys2.length)\n            return false;\n        return !keys1.some((key) => !isEqual(obj1[key], obj2[key]));\n    }\n    return false;\n}\n/** @deprecated alias for `isEqual` method */\nexport const deepCompare = isEqual;\n/** Check if arr and arr mask has intersection */\nfunction isIntersect(arrObj, arrMask, comparer) {\n    return arrMask.every((key) => arrObj.some((itm) => comparer(itm, key)));\n}\n/**\n * Checks if all keys presented in the `mask` are equal to the `obj` keys\n * Note: array order is not taken into account and uses intersection strategy\n */\nexport function isSimilar(obj, mask, deep = true) {\n    if (Array.isArray(obj) && Array.isArray(mask))\n        return isIntersect(obj, mask, deep ? isSimilar : Object.is);\n    if (!isObject(obj) || !isObject(mask))\n        return Object.is(obj, mask);\n    return Object.keys(mask).every((key) => (deep ? isSimilar : Object.is)(obj[key], mask[key]));\n}\n","/**\n * Memoization decorator function. Caches the original function result according to hash generated from arguments.\n * In case the hash function returns `undefined` value will not be memoized.\n * @see MemoHashFn Hash function signature.\n */\nexport function memoizeFn(fn, hashFn = defaultArgsHashFn) {\n    function memo(...args) {\n        const key = hashFn(...args);\n        if (key !== null && typeof key !== 'string') {\n            console.warn(`[ESL]: Can't cache value for ${fn.name} call.`);\n            return fn.apply(this, args);\n        }\n        if (!memo.cache.has(key)) {\n            memo.cache.set(key, fn.apply(this, args));\n        }\n        return memo.cache.get(key);\n    }\n    memo.cache = new Map();\n    memo.clear = () => memo.cache.clear();\n    memo.has = (...args) => {\n        const key = hashFn(...args);\n        return key === undefined ? false : memo.cache.has(key);\n    };\n    return memo;\n}\n/**\n * Default arguments hash function.\n * Supports only 0-1 arguments with a primitive type.\n */\nexport function defaultArgsHashFn(...args) {\n    if (args.length === 0)\n        return null;\n    if (args.length > 1)\n        return;\n    if (typeof args[0] !== 'string' && typeof args[0] !== 'number' && typeof args[0] !== 'boolean')\n        return;\n    return String(args[0]);\n}\n","/** @returns first defined param */\nexport function defined(...params) {\n    for (const param of params) {\n        if (param !== undefined)\n            return param;\n    }\n}\n/** Finds the closest property descriptor */\nexport function getPropertyDescriptor(o, prop) {\n    let proto = o;\n    while (proto) {\n        const desc = Object.getOwnPropertyDescriptor(proto, prop);\n        if (desc)\n            return desc;\n        proto = Object.getPrototypeOf(proto);\n    }\n}\nexport function extractValues(obj, filter) {\n    if (!obj)\n        return [];\n    const desc = [];\n    for (const key in obj) {\n        if (filter(obj[key], key))\n            desc.push(obj[key]);\n    }\n    return desc;\n}\n","import { defaultArgsHashFn, memoizeFn } from '../misc/memoize';\nimport { isPrototype, getPropertyDescriptor } from '../misc/object';\n/**\n * Memoization decorator helper.\n * @see memoizeFn Original memoizeFn function decorator.\n */\nexport function memoize(hashFn = defaultArgsHashFn) {\n    return function (target, prop, descriptor) {\n        if (!descriptor || typeof (descriptor.value || descriptor.get) !== 'function') {\n            throw new TypeError('Only get accessors or class methods can be decorated via @memoize');\n        }\n        if (isPrototype(target)) {\n            // Object members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeGetter(descriptor.get, prop));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeMethod(descriptor.value, prop, hashFn));\n        }\n        else {\n            // Static members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeFn(descriptor.get));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeFn(descriptor.value, hashFn));\n        }\n    };\n}\n// Lock storage to prevent cache logic for some key\nconst locks = new WeakMap();\nconst defineOwnKeySafe = (obj, prop, value) => {\n    locks.set(obj, prop); // IE try to get key with the prototype instance call, so we lock it\n    Object.defineProperty(obj, prop, { value, writable: true, configurable: true });\n    locks.delete(obj); // Free property key\n};\n/** Cache getter result as an object own property */\nfunction memoizeGetter(originalMethod, prop) {\n    return function () {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const value = originalMethod.call(this);\n        defineOwnKeySafe(this, prop, value);\n        return value;\n    };\n}\n/** Cache method memo function in the current context on call */\nfunction memoizeMethod(originalMethod, prop, hashFn) {\n    return function (...args) {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const memo = memoizeFn(originalMethod, hashFn);\n        defineOwnKeySafe(this, prop, memo);\n        return memo.apply(this, args);\n    };\n}\nfunction clearMemo(target, property) {\n    if (Array.isArray(property))\n        return property.forEach((prop) => memoize.clear(target, prop));\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return;\n    if (typeof desc.get === 'function' && typeof desc.get.clear === 'function')\n        return desc.get.clear();\n    if (typeof desc.value === 'function' && typeof desc.value.clear === 'function')\n        return desc.value.clear();\n    if (Object.hasOwnProperty.call(target, property))\n        delete target[property];\n}\nmemoize.clear = clearMemo;\nfunction hasMemo(target, property, ...params) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return false;\n    if (typeof desc.get === 'function' && typeof desc.get.has === 'function')\n        return desc.get.has(...params);\n    if (typeof desc.value === 'function' && typeof desc.value.has === 'function')\n        return desc.value.has(...params);\n    return Object.hasOwnProperty.call(target, property);\n}\nmemoize.has = hasMemo;\n","/**\n * A Rect describes the size and position of a rectangle.\n */\nexport class Rect {\n    /**\n     * The static method creates a new Rect instance from a rect-like object.\n     * @param rect - rect-like object\n     */\n    static from(rect = {}) {\n        return new this(rect.x || rect.left, rect.y || rect.top, rect.width, rect.height);\n    }\n    /**\n     * The static method checks the equality of the two Rect instances.\n     * @param rect1 - first instance of Rect\n     * @param rect2 - second instance of Rect\n     */\n    static isEqual(rect1, rect2) {\n        return rect1.x === rect2.x && rect1.y === rect2.y && rect1.width === rect2.width && rect1.height === rect2.height;\n    }\n    /**\n     * The static method returns intersection Rect of two Rect instances\n     * @param rect1 - first instance of Rect\n     * @param rect2 - second instance of Rect\n     */\n    static intersect(rect1, rect2) {\n        const top = Math.max(rect1.top, rect2.top);\n        const left = Math.max(rect1.left, rect2.left);\n        const bottom = Math.min(rect1.bottom, rect2.bottom);\n        const right = Math.min(rect1.right, rect2.right);\n        const width = Math.max(right - left, 0);\n        const height = Math.max(bottom - top, 0);\n        return Rect.from({ top, left, width, height });\n    }\n    constructor(x, y, width, height) {\n        /** The X coordinate of the Rect's origin (top-left corner of the rectangle). */\n        this.x = 0;\n        /** The Y coordinate of the Rect's origin (top-left corner of the rectangle). */\n        this.y = 0;\n        /** The width of the Rect. */\n        this.width = 0;\n        /** The height of the Rect. */\n        this.height = 0;\n        this.x = x || 0;\n        this.y = y || 0;\n        this.width = width || 0;\n        this.height = height || 0;\n    }\n    /**\n     * Get the top coordinate value of the Rect (has the same value as y).\n     */\n    get top() {\n        return this.y;\n    }\n    /**\n     * Get the left coordinate value of the Rect (has the same value as x).\n     */\n    get left() {\n        return this.x;\n    }\n    /**\n     * Get the right coordinate value of the DOMRect.\n     */\n    get right() {\n        return this.x + this.width;\n    }\n    /**\n     * Get the bottom coordinate value of the Rect.\n     */\n    get bottom() {\n        return this.y + this.height;\n    }\n    /**\n     * Get the center X coordinate value of the Rect.\n     */\n    get cx() {\n        return this.x + this.width / 2;\n    }\n    /**\n     * Get the center Y coordinate value of the Rect.\n     */\n    get cy() {\n        return this.y + this.height / 2;\n    }\n    grow(incrementX, incrementY = incrementX) {\n        this.y -= incrementY;\n        this.x -= incrementX;\n        this.height += 2 * incrementY;\n        this.width += 2 * incrementX;\n        return this;\n    }\n    shrink(decrementX, decrementY = decrementX) {\n        return this.grow(-decrementX, -decrementY);\n    }\n    /** @returns the numeric value of rectangle area */\n    get area() {\n        return this.height * this.width;\n    }\n}\n","import { Rect } from './rect';\n/**\n * Get the window object associated with a document of the specified element.\n * @param node - element for which to get window\n * */\nexport function getWindow(node) {\n    if (node === null)\n        return window;\n    if (node instanceof Window)\n        return node;\n    const ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n}\n/**\n * Get the size and position of the window.\n * @returns\n */\nexport function getWindowRect(wnd = window) {\n    return Rect.from({\n        x: wnd.scrollX || wnd.pageXOffset,\n        y: wnd.scrollY || wnd.pageYOffset,\n        width: wnd.innerWidth || wnd.document.documentElement.clientWidth,\n        height: wnd.innerHeight || wnd.document.documentElement.clientHeight\n    });\n}\n","import { isElement, getNodeName, getParentNode } from '../api';\n/**\n * Get the list of all scroll parents, up the list of ancestors until we get to the top window object.\n * @param element - element for which you want to get the list of all scroll parents\n * @param list - array of elements to concatenate with the list of all scroll parents of element (optional)\n */\nexport function getListScrollParents(element, list = []) {\n    var _a;\n    const scrollParent = getScrollParent(element);\n    const isBody = scrollParent === ((_a = element.ownerDocument) === null || _a === void 0 ? void 0 : _a.body);\n    const target = isBody\n        ? isScrollable(scrollParent) ? scrollParent : []\n        : scrollParent;\n    const updatedList = list.concat(target);\n    return isBody\n        ? updatedList\n        : updatedList.concat(getListScrollParents(getParentNode(scrollParent)));\n}\n/**\n * Get the scroll parent of the specified element in the DOM tree.\n * @param node - element for which to get the scroll parent\n */\nexport function getScrollParent(node) {\n    var _a;\n    if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n        return (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.body;\n    }\n    if (isElement(node) && isScrollable(node))\n        return node;\n    return getScrollParent(getParentNode(node));\n}\n/**\n * Check that element is scroll parent.\n * @param element - element for checking\n * */\nexport function isScrollable(element) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    const { overflow, overflowX, overflowY } = getComputedStyle(element);\n    return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}\n","/** Checks if element matches passed selector or exact predicate function */\nexport const isMatches = (el, matcher) => {\n    if (typeof matcher === 'string')\n        return !matcher || el.matches(matcher);\n    if (typeof matcher === 'function')\n        return matcher.call(el, el);\n    return typeof matcher === 'undefined';\n};\n/** Checks that `nodeA` and `nodeB` are from the same tree path */\nexport const isRelativeNode = (nodeA, nodeB) => {\n    return !!(nodeA && nodeB) && (nodeA.contains(nodeB) || nodeB.contains(nodeA));\n};\n/** Creates function that finds next dom element, that matches selector, in the sequence declared by `next` function */\nexport const createSequenceFinder = (next, includeSelf = false) => {\n    return function (base, predicate) {\n        if (includeSelf && isMatches(base, predicate))\n            return base;\n        for (let target = next(base); target && target !== base; target = next(target)) {\n            if (isMatches(target, predicate))\n                return target;\n        }\n        return null;\n    };\n};\n/** @returns first matching next sibling or null*/\nexport const findNext = createSequenceFinder((el) => el.nextElementSibling);\n/** @returns first matching previous sibling or null*/\nexport const findPrev = createSequenceFinder((el) => el.previousElementSibling);\n/** @returns first matching parent or null*/\nexport const findParent = createSequenceFinder((el) => el.parentElement);\n/** @returns first matching ancestor starting from passed element or null*/\nexport const findClosest = createSequenceFinder((el) => el.parentElement, true);\n/** @returns first matching host element starting from passed element*/\nexport const findHost = createSequenceFinder((el) => {\n    const root = el.getRootNode();\n    return (root instanceof ShadowRoot) ? root.host : null;\n}, true);\n/** @returns Array of all matching elements in subtree or empty array */\nexport const findAll = (base, sel) => {\n    return sel ? Array.from(base.querySelectorAll(sel)) : [base];\n};\n/** @returns Array of all matching children or empty array */\nexport const findChildren = (base, sel) => {\n    return Array.from(base.children).filter((el) => !sel || el.matches(sel));\n};\n/**\n * Finds closest parent node of `node` by `predicate`.\n * Optional `skipSelf` to skip initial node\n */\nexport const findClosestBy = (node, predicate, skipSelf = false) => {\n    let current = skipSelf && node ? node.parentNode : node;\n    while (current) {\n        if (predicate(current))\n            return current;\n        current = current.parentNode;\n    }\n    return null;\n};\n/**\n * Finds looped next element within parent circle\n */\nexport const findNextLooped = createSequenceFinder((el) => el.nextElementSibling || (el.parentElement && el.parentElement.firstElementChild));\n/**\n * Finds looped previous element within parent circle (looped)\n */\nexport const findPrevLooped = createSequenceFinder((el) => el.previousElementSibling || (el.parentElement && el.parentElement.lastElementChild));\n/** @deprecated Cumulative traversing utility set */\nexport class TraversingUtils {\n}\nTraversingUtils.isRelative = isRelativeNode;\nTraversingUtils.closestBy = findClosestBy;\nTraversingUtils.createSequenceFinder = createSequenceFinder;\nTraversingUtils.findNext = findNext;\nTraversingUtils.findPrev = findPrev;\nTraversingUtils.findParent = findParent;\nTraversingUtils.findClosest = findClosest;\nTraversingUtils.findAll = findAll;\nTraversingUtils.findChildren = findChildren;\n","import { Rect } from './rect';\nimport { isElement } from './api';\nimport { getWindowRect } from './window';\nimport { getListScrollParents } from './scroll';\nimport { findClosestBy, findHost } from './traversing';\n/** @returns if the exact passed Element hidden with CSS visibility */\nconst isHiddenPredicate = (el) => isElement(el) && getComputedStyle(el).visibility === 'hidden';\n/** @returns if the exact passed Element is transparent (CSS opacity is 0) */\nconst isTransparentPredicate = (el) => isElement(el) && getComputedStyle(el).opacity === '0';\n/**\n * Checks if the specified element is visible\n * @param el - element to be checked\n * @param options - object of additional visibility options to include\n */\nexport function isVisible(el, options = { visibility: true }) {\n    if (!el.getClientRects().length)\n        return false;\n    if (options.visibility && findHost(el, isHiddenPredicate))\n        return false;\n    if (options.opacity && findClosestBy(el, isTransparentPredicate))\n        return false;\n    return !(options.viewport && !isInViewport(el));\n}\n/**\n * Checks if the specified element is inside the viewport\n * @param el - element to be checked\n */\nexport function isInViewport(el) {\n    const wndIntersection = Rect.intersect(getWindowRect(), Rect.from(el.getBoundingClientRect()));\n    if (wndIntersection.area === 0)\n        return false;\n    return !getListScrollParents(el).some((parent) => Rect.intersect(wndIntersection, Rect.from(parent.getBoundingClientRect())).area === 0);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLTraversingQuery_1;\nimport { isElement } from '../../esl-utils/dom/api';\nimport { isVisible } from '../../esl-utils/dom/visible';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { tuple, wrap, uniq } from '../../esl-utils/misc/array';\nimport { unwrapParenthesis } from '../../esl-utils/misc/format';\nimport { findAll, findChildren, findNext, findParent, findClosest, findPrev } from '../../esl-utils/dom/traversing';\n/**\n * Traversing Query utility to find element via extended selector query\n * Extended query supports\n * - plain CSS selectors\n * - relative selectors (selectors that don't start from a plain selector will use passed base Element as a root)\n * - ::next and ::prev sibling pseudo-selectors\n * - ::parent, ::closest and ::child pseudo-selectors\n * - ::find pseudo-selector\n * - ::first, ::last and :nth(#) limitation pseudo-selectors\n * - ::filter, ::not filtration pseudo-selectors\n *\n * @example\n * - `#id .class [attr]` - find by CSS selector in a current document\n * - ` ` - get current base element\n * - `::next` - get next sibling element\n * - `::prev` - get previous sibling element\n * - `::parent` - get base element parent\n * - `::parent(#id .class [attr])` - find the closest parent matching passed selector\n * - `::closest(#id .class [attr])` - find the closest ancestor including base element that matches passed selector\n * - `::child(#id .class [attr])` - find direct child element(s) that match passed selector\n * - `::find(#id .class [attr])` - find child element(s) that match passed selector\n * - `::find(buttons, a)::not([hidden])` - find all buttons and anchors that are not have hidden attribute\n * - `::find(buttons, a)::filter(:first-child)` - find all buttons and anchors that are first child in container\n * - `::parent::child(some-tag)` - find direct child element(s) that match tag 'some-tag' in the parent\n * - `#id .class [attr]::parent` - find parent of element matching selector '#id .class [attr]' in document\n * - `::find(.row)::last::parent` - find parent of the last element matching selector '.row' from the base element subtree\n */\nlet ESLTraversingQuery = ESLTraversingQuery_1 = class ESLTraversingQuery {\n    /**\n     * @returns RegExp that selects all known processors in query string\n     * e.g. /(::parent|::closest|::child|::next|::prev)/\n     */\n    static get PROCESSORS_REGEX() {\n        const keys = Object.keys(this.ELEMENT_PROCESSORS).concat(Object.keys(this.COLLECTION_PROCESSORS));\n        return new RegExp(`(${keys.join('|')})`, 'g');\n    }\n    static isCollectionProcessor([name]) {\n        return !!name && (name in this.COLLECTION_PROCESSORS);\n    }\n    static processElement(el, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.ELEMENT_PROCESSORS))\n            return [];\n        return wrap(this.ELEMENT_PROCESSORS[name](el, sel));\n    }\n    static processCollection(els, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.COLLECTION_PROCESSORS))\n            return [];\n        return wrap(this.COLLECTION_PROCESSORS[name](els, sel));\n    }\n    static traverseChain(collection, processors, findFirst) {\n        if (!processors.length || !collection.length)\n            return collection;\n        const [processor, ...rest] = processors;\n        if (this.isCollectionProcessor(processor)) {\n            const processedItem = this.processCollection(collection, processor);\n            return this.traverseChain(processedItem, rest, findFirst);\n        }\n        const result = [];\n        for (const target of collection) {\n            const processedItem = this.processElement(target, processor);\n            const resultCollection = this.traverseChain(processedItem, rest, findFirst);\n            if (!resultCollection.length)\n                continue;\n            if (findFirst)\n                return resultCollection.slice(0, 1);\n            result.push(...resultCollection);\n        }\n        return uniq(result);\n    }\n    /** Split multiple queries separated by comma (respects query brackets) */\n    // This can be solved by RegEx /(?<!\\([^\\)]*),(?![^\\(]*\\))/g)/, when the WebKit browser implements this feature\n    static splitQueries(str) {\n        let last = 0;\n        let stack = 0;\n        const result = [];\n        for (let i = 0; i < str.length; i++) {\n            if (str[i] === '(')\n                stack++;\n            if (str[i] === ')')\n                stack = Math.max(0, stack - 1);\n            if (str[i] === ',' && !stack) {\n                result.push(str.substring(last, i).trim());\n                last = i + 1;\n            }\n        }\n        result.push(str.substring(last).trim());\n        return result;\n    }\n    static traverse(query, findFirst, base, scope = document) {\n        const found = [];\n        for (const part of ESLTraversingQuery_1.splitQueries(query)) {\n            const els = this.traverseQuery(part, findFirst, base, scope);\n            if (findFirst && els.length)\n                return [els[0]];\n            found.push(...els);\n        }\n        return uniq(found);\n    }\n    static traverseQuery(query, findFirst, base, scope = document) {\n        const parts = query.split(this.PROCESSORS_REGEX).map((term) => term.trim());\n        const rootSel = parts.shift();\n        const baseCollection = base ? [base] : [];\n        const initial = rootSel ? Array.from(scope.querySelectorAll(rootSel)) : baseCollection;\n        return this.traverseChain(initial, tuple(parts), findFirst);\n    }\n    /** @returns first matching element reached via {@link ESLTraversingQuery} rules */\n    static first(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, true, base, scope)[0] || null;\n    }\n    /** @returns Array of all matching elements reached via {@link ESLTraversingQuery} rules */\n    static all(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, false, base, scope);\n    }\n};\nESLTraversingQuery.ELEMENT_PROCESSORS = {\n    '::find': findAll,\n    '::next': findNext,\n    '::prev': findPrev,\n    '::child': findChildren,\n    '::parent': findParent,\n    '::closest': findClosest\n};\nESLTraversingQuery.COLLECTION_PROCESSORS = {\n    '::first': (list) => list.slice(0, 1),\n    '::last': (list) => list.slice(-1),\n    '::nth': (list, sel) => {\n        const index = sel ? +sel : NaN;\n        return wrap(list[index - 1]);\n    },\n    '::not': (list, sel) => list.filter((el) => !el.matches(sel || '')),\n    '::visible': (list) => list.filter((el) => isElement(el) && isVisible(el)),\n    '::filter': (list, sel) => list.filter((el) => el.matches(sel || ''))\n};\nESLTraversingQuery = ESLTraversingQuery_1 = __decorate([\n    ExportNs('TraversingQuery')\n], ESLTraversingQuery);\nexport { ESLTraversingQuery };\n/** @deprecated alias for {@link ESLTraversingQuery} */\nexport const TraversingQuery = ESLTraversingQuery;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { wrap } from '../../esl-utils/misc/array';\nimport { isElement } from '../../esl-utils/dom/api';\nimport { isPassiveByDefault } from '../../esl-utils/dom/events/misc';\nimport { resolveProperty } from '../../esl-utils/misc/functions';\nimport { isObject, isSimilar } from '../../esl-utils/misc/object';\nimport { resolveDomTarget } from '../../esl-utils/abstract/dom-target';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\n/** Key to store listeners on the host */\nconst LISTENERS = (window.Symbol || String)('__esl_listeners');\n/**\n * Splits and deduplicates event string\n * @returns array of unique events presented in events string\n */\nexport const splitEvents = (events) => {\n    const terms = (events || '').split(' ').map((term) => term.trim());\n    const deduplicate = new Set();\n    return terms.filter((term) => {\n        if (!term || deduplicate.has(term))\n            return false;\n        deduplicate.add(term);\n        return true;\n    });\n};\n/**\n * `EventListener` instance, used as an 'inner' record to process subscriptions made by `ESLEventUtils`\n * Uses `EventListenerObject` interface to subscribe on event.\n *\n * Use Chrome console `getEventListeners` method to check subscribers details when debugging ESLEventListener subscriptions.\n * */\nexport class ESLEventListener {\n    constructor(host, event, handler, desc) {\n        this.host = host;\n        this.event = event;\n        this.handler = handler;\n        const defaults = {\n            capture: false,\n            passive: isPassiveByDefault(event)\n        };\n        Object.assign(this, defaults, desc, { event });\n    }\n    /** @returns target element to listen */\n    get $targets() {\n        const target = resolveProperty(this.target, this.host);\n        if (isObject(target))\n            return wrap(target);\n        const $host = resolveDomTarget(this.host);\n        if (typeof target === 'string')\n            return ESLTraversingQuery.all(target, $host);\n        if (typeof target === 'undefined' && $host)\n            return [$host];\n        return [];\n    }\n    /** @returns resolved selector to check event target */\n    get delegate() {\n        return resolveProperty(this.selector, this.host);\n    }\n    /**\n     * Checks if the passed criteria matches current event listener\n     * - `string` type criteria checked by the `event` name\n     * - `function` type criteria checked by the `handler` reference\n     * - `object` type criteria checked as descriptor using `isSimilar` comparer\n     * Note: `function` (handler) marcher has a priority over descriptor check, so handler function own properties will be ignored\n     */\n    matches(desc) {\n        if (typeof desc === 'string')\n            return this.event === desc;\n        if (typeof desc === 'function')\n            return this.handler === desc;\n        if (typeof desc === 'object')\n            return isSimilar(this, desc, false);\n        return false;\n    }\n    /**\n     * Memoized builder for bound and decorated low level subscription.\n     * Implements DOM API {@link EventListenerObject.handleEvent}\n     */\n    get handleEvent() {\n        const handlerBound = this.handler.bind(this.host);\n        const handlerFull = this.once\n            ? (e) => (handlerBound(e), this.unsubscribe())\n            : handlerBound;\n        return this.selector\n            ? (e) => this.handleDelegation(e, handlerFull)\n            : handlerFull;\n    }\n    /** Executes handler if the passed event is accepted by the selector */\n    handleDelegation(e, handler) {\n        const { delegate } = this;\n        const target = e.target;\n        const current = e.currentTarget;\n        if (typeof delegate !== 'string' || !delegate)\n            return;\n        if (!isElement(target) || !isElement(current))\n            return;\n        const $delegate = target.closest(delegate);\n        if (current.contains($delegate))\n            handler(Object.assign(e, { $delegate }));\n    }\n    /**\n     * (Re-)Subscribes event listener instance\n     * @returns if subscription was successful\n     */\n    subscribe() {\n        const { passive, capture } = this;\n        this.unsubscribe();\n        memoize.clear(this, '$targets');\n        memoize.clear(this, 'handleEvent');\n        if (!this.$targets.length)\n            return false;\n        this.$targets.forEach((el) => el.addEventListener(this.event, this, { passive, capture }));\n        ESLEventListener.add(this.host, this);\n        return true;\n    }\n    /** Unsubscribes event listener instance */\n    unsubscribe() {\n        const { capture } = this;\n        if (!memoize.has(this, '$targets'))\n            return;\n        this.$targets.forEach((el) => el.removeEventListener(this.event, this, { capture }));\n        ESLEventListener.remove(this.host, this);\n    }\n    /**\n     * Gets stored listeners array the passed `host` object\n     * Supports additional filtration criteria\n     */\n    static get(host, ...criteria) {\n        if (!isObject(host))\n            return [];\n        const listeners = (host[LISTENERS] || []);\n        if (!criteria.length)\n            return listeners;\n        return listeners.filter((listener) => criteria.every(listener.matches, listener));\n    }\n    /** Adds listener to the listener store of the host object */\n    static add(host, instance) {\n        if (!isObject(host))\n            return;\n        if (!Object.hasOwnProperty.call(host, LISTENERS))\n            host[LISTENERS] = [];\n        host[LISTENERS].push(instance);\n    }\n    /** Removes listener from the listener store of the host object */\n    static remove(host, instance) {\n        const listeners = ESLEventListener.get(host);\n        const value = listeners.filter((listener) => listener !== instance);\n        Object.defineProperty(host, LISTENERS, { value, configurable: true });\n    }\n    /**\n     * Subscribes `handler` function with the passed event type or {@link ESLListenerDescriptor} with event type declared\n     * @param host - host object (listeners context) to associate subscription\n     * @param handler - handler function to subscribe\n     * @param descriptor - event or {@link ESLListenerDescriptor} with defined event type\n     */\n    static subscribe(host, handler, descriptor = handler) {\n        if (typeof handler !== 'function')\n            return [];\n        const eventDesc = handler !== descriptor ? Object.assign({}, handler, descriptor) : descriptor;\n        const listeners = ESLEventListener.createOrResolve(host, handler, eventDesc);\n        return listeners.filter((listener) => listener.subscribe());\n    }\n    /** Creates or resolves existing event listeners by handler and descriptors */\n    static createOrResolve(host, handler, desc) {\n        if (!isObject(host))\n            return [];\n        const eventString = resolveProperty(desc.event, host);\n        const listeners = [];\n        for (const event of splitEvents(eventString)) {\n            const subscribed = ESLEventListener.get(host, event, handler, {\n                target: desc.target,\n                selector: desc.selector,\n                capture: !!desc.capture\n            });\n            if (subscribed.length)\n                listeners.push(...subscribed);\n            else\n                listeners.push(new ESLEventListener(host, event, handler, desc));\n        }\n        return listeners;\n    }\n}\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"$targets\", null);\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"handleEvent\", null);\n","import { isObject } from '../../esl-utils/misc/object/types';\n/** Key to store listeners on the host */\nconst DESCRIPTORS = (window.Symbol || String)('__esl_descriptors');\n/**\n * @param host - host object\n * @returns object own descriptors keys or an empty array\n */\nfunction getOwnDescriptorsKeys(host) {\n    return Object.hasOwnProperty.call(host, DESCRIPTORS) ? host[DESCRIPTORS] : [];\n}\n/**\n * Marks host own key to be auto-collectable\n * @param host - host object\n * @param key - descriptor own key\n */\nfunction addDescriptorKey(host, key) {\n    const value = getOwnDescriptorsKeys(host);\n    if (!value.includes(key))\n        value.push(key);\n    Object.defineProperty(host, DESCRIPTORS, { value, configurable: true });\n}\n/** Collects descriptors key from the whole prototype chain */\nfunction getDescriptorsKeysFor(host) {\n    const store = {};\n    for (let proto = host; proto; proto = Object.getPrototypeOf(proto)) {\n        getOwnDescriptorsKeys(proto).forEach((key) => (store[key] = true));\n    }\n    return Object.keys(store);\n}\n/** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\nexport function isEventDescriptor(obj) {\n    if (typeof obj !== 'function' || !Object.hasOwnProperty.call(obj, 'event'))\n        return false;\n    return typeof obj.event === 'string' || typeof obj.event === 'function';\n}\n/** Gets {@link ESLListenerDescriptorFn}s of the passed object */\nexport function getAutoDescriptors(host) {\n    if (!isObject(host))\n        return [];\n    const keys = getDescriptorsKeysFor(host);\n    const values = keys.map((key) => host[key]);\n    return values.filter((desc) => isEventDescriptor(desc) && desc.auto === true);\n}\n/**\n * Decorates passed `key` of the `host` as an {@link ESLListenerDescriptorFn} using `desc` meta information\n * @param host - object holder of the function to decorate\n * @param key - string key of the function in holder object\n * @param desc - descriptor meta information to assign\n * @returns ESLListenerDescriptorFn created on the host\n */\nexport function initDescriptor(host, key, desc) {\n    const fn = host[key];\n    if (typeof fn !== 'function')\n        throw new TypeError(`[ESL] Init Descriptor: ${key} is not a function`);\n    // Inherit event meta information from the prototype key\n    if (desc.inherit) {\n        const superDesc = Object.getPrototypeOf(host)[key];\n        if (!isEventDescriptor(superDesc))\n            throw new ReferenceError(`[ESL] Init Descriptor: no parent event descriptor found for ${key}`);\n        desc = Object.assign({ auto: false }, superDesc, desc);\n    }\n    else {\n        desc = Object.assign({ auto: false }, desc);\n    }\n    if (desc.auto)\n        addDescriptorKey(host, key);\n    return Object.assign(fn, desc);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { dispatchCustomEvent } from '../../esl-utils/dom/events/misc';\nimport { ESLEventListener } from './listener';\nimport { getAutoDescriptors, isEventDescriptor, initDescriptor } from './descriptors';\nlet ESLEventUtils = class ESLEventUtils {\n    /**\n     * Gets currently subscribed listeners of the host\n     * @param host - host object (listeners context) to associate subscription\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners list\n     */\n    static listeners(host, ...criteria) {\n        return ESLEventListener.get(host, ...criteria);\n    }\n    static subscribe(host, eventDesc, handler = eventDesc) {\n        if (arguments.length === 1) {\n            const descriptors = getAutoDescriptors(host);\n            // TODO: flatMap when ES5 will be out of support list\n            return descriptors.reduce((acc, desc) => acc.concat(ESLEventListener.subscribe(host, desc)), []);\n        }\n        if (typeof eventDesc === 'string')\n            eventDesc = { event: eventDesc };\n        const listeners = ESLEventListener.subscribe(host, handler, eventDesc);\n        if (!listeners.length) {\n            const mergedDesc = Object.assign({}, eventDesc, { handler });\n            console.warn('[ESL]: Empty subscription %o', mergedDesc);\n        }\n        return listeners;\n    }\n    /**\n     * Unsubscribes {@link ESLEventListener}(s) from the object\n     * @param host - host element that stores subscriptions (listeners context)\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners to remove\n     */\n    static unsubscribe(host, ...criteria) {\n        const listeners = ESLEventListener.get(host, ...criteria);\n        listeners.forEach((listener) => listener.unsubscribe());\n        return listeners;\n    }\n};\n/**\n * Dispatches custom event. Alias for {@link dispatchCustomEvent}\n * @see dispatchCustomEvent\n */\nESLEventUtils.dispatch = dispatchCustomEvent;\n/** @deprecated alias for {@link getAutoDescriptors} */\nESLEventUtils.descriptors = getAutoDescriptors;\n/** Gets {@link ESLListenerDescriptorFn}s of the passed object */\nESLEventUtils.getAutoDescriptors = getAutoDescriptors;\n/**\n * Decorates passed `key` of the `host` as an {@link ESLListenerDescriptorFn} using `desc` meta information\n * @param host - object holder of the function to decorate\n * @param key - string key of the function in holder object\n * @param desc - descriptor meta information to assign\n * @returns ESLListenerDescriptorFn created on the host\n */\nESLEventUtils.initDescriptor = initDescriptor;\n/** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\nESLEventUtils.isEventDescriptor = isEventDescriptor;\nESLEventUtils = __decorate([\n    ExportNs('EventUtils')\n], ESLEventUtils);\nexport { ESLEventUtils };\n/** @deprecated alias for {@link ESLEventUtils} */\nexport const EventUtils = ESLEventUtils;\n","import { ESLEventUtils } from '../../esl-event-listener/core';\nexport function listen(desc) {\n    return function listener(target, propertyKey) {\n        // Map short event or event provider value to descriptor object\n        desc = typeof desc === 'string' || typeof desc === 'function' ? { event: desc } : desc;\n        // Makes auto collectable/subscribable description if not inherited\n        desc = Object.assign(desc.inherit ? {} : { auto: true }, desc);\n        ESLEventUtils.initDescriptor(target, propertyKey, desc);\n    };\n}\n","import { wrap } from '../misc/array';\n/** Store locks for key element classes*/\nconst lockStore = new WeakMap();\n/** Mange className lock for the element */\nconst lock = (el, className, locker) => {\n    const elLocks = lockStore.get(el) || new Map();\n    const classLocks = elLocks.get(className) || new Set();\n    classLocks.add(locker);\n    elLocks.set(className, classLocks);\n    lockStore.set(el, elLocks);\n};\n/**\n * Manage className unlock for the element\n * @returns true if className have no locks\n */\nconst unlock = (el, className, locker) => {\n    const elLocks = lockStore.get(el);\n    if (!elLocks)\n        return true;\n    const classLocks = elLocks.get(className);\n    if (!classLocks)\n        return true;\n    classLocks.delete(locker);\n    return !classLocks.size;\n};\n/**\n * Add single class to the element.\n * Supports inversion and locker management.\n */\nconst add = (el, className, locker) => {\n    if (className[0] === '!')\n        return remove(el, className.substring(1), locker);\n    if (locker)\n        lock(el, className, locker);\n    el.classList.add(className);\n};\n/**\n * Remove single class from the element.\n * Supports inversion and locker management.\n */\nconst remove = (el, className, locker) => {\n    if (className[0] === '!')\n        return add(el, className.substring(1), locker);\n    if (locker && !unlock(el, className, locker))\n        return;\n    if (!locker)\n        CSSClassUtils.unlock(el, className);\n    el.classList.remove(className);\n};\n/**\n * Check if the element matches passed CSS class.\n * Supports inversion.\n */\nconst has = (el, className) => {\n    if (className[0] === '!')\n        return !has(el, className.substring(1));\n    return el.classList.contains(className);\n};\n/**\n * CSS class manipulation utilities.\n *\n * Allows manipulating with CSS classes with the following set of sub-features:\n * - JQuery-like enumeration - you can pass multiple tokens separated by space\n * - safe checks - empty or falsy token sting will be ignored without throwing an error\n * - inversion syntax - tokens that start from '!' will be processed with inverted action\n * (e.g. addCls(el, '!class') - will remove 'class' from the element, while removeCls(el, '!class') adds 'class' to the element)\n * - class locks - you can manipulate with classes using `locker` option that takes into account the modification initiator.\n * That means the class added in 'locker' mode will not be removed until all initiators that requested add class have requested its removal.\n * */\nexport class CSSClassUtils {\n    /** Splitting passed token string into CSS class names array. */\n    static splitTokens(tokenString) {\n        return (tokenString || '').split(' ').filter((str) => !!str);\n    }\n    /**\n     * Add all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static add(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => add(el, className, locker)));\n    }\n    /**\n     * Remove all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static remove(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => remove(el, className, locker)));\n    }\n    /**\n     * Toggle all classes from the class token string on the element to the passed state.\n     * @see CSSClassUtils\n     * */\n    static toggle(els, cls, state, locker) {\n        (state ? CSSClassUtils.add : CSSClassUtils.remove)(els, cls, locker);\n    }\n    /**\n     * Check if all class from token string matches to the element or elements.\n     * @see CSSClassUtils\n     * */\n    static has(els, cls) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        return wrap(els).every((el) => tokens.every((className) => has(el, className)));\n    }\n    /** Remove all lockers for the element or passed element className */\n    static unlock(els, className) {\n        if (className) {\n            wrap(els).forEach((el) => { var _a; return (_a = lockStore.get(el)) === null || _a === void 0 ? void 0 : _a.delete(className); });\n        }\n        else {\n            wrap(els).forEach((el) => lockStore.delete(el));\n        }\n    }\n}\n","export const TAB = 'Tab';\nexport const ENTER = 'Enter';\nexport const ESC = 'Escape';\nexport const SPACE = ' ';\nexport const BACKSPACE = 'Backspace';\nexport const ALT = 'Alt';\nexport const SHIFT = 'Shift';\nexport const CONTROL = 'Control';\nexport const PAUSE = 'Pause';\nexport const END = 'End';\nexport const HOME = 'Home';\nexport const DELETE = 'Delete';\nexport const PAGE_UP = 'PageUp';\nexport const PAGE_DOWN = 'PageDown';\nexport const ARROW_LEFT = 'ArrowLeft';\nexport const ARROW_UP = 'ArrowUp';\nexport const ARROW_RIGHT = 'ArrowRight';\nexport const ARROW_DOWN = 'ArrowDown';\nexport const SYSTEM_KEYS = [TAB, ALT, SHIFT, CONTROL, PAGE_UP, PAGE_DOWN, ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN];\n","/**\n * `@prop` is auxiliary decorator to define a field on the prototype level.\n *` @prop` can be used to override decorated property from the parent level\n *\n * You can also use an @override decorator in combination with ECMA Script class property definition:\n * `@prop() public field: any = initial value;`\n *\n * The class property initial value is a part of object creation, so it goes to the object itself,\n * while the @override value is defined on the prototype level.\n *\n * @param value - value to setup in prototype\n * @param prototypeConfig - prototype property configuration\n */\nexport function prop(value, prototypeConfig = {}) {\n    return function (obj, name) {\n        if (Object.hasOwnProperty.call(obj, name)) {\n            throw new TypeError('Can\\'t override own property');\n        }\n        Object.defineProperty(obj, name, {\n            value,\n            writable: !prototypeConfig.readonly,\n            enumerable: !prototypeConfig.enumerable,\n            configurable: true\n        });\n        return {};\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { prop } from '../../esl-utils/decorators';\nimport { ESLEventUtils } from '../../esl-utils/dom/events';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\n/** Finalize tag name (`is`) for passed ESLBaseElement-based class */\nconst finalize = (type, tagName) => {\n    Object.defineProperty(type, 'is', {\n        get: () => tagName,\n        set(value) {\n            if (this === type)\n                throw Error(`[ESL]: Cannot override ${type.name}.is property, the class is already registered`);\n            Object.defineProperty(this, 'is', { value, writable: true, configurable: true });\n        }\n    });\n};\n/**\n * Base class for ESL custom elements\n * Allows defining custom element with the optional custom tag name\n */\nexport class ESLBaseElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this._connected = false;\n    }\n    /** @returns custom element tag name */\n    get baseTagName() {\n        return this.constructor.is;\n    }\n    connectedCallback() {\n        this._connected = true;\n        this.classList.add(this.baseTagName);\n        ESLEventUtils.subscribe(this);\n    }\n    disconnectedCallback() {\n        this._connected = false;\n        ESLEventUtils.unsubscribe(this);\n    }\n    /**\n     * Callback to handle changing of element attributes.\n     * Happens when attribute accessed for writing independently of the actual value change\n     */\n    attributeChangedCallback(name, oldValue, newValue) { }\n    /** Check that the element is connected and `connectedCallback` has been executed */\n    get connected() {\n        return this._connected;\n    }\n    $$on(event, handler) {\n        return ESLEventUtils.subscribe(this, event, handler);\n    }\n    /** Unsubscribes event listener */\n    $$off(...condition) {\n        return ESLEventUtils.unsubscribe(this, ...condition);\n    }\n    /**\n     * Gets or sets CSS classes for the current element.\n     * @param cls - CSS classes query {@link CSSClassUtils}\n     * @param value - boolean to set CSS class(es) state or undefined to skip mutation\n     * @returns current classes state or passed state\n     */\n    $$cls(cls, value) {\n        if (value === undefined)\n            return CSSClassUtils.has(this, cls);\n        CSSClassUtils.toggle(this, cls, value);\n        return value;\n    }\n    /**\n     * Gets or sets an attribute for the current element.\n     * If the `value` param is undefined then skips mutation.\n     * @param name - attribute name\n     * @param value - string attribute value, boolean attribute state or `null` to delete attribute\n     * @returns the current attribute value or previous value for mutation\n     */\n    $$attr(name, value) {\n        const prevValue = this.getAttribute(name);\n        if (value !== undefined)\n            setAttr(this, name, value);\n        return prevValue;\n    }\n    /**\n     * Dispatches component custom event.\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    $$fire(eventName, eventInit) {\n        return ESLEventUtils.dispatch(this, eventName, eventInit);\n    }\n    /**\n     * Register component in the {@link customElements} registry\n     * @param tagName - custom tag name to register custom element\n     */\n    static register(tagName) {\n        tagName = tagName || this.is;\n        if (!tagName)\n            throw new DOMException('[ESL]: Incorrect tag name', 'NotSupportedError');\n        const constructor = customElements.get(tagName);\n        if (constructor && (constructor !== this || constructor.is !== tagName)) {\n            throw new DOMException('[ESL]: Element tag already occupied or inconsistent', 'NotSupportedError');\n        }\n        if (constructor)\n            return;\n        finalize(this, tagName);\n        customElements.define(tagName, this);\n    }\n    /** Shortcut for `customElements.whenDefined(currentCustomElement)` */\n    static get registered() {\n        return customElements.whenDefined(this.is);\n    }\n    static create() {\n        return document.createElement(this.is);\n    }\n}\n/** Custom element tag name */\nESLBaseElement.is = '';\n__decorate([\n    prop('esl:refresh')\n], ESLBaseElement.prototype, \"REFRESH_EVENT\", void 0);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement, listen } from '../../../esl-base-element/core';\nimport { ESLEventUtils } from '../../../esl-utils/dom/events';\n/**\n * Base class for {@link HTMLSelectElement} wrapper element, implements {@link ESLSelectModel} options source\n */\nexport class ESLSelectWrapper extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._mutationObserver = new MutationObserver(this._onTargetMutation.bind(this));\n    }\n    /** Native select that is wrapped */\n    get $select() {\n        return this._$select;\n    }\n    set $select(select) {\n        const prev = this._$select;\n        this._$select = select;\n        this._onTargetChange(select, prev);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._mutationObserver.disconnect();\n    }\n    _onChange(event) { }\n    _onListChange() { }\n    _onTargetChange(newTarget, oldTarget) {\n        this.$$on(this._onChange);\n        this._mutationObserver.disconnect();\n        const type = this.constructor;\n        if (newTarget)\n            this._mutationObserver.observe(newTarget, type.observationConfig);\n    }\n    _onTargetMutation(changes) {\n        const isListChange = (change) => change.addedNodes.length + change.removedNodes.length > 0;\n        changes.some(isListChange) ? this._onListChange() : this._onChange();\n    }\n    _onReset(event) {\n        if (!event.target || event.target !== this.form)\n            return;\n        setTimeout(() => this._onChange(event));\n    }\n    get multiple() {\n        return this.$select && this.$select.multiple;\n    }\n    get options() {\n        return this.$select ? Array.from(this.$select.options) : [];\n    }\n    get selectedOptions() {\n        return this.options.filter((item) => item.selected);\n    }\n    getOption(value) {\n        return this.options.find((item) => item.value === value);\n    }\n    setSelected(value, state) {\n        if (!this.$select)\n            return;\n        const option = this.getOption(value);\n        option && (option.selected = state);\n        ESLEventUtils.dispatch(this.$select, 'change');\n    }\n    isSelected(value) {\n        const opt = this.getOption(value);\n        return !!opt && opt.selected;\n    }\n    hasSelected() {\n        return this.options.some((item) => item.selected);\n    }\n    isAllSelected() {\n        return this.options.every((item) => item.selected || item.disabled);\n    }\n    setAllSelected(state) {\n        if (!this.multiple || !this.$select)\n            return;\n        this.options.forEach((item) => item.selected = !item.disabled && state);\n        ESLEventUtils.dispatch(this.$select, 'change');\n    }\n    // Proxy select methods and values\n    get value() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    get values() {\n        return this.selectedOptions.map((item) => item.value);\n    }\n    get form() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.form;\n    }\n    get name() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.name;\n    }\n    set name(name) {\n        this.$select && (this.$select.name = name);\n    }\n    get required() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.required;\n    }\n    set required(required) {\n        this.$select && (this.$select.required = required);\n    }\n    // Validation API values\n    get validity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.validity;\n    }\n    get validationMessage() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.validationMessage;\n    }\n    get willValidate() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.willValidate;\n    }\n    // Validation API methods\n    checkValidity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.checkValidity();\n    }\n    reportValidity() {\n        var _a;\n        return (_a = this.$select) === null || _a === void 0 ? void 0 : _a.reportValidity();\n    }\n    setCustomValidity(error) {\n        var _a;\n        (_a = this.$select) === null || _a === void 0 ? void 0 : _a.setCustomValidity(error);\n    }\n}\nESLSelectWrapper.observationConfig = {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['value', 'selected', 'disabled'],\n    childList: true,\n    characterData: true\n};\n__decorate([\n    listen({\n        event: 'change',\n        target: (el) => el.$select\n    })\n], ESLSelectWrapper.prototype, \"_onChange\", null);\n__decorate([\n    listen({\n        event: 'reset',\n        target: (el) => el.ownerDocument\n    })\n], ESLSelectWrapper.prototype, \"_onReset\", null);\n","/**\n * Postpone action after next render\n */\nexport const afterNextRender = (callback) => requestAnimationFrame(() => requestAnimationFrame(callback));\n/**\n * Postpone action after a couple of renders\n */\nexport const skipOneRender = (callback) => requestAnimationFrame(() => afterNextRender(callback));\n/**\n * Decorate function to schedule execution after next render\n * @returns decorated function\n */\nexport const rafDecorator = (fn) => {\n    let lastArgs = null; // null if no calls requested\n    return function (...args) {\n        if (lastArgs === null) {\n            requestAnimationFrame(() => {\n                lastArgs && fn.call(this, ...lastArgs);\n                lastArgs = null;\n            });\n        }\n        lastArgs = args;\n    };\n};\n","import { getPropertyDescriptor } from '../misc/object/utils';\n/**\n * Common TS decorator to apply decorator function\n * (like {@link debounce}, {@link throttle}, {@link rafDecorator})\n * to the class method\n * @param decorator - function decorator, should accept decorated method as first argument\n * @param args - additional arguments to pass into `decorator`\n */\nexport function decorate(decorator, ...args) {\n    return function (target, propertyKey, descriptor) {\n        if (!descriptor || typeof descriptor.value !== 'function') {\n            throw new TypeError('Only class methods can be decorated');\n        }\n        const originalFn = descriptor.value;\n        return descriptor = {\n            enumerable: descriptor.enumerable,\n            configurable: true,\n            get: function getBound() {\n                // Skip own properties\n                const proto = Object.getPrototypeOf(this);\n                // Find the closest descriptor for property\n                const desc = getPropertyDescriptor(proto, propertyKey);\n                // Return original function in case of prototype or super call\n                if (!desc || desc.get !== getBound)\n                    return originalFn;\n                // Create a new decorated instance of function\n                const decoratedFn = decorator(originalFn.bind(this), ...args);\n                // Copy original function own keys\n                Object.assign(decoratedFn, originalFn);\n                // Defines own property with the decorated instance\n                return this[propertyKey] = decoratedFn;\n            },\n            set(value) {\n                Object.defineProperty(this, propertyKey, {\n                    value,\n                    writable: true,\n                    configurable: true,\n                    enumerable: descriptor.enumerable\n                });\n            }\n        };\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '../../../esl-base-element/core';\nimport { format } from '../../../esl-utils/misc/format';\nimport { rafDecorator } from '../../../esl-utils/async/raf';\nimport { attr, boolAttr, decorate, listen, memoize } from '../../../esl-utils/decorators';\n/**\n * ESLSelectRenderer component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom element to render {@link ESLSelect} inline field\n */\nexport class ESLSelectRenderer extends ESLBaseElement {\n    /** Internal container */\n    get $container() {\n        const $container = document.createElement('div');\n        $container.className = 'esl-select-text-container';\n        $container.appendChild(this.$text);\n        $container.appendChild(this.$rest);\n        return $container;\n    }\n    /** Inner remove button */\n    get $remove() {\n        const $remove = document.createElement('button');\n        $remove.type = 'button';\n        $remove.setAttribute('aria-label', 'Clear');\n        $remove.className = 'esl-select-clear-btn icon-nav-close-menu';\n        return $remove;\n    }\n    /** Inner text element */\n    get $text() {\n        const $text = document.createElement('span');\n        $text.className = 'esl-select-text';\n        return $text;\n    }\n    /** Inner rest label element */\n    get $rest() {\n        const $rest = document.createElement('span');\n        $rest.className = 'esl-select-text';\n        return $rest;\n    }\n    /** ESLSelect owner */\n    get owner() {\n        if (!this.parentElement || !this.parentElement.matches('esl-select'))\n            return null;\n        return this.parentElement;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$container);\n        this.appendChild(this.$remove);\n        Promise.resolve().then(() => this.render());\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeChild(this.$container);\n        this.removeChild(this.$remove);\n    }\n    /** Rerender component with markers */\n    render() {\n        if (!this.owner)\n            return;\n        const selected = this.owner.selectedOptions;\n        this.hasValue = !!selected.length;\n        this.toggleAttribute('multiple', this.owner.multiple);\n        this.applyItems(selected.map((item) => item.text));\n    }\n    /** Render item with a visible items limit */\n    apply(items, limit) {\n        const length = items.length;\n        const rest = length - limit;\n        const options = { rest, length, limit };\n        this.$text.textContent = items.slice(0, limit).join(', ');\n        if (rest > 0) {\n            this.$rest.textContent = format(this.moreLabelFormat || '', options);\n        }\n        else {\n            this.$rest.textContent = '';\n        }\n    }\n    /** Render items using adaptive algorithm */\n    applyItems(items) {\n        let size = 0;\n        do {\n            this.apply(items, ++size); // Render with extended limit while it not fits to the container\n        } while (size <= items.length && this.$container.scrollWidth <= this.$container.clientWidth);\n        this.apply(items, size - 1); // Render last limit that fits\n    }\n    /** Handle clear button click */\n    _onClear(e) {\n        if (!this.owner)\n            return;\n        this.owner.setAllSelected(false);\n        e.stopPropagation();\n        e.preventDefault();\n    }\n    _onResize() {\n        this.render();\n    }\n}\nESLSelectRenderer.is = 'esl-select-renderer';\n__decorate([\n    attr()\n], ESLSelectRenderer.prototype, \"emptyText\", void 0);\n__decorate([\n    attr()\n], ESLSelectRenderer.prototype, \"moreLabelFormat\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectRenderer.prototype, \"hasValue\", void 0);\n__decorate([\n    memoize()\n], ESLSelectRenderer.prototype, \"$container\", null);\n__decorate([\n    memoize()\n], ESLSelectRenderer.prototype, \"$remove\", null);\n__decorate([\n    memoize()\n], ESLSelectRenderer.prototype, \"$text\", null);\n__decorate([\n    memoize()\n], ESLSelectRenderer.prototype, \"$rest\", null);\n__decorate([\n    listen({\n        event: 'esl:change:value',\n        target: (el) => el.owner\n    })\n], ESLSelectRenderer.prototype, \"render\", null);\n__decorate([\n    listen({ event: 'click', selector: '.esl-select-clear-btn' })\n], ESLSelectRenderer.prototype, \"_onClear\", null);\n__decorate([\n    listen({ event: 'resize', target: window }),\n    decorate(rafDecorator)\n], ESLSelectRenderer.prototype, \"_onResize\", null);\n","import { getAttr, setAttr } from '../dom/attr';\nimport { toKebabCase, evaluate } from '../misc/format';\nfunction buildJsonAttrDescriptor(attrName, readOnly, defaultValue) {\n    function get() {\n        const attrContent = getAttr(this, attrName, '').trim();\n        return evaluate(attrContent, defaultValue);\n    }\n    function set(value) {\n        try {\n            if (typeof value !== 'object')\n                throw Error('value should be object');\n            setAttr(this, attrName, value ? JSON.stringify(value) : false);\n        }\n        catch (e) {\n            console.error('[ESL] jsonAttr: Can not set json value ', e);\n        }\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value using JSON (de-)serialization rules.\n * Maps object type property.\n * @param config - mapping configuration. See {@link JsonAttrDescriptor}\n */\nexport const jsonAttr = (config = {}) => {\n    config = Object.assign({ defaultValue: {} }, config);\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildJsonAttrDescriptor(attrName, !!config.readonly, config.defaultValue));\n        return {};\n    };\n};\n","import { onDocumentReady } from '../dom/ready';\n/** Defer method execution to the next task with dom ready state precondition */\nexport function ready(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== 'function') {\n        throw new TypeError('Only class methods can be decorated via document ready decorator');\n    }\n    const fn = descriptor.value;\n    descriptor.value = function (...arg) {\n        onDocumentReady(() => fn.call(this, ...arg));\n    };\n}\n","/**\n * Execute callback in bounds of the next task with dom ready state precondition\n */\nexport function onDocumentReady(callback) {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', function fn() {\n            document.removeEventListener('DOMContentLoaded', fn);\n            setTimeout(() => callback());\n        });\n    }\n    else {\n        setTimeout(() => callback());\n    }\n}\n","import { getPropertyDescriptor } from '../misc/object/utils';\n/** Decorator \"bind\" allows to bind prototype method context to class instance */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function bind(target, propertyKey, descriptor) {\n    // Validation check\n    if (!descriptor || (typeof descriptor.value !== 'function')) {\n        throw new TypeError('Only class methods can be decorated via @bind');\n    }\n    // Original function\n    const originalFn = descriptor.value;\n    return descriptor = {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: function getBound() {\n            const proto = Object.getPrototypeOf(this);\n            const desc = getPropertyDescriptor(proto, propertyKey);\n            const isProtoCall = !desc || desc.get !== getBound;\n            return isProtoCall ? originalFn : (this[propertyKey] = originalFn.bind(this));\n        },\n        set(value) {\n            Object.defineProperty(this, propertyKey, {\n                value,\n                writable: true,\n                configurable: true,\n                enumerable: descriptor.enumerable\n            });\n        }\n    };\n}\n","const SEQUENCE_KEY = ((window.Symbol || String)('__esl_sequences__'));\nconst ns = window || global;\nconst sequences = ns[SEQUENCE_KEY] || new Map();\nns[SEQUENCE_KEY] = sequences;\n/** Create and return sequential id */\nexport const sequentialUID = (name, prefix = name) => {\n    const uid = (sequences.get(name) || 0) + 1;\n    sequences.set(name, uid);\n    return prefix + uid;\n};\n/** Return random unique identifier */\nexport const randUID = (prefix = '') => {\n    const time = Date.now().toString(32);\n    const rand = Math.round(Math.random() * 1024 * 1024).toString(32);\n    return prefix + time + '-' + rand;\n};\n/**\n * Generate unique id\n * @deprecated Alias for {@link randUID}\n */\nexport const generateUId = randUID;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from './export-ns';\nconst { userAgent, vendor, platform } = window.navigator;\n// IE Detection\nexport const isTrident = /trident/i.test(userAgent);\nexport const isIE = isTrident;\n// Edge Detection\nexport const isEdgeHTML = /edg([ea]|ios)/i.test(userAgent);\nexport const isBlinkEdge = /\\sedg\\//i.test(userAgent);\nexport const isEdge = isEdgeHTML || isBlinkEdge;\n// Gecko\nexport const isGecko = /gecko/i.test(userAgent) && !/like gecko/i.test(userAgent);\nexport const isFirefox = /firefox|iceweasel|fxios/i.test(userAgent);\n// Opera / Chrome\nexport const isOpera = /(?:^opera.+?version|opr)/.test(userAgent);\nexport const isChrome = !isOpera && /google inc/.test(vendor);\n// Webkit\nexport const isWebkit = /(apple)?webkit/i.test(userAgent);\n// Safari\nexport const isSafari = isWebkit && /^((?!chrome|android).)*safari/i.test(userAgent);\n// Blink\nexport const isBlink = isWebkit && !isSafari;\n// Bot detection\nexport const isBot = /Chrome-Lighthouse|Google Page Speed Insights/i.test(userAgent);\n// Mobile\nexport const isAndroid = /Android/i.test(userAgent);\nexport const isMobileIOS13 = /* iOS 13+ detection */ (platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nexport const isMobileIOS = /iPad|iPhone|iPod/.test(platform) || isMobileIOS13;\nexport const isLegacyMobile = /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport const isMobile = isMobileIOS || isAndroid || isLegacyMobile;\nexport const isMobileSafari = isMobileIOS && isWebkit && /CriOS/i.test(userAgent);\n// Touch Detection\nexport const isTouchDevice = (() => {\n    const navApi = window.navigator;\n    if (navApi.maxTouchPoints || navApi.msMaxTouchPoints)\n        return true;\n    return ('ontouchstart' in window) || ('DocumentTouch' in window && document instanceof Touch);\n})();\n// Hover check\n// Note: always true for IE\nexport const hasHover = !matchMedia('(hover: none)').matches;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nexport const TOUCH_EVENTS = (() => {\n    const isTouch = isTouchDevice;\n    return {\n        START: isTouch ? 'touchstart' : 'pointerdown',\n        MOVE: isTouch ? 'touchmove' : 'pointermove',\n        END: isTouch ? 'touchend' : 'pointerup'\n    };\n})();\n/**\n * Device detection utility\n * @readonly\n */\nlet DeviceDetector = class DeviceDetector {\n};\n// IE Detection\nDeviceDetector.isTrident = isTrident;\nDeviceDetector.isIE = isIE;\n// Edge Detection\nDeviceDetector.isEdgeHTML = isEdgeHTML;\nDeviceDetector.isBlinkEdge = isBlinkEdge;\nDeviceDetector.isEdge = isEdge;\n// Gecko\nDeviceDetector.isGecko = isGecko;\nDeviceDetector.isFirefox = isFirefox;\n// Opera / Chrome\nDeviceDetector.isOpera = isOpera;\nDeviceDetector.isChrome = isChrome;\n// Webkit\nDeviceDetector.isWebkit = isWebkit;\n// Safari\nDeviceDetector.isSafari = isSafari;\n// Blink\nDeviceDetector.isBlink = isBlink;\n// Bot detection\nDeviceDetector.isBot = isBot;\n// Mobile\nDeviceDetector.isAndroid = isAndroid;\nDeviceDetector.isMobileIOS13 = isMobileIOS13;\nDeviceDetector.isMobileIOS = isMobileIOS;\nDeviceDetector.isLegacyMobile = isLegacyMobile;\nDeviceDetector.isMobile = isMobile;\nDeviceDetector.isMobileSafari = isMobileSafari;\n// Touch Detection\nDeviceDetector.isTouchDevice = isTouchDevice;\n// Hover check\n// Note: always true for IE\nDeviceDetector.hasHover = hasHover;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nDeviceDetector.TOUCH_EVENTS = TOUCH_EVENTS;\nDeviceDetector = __decorate([\n    ExportNs('DeviceDetector')\n], DeviceDetector);\nexport { DeviceDetector };\n","/**\n * Task placeholder with a single place for executing deferred task.\n * Only one task can be planed per DelayedTask instance.\n * @see put DelayedTask.put behaviour description.\n */\nexport class DelayedTask {\n    constructor() {\n        this._fn = null;\n        this._timeout = null;\n        /** Execute deferred task immediately */\n        this.run = () => {\n            this._timeout = null;\n            this._fn && this._fn();\n        };\n    }\n    /** @returns Function of currently deferred (planned) task */\n    get fn() {\n        return this._fn;\n    }\n    /**\n     * Cancel deferred task and planning passed\n     * @param task - task function\n     * @param delay - time to delay task execution\n     *  - pass negative or false to execute task immediately\n     *  - pass 0 to plan task to the macrotask\n     *  - pass positive number x to delay task on x ms.\n     * */\n    put(task, delay = false) {\n        const prev = this.cancel();\n        if (typeof task === 'function') {\n            if (delay && typeof delay === 'string')\n                delay = +delay;\n            if (typeof delay === 'number' && delay >= 0) {\n                this._fn = task;\n                this._timeout = window.setTimeout(this.run, delay);\n            }\n            else {\n                task();\n            }\n        }\n        return prev;\n    }\n    /** Cancel deferred (planned) task */\n    cancel() {\n        const prev = this._fn;\n        (typeof this._timeout === 'number') && clearTimeout(this._timeout);\n        this._fn = this._timeout = null;\n        return prev;\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESC, SYSTEM_KEYS } from '../../esl-utils/dom/keys';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { prop, attr, jsonAttr, listen } from '../../esl-utils/decorators';\nimport { defined, copyDefinedKeys } from '../../esl-utils/misc/object';\nimport { parseBoolean, toBooleanAttribute } from '../../esl-utils/misc/format';\nimport { sequentialUID } from '../../esl-utils/misc/uid';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { DelayedTask } from '../../esl-utils/async/delayed-task';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { findParent, isMatches } from '../../esl-utils/dom/traversing';\nconst activators = new WeakMap();\n/**\n * ESLToggleable component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleable - a custom element, that is used as a base for \"Popup-like\" components creation\n */\nlet ESLToggleable = class ESLToggleable extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Inner state */\n        this._open = false;\n        /** Inner show/hide task manager instance */\n        this._task = new DelayedTask();\n        /** Marker for current hover listener state */\n        this._trackHover = false;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (!this.id && !this.noAutoId) {\n            this.id = sequentialUID(this.baseTagName, this.baseTagName + '-');\n        }\n        this.initiallyOpened = this.hasAttribute('open');\n        this.setInitialState();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        activators.delete(this);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        switch (attrName) {\n            case 'open': {\n                const isOpen = this.hasAttribute('open');\n                if (this.open === isOpen)\n                    return;\n                this.toggle(isOpen, { initiator: 'attribute', showDelay: 0, hideDelay: 0 });\n                break;\n            }\n            case 'group':\n                this.$$fire(this.GROUP_CHANGED_EVENT, {\n                    detail: { oldGroupName: oldVal, newGroupName: newVal }\n                });\n                break;\n        }\n    }\n    /** Set initial state of the Toggleable */\n    setInitialState() {\n        if (this.initialParams) {\n            this.toggle(this.initiallyOpened, this.initialParams);\n        }\n    }\n    /** Bind outside action event listeners */\n    bindOutsideEventTracking(track) {\n        track ? this.$$on(this._onOutsideAction) : this.$$off(this._onOutsideAction);\n    }\n    /** Bind hover events listeners for the Toggleable itself */\n    bindHoverStateTracking(track, hideDelay) {\n        if (!DeviceDetector.hasHover)\n            return;\n        this._trackHoverDelay = track && hideDelay !== undefined ? +hideDelay : undefined;\n        if (this._trackHover === track)\n            return;\n        this._trackHover = track;\n        track ? this.$$on(this._onMouseEnter) : this.$$off(this._onMouseEnter);\n        track ? this.$$on(this._onMouseLeave) : this.$$off(this._onMouseLeave);\n    }\n    /** Function to merge the result action params */\n    mergeDefaultParams(params) {\n        return Object.assign({}, this.defaultParams, copyDefinedKeys(params));\n    }\n    /** Toggle the element state */\n    toggle(state = !this.open, params) {\n        return state ? this.show(params) : this.hide(params);\n    }\n    /** Change the element state to active */\n    show(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.showTask.bind(this, params), defined(params.showDelay, params.delay));\n        this.bindOutsideEventTracking(this.closeOnOutsideAction);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Change the element state to inactive */\n    hide(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.hideTask.bind(this, params), defined(params.hideDelay, params.delay));\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Actual show task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    showTask(params) {\n        if (!params.force && this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_SHOW_EVENT, { detail: { params } }))\n            return;\n        this.activator = params.activator;\n        this.open = true;\n        this.onShow(params);\n        if (!params.silent)\n            this.$$fire(this.SHOW_EVENT, { detail: { params }, cancelable: false });\n    }\n    /** Actual hide task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    hideTask(params) {\n        if (!params.force && !this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_HIDE_EVENT, { detail: { params } }))\n            return;\n        this.open = false;\n        this.onHide(params);\n        this.bindOutsideEventTracking(false);\n        if (!params.silent)\n            this.$$fire(this.HIDE_EVENT, { detail: { params }, cancelable: false });\n    }\n    /**\n     * Actions to execute on show toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Adds CSS classes, update a11y and fire {@link ESLToggleable.REFRESH_EVENT} event by default.\n     */\n    onShow(params) {\n        CSSClassUtils.add(this, this.activeClass);\n        CSSClassUtils.add(document.body, this.bodyClass, this);\n        if (this.containerActiveClass) {\n            const $container = findParent(this, this.containerActiveClassTarget);\n            $container && CSSClassUtils.add($container, this.containerActiveClass, this);\n        }\n        this.updateA11y();\n        this.$$fire(this.REFRESH_EVENT); // To notify other components about content change\n    }\n    /**\n     * Actions to execute on hide toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Removes CSS classes and update a11y by default.\n     */\n    onHide(params) {\n        CSSClassUtils.remove(this, this.activeClass);\n        CSSClassUtils.remove(document.body, this.bodyClass, this);\n        if (this.containerActiveClass) {\n            const $container = findParent(this, this.containerActiveClassTarget);\n            $container && CSSClassUtils.remove($container, this.containerActiveClass, this);\n        }\n        this.updateA11y();\n    }\n    /** Active state marker */\n    get open() {\n        return this._open;\n    }\n    set open(value) {\n        this.toggleAttribute('open', this._open = value);\n    }\n    /** Last component that has activated the element. Uses {@link ESLToggleableActionParams.activator}*/\n    get activator() {\n        return activators.get(this);\n    }\n    set activator(el) {\n        el ? activators.set(this, el) : activators.delete(this);\n    }\n    /** Returns the element to apply a11y attributes */\n    get $a11yTarget() {\n        const target = this.getAttribute('a11y-target');\n        if (target === 'none')\n            return null;\n        return target ? this.querySelector(target) : this;\n    }\n    /** Called on show and on hide actions to update a11y state accordingly */\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-hidden', String(!this._open));\n    }\n    /** @returns if the passed event should trigger hide action */\n    isOutsideAction(e) {\n        const target = e.target;\n        // target is inside current toggleable\n        if (this.contains(target))\n            return false;\n        // target is inside last activator\n        if (this.activator && this.activator.contains(target))\n            return false;\n        // Event is not a system command key\n        return !(e instanceof KeyboardEvent && SYSTEM_KEYS.includes(e.key));\n    }\n    _onCloseClick(e) {\n        this.hide({\n            initiator: 'close',\n            activator: e.$delegate,\n            event: e\n        });\n    }\n    _onOutsideAction(e) {\n        if (!this.isOutsideAction(e))\n            return;\n        // Used 0 delay to decrease priority of the request\n        this.hide({ initiator: 'outsideaction', hideDelay: 0, event: e });\n    }\n    _onKeyboardEvent(e) {\n        if (this.closeOnEsc && e.key === ESC) {\n            this.hide({ initiator: 'keyboard', event: e });\n        }\n    }\n    _onMouseEnter(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = {\n            initiator: 'mouseenter',\n            trackHover: true,\n            activator: this.activator,\n            event: e,\n            hideDelay\n        };\n        this.show(Object.assign(baseParams, this.trackHoverParams));\n    }\n    _onMouseLeave(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = {\n            initiator: 'mouseleave',\n            trackHover: true,\n            activator: this.activator,\n            event: e,\n            hideDelay\n        };\n        this.hide(Object.assign(baseParams, this.trackHoverParams));\n    }\n    /** Prepares toggle request events param */\n    buildRequestParams(e) {\n        const detail = e.detail || {};\n        if (!isMatches(this, detail.match))\n            return null;\n        return Object.assign({}, detail, { event: e });\n    }\n    /** Actions to execute on show request */\n    _onShowRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.show(params);\n    }\n    /** Actions to execute on hide request */\n    _onHideRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.hide(params);\n    }\n};\nESLToggleable.is = 'esl-toggleable';\nESLToggleable.observedAttributes = ['open', 'group'];\n__decorate([\n    prop('esl:before:show')\n], ESLToggleable.prototype, \"BEFORE_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:before:hide')\n], ESLToggleable.prototype, \"BEFORE_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show')\n], ESLToggleable.prototype, \"SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:hide')\n], ESLToggleable.prototype, \"HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:after:show')\n], ESLToggleable.prototype, \"AFTER_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:after:hide')\n], ESLToggleable.prototype, \"AFTER_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show:request')\n], ESLToggleable.prototype, \"SHOW_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:hide:request')\n], ESLToggleable.prototype, \"HIDE_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:change:group')\n], ESLToggleable.prototype, \"GROUP_CHANGED_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"bodyClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLToggleable.prototype, \"activeClass\", void 0);\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"containerActiveClass\", void 0);\n__decorate([\n    attr({ defaultValue: '*' })\n], ESLToggleable.prototype, \"containerActiveClassTarget\", void 0);\n__decorate([\n    attr({ name: 'group' })\n], ESLToggleable.prototype, \"groupName\", void 0);\n__decorate([\n    attr({ name: 'close-on' })\n], ESLToggleable.prototype, \"closeTrigger\", void 0);\n__decorate([\n    attr({ parser: parseBoolean, serializer: toBooleanAttribute })\n], ESLToggleable.prototype, \"noAutoId\", void 0);\n__decorate([\n    attr({ parser: parseBoolean, serializer: toBooleanAttribute })\n], ESLToggleable.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    attr({ parser: parseBoolean, serializer: toBooleanAttribute })\n], ESLToggleable.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLToggleable.prototype, \"initialParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"defaultParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"trackHoverParams\", void 0);\n__decorate([\n    listen({ event: 'click', selector: (el) => el.closeTrigger || '' })\n], ESLToggleable.prototype, \"_onCloseClick\", null);\n__decorate([\n    listen({\n        auto: false,\n        event: 'keydown mouseup touchend',\n        target: document.body,\n        capture: true\n    })\n], ESLToggleable.prototype, \"_onOutsideAction\", null);\n__decorate([\n    listen('keydown')\n], ESLToggleable.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseenter' })\n], ESLToggleable.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseleave' })\n], ESLToggleable.prototype, \"_onMouseLeave\", null);\n__decorate([\n    listen((el) => el.SHOW_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onShowRequest\", null);\n__decorate([\n    listen((el) => el.HIDE_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onHideRequest\", null);\nESLToggleable = __decorate([\n    ExportNs('Toggleable')\n], ESLToggleable);\nexport { ESLToggleable };\n","/** Makes a plain copy of obj with properties satisfying the predicate\n * If no predicate provided copies all own properties */\nexport function copy(obj, predicate = () => true) {\n    const result = Object.assign({}, obj || {});\n    Object.keys(result).forEach((key) => {\n        (!predicate(key, result[key])) && delete result[key];\n    });\n    return result;\n}\n/** Makes a flat copy without undefined keys */\nexport function copyDefinedKeys(obj) {\n    return copy(obj || {}, (key, value) => value !== void 0);\n}\n/** Omits copying provided properties from object */\nexport function omit(obj, keys) {\n    return copy(obj, (key) => !keys.includes(key));\n}\n","/** Checks if the element in a RTL direction context */\nexport const isRTL = (el) => getComputedStyle(el || document.body).direction === 'rtl';\n/** Creates the dummy test element with a horizontal scroll presented */\nconst createDummyScroll = () => {\n    const el = document.createElement('div');\n    el.appendChild(document.createTextNode('ESL!'));\n    el.dir = 'rtl';\n    Object.assign(el.style, {\n        position: 'absolute',\n        top: '-1000px',\n        width: '4px',\n        height: '1px',\n        fontSize: '14px',\n        overflow: 'scroll'\n    });\n    return el;\n};\nexport const testRTLScrollType = () => {\n    let scrollType = 'default';\n    const el = createDummyScroll();\n    document.body.appendChild(el);\n    if (el.scrollLeft <= 0) {\n        el.scrollLeft = 2;\n        scrollType = el.scrollLeft < 2 ? 'negative' : 'reverse';\n    }\n    document.body.removeChild(el);\n    return scrollType;\n};\nlet type = null;\nexport const RTLScroll = {\n    /** @returns RTL scroll type (lazy, memoized) */\n    get type() {\n        if (typeof type === 'string')\n            return type;\n        return type = testRTLScrollType();\n    }\n};\nexport const normalizeScrollLeft = (el, value = null, isRtl = isRTL(el)) => {\n    value = (value === null) ? el.scrollLeft : value;\n    switch (isRtl ? RTLScroll.type : '') {\n        case 'negative':\n            return el.scrollWidth - el.clientWidth + value;\n        case 'reverse':\n            return el.scrollWidth - el.clientWidth - value;\n        default:\n            return value;\n    }\n};\n/** @deprecated use separate functions from the module */\nexport class RTLUtils {\n    /** @deprecated use {@link RTLScroll}.type instead */\n    static get scrollType() {\n        return RTLScroll.type;\n    }\n}\n/** @deprecated use {@link isRTL} instead */\nRTLUtils.isRtl = isRTL;\n/** @deprecated use {@link normalizeScrollLeft} instead */\nRTLUtils.normalizeScrollLeft = normalizeScrollLeft;\n","import { Rect } from '../../esl-utils/dom/rect';\n/**\n * Checks that the position along the horizontal axis\n * @param position - name of position\n */\nexport function isMajorAxisHorizontal(position) {\n    return ['left', 'right'].includes(position);\n}\n/**\n * Calculates the position of the popup on the minor axis\n * @param cfg - popup position config\n * @param centerPosition - position of the center of the trigger on the minor axis\n * @param dimensionName - the name of dimension (height or width)\n */\nfunction calcPopupPositionByMinorAxis(cfg, centerPosition, dimensionName) {\n    return centerPosition - cfg.arrow[dimensionName] / 2 - cfg.marginArrow - calcUsableSizeForArrow(cfg, dimensionName) * cfg.offsetArrowRatio;\n}\n/**\n * TODO: optimize switch\n * Calculates Rect for given popup position config.\n * @param cfg - popup position config\n * */\nfunction calcPopupBasicRect(cfg) {\n    let x = calcPopupPositionByMinorAxis(cfg, cfg.inner.cx, 'width');\n    let y = cfg.inner.y - cfg.element.height;\n    switch (cfg.position) {\n        case 'left':\n            x = cfg.inner.x - cfg.element.width;\n            y = calcPopupPositionByMinorAxis(cfg, cfg.inner.cy, 'height');\n            break;\n        case 'right':\n            x = cfg.inner.right;\n            y = calcPopupPositionByMinorAxis(cfg, cfg.inner.cy, 'height');\n            break;\n        case 'bottom':\n            x = calcPopupPositionByMinorAxis(cfg, cfg.inner.cx, 'width');\n            y = cfg.inner.bottom;\n            break;\n    }\n    return new Rect(x, y, cfg.element.width, cfg.element.height);\n}\n/**\n * Gets opposite position.\n * @param position - name of position\n * */\nfunction getOppositePosition(position) {\n    return ({\n        top: 'bottom',\n        left: 'right',\n        right: 'left',\n        bottom: 'top'\n    }[position] || position);\n}\n/**\n * TODO: move the actionsToFit definition outside the function and optimize\n * Updates popup and arrow positions to fit on major axis.\n * @param cfg - popup position config\n * @param rect - popup position rect\n * @param arrow - arrow position value\n * */\nfunction fitOnMajorAxis(cfg, rect, arrow) {\n    if (cfg.behavior !== 'fit' && cfg.behavior !== 'fit-on-major')\n        return cfg.position;\n    let isMirrored = false;\n    const actionsToFit = {\n        'bottom': () => {\n            if (cfg.intersectionRatio.bottom || cfg.outer.bottom < rect.bottom) {\n                rect.y = cfg.inner.y - cfg.element.height;\n                isMirrored = true;\n            }\n        },\n        'left': () => {\n            if (cfg.intersectionRatio.left || rect.x < cfg.outer.x) {\n                rect.x = cfg.inner.right;\n                isMirrored = true;\n            }\n        },\n        'right': () => {\n            if (cfg.intersectionRatio.right || cfg.outer.right < rect.right) {\n                rect.x = cfg.inner.x - cfg.element.width;\n                isMirrored = true;\n            }\n        },\n        'top': () => {\n            if (cfg.intersectionRatio.top || rect.y < cfg.outer.y) {\n                rect.y = cfg.inner.bottom;\n                isMirrored = true;\n            }\n        }\n    };\n    actionsToFit[cfg.position]();\n    return isMirrored ? getOppositePosition(cfg.position) : cfg.position;\n}\n/**\n * Calculates adjust for popup position to fit container bounds\n * @param elCoord - coordinate of the popup\n * @param outerCoord - coordinate of the outer border element\n * @param arrowCoord - coordinate of the arrow\n * @param arrowLimit - the limit value of the arrow coordinate\n * @param startingSide - is it starting side?\n * @returns adjustment value for the coordinates of the arrow and the popup\n */\nfunction adjustAlignmentBySide(elCoord, outerCoord, arrowCoord, arrowLimit, isStartingSide) {\n    let arrowAdjust = 0;\n    if (isStartingSide ? elCoord < outerCoord : elCoord > outerCoord) {\n        arrowAdjust = elCoord - outerCoord;\n        const newCoord = arrowCoord + arrowAdjust;\n        if (isStartingSide ? newCoord < arrowLimit : newCoord > arrowLimit) {\n            arrowAdjust = 0;\n        }\n        /** It was decided that if the relative positions of the trigger and container\n         *  do not allow the popup to be displayed correctly together with the arrow,\n         *  the popup should be displayed as-is without adjusting the position of the minor axis\n         *\n         *  The following code adheres to a different strategy - maximum position adaptation,\n         *  with the popup having minimal overhang outside the container.\n         *  Perhaps in the future, we should allow the user to choose the strategy.\n         *\n         * const func = isStartingSide ? Math.max : Math.min;\n         * arrowAdjust = func(elCoord - outerCoord, arrowLimit - arrowCoord);\n         */\n    }\n    return arrowAdjust;\n}\n/**\n * Updates popup and arrow positions to fit on minor axis.\n * @param cfg - popup position config\n * @param rect - popup position rect\n * @param arrow - arrow position value\n * */\nfunction fitOnMinorAxis(cfg, rect, arrow) {\n    if (cfg.behavior !== 'fit' && cfg.behavior !== 'fit-on-minor')\n        return;\n    const isHorizontal = isMajorAxisHorizontal(cfg.position);\n    const start = isHorizontal ? 'y' : 'x';\n    const end = isHorizontal ? 'bottom' : 'right';\n    const dimension = isHorizontal ? 'height' : 'width';\n    if (cfg.outer[dimension] < cfg.element[dimension] || // cancel fit mode if the popup size is greater than the outer limiter size\n        cfg.trigger[start] < cfg.outer[start] || // or the trigger is outside the outer limiting element\n        cfg.trigger[end] > cfg.outer[end])\n        return;\n    let coordAdjust = 0;\n    // check the starting side of the axis\n    let arrowLimit = cfg.marginArrow;\n    coordAdjust = adjustAlignmentBySide(rect[start], cfg.outer[start], arrow[start], arrowLimit, true);\n    if (coordAdjust) {\n        rect[start] -= coordAdjust;\n        arrow[start] += coordAdjust;\n    }\n    // check the final side of the axis\n    arrowLimit += calcUsableSizeForArrow(cfg, dimension);\n    coordAdjust = adjustAlignmentBySide(rect[end], cfg.outer[end], arrow[start], arrowLimit, false);\n    if (coordAdjust) {\n        rect[start] -= coordAdjust;\n        arrow[start] += coordAdjust;\n    }\n}\n/**\n * Calculates the usable size available for the arrow\n * @param cfg - popup position config\n * @param dimensionName - the name of dimension (height or width)\n */\nfunction calcUsableSizeForArrow(cfg, dimensionName) {\n    return cfg.element[dimensionName] - cfg.arrow[dimensionName] - 2 * cfg.marginArrow;\n}\n/**\n * Calculates the position of the arrow on the minor axis\n * @param cfg - popup position config\n * @param dimensionName - the name of dimension (height or width)\n */\nfunction calcArrowPosition(cfg, dimensionName) {\n    return cfg.marginArrow + calcUsableSizeForArrow(cfg, dimensionName) * cfg.offsetArrowRatio;\n}\n/**\n * Calculates popup and arrow popup positions.\n * @param cfg - popup position config\n * */\nexport function calcPopupPosition(cfg) {\n    const popup = calcPopupBasicRect(cfg);\n    const arrow = {\n        x: calcArrowPosition(cfg, 'width'),\n        y: calcArrowPosition(cfg, 'height'),\n        position: cfg.position\n    };\n    const placedAt = fitOnMajorAxis(cfg, popup, arrow);\n    fitOnMinorAxis(cfg, popup, arrow);\n    return {\n        popup,\n        placedAt,\n        arrow\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleablePlaceholder_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nlet ESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = class ESLToggleablePlaceholder extends ESLBaseElement {\n    /** reates a placeholder for a given element of the toggleable's descendant */\n    static from($el) {\n        const $placeholder = document.createElement(this.is);\n        $placeholder.$origin = $el;\n        return $placeholder;\n    }\n    connectedCallback() {\n        this.copyAttributesFromOrigin();\n        super.connectedCallback();\n    }\n    /** Builds attribute name for copy */\n    buildAttrName(name) {\n        return name === 'id' ? 'original-id' : name;\n    }\n    /** Copies allowed attributes from origin to this element */\n    copyAttributesFromOrigin() {\n        const { $origin } = this;\n        if (!$origin)\n            return;\n        this.constructor.allowedAttrs.forEach((name) => {\n            const value = $origin.getAttribute(name);\n            if (value) {\n                this.setAttribute(this.buildAttrName(name), value);\n            }\n        });\n        // sanitize class list of placeholder from the tag name of origin's element\n        this.classList.remove($origin.constructor.is);\n    }\n};\nESLToggleablePlaceholder.is = 'esl-toggleable-placeholder';\n/** List of attributes allowed to copy from origin to this element */\nESLToggleablePlaceholder.allowedAttrs = ['id', 'class'];\nESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = __decorate([\n    ExportNs('ToggleablePlaceholder')\n], ESLToggleablePlaceholder);\nexport { ESLToggleablePlaceholder };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLToggleablePlaceholder } from '../../esl-toggleable/core';\nlet ESLPopupPlaceholder = class ESLPopupPlaceholder extends ESLToggleablePlaceholder {\n};\nESLPopupPlaceholder.is = 'esl-popup-placeholder';\nESLPopupPlaceholder = __decorate([\n    ExportNs('PopupPlaceholder')\n], ESLPopupPlaceholder);\nexport { ESLPopupPlaceholder };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { range } from '../../esl-utils/misc/array';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { bind, memoize, ready, prop, attr, boolAttr, jsonAttr } from '../../esl-utils/decorators';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { afterNextRender, rafDecorator } from '../../esl-utils/async/raf';\nimport { ESLToggleable } from '../../esl-toggleable/core';\nimport { Rect } from '../../esl-utils/dom/rect';\nimport { isRTL } from '../../esl-utils/dom/rtl';\nimport { getListScrollParents } from '../../esl-utils/dom/scroll';\nimport { getWindowRect } from '../../esl-utils/dom/window';\nimport { parseNumber } from '../../esl-utils/misc/format';\nimport { calcPopupPosition, isMajorAxisHorizontal } from './esl-popup-position';\nimport { ESLPopupPlaceholder } from './esl-popup-placeholder';\nconst INTERSECTION_LIMIT_FOR_ADJACENT_AXIS = 0.7;\nconst DEFAULT_OFFSET_ARROW = 50;\nconst scrollOptions = { passive: true };\nconst parsePercent = (value, nanValue = 0) => {\n    const rawValue = parseNumber(value, nanValue);\n    return Math.max(0, Math.min(rawValue !== undefined ? rawValue : nanValue, 100));\n};\nlet ESLPopup = class ESLPopup extends ESLToggleable {\n    constructor() {\n        super(...arguments);\n        this._deferredUpdatePosition = rafDecorator(() => this._updatePosition());\n        this._intersectionRatio = {};\n        this.closeOnEsc = true;\n        this.closeOnOutsideAction = true;\n    }\n    /** Arrow element */\n    get $arrow() {\n        return this.querySelector(`.${this.arrowClass}`) || this.appendArrow();\n    }\n    /** Container element that define bounds of popups visibility */\n    get $container() {\n        return this.container ? ESLTraversingQuery.first(this.container, this) : this._containerEl;\n    }\n    /** Get the size and position of the container */\n    get containerRect() {\n        const { $container } = this;\n        if (!$container)\n            return getWindowRect();\n        const containerRect = $container.getBoundingClientRect();\n        return new Rect(containerRect.left, containerRect.top + window.pageYOffset, containerRect.width, containerRect.height);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.moveToBody();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        memoize.clear(this, '$arrow');\n    }\n    /** Checks that the position along the horizontal axis */\n    get _isMajorAxisHorizontal() {\n        return isMajorAxisHorizontal(this.position);\n    }\n    /** Checks that the position along the vertical axis */\n    get _isMajorAxisVertical() {\n        return !isMajorAxisHorizontal(this.position);\n    }\n    /** Get offsets arrow ratio */\n    get _offsetArrowRatio() {\n        const ratio = parsePercent(this.offsetArrow, DEFAULT_OFFSET_ARROW) / 100;\n        return isRTL(this) ? 1 - ratio : ratio;\n    }\n    /** Moves popup into document.body */\n    moveToBody() {\n        var _a;\n        const { parentNode, $placeholder } = this;\n        if (!parentNode || parentNode === document.body)\n            return;\n        // to be safe and prevent leaks\n        $placeholder && ((_a = $placeholder.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild($placeholder));\n        // replace this with placeholder element\n        this.$placeholder = ESLPopupPlaceholder.from(this);\n        parentNode.replaceChild(this.$placeholder, this);\n        document.body.appendChild(this);\n    }\n    /** Appends arrow to Popup */\n    appendArrow() {\n        const $arrow = document.createElement('span');\n        $arrow.className = this.arrowClass;\n        this.appendChild($arrow);\n        memoize.clear(this, '$arrow');\n        return $arrow;\n    }\n    /**\n     * Actions to execute on show popup.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Adds CSS classes, update a11y and fire esl:refresh event by default.\n     */\n    onShow(params) {\n        super.onShow(params);\n        if (params.position) {\n            this.position = params.position;\n        }\n        if (params.behavior) {\n            this.behavior = params.behavior;\n        }\n        if (params.disableActivatorObservation) {\n            this.disableActivatorObservation = params.disableActivatorObservation;\n        }\n        if (params.marginArrow) {\n            this.marginArrow = params.marginArrow;\n        }\n        if (params.offsetArrow) {\n            this.offsetArrow = params.offsetArrow;\n        }\n        if (params.container) {\n            this.container = params.container;\n        }\n        this._containerEl = params.containerEl;\n        this._offsetTrigger = params.offsetTrigger || 0;\n        this._offsetContainer = params.offsetContainer || 0;\n        this._intersectionMargin = params.intersectionMargin || '0px';\n        this.style.visibility = 'hidden'; // eliminates the blinking of the popup at the previous position\n        afterNextRender(() => this.afterOnShow()); // running as a separate task solves the problem with incorrect positioning on the first showing\n    }\n    /**\n     * Actions to execute on hide popup.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Removes CSS classes and updates a11y by default.\n     */\n    onHide(params) {\n        this.beforeOnHide();\n        super.onHide(params);\n        this._stopUpdateLoop();\n        this.activator && this._removeActivatorObserver(this.activator);\n        // clear all memoize data\n        memoize.clear(this, '_isMajorAxisHorizontal');\n        memoize.clear(this, '_isMajorAxisVertical');\n        memoize.clear(this, '_offsetArrowRatio');\n        memoize.clear(this, '$container');\n    }\n    /**\n     * Actions to execute after showing of popup.\n     */\n    afterOnShow() {\n        this._updatePosition();\n        this.style.visibility = 'visible';\n        this.activator && this._addActivatorObserver(this.activator);\n        this._startUpdateLoop();\n    }\n    /**\n     * Actions to execute before hiding of popup.\n     */\n    beforeOnHide() { }\n    /**\n     * Checks activator intersection for adjacent axis.\n     * Hides the popup if the intersection ratio exceeds the limit.\n     */\n    _checkIntersectionForAdjacentAxis(isAdjacentAxis, intersectionRatio) {\n        if (isAdjacentAxis && intersectionRatio < INTERSECTION_LIMIT_FOR_ADJACENT_AXIS) {\n            this.hide();\n        }\n    }\n    /** Actions to execute on activator intersection event. */\n    onActivatorIntersection(entries, observer) {\n        const entry = entries[0];\n        this._intersectionRatio = {};\n        if (!entry.isIntersecting) {\n            this.hide();\n            return;\n        }\n        if (entry.intersectionRect.y !== entry.boundingClientRect.y) {\n            this._intersectionRatio.top = entry.intersectionRect.height / entry.boundingClientRect.height;\n            this._checkIntersectionForAdjacentAxis(this._isMajorAxisHorizontal, this._intersectionRatio.top);\n        }\n        if (entry.intersectionRect.bottom !== entry.boundingClientRect.bottom) {\n            this._intersectionRatio.bottom = entry.intersectionRect.height / entry.boundingClientRect.height;\n            this._checkIntersectionForAdjacentAxis(this._isMajorAxisHorizontal, this._intersectionRatio.bottom);\n        }\n        if (entry.intersectionRect.x !== entry.boundingClientRect.x) {\n            this._intersectionRatio.left = entry.intersectionRect.width / entry.boundingClientRect.width;\n            this._checkIntersectionForAdjacentAxis(this._isMajorAxisVertical, this._intersectionRatio.left);\n        }\n        if (entry.intersectionRect.right !== entry.boundingClientRect.right) {\n            this._intersectionRatio.right = entry.intersectionRect.width / entry.boundingClientRect.width;\n            this._checkIntersectionForAdjacentAxis(this._isMajorAxisVertical, this._intersectionRatio.right);\n        }\n    }\n    /** Actions to execute on activator scroll event. */\n    onActivatorScroll(e) {\n        if (this._updateLoopID)\n            return;\n        this._updatePosition();\n    }\n    /** Creates listeners and observers to observe activator after showing popup */\n    _addActivatorObserver(target) {\n        const scrollParents = getListScrollParents(target);\n        this._activatorObserver = {\n            unsubscribers: scrollParents.map(($root) => {\n                $root.addEventListener('scroll', this.onActivatorScroll, scrollOptions);\n                return () => {\n                    $root && $root.removeEventListener('scroll', this.onActivatorScroll, scrollOptions);\n                };\n            })\n        };\n        if (!this.disableActivatorObservation) {\n            const options = {\n                rootMargin: this._intersectionMargin,\n                threshold: range(9, (x) => x / 8)\n            };\n            const observer = new IntersectionObserver(this.onActivatorIntersection, options);\n            observer.observe(target);\n            this._activatorObserver.observer = observer;\n        }\n        window.addEventListener('resize', this._deferredUpdatePosition);\n        window.addEventListener('scroll', this.onActivatorScroll, scrollOptions);\n        document.body.addEventListener('transitionstart', this._startUpdateLoop);\n    }\n    /** Removes activator listeners and observers after hiding popup */\n    _removeActivatorObserver(target) {\n        var _a, _b;\n        window.removeEventListener('resize', this._deferredUpdatePosition);\n        window.removeEventListener('scroll', this.onActivatorScroll, scrollOptions);\n        document.body.removeEventListener('transitionstart', this._startUpdateLoop);\n        if (!this._activatorObserver)\n            return;\n        (_a = this._activatorObserver.observer) === null || _a === void 0 ? void 0 : _a.disconnect();\n        this._activatorObserver.observer = undefined;\n        (_b = this._activatorObserver.unsubscribers) === null || _b === void 0 ? void 0 : _b.forEach((cb) => cb());\n        this._activatorObserver.unsubscribers = [];\n    }\n    /**\n     * Starts loop for update position of popup.\n     * The loop ends when the position and size of the activator have not changed\n     * for the last 2 frames of the animation.\n     */\n    _startUpdateLoop() {\n        if (this._updateLoopID)\n            return;\n        let same = 0;\n        let lastRect = new Rect();\n        const updateLoop = () => {\n            if (!this.activator) {\n                this._stopUpdateLoop();\n                return;\n            }\n            const newRect = Rect.from(this.activator.getBoundingClientRect());\n            if (!Rect.isEqual(lastRect, newRect)) {\n                same = 0;\n                lastRect = newRect;\n            }\n            if (same++ > 2) {\n                this._stopUpdateLoop();\n                return;\n            }\n            this._updatePosition();\n            this._updateLoopID = requestAnimationFrame(updateLoop);\n        };\n        this._updateLoopID = requestAnimationFrame(updateLoop);\n    }\n    /**\n     * Stops loop for update position of popup.\n     * Also cancels the animation frame request.\n     */\n    _stopUpdateLoop() {\n        if (!this._updateLoopID)\n            return;\n        cancelAnimationFrame(this._updateLoopID);\n        this._updateLoopID = 0;\n    }\n    /** Updates position of popup and its arrow */\n    _updatePosition() {\n        if (!this.activator)\n            return;\n        const triggerRect = this.activator.getBoundingClientRect();\n        const popupRect = this.getBoundingClientRect();\n        const arrowRect = this.$arrow ? this.$arrow.getBoundingClientRect() : new Rect();\n        const trigger = new Rect(triggerRect.left, triggerRect.top + window.pageYOffset, triggerRect.width, triggerRect.height);\n        const innerMargin = this._offsetTrigger + arrowRect.width / 2;\n        const { containerRect } = this;\n        const config = {\n            position: this.position,\n            behavior: this.behavior,\n            marginArrow: +this.marginArrow,\n            offsetArrowRatio: this._offsetArrowRatio,\n            intersectionRatio: this._intersectionRatio,\n            arrow: arrowRect,\n            element: popupRect,\n            trigger,\n            inner: Rect.from(trigger).grow(innerMargin),\n            outer: (typeof this._offsetContainer === 'number') ?\n                containerRect.shrink(this._offsetContainer) :\n                containerRect.shrink(...this._offsetContainer)\n        };\n        const { placedAt, popup, arrow } = calcPopupPosition(config);\n        this.setAttribute('placed-at', placedAt);\n        // set popup position\n        this.style.left = `${popup.x}px`;\n        this.style.top = `${popup.y}px`;\n        // set arrow position\n        if (this.$arrow) {\n            this.$arrow.style.left = this._isMajorAxisVertical ? `${arrow.x}px` : '';\n            this.$arrow.style.top = this._isMajorAxisHorizontal ? `${arrow.y}px` : '';\n        }\n    }\n};\nESLPopup.is = 'esl-popup';\n__decorate([\n    attr({ defaultValue: 'esl-popup-arrow' })\n], ESLPopup.prototype, \"arrowClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'top' })\n], ESLPopup.prototype, \"position\", void 0);\n__decorate([\n    attr({ defaultValue: 'fit' })\n], ESLPopup.prototype, \"behavior\", void 0);\n__decorate([\n    boolAttr()\n], ESLPopup.prototype, \"disableActivatorObservation\", void 0);\n__decorate([\n    attr({ defaultValue: '5' })\n], ESLPopup.prototype, \"marginArrow\", void 0);\n__decorate([\n    attr({ defaultValue: `${DEFAULT_OFFSET_ARROW}` })\n], ESLPopup.prototype, \"offsetArrow\", void 0);\n__decorate([\n    attr()\n], ESLPopup.prototype, \"container\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {\n            offsetTrigger: 3,\n            offsetContainer: 15,\n            intersectionMargin: '0px'\n        } })\n], ESLPopup.prototype, \"defaultParams\", void 0);\n__decorate([\n    prop()\n], ESLPopup.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    prop()\n], ESLPopup.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    memoize()\n], ESLPopup.prototype, \"$arrow\", null);\n__decorate([\n    memoize()\n], ESLPopup.prototype, \"$container\", null);\n__decorate([\n    ready\n], ESLPopup.prototype, \"connectedCallback\", null);\n__decorate([\n    memoize()\n], ESLPopup.prototype, \"_isMajorAxisHorizontal\", null);\n__decorate([\n    memoize()\n], ESLPopup.prototype, \"_isMajorAxisVertical\", null);\n__decorate([\n    memoize()\n], ESLPopup.prototype, \"_offsetArrowRatio\", null);\n__decorate([\n    bind\n], ESLPopup.prototype, \"onActivatorIntersection\", null);\n__decorate([\n    bind\n], ESLPopup.prototype, \"onActivatorScroll\", null);\n__decorate([\n    bind\n], ESLPopup.prototype, \"_startUpdateLoop\", null);\n__decorate([\n    bind\n], ESLPopup.prototype, \"_stopUpdateLoop\", null);\nESLPopup = __decorate([\n    ExportNs('Popup')\n], ESLPopup);\nexport { ESLPopup };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { isElement } from '../../esl-utils/dom/api';\nimport { isRelativeNode } from '../../esl-utils/dom/traversing';\nimport { isRTL, RTLScroll, normalizeScrollLeft } from '../../esl-utils/dom/rtl';\nimport { isMouseEvent, isTouchEvent, getTouchPoint, getOffsetPoint } from '../../esl-utils/dom/events';\nimport { bind, ready, attr, boolAttr, listen } from '../../esl-utils/decorators';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\n/**\n * ESLScrollbar is a reusable web component that replaces the browser's default scrollbar with\n * a custom scrollbar implementation.\n *\n * @author Yuliya Adamskaya\n */\nlet ESLScrollbar = class ESLScrollbar extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredDrag = rafDecorator((e) => this._onPointerDrag(e));\n        this._deferredRefresh = rafDecorator(() => this.refresh());\n        this._scrollTimer = 0;\n        this._resizeObserver = new ResizeObserver(this._deferredRefresh);\n        this._mutationObserver = new MutationObserver((rec) => this.updateContentObserve(rec));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n        this.findTarget();\n    }\n    disconnectedCallback() {\n        this.unbindTargetEvents();\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'target')\n            this.findTarget();\n        if (attrName === 'horizontal')\n            this.refresh();\n    }\n    findTarget() {\n        this.$target = this.target ?\n            ESLTraversingQuery.first(this.target, this) :\n            null;\n    }\n    /** Target element to observe and scroll */\n    get $target() {\n        return this._$target || null;\n    }\n    set $target(content) {\n        this.unbindTargetEvents();\n        this._$target = content;\n        this.bindTargetEvents();\n        this._deferredRefresh();\n    }\n    render() {\n        this.innerHTML = '';\n        this.$scrollbarTrack = document.createElement('div');\n        this.$scrollbarTrack.className = this.trackClass;\n        this.$scrollbarThumb = document.createElement('div');\n        this.$scrollbarThumb.className = this.thumbClass;\n        this.$scrollbarTrack.appendChild(this.$scrollbarThumb);\n        this.appendChild(this.$scrollbarTrack);\n    }\n    bindTargetEvents() {\n        if (!this.$target)\n            return;\n        // Container resize/scroll observers/listeners\n        if (document.documentElement === this.$target) {\n            this.$$on({ event: 'scroll resize', target: window }, this._onScrollOrResize);\n        }\n        else {\n            this.$$on({ event: 'scroll', target: this.$target }, this._onScrollOrResize);\n            this._resizeObserver.observe(this.$target);\n        }\n        // Subscribes to the child elements resizes\n        this._mutationObserver.observe(this.$target, { childList: true });\n        Array.from(this.$target.children).forEach((el) => this._resizeObserver.observe(el));\n    }\n    /** Resubscribes resize observer on child elements when container content changes */\n    updateContentObserve(recs = []) {\n        if (!this.$target)\n            return;\n        const contentChanges = recs.filter((rec) => rec.type === 'childList');\n        contentChanges.forEach((rec) => {\n            Array.from(rec.addedNodes).filter(isElement).forEach((el) => this._resizeObserver.observe(el));\n            Array.from(rec.removedNodes).filter(isElement).forEach((el) => this._resizeObserver.unobserve(el));\n        });\n        if (contentChanges.length)\n            this._deferredRefresh();\n    }\n    unbindTargetEvents() {\n        if (!this.$target)\n            return;\n        this.$$off(this._onScrollOrResize);\n        if (document.documentElement !== this.$target) {\n            this._resizeObserver.disconnect();\n            this._mutationObserver.disconnect();\n        }\n    }\n    /** @readonly Scrollable distance size value (px) */\n    get scrollableSize() {\n        if (!this.$target)\n            return 0;\n        return this.horizontal ?\n            this.$target.scrollWidth - this.$target.clientWidth :\n            this.$target.scrollHeight - this.$target.clientHeight;\n    }\n    /** @readonly Track size value (px) */\n    get trackOffset() {\n        return this.horizontal ? this.$scrollbarTrack.offsetWidth : this.$scrollbarTrack.offsetHeight;\n    }\n    /** @readonly Thumb size value (px) */\n    get thumbOffset() {\n        return this.horizontal ? this.$scrollbarThumb.offsetWidth : this.$scrollbarThumb.offsetHeight;\n    }\n    /** @readonly Relative thumb size value (between 0.0 and 1.0) */\n    get thumbSize() {\n        // behave as native scroll\n        if (!this.$target || !this.$target.scrollWidth || !this.$target.scrollHeight)\n            return 1;\n        const areaSize = this.horizontal ? this.$target.clientWidth : this.$target.clientHeight;\n        const scrollSize = this.horizontal ? this.$target.scrollWidth : this.$target.scrollHeight;\n        return Math.min((areaSize + 1) / scrollSize, 1);\n    }\n    /** Relative position value (between 0.0 and 1.0) */\n    get position() {\n        if (!this.$target)\n            return 0;\n        const scrollOffset = this.horizontal ? normalizeScrollLeft(this.$target) : this.$target.scrollTop;\n        return this.scrollableSize ? (scrollOffset / this.scrollableSize) : 0;\n    }\n    set position(position) {\n        this.scrollTargetTo(this.scrollableSize * this.normalizePosition(position));\n        this.update();\n    }\n    /** Normalizes position value (between 0.0 and 1.0) */\n    normalizePosition(position) {\n        const relativePosition = Math.min(1, Math.max(0, position));\n        if (!isRTL(this.$target) || !this.horizontal)\n            return relativePosition;\n        return RTLScroll.type === 'negative' ? (relativePosition - 1) : (1 - relativePosition);\n    }\n    /** Scrolls target element to passed position */\n    scrollTargetTo(pos) {\n        if (!this.$target)\n            return;\n        this.$target.scrollTo({\n            [this.horizontal ? 'left' : 'top']: pos,\n            behavior: this.dragging ? 'auto' : 'smooth'\n        });\n    }\n    /** Updates thumb size and position */\n    update() {\n        this.$$fire('esl:change:scroll', { bubbles: false });\n        if (!this.$scrollbarThumb || !this.$scrollbarTrack)\n            return;\n        const thumbSize = this.trackOffset * this.thumbSize;\n        const thumbPosition = (this.trackOffset - thumbSize) * this.position;\n        const style = {\n            [this.horizontal ? 'left' : 'top']: `${thumbPosition}px`,\n            [this.horizontal ? 'width' : 'height']: `${thumbSize}px`\n        };\n        Object.assign(this.$scrollbarThumb.style, style);\n    }\n    /** Updates auxiliary markers */\n    updateMarkers() {\n        const { position, thumbSize } = this;\n        this.toggleAttribute('at-start', thumbSize < 1 && position <= 0);\n        this.toggleAttribute('at-end', thumbSize < 1 && position >= 1);\n        this.toggleAttribute('inactive', thumbSize >= 1);\n    }\n    /** Refreshes scroll state and position */\n    refresh() {\n        this.update();\n        this.updateMarkers();\n    }\n    /** Returns position from MouseEvent coordinates (not normalized) */\n    toPosition(event) {\n        const { horizontal, thumbOffset, trackOffset } = this;\n        const point = getTouchPoint(event);\n        const offset = getOffsetPoint(this.$scrollbarTrack);\n        const pointPosition = horizontal ? point.x - offset.x : point.y - offset.y;\n        const freeTrackArea = trackOffset - thumbOffset; // size of free track px\n        const clickPositionNoOffset = pointPosition - thumbOffset / 2;\n        return clickPositionNoOffset / freeTrackArea;\n    }\n    // Event listeners\n    /** Handles `mousedown` / `touchstart` event to manage thumb drag start and scroll clicks */\n    _onPointerDown(event) {\n        this._initialPosition = this.position;\n        this._pointerPosition = this.toPosition(event);\n        const point = getTouchPoint(event);\n        this._initialMousePosition = this.horizontal ? point.x : point.y;\n        if (event.target === this.$scrollbarThumb) {\n            this._onThumbPointerDown(event); // Drag start handler\n        }\n        else {\n            this._onPointerDownTick(true); // Continuous scroll and click handler\n        }\n        // Subscribes inverse handlers\n        isMouseEvent(event) && this.$$on({ event: 'mouseup', target: window }, this._onPointerUp);\n        isTouchEvent(event) && this.$$on({ event: 'touchend', target: window }, this._onPointerUp);\n        // Prevents default text selection, etc.\n        if (!isTouchEvent(event))\n            event.preventDefault();\n    }\n    /** Handles a scroll click / continuous scroll*/\n    _onPointerDownTick(first) {\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        const position = this.position;\n        const allowedOffset = (first ? 1 : 1.5) * this.thumbSize;\n        this.position = Math.min(position + allowedOffset, Math.max(position - allowedOffset, this._pointerPosition));\n        if (this.position === this._pointerPosition || this.noContinuousScroll)\n            return;\n        this._scrollTimer = window.setTimeout(this._onPointerDownTick, 400);\n    }\n    /** Handles thumb drag start */\n    _onThumbPointerDown(event) {\n        var _a;\n        this.toggleAttribute('dragging', true);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.setProperty('scroll-behavior', 'auto');\n        // Attaches drag listeners\n        this.$$on(this._onBodyClick);\n        isMouseEvent(event) && this.$$on({ event: 'mousemove', target: window }, this._onPointerMove);\n        isTouchEvent(event) && this.$$on({ event: 'touchmove', target: window }, this._onPointerMove);\n    }\n    /** Sets position on drag */\n    _onPointerDrag(event) {\n        const point = getTouchPoint(event);\n        const mousePosition = this.horizontal ? point.x : point.y;\n        const positionChange = mousePosition - this._initialMousePosition;\n        const scrollableAreaHeight = this.trackOffset - this.thumbOffset;\n        const absChange = scrollableAreaHeight ? (positionChange / scrollableAreaHeight) : 0;\n        this.position = this._initialPosition + absChange;\n        this.updateMarkers();\n    }\n    /** `mousemove` document handler for thumb drag event. Active only if drag action is active */\n    _onPointerMove(event) {\n        if (!this.dragging)\n            return;\n        // Request position update\n        this._deferredDrag(event);\n        // Prevents default text selection, etc.\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    /** `mouseup` short-time document handler for drag end action */\n    _onPointerUp(event) {\n        var _a;\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        this.toggleAttribute('dragging', false);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.removeProperty('scroll-behavior');\n        // Unbinds drag listeners\n        this.$$off(this._onPointerMove);\n        this.$$off(this._onPointerUp);\n    }\n    /** Body `click` short-time handler to prevent clicks event on thumb drag. Handles capture phase */\n    _onBodyClick(event) {\n        event.stopImmediatePropagation();\n    }\n    /**\n     * Handler for refresh event\n     * @param event - instance of 'esl:refresh' event.\n     */\n    _onRefresh(event) {\n        if (!isElement(event.target))\n            return;\n        if (!isRelativeNode(event.target.parentNode, this.$target))\n            return;\n        this._deferredRefresh();\n    }\n    /**\n     * Handler for scroll and resize events\n     * @param event - instance of 'resize' or 'scroll' event\n     */\n    _onScrollOrResize(event) {\n        if (event.type === 'scroll' && this.dragging)\n            return;\n        this._deferredRefresh();\n    }\n};\nESLScrollbar.is = 'esl-scrollbar';\nESLScrollbar.observedAttributes = ['target', 'horizontal'];\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"horizontal\", void 0);\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"noContinuousScroll\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLScrollbar.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-thumb' })\n], ESLScrollbar.prototype, \"thumbClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-track' })\n], ESLScrollbar.prototype, \"trackClass\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"dragging\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"inactive\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atStart\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atEnd\", void 0);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"disconnectedCallback\", null);\n__decorate([\n    listen('mousedown touchstart')\n], ESLScrollbar.prototype, \"_onPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDownTick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onThumbPointerDown\", null);\n__decorate([\n    listen({ auto: false, event: 'click', target: window, once: true, capture: true })\n], ESLScrollbar.prototype, \"_onBodyClick\", null);\n__decorate([\n    listen({\n        event: (el) => el.REFRESH_EVENT,\n        target: window\n    })\n], ESLScrollbar.prototype, \"_onRefresh\", null);\nESLScrollbar = __decorate([\n    ExportNs('Scrollbar')\n], ESLScrollbar);\nexport { ESLScrollbar };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLSelectItem_1;\nimport { ESLBaseElement } from '../../../esl-base-element/core';\nimport { attr, boolAttr } from '../../../esl-utils/decorators';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\n/**\n * ESLSelectItem component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectItem - inner component to render an option\n */\nlet ESLSelectItem = ESLSelectItem_1 = class ESLSelectItem extends ESLBaseElement {\n    connectedCallback() {\n        super.connectedCallback();\n        this.tabIndex = 0;\n        this.setAttribute('role', 'checkbox');\n        this.setAttribute('aria-selected', String(this.selected));\n    }\n    attributeChangedCallback(attrName) {\n        if (attrName === 'selected') {\n            this.setAttribute('aria-selected', String(this.selected));\n        }\n        if (attrName === 'disabled') {\n            this.setAttribute('aria-disabled', String(this.disabled));\n        }\n    }\n    update(option) {\n        if (option)\n            this.original = option;\n        this.value = this.original.value;\n        this.disabled = this.original.disabled;\n        this.selected = this.original.selected;\n        this.textContent = this.original.text;\n    }\n    /** Helper to create an option item */\n    static build(option) {\n        const item = ESLSelectItem_1.create();\n        item.update(option);\n        return item;\n    }\n};\nESLSelectItem.is = 'esl-select-item';\nESLSelectItem.observedAttributes = ['selected', 'disabled'];\n__decorate([\n    attr()\n], ESLSelectItem.prototype, \"value\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectItem.prototype, \"selected\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectItem.prototype, \"disabled\", void 0);\nESLSelectItem = ESLSelectItem_1 = __decorate([\n    ExportNs('SelectItem')\n], ESLSelectItem);\nexport { ESLSelectItem };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { bind, attr, boolAttr, listen } from '../../../esl-utils/decorators';\nimport { ARROW_DOWN, ARROW_UP, ENTER, SPACE } from '../../../esl-utils/dom/keys';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { ESLScrollbar } from '../../../esl-scrollbar/core';\nimport { ESLSelectItem } from './esl-select-item';\nimport { ESLSelectWrapper } from './esl-select-wrapper';\n/**\n * ESLSelectList component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectList is a component to show selectable list of items. Decorates native HTMLSelectElement\n */\nlet ESLSelectList = class ESLSelectList extends ESLSelectWrapper {\n    static register() {\n        ESLSelectItem.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this.$list = document.createElement('div');\n        this.$list.setAttribute('role', 'list');\n        this.$list.classList.add('esl-scrollable-content');\n        this.$list.classList.add('esl-select-list-container');\n        this.$scroll = ESLScrollbar.create();\n        this.$scroll.target = '::prev';\n        this.$selectAll = ESLSelectItem.create();\n        this.$selectAll.classList.add('esl-select-all-item');\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        if (attrName === 'select-all-label') {\n            this.$selectAll.textContent = newVal;\n        }\n        if (attrName === 'disabled') {\n            this._updateDisabled();\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$selectAll);\n        this.appendChild(this.$list);\n        this.appendChild(this.$scroll);\n        this.bindSelect();\n        this._updateDisabled();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.appendChild(this.$selectAll);\n        this.appendChild(this.$list);\n        this.appendChild(this.$scroll);\n    }\n    bindSelect() {\n        const target = this.querySelector('[esl-select-target]');\n        if (!target || !(target instanceof HTMLSelectElement))\n            return;\n        this.$select = target;\n    }\n    _renderItems() {\n        if (!this.$select)\n            return;\n        this.$list.innerHTML = '';\n        this.$items = this.options.map(ESLSelectItem.build);\n        if (this.pinSelected) {\n            this._renderGroup(this.$items.filter((option) => option.selected));\n            this._renderGroup(this.$items.filter((option) => !option.selected));\n        }\n        else {\n            this._renderGroup(this.$items);\n        }\n        this.toggleAttribute('multiple', this.multiple);\n    }\n    _renderGroup(items) {\n        items.forEach((item) => this.$list.appendChild(item));\n        const [last] = items.slice(-1);\n        last && last.classList.add('last-in-group');\n    }\n    _updateSelectAll() {\n        if (!this.multiple) {\n            this.$selectAll.removeAttribute('tabindex');\n            return;\n        }\n        this.$selectAll.tabIndex = 0;\n        this.$selectAll.selected = this.isAllSelected();\n        this.$selectAll.textContent = this.selectAllLabel;\n    }\n    _updateDisabled() {\n        this.setAttribute('aria-disabled', String(this.disabled));\n        if (!this.$select)\n            return;\n        this.$select.disabled = this.disabled;\n    }\n    _onTargetChange(newTarget, oldTarget) {\n        super._onTargetChange(newTarget, oldTarget);\n        this._updateSelectAll();\n        this._renderItems();\n    }\n    _onChange() {\n        this._updateSelectAll();\n        this.$items.forEach((item) => item.update());\n    }\n    _onListChange() {\n        this._renderItems();\n    }\n    _onClick(e) {\n        if (this.disabled)\n            return;\n        const target = e.target;\n        if (!target || !(target instanceof ESLSelectItem))\n            return;\n        if (target.classList.contains('esl-select-all-item')) {\n            this.setAllSelected(!target.selected);\n        }\n        else {\n            this.setSelected(target.value, !target.selected);\n        }\n    }\n    _onKeydown(e) {\n        if ([ENTER, SPACE].includes(e.key)) {\n            this._onClick(e);\n            e.preventDefault();\n        }\n        if ([ARROW_UP, ARROW_DOWN].includes(e.key)) {\n            const index = this.$items.indexOf(document.activeElement);\n            const count = this.$items.length;\n            const increment = e.key === ARROW_UP ? -1 : 1;\n            if (index === -1)\n                return;\n            this.$items[(index + increment + count) % count].focus();\n            e.preventDefault();\n        }\n    }\n};\nESLSelectList.is = 'esl-select-list';\nESLSelectList.observedAttributes = ['select-all-label', 'disabled'];\n__decorate([\n    attr({ defaultValue: 'Select All' })\n], ESLSelectList.prototype, \"selectAllLabel\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectList.prototype, \"disabled\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelectList.prototype, \"pinSelected\", void 0);\n__decorate([\n    bind\n], ESLSelectList.prototype, \"_onTargetChange\", null);\n__decorate([\n    listen({ inherit: true })\n], ESLSelectList.prototype, \"_onChange\", null);\n__decorate([\n    bind\n], ESLSelectList.prototype, \"_onListChange\", null);\n__decorate([\n    listen('click')\n], ESLSelectList.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLSelectList.prototype, \"_onKeydown\", null);\nESLSelectList = __decorate([\n    ExportNs('SelectList')\n], ESLSelectList);\nexport { ESLSelectList };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLPopup } from '../../../esl-popup/core';\nimport { prop, listen, memoize } from '../../../esl-utils/decorators';\nimport { TAB } from '../../../esl-utils/dom/keys';\nimport { ESLSelectList } from '../../esl-select-list/core';\n/**\n * ESLSelectDropdown component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom component to render {@link ESLSelect} dropdown section\n * Uses {@link ESLSelectList} to render the content\n */\nexport class ESLSelectDropdown extends ESLPopup {\n    static register() {\n        ESLSelectList.register();\n        super.register();\n    }\n    /** Inner ESLSelectList component */\n    get $list() {\n        return ESLSelectList.create();\n    }\n    setInitialState() { }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$list);\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.removeChild(this.$list);\n    }\n    onShow(params) {\n        !this.connected && document.body.appendChild(this);\n        this._disposeTimeout && window.clearTimeout(this._disposeTimeout);\n        this.$$cls(this.$owner.dropdownClass, true);\n        this.$list.pinSelected = this.$owner.pinSelected;\n        this.$list.selectAllLabel = this.$owner.selectAllLabel;\n        this.$list.$select = this.$owner.$select;\n        super.onShow(params);\n        const $focusable = this.querySelector('[tabindex]');\n        $focusable === null || $focusable === void 0 ? void 0 : $focusable.focus({ preventScroll: true });\n        this._updatePosition();\n    }\n    onHide(params) {\n        const $select = this.activator;\n        super.onHide(params);\n        this._disposeTimeout = window.setTimeout(() => {\n            if (this.parentNode !== document.body)\n                return;\n            document.body.removeChild(this);\n        }, 1000);\n        $select && setTimeout(() => $select.focus({ preventScroll: true }), 0);\n    }\n    _onKeyboardEvent(e) {\n        super._onKeyboardEvent(e);\n        if (e.key === TAB)\n            this._onTabKey(e);\n    }\n    _onTabKey(e) {\n        const $els = this.querySelectorAll('[tabindex]');\n        const $first = $els[0];\n        const $last = $els[$els.length - 1];\n        if ($first && e.target === $last && !e.shiftKey)\n            $first.focus();\n        if ($last && e.target === $first && e.shiftKey)\n            $last.focus();\n    }\n    _updatePosition() {\n        const $select = this.activator;\n        if ($select)\n            this.style.width = `${$select.getBoundingClientRect().width}px`;\n        super._updatePosition();\n    }\n}\nESLSelectDropdown.is = 'esl-select-dropdown';\n__decorate([\n    prop(true)\n], ESLSelectDropdown.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    prop(true)\n], ESLSelectDropdown.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    prop('bottom')\n], ESLSelectDropdown.prototype, \"position\", void 0);\n__decorate([\n    memoize()\n], ESLSelectDropdown.prototype, \"$list\", null);\n__decorate([\n    listen('keydown')\n], ESLSelectDropdown.prototype, \"_onKeyboardEvent\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { attr, boolAttr, listen } from '../../../esl-utils/decorators';\nimport { CSSClassUtils } from '../../../esl-utils/dom/class';\nimport { ENTER, SPACE } from '../../../esl-utils/dom/keys';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { ESLEventUtils } from '../../../esl-utils/dom/events';\nimport { ESLSelectWrapper } from '../../esl-select-list/core/esl-select-wrapper';\nimport { ESLSelectRenderer } from './esl-select-renderer';\nimport { ESLSelectDropdown } from './esl-select-dropdown';\n/**\n * ESLSelect component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelect is a component on top of native select that brings more customization features.\n * Uses \"select with dropdown\" view. Supports both single and multiple selection.\n */\nlet ESLSelect = class ESLSelect extends ESLSelectWrapper {\n    static register() {\n        ESLSelectDropdown.register();\n        ESLSelectRenderer.register();\n        super.register();\n    }\n    constructor() {\n        super();\n        this.$renderer = document.createElement(ESLSelectRenderer.is);\n        this.$dropdown = document.createElement(ESLSelectDropdown.is);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (attrName === 'disabled')\n            this._updateDisabled();\n        if (attrName === 'dropdown-class') {\n            this.$dropdown.$$cls(oldVal, false);\n            this.$dropdown.$$cls(newVal, true);\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.$select = this.querySelector('[esl-select-target]');\n        if (!this.$select)\n            return;\n        this._prepare();\n        this._updateDisabled();\n        this._updateMarkers();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._dispose();\n    }\n    /** Catches the focus */\n    focus(options) {\n        this.$select.focus(options);\n    }\n    /** Updates select component */\n    update(valueChanged = true) {\n        this._updateMarkers();\n        if (!valueChanged)\n            return;\n        // TODO: silent updates\n        ESLEventUtils.dispatch(this, 'esl:change:value', { detail: { event: null } });\n    }\n    _prepare() {\n        this.$renderer.className = this.$select.className;\n        this.$renderer.emptyText = this.placeholder;\n        this.$renderer.moreLabelFormat = this.moreLabelFormat;\n        this.$dropdown.$owner = this;\n        this.appendChild(this.$renderer);\n    }\n    _dispose() {\n        this.$select.className = this.$renderer.className;\n        this.removeChild(this.$renderer);\n    }\n    _updateMarkers() {\n        const hasValue = this.hasSelected();\n        this.toggleAttribute('has-value', hasValue);\n        CSSClassUtils.toggle(this, this.hasValueClass, hasValue);\n        const focusEl = document.activeElement;\n        const hasFocus = this.open || (focusEl && this.contains(focusEl));\n        CSSClassUtils.toggle(this, this.hasFocusClass, !!hasFocus);\n    }\n    _updateDisabled() {\n        this.setAttribute('aria-disabled', String(this.disabled));\n        if (!this.$select)\n            return;\n        this.$select.disabled = this.disabled;\n        if (this.disabled && this.open)\n            this.$dropdown.hide();\n    }\n    _onChange(event) {\n        this._updateMarkers();\n        ESLEventUtils.dispatch(this, 'esl:change:value', { detail: { event } });\n    }\n    _onFocusOut() {\n        this._updateMarkers();\n    }\n    _onClick() {\n        if (this.disabled)\n            return;\n        this.$dropdown.toggle(!this.$dropdown.open, {\n            activator: this.$renderer,\n            initiator: 'select'\n        });\n    }\n    _onKeydown(e) {\n        if ([ENTER, SPACE].includes(e.key)) {\n            this.click();\n            e.preventDefault();\n        }\n    }\n    _onPopupStateChange(e) {\n        this.open = this.$dropdown.open;\n        this._updateMarkers();\n    }\n};\nESLSelect.is = 'esl-select';\nESLSelect.observedAttributes = ['disabled', 'dropdown-class'];\n__decorate([\n    attr()\n], ESLSelect.prototype, \"placeholder\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"hasValueClass\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"hasFocusClass\", void 0);\n__decorate([\n    attr()\n], ESLSelect.prototype, \"dropdownClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'Select All' })\n], ESLSelect.prototype, \"selectAllLabel\", void 0);\n__decorate([\n    attr({ defaultValue: '+ {rest} more...' })\n], ESLSelect.prototype, \"moreLabelFormat\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"open\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"disabled\", void 0);\n__decorate([\n    boolAttr()\n], ESLSelect.prototype, \"pinSelected\", void 0);\n__decorate([\n    listen({ inherit: true })\n], ESLSelect.prototype, \"_onChange\", null);\n__decorate([\n    listen('focusout')\n], ESLSelect.prototype, \"_onFocusOut\", null);\n__decorate([\n    listen('click')\n], ESLSelect.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLSelect.prototype, \"_onKeydown\", null);\n__decorate([\n    listen({\n        event: 'esl:show esl:hide',\n        target: (el) => el.$dropdown\n    })\n], ESLSelect.prototype, \"_onPopupStateChange\", null);\nESLSelect = __decorate([\n    ExportNs('Select')\n], ESLSelect);\nexport { ESLSelect };\n","import { isObject } from './types';\nexport function deepMerge(...objects) {\n    return objects.reduce((res, obj) => {\n        if (typeof obj === 'undefined')\n            return res;\n        if (typeof res === 'undefined')\n            res = Array.isArray(obj) ? [] : {};\n        if (!isObject(obj) || !isObject(res))\n            return obj;\n        Object.keys(obj).forEach((key) => {\n            res[key] = isObject(obj[key]) ? deepMerge(res[key], obj[key]) : obj[key];\n        });\n        return res;\n    }, undefined);\n}\n","var _a;\nimport { flat, uniq } from '../../misc/array';\nimport { overrideEvent } from './misc';\n/** Key to store listeners on the {@link SyntheticEventTarget} instance*/\nconst LISTENERS = (window.Symbol || String)('_listeners');\n/**\n * Synthetic implementation of EventTarget\n * Replicates behavior of native event\n * Doesn't give explicit access to callback storage\n */\nexport class SyntheticEventTarget {\n    constructor() {\n        this[_a] = {};\n    }\n    getEventListeners(type) {\n        if (typeof type !== 'string')\n            return uniq(flat(Object.values(this[LISTENERS])));\n        return this[LISTENERS][type] || [];\n    }\n    hasEventListener(type = 'change', minCount = 0) {\n        if (typeof type !== 'string')\n            return this.hasEventListener('change', type || 0); // TODO: remove in 5.0.0\n        return this.getEventListeners(type).length > minCount;\n    }\n    addEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.addEventListener(this.constructor.DEFAULT_EVENT, type);\n        validateEventListenerType(callback);\n        const listeners = this[LISTENERS][type];\n        if (listeners === null || listeners === void 0 ? void 0 : listeners.includes(callback))\n            return;\n        if (listeners)\n            listeners.push(callback);\n        else\n            Object.assign(this[LISTENERS], { [type]: [callback] });\n    }\n    removeEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.removeEventListener(this.constructor.DEFAULT_EVENT, type);\n        validateEventListenerType(callback);\n        const listeners = this[LISTENERS][type];\n        if (!listeners)\n            return;\n        this[LISTENERS][type] = listeners.filter((cb) => cb !== callback);\n    }\n    dispatchEvent(e, target) {\n        overrideEvent(e, 'currentTarget', this);\n        if (target)\n            overrideEvent(e, 'target', target); // TODO: remove in 5.0.0\n        if (!e.target)\n            overrideEvent(e, 'target', this);\n        if (!e.srcElement)\n            overrideEvent(e, 'srcElement', e.target); // TODO: remove in 5.0.0\n        this.getEventListeners(e.type).forEach((listener) => {\n            if (typeof listener === 'function')\n                listener.call(this, e);\n            else\n                listener.handleEvent.call(listener, e);\n        });\n        return e.defaultPrevented;\n    }\n    /** @deprecated alias for `addEventListener` */\n    addListener(cb) {\n        this.addEventListener(cb);\n    }\n    /** @deprecated alias for `removeEventListener` */\n    removeListener(cb) {\n        this.removeEventListener(cb);\n    }\n}\n_a = LISTENERS;\n// Event type to use in the shortcutted calls\nSyntheticEventTarget.DEFAULT_EVENT = 'change';\nfunction validateEventListenerType(callback) {\n    if (!callback || typeof callback !== 'function' && typeof callback.handleEvent !== 'function') {\n        throw Error('Callback should be a function or EventListenerObject');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenDPR_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\n/**\n * DPR preprocessor. Used to replace DPR shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenDPR = ESLScreenDPR_1 = class ESLScreenDPR {\n    static toDPI(dpr) {\n        return (96 * dpr).toFixed(1);\n    }\n    static process(match) {\n        if (!ESLScreenDPR_1.VALUE_REGEXP.test(match))\n            return;\n        const dpr = parseFloat(match);\n        if (dpr < 0 || isNaN(dpr))\n            return;\n        if (ESLScreenDPR_1.ignoreBotsDpr && DeviceDetector.isBot && dpr > 1)\n            return 'not all';\n        if (DeviceDetector.isSafari)\n            return `(-webkit-min-device-pixel-ratio: ${dpr})`;\n        return `(min-resolution: ${ESLScreenDPR_1.toDPI(dpr)}dpi)`;\n    }\n};\nESLScreenDPR.VALUE_REGEXP = /(\\d(\\.\\d)?)x/;\n/** Option to exclude dpr greater then 2 for bots */\nESLScreenDPR.ignoreBotsDpr = false;\nESLScreenDPR = ESLScreenDPR_1 = __decorate([\n    ExportNs('ScreenDPR')\n], ESLScreenDPR);\nexport { ESLScreenDPR };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenBreakpoints_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst registry = new Map();\n/**\n * ESL Screen Breakpoints registry\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Screen Breakpoint registry is used to provide custom breakpoints for {@link ESLMediaQuery}\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenBreakpoints = ESLScreenBreakpoints_1 = class ESLScreenBreakpoints {\n    /**\n     * Add or replace breakpoint shortcut that can be used inside ESLMediaQuery\n     * @param name - name of shortcut\n     * @param minWidth - min width for breakpoint\n     * @param maxWidth - max width for breakpoint\n     */\n    static add(name, minWidth, maxWidth) {\n        name = name.toLowerCase();\n        if (ESLScreenBreakpoints_1.BP_NAME_REGEXP.test(name)) {\n            const current = registry.get(name);\n            registry.set(name, new ESLScreenBreakpoint(name, minWidth, maxWidth));\n            return current;\n        }\n        throw new Error('The shortcut should consist only of Latin characters and be at least one character long.');\n    }\n    /** Removes screen breakpoint */\n    static remove(name) {\n        return registry.delete(name.toLowerCase());\n    }\n    /** @returns known breakpoint shortcut instance */\n    static get(name) {\n        return registry.get((name || '').toLowerCase());\n    }\n    /** All available breakpoints names */\n    static get names() {\n        const keys = [];\n        registry.forEach((value, key) => keys.push(key));\n        return keys;\n    }\n    /** @returns breakpoints shortcut replacement */\n    static process(term) {\n        const [, sign, bp] = term.match(ESLScreenBreakpoints_1.BP_REGEXP) || [];\n        const shortcut = ESLScreenBreakpoints_1.get(bp);\n        if (!shortcut)\n            return;\n        if (sign === '+')\n            return shortcut.mediaQueryGE;\n        if (sign === '-')\n            return shortcut.mediaQueryLE;\n        return shortcut.mediaQuery;\n    }\n};\nESLScreenBreakpoints.BP_REGEXP = /^([+-]?)([a-z]+)/i;\nESLScreenBreakpoints.BP_NAME_REGEXP = /^[a-z]+/i;\nESLScreenBreakpoints = ESLScreenBreakpoints_1 = __decorate([\n    ExportNs('ScreenBreakpoints')\n], ESLScreenBreakpoints);\nexport { ESLScreenBreakpoints };\n/** ESL Screen Breakpoint description */\nexport class ESLScreenBreakpoint {\n    constructor(name, min, max) {\n        this.name = name;\n        this.min = min;\n        this.max = max;\n    }\n    get mediaQuery() {\n        return `(min-width: ${this.min}px) and (max-width: ${this.max}px)`;\n    }\n    get mediaQueryGE() {\n        return `(min-width: ${this.min}px)`;\n    }\n    get mediaQueryLE() {\n        return `(max-width: ${this.max}px)`;\n    }\n    toString() {\n        return `[${this.name}]: ${this.min} to ${this.max}`;\n    }\n}\n// Defaults\nESLScreenBreakpoints.add('xs', 1, 767);\nESLScreenBreakpoints.add('sm', 768, 991);\nESLScreenBreakpoints.add('md', 992, 1199);\nESLScreenBreakpoints.add('lg', 1200, 1599);\nESLScreenBreakpoints.add('xl', 1600, 999999);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst shortcuts = new Map();\n/**\n * Static shortcuts preprocessor. Used to store device related shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLEnvShortcuts = class ESLEnvShortcuts {\n    /**\n     * Add mapping\n     * @param shortcut - term to find in query\n     * @param value - media query string or boolean result (that represents `all` or `not all` conditions)\n     */\n    static add(shortcut, value) {\n        if (!['boolean', 'string'].includes(typeof value))\n            value = false;\n        shortcuts.set(shortcut.toLowerCase(), value);\n    }\n    /** Remove mapping for passed shortcut term */\n    static remove(shortcut) {\n        return shortcuts.delete(shortcut.toLowerCase());\n    }\n    /** Replaces shortcut to registered result */\n    static process(match) {\n        if (shortcuts.has(match))\n            return shortcuts.get(match);\n    }\n};\n// For debug purposes\nESLEnvShortcuts._shortcuts = shortcuts;\nESLEnvShortcuts = __decorate([\n    ExportNs('EnvShortcuts')\n], ESLEnvShortcuts);\nexport { ESLEnvShortcuts };\n// Touch check\nESLEnvShortcuts.add('touch', DeviceDetector.isTouchDevice);\n// Basic device type shortcuts\nESLEnvShortcuts.add('bot', DeviceDetector.isBot);\nESLEnvShortcuts.add('mobile', DeviceDetector.isMobile);\nESLEnvShortcuts.add('desktop', !DeviceDetector.isMobile);\nESLEnvShortcuts.add('android', DeviceDetector.isAndroid);\nESLEnvShortcuts.add('ios', DeviceDetector.isMobileIOS);\n// Basic browser shortcuts\nESLEnvShortcuts.add('ie', DeviceDetector.isIE);\nESLEnvShortcuts.add('edge', DeviceDetector.isEdgeHTML);\nESLEnvShortcuts.add('gecko', DeviceDetector.isGecko);\nESLEnvShortcuts.add('webkit', DeviceDetector.isWebkit);\nESLEnvShortcuts.add('blink', DeviceDetector.isBlink);\nESLEnvShortcuts.add('safari', DeviceDetector.isSafari);\nESLEnvShortcuts.add('safari-ios', DeviceDetector.isMobileSafari);\n","/**\n * Const media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Ignores listeners always return the same result.\n * Have only two instances: {@link ALL} and {@link NOT_ALL}\n */\nclass MediaQueryConstCondition {\n    constructor(_matches) {\n        this._matches = _matches;\n    }\n    get matches() {\n        return this._matches;\n    }\n    addListener() { }\n    addEventListener() { }\n    removeListener() { }\n    removeEventListener() { }\n    dispatchEvent() {\n        return false;\n    }\n    optimize() {\n        return this;\n    }\n    toString() {\n        return this._matches ? 'all' : 'not all';\n    }\n    /** Compares const media condition with the passed query instance or string */\n    eq(val) {\n        return String(val).trim() === this.toString();\n    }\n}\nexport const ALL = new MediaQueryConstCondition(true);\nexport const NOT_ALL = new MediaQueryConstCondition(false);\n","/** Custom event dispatched by {@link ESLMediaQuery} instances */\nexport class ESLMediaChangeEvent extends Event {\n    constructor(matches) {\n        super('change');\n        this.matches = matches;\n    }\n    /** Returns serialized value of the current {@link ESLMediaQuery} */\n    get media() {\n        return String(this.target);\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ALL, NOT_ALL } from './media-query-const';\nimport { ESLMediaChangeEvent } from './media-query-base';\n/**\n * Simple media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Wraps matchMedia instance\n */\nexport class MediaQueryCondition extends SyntheticEventTarget {\n    constructor(query, inverted = false) {\n        super();\n        this._inverted = inverted;\n        this._mq = matchMedia(query.trim() || 'all');\n        this._onChange = this._onChange.bind(this);\n    }\n    get matches() {\n        return this._inverted ? !this._mq.matches : this._mq.matches;\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.getEventListeners('change').length > 1)\n            return;\n        if (typeof this._mq.addEventListener === 'function') {\n            this._mq.addEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.addListener(this._onChange);\n        }\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        if (typeof this._mq.removeEventListener === 'function') {\n            this._mq.removeEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.removeListener(this._onChange);\n        }\n    }\n    /** Optimize query. Can simplify query to {@link MediaQueryConstCondition} */\n    optimize() {\n        if (ALL.eq(this))\n            return this._inverted ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(this))\n            return this._inverted ? ALL : NOT_ALL;\n        return this;\n    }\n    toString() {\n        const query = this._mq.media;\n        const inverted = this._inverted;\n        const complex = inverted && /\\)[\\s\\w]+\\(/.test(query);\n        return (inverted ? 'not ' : '') + (complex ? `(${query})` : query);\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        this.dispatchEvent(new ESLMediaChangeEvent(this._mq.matches));\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ESLMediaChangeEvent } from './media-query-base';\nimport { ALL, NOT_ALL } from './media-query-const';\n/**\n * Abstract multiple media conditions container\n * @author Alexey Stsefanovich (ala'n)\n *\n * Observe all child items. Dispatch changes when the whole condition result is changed\n */\nclass MediaQueryContainer extends SyntheticEventTarget {\n    constructor(items = []) {\n        super();\n        this.items = items;\n        this._matches = this.matches;\n        this._onChange = this._onChange.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.getEventListeners('change').length > 1)\n            return;\n        this.items.forEach((item) => item.addEventListener('change', this._onChange));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        this.items.forEach((item) => item.removeEventListener('change', this._onChange));\n    }\n    optimize() {\n        return this;\n    }\n    get matches() {\n        return false;\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        const { matches } = this;\n        if (this._matches === matches)\n            return;\n        this.dispatchEvent(new ESLMediaChangeEvent(this._matches = matches));\n    }\n}\n/** Conjunction (AND) group of media conditions */\nexport class MediaQueryConjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.every((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => NOT_ALL.eq(item)))\n            return NOT_ALL;\n        const items = optimizedItems.filter((item) => !ALL.eq(item));\n        if (items.length === 0)\n            return ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryConjunction(items);\n    }\n    toString() {\n        return this.items.join(' and ');\n    }\n}\n/** Disjunction (OR) group of media conditions */\nexport class MediaQueryDisjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.some((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => ALL.eq(item)))\n            return ALL;\n        const items = optimizedItems.filter((item) => !NOT_ALL.eq(item));\n        if (items.length === 0)\n            return NOT_ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryDisjunction(items);\n    }\n    toString(pretty = false) {\n        return this.items.join(pretty ? ' or ' : ', ');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaQuery_1;\nimport { memoize } from '../../esl-utils/decorators';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLScreenDPR } from './common/screen-dpr';\nimport { ESLScreenBreakpoints } from './common/screen-breakpoint';\nimport { ESLEnvShortcuts } from './common/env-shortcuts';\nimport { ALL, NOT_ALL } from './conditions/media-query-const';\nimport { MediaQueryCondition } from './conditions/media-query-condition';\nimport { MediaQueryConjunction, MediaQueryDisjunction } from './conditions/media-query-containers';\n/**\n * ESL Media Query\n * @implements EventTarget\n * Provides special media condition syntax - ESLMediaQuery\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n *\n * Utility to support extended MediaQuery features\n * Supports\n * - CSS MediaQuery matching check\n * - DPR display queries (`@x1|@x2|@x3`)\n * - Registered screen default sizes (breakpoints) shortcuts (`@[-|+](XS|SM|MD|LG|XL)`)\n * - Device and browser shortcuts (`@MOBILE|@DESKTOP|@IE`)\n * - Custom static shortcuts and custom query preprocessors\n * - `not` logic operation (can have multiple not operators before any term of the query)\n * - `or` or `,` logical operator (have a lowest priority)\n * - Query matching change listeners\n * - Implements {@link EventTarget}, compatible with {@link ESLEventListener}\n *\n * Building query process:\n *\n * [Building query logical tree] - [preprocess nodes queries] - [building native MediaQueryList nodes] - [query tree optimization]\n */\nlet ESLMediaQuery = ESLMediaQuery_1 = class ESLMediaQuery {\n    /** Adds {@link IMediaQueryPreprocessor} instance for query preprocessing step */\n    static use(preprocessor) {\n        this._preprocessors.unshift(preprocessor);\n        return this;\n    }\n    /** Cached method to create {@link ESLMediaQuery} condition instance from query string */\n    static for(query) {\n        return ESLMediaQuery_1.from(query);\n    }\n    /** Creates {@link ESLMediaQuery} condition instance from query string */\n    static from(query) {\n        const conjunctions = query.split(/\\sor\\s|,/).map((term) => {\n            const conditions = term.split(/\\sand\\s/).map(ESLMediaQuery_1.parseSimpleQuery);\n            return new MediaQueryConjunction(conditions);\n        });\n        return new MediaQueryDisjunction(conjunctions).optimize();\n    }\n    /** Preprocess simple query term by applying replacers and shortcuts rules */\n    static preprocess(term) {\n        if (!this.SHORTCUT_PATTERN.test(term))\n            return term;\n        const shortcut = term.trim().substring(1).toLowerCase();\n        for (const replacer of this._preprocessors) {\n            const result = replacer.process(shortcut);\n            if (typeof result === 'string')\n                return result;\n            if (typeof result === 'boolean')\n                return result ? 'all' : 'not all';\n        }\n        return term;\n    }\n    /** Creates simple {@link ESLMediaQuery} condition */\n    static parseSimpleQuery(term) {\n        const query = term.replace(/^\\s*not\\s+/, '');\n        const queryInverted = query !== term;\n        const processedQuery = ESLMediaQuery_1.preprocess(query);\n        const sanitizedQuery = processedQuery.replace(/^\\s*not\\s+/, '');\n        const resultInverted = processedQuery !== sanitizedQuery;\n        const invert = queryInverted !== resultInverted;\n        if (ALL.eq(sanitizedQuery))\n            return invert ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(sanitizedQuery))\n            return invert ? ALL : NOT_ALL;\n        return new MediaQueryCondition(sanitizedQuery, invert);\n    }\n};\n/** Always true condition */\nESLMediaQuery.ALL = ALL;\n/** Always false condition */\nESLMediaQuery.NOT_ALL = NOT_ALL;\nESLMediaQuery.SHORTCUT_PATTERN = /@([a-z0-9.+-]+)/i;\nESLMediaQuery._preprocessors = [];\n__decorate([\n    memoize()\n], ESLMediaQuery, \"for\", null);\nESLMediaQuery = ESLMediaQuery_1 = __decorate([\n    ExportNs('MediaQuery')\n], ESLMediaQuery);\nexport { ESLMediaQuery };\n// Register otb preprocessors\nESLMediaQuery.use(ESLScreenDPR);\nESLMediaQuery.use(ESLScreenBreakpoints);\nESLMediaQuery.use(ESLEnvShortcuts);\n","import { ESLMediaQuery } from './esl-media-query';\n/**\n * ESL Media Rule\n * @author Yuliya Adamskaya\n *\n * Helper class to wrap {@link ESLMediaQuery} with the payload value\n * @see ESLMediaQuery\n * @see ESLMediaRuleList\n */\nexport class ESLMediaRule {\n    constructor(payload, query = '') {\n        this.query = ESLMediaQuery.for(query);\n        this.payload = payload;\n    }\n    /** @returns if the inner {@link ESLMediaQuery} is matching current device configuration */\n    get matches() {\n        return this.query.matches;\n    }\n    addEventListener(type, callback = type) {\n        this.query.addEventListener(callback);\n    }\n    removeEventListener(type, callback = type) {\n        this.query.removeEventListener(callback);\n    }\n    toString() {\n        const val = typeof this.payload === 'object' ?\n            JSON.stringify(this.payload) :\n            String(this.payload);\n        return `${this.query} => ${val}`;\n    }\n    /**\n     * Creates the {@link ESLMediaRule} instance from payload string, query and valueParser.\n     * If the payload parse result is undefined then rule will be undefined.\n     */\n    static create(payload, query, parser) {\n        const payloadValue = parser(payload.trim());\n        if (typeof payloadValue === 'undefined')\n            return undefined;\n        return new ESLMediaRule(payloadValue, query.trim());\n    }\n    /** Parses the rule string to the {@link ESLMediaRule} instance */\n    static parse(lex, parser) {\n        const parts = lex.split('=>');\n        const query = parts.length === 2 ? parts[0] : '';\n        const payload = parts.length === 2 ? parts[1] : parts[0];\n        return ESLMediaRule.create(payload, query, parser);\n    }\n    /** Shortcut to create always active {@link ESLMediaRule} with passed value */\n    static all(payload) {\n        return new ESLMediaRule(payload, 'all');\n    }\n    /** Shortcut to create always inactive {@link ESLMediaRule} */\n    static empty() {\n        return new ESLMediaRule(undefined, 'all');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaRuleList_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { evaluate } from '../../esl-utils/misc/format';\nimport { deepMerge, isEqual } from '../../esl-utils/misc/object';\nimport { SyntheticEventTarget } from '../../esl-utils/dom/events';\nimport { ESLMediaRule } from './esl-media-rule';\n/** Custom event dispatched by {@link ESLMediaRuleList} instances */\nexport class ESLMediaRuleListEvent extends Event {\n    constructor(current, previous) {\n        super('change');\n        Object.assign(this, { current, previous });\n    }\n}\n/**\n * ESLMediaRuleList - {@link ESLMediaRule} observable collection\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Represents observable object that wraps environment to value mapping\n */\nlet ESLMediaRuleList = ESLMediaRuleList_1 = class ESLMediaRuleList extends SyntheticEventTarget {\n    static parse(query, ...common) {\n        const parser = typeof common[common.length - 1] === 'function' ? common.pop() : String;\n        const value = common.pop();\n        return typeof value === 'string' ?\n            ESLMediaRuleList_1.parseTuple(query, value, parser) :\n            ESLMediaRuleList_1.parseQuery(query, parser);\n    }\n    static parseQuery(query, parser = String) {\n        const rules = query.split('|')\n            .map((lex) => ESLMediaRule.parse(lex, parser))\n            .filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(rules);\n    }\n    static parseTuple(mask, values, parser = String) {\n        const queries = mask.split('|');\n        const valueList = values.split('|');\n        while (valueList.length < queries.length && valueList.length !== 0)\n            valueList.push(valueList[valueList.length - 1]);\n        if (valueList.length !== queries.length)\n            throw Error('Value doesn\\'t correspond to mask');\n        const rules = queries.map((query, i) => ESLMediaRule.create(valueList[i], query, parser));\n        const validRules = rules.filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(validRules);\n    }\n    constructor(rules) {\n        super();\n        this._rules = rules;\n        this._onMatchChanged = this._onMatchChanged.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.getEventListeners('change').length > 1)\n            return;\n        this._value = this.computedValue;\n        this.rules.forEach((rule) => rule.addEventListener(this._onMatchChanged));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        delete this._value;\n        this.rules.forEach((rule) => rule.removeEventListener(this._onMatchChanged));\n    }\n    /** Array of {@link ESLMediaRule}s that forms the current {@link ESLMediaRuleList} */\n    get rules() {\n        return this._rules;\n    }\n    /** All active {@link ESLMediaRule}s */\n    get active() {\n        return this.rules.filter((rule) => rule.matches);\n    }\n    /** Value of the last of active rules */\n    get activeValue() {\n        var _a;\n        return (_a = this.active.pop()) === null || _a === void 0 ? void 0 : _a.payload;\n    }\n    /** All active rule values */\n    get activeValues() {\n        return this.active.map((rule) => rule.payload);\n    }\n    /**\n     * Current value of {@link ESLMediaRuleList} object\n     * Uses cache if current object is under observation\n     */\n    get value() {\n        if (!this.hasEventListener())\n            return this.computedValue;\n        return Object.hasOwnProperty.call(this, '_value') ? this._value : this.computedValue;\n    }\n    /** Always computed value of the current {@link ESLMediaRuleList} object */\n    get computedValue() {\n        return deepMerge(undefined, ...this.activeValues);\n    }\n    /** Handles inner rules state change */\n    _onMatchChanged() {\n        const curValue = this.value;\n        const newValue = this.computedValue;\n        if (isEqual(curValue, newValue))\n            return;\n        this._value = newValue;\n        this.dispatchEvent(new ESLMediaRuleListEvent(newValue, curValue));\n    }\n    /** @returns serialized {@link ESLMediaRuleList} object representation*/\n    toString() {\n        return this.rules.join('|');\n    }\n};\n/** String value parser (default) */\nESLMediaRuleList.STRING_PARSER = String;\n/** Object value parser. Uses {@link evaluate} to parse value */\nESLMediaRuleList.OBJECT_PARSER = (val) => evaluate(val);\nESLMediaRuleList = ESLMediaRuleList_1 = __decorate([\n    ExportNs('MediaRuleList')\n], ESLMediaRuleList);\nexport { ESLMediaRuleList };\n","import { DeviceDetector } from '../../esl-utils/environment/device-detector';\nlet iObserver;\n/** ESL Image lazy loading IntersectionObserver instance */\nexport function getIObserver() {\n    if (!iObserver) {\n        iObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(handleViewport);\n        }, {\n            threshold: [0.01],\n            rootMargin: DeviceDetector.isMobile ? '250px' : '500px' // rootMargin value for IntersectionObserver\n        });\n    }\n    return iObserver;\n}\nfunction handleViewport(entry) {\n    const image = entry.target;\n    // Check that entry is going to appear in the viewport area\n    if (entry.isIntersecting || entry.intersectionRatio > 0) {\n        image.triggerLoad();\n    }\n}\n","/** checks if the attribute is dangerous */\nconst isDangerousAttribute = (name, value) => {\n    const val = value.replace(/\\s+/g, '').toLowerCase();\n    if (['src', 'data', 'href', 'xlink:href'].includes(name)\n        && (val.includes('javascript:') || val.includes('data:text/html')))\n        return true;\n    return name.indexOf('on') === 0;\n};\n/** loops through each attribute, if it's dangerous, remove it */\nconst removeDangerousAttributes = (el) => {\n    Array.from(el.attributes).forEach(({ name, value }) => {\n        if (isDangerousAttribute(name, value)) {\n            el.removeAttribute(name);\n        }\n    });\n};\n/** removes malicious attributes from element and its children */\nconst sanitizeElAttributes = (body) => {\n    Array.from(body.children).forEach((el) => {\n        removeDangerousAttributes(el);\n        sanitizeElAttributes(el);\n    });\n};\n/** removes script elements inside element */\nconst removeScripts = (body) => {\n    const scripts = body.querySelectorAll('script');\n    Array.from(scripts).forEach((script) => script.remove());\n};\nconst filterElements = (body, allowedTopLevelTags) => {\n    if (!allowedTopLevelTags.length)\n        return;\n    Array.from(body.childNodes).forEach((el) => {\n        if (!allowedTopLevelTags.includes(el.tagName))\n            body.removeChild(el);\n    });\n};\n/**\n * Sanitizes html string from malicious attributes, values, and scripts\n * Can also filter elements at the top nesting level by tag names.\n * @param html - html string to sanitize\n * @param allowedTopLevelTags - array of allowed tag names\n */\nexport function sanitize(html, allowedTopLevelTags = []) {\n    // converts the string to an HTML document\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const body = doc.body || document.createElement('body');\n    // sanitizes html\n    removeScripts(body);\n    sanitizeElAttributes(body);\n    // filter allowed tags\n    filterElements(body, allowedTopLevelTags);\n    return body.innerHTML;\n}\n","import { sanitize } from '../../esl-utils/dom/sanitize';\nexport const EMPTY_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\nexport const isEmptyImage = (src) => src === EMPTY_IMAGE;\nexport const STRATEGIES = {\n    'cover': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n        },\n        clear(img) {\n            img.style.backgroundImage = '';\n        }\n    },\n    'save-ratio': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n            if (shadowImg.width === 0)\n                return;\n            img.style.paddingTop = isEmpty ? '' : `${(shadowImg.height * 100 / shadowImg.width)}%`;\n        },\n        clear(img) {\n            img.style.paddingTop = '';\n            img.style.backgroundImage = '';\n        }\n    },\n    'fit': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.removeAttribute('width');\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'origin': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.width = shadowImg.width / window.devicePixelRatio;\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'inner-svg': {\n        apply(img, shadowImg) {\n            const request = new XMLHttpRequest();\n            request.open('GET', shadowImg.src, true);\n            request.onreadystatechange = () => {\n                if (request.readyState !== 4 || request.status !== 200)\n                    return;\n                img.innerHTML = sanitize(request.responseText, ['svg']);\n            };\n            request.send();\n        },\n        clear(img) {\n            img.innerHTML = '';\n        }\n    }\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLImage_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { bind, prop, attr, boolAttr } from '../../esl-utils/decorators';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { ESLMediaRuleList } from '../../esl-media-query/core';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core/esl-traversing-query';\nimport { getIObserver } from './esl-image-iobserver';\nimport { EMPTY_IMAGE, STRATEGIES, isEmptyImage } from './esl-image-strategies';\nconst isLoadState = (state) => ['error', 'loaded', 'ready'].includes(state);\n/**\n * ESLImage - custom element, that provides flexible ways to include images on web pages.\n * Was originally developed as an alternative to `<picture>` element, but with more features inside.\n *\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\nlet ESLImage = ESLImage_1 = class ESLImage extends ESLBaseElement {\n    connectedCallback() {\n        super.connectedCallback();\n        this.alt =\n            this.alt || this.getAttribute('aria-label') || this.getAttribute('data-alt') || '';\n        this.updateA11y();\n        this.srcRules = ESLMediaRuleList.parse(this.src);\n        if (this.lazyObservable) {\n            this.removeAttribute('lazy-triggered');\n            getIObserver().observe(this);\n            this._detachLazyTrigger = function () {\n                getIObserver().unobserve(this);\n                this._detachLazyTrigger = null;\n            };\n        }\n        this.refresh();\n    }\n    disconnectedCallback() {\n        this.clearImage();\n        super.disconnectedCallback();\n        this._detachLazyTrigger && this._detachLazyTrigger();\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        switch (attrName) {\n            case 'aria-label':\n                this.alt = newVal || '';\n                break;\n            case 'alt':\n            case 'role':\n                this.updateA11y();\n                break;\n            case 'data-src':\n                this.srcRules = ESLMediaRuleList.parse(newVal);\n                this.refresh();\n                break;\n            case 'data-src-base':\n                this.refresh();\n                break;\n            case 'mode':\n                this.changeMode(oldVal, newVal);\n                break;\n            case 'lazy-triggered':\n                this.lazyTriggered && this.update();\n                break;\n        }\n    }\n    get srcRules() {\n        if (!this._srcRules) {\n            this.srcRules = ESLMediaRuleList.parse(this.src);\n        }\n        return this._srcRules;\n    }\n    set srcRules(rules) {\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n        this._srcRules = rules;\n        this._srcRules.addEventListener(this._onMediaMatchChange);\n    }\n    get currentSrc() {\n        return this._currentSrc;\n    }\n    get empty() {\n        return !this._currentSrc || isEmptyImage(this._currentSrc);\n    }\n    get canUpdate() {\n        return this.lazyTriggered || this.lazy === 'none';\n    }\n    get lazyObservable() {\n        return this.lazy !== 'none' && this.lazy !== 'manual';\n    }\n    get originalWidth() {\n        return this._shadowImageElement ? this._shadowImageElement.width : 0;\n    }\n    get originalHeight() {\n        return this._shadowImageElement ? this._shadowImageElement.height : 0;\n    }\n    triggerLoad() {\n        this.setAttribute('lazy-triggered', '');\n    }\n    changeMode(oldVal, newVal) {\n        oldVal = oldVal || 'save-ratio';\n        newVal = newVal || 'save-ratio';\n        if (oldVal === newVal)\n            return;\n        if (!STRATEGIES[newVal]) {\n            this.mode = oldVal;\n            throw new Error('ESL Image: Unsupported mode: ' + newVal);\n        }\n        this.clearImage();\n        if (this.loaded)\n            this.syncImage();\n    }\n    update(force = false) {\n        if (!this.canUpdate)\n            return;\n        const src = this.getPath(this.srcRules.activeValue);\n        if (this._currentSrc !== src || !this.ready || force) {\n            this._currentSrc = src;\n            this._shadowImg.src = src;\n            if (this.refreshOnUpdate || !this.ready) {\n                this.syncImage();\n            }\n            if (this._shadowImg.complete) {\n                this._shadowImgError ? this._onError() : this._onLoad();\n            }\n        }\n        this._detachLazyTrigger && this._detachLazyTrigger();\n    }\n    updateA11y() {\n        const role = this.getAttribute('role') || 'img';\n        this.setAttribute('role', role);\n        this.innerImage && (this.innerImage.alt = this.alt);\n        if (role === 'img')\n            this.setAttribute('aria-label', this.alt);\n    }\n    getPath(src) {\n        if (!src || src === '0' || src === 'none') {\n            return ESLImage_1.EMPTY_IMAGE;\n        }\n        return this.srcBase + src;\n    }\n    refresh() {\n        this.removeAttribute('loaded');\n        this.removeAttribute('ready');\n        this.updateContainerClasses();\n        this.clearImage();\n        this.update(true);\n    }\n    syncImage() {\n        const strategy = STRATEGIES[this.mode];\n        this._strategy = strategy;\n        strategy && strategy.apply(this, this._shadowImg);\n    }\n    clearImage() {\n        this._strategy && this._strategy.clear(this);\n        this._strategy = null;\n    }\n    get innerImage() {\n        return this._innerImg;\n    }\n    attachInnerImage() {\n        if (!this._innerImg) {\n            this._innerImg = this.querySelector(`img.${this.innerImageClass}`) ||\n                this._shadowImg.cloneNode();\n            this._innerImg.className = this.innerImageClass;\n        }\n        if (!this._innerImg.parentNode) {\n            this.appendChild(this._innerImg);\n        }\n        this._innerImg.alt = this.alt;\n        return this._innerImg;\n    }\n    removeInnerImage() {\n        if (!this.innerImage)\n            return;\n        this.removeChild(this.innerImage);\n        setTimeout(() => {\n            if (this._innerImg && !this._innerImg.parentNode) {\n                this._innerImg = null;\n            }\n        });\n    }\n    get _shadowImg() {\n        if (!this._shadowImageElement) {\n            this._shadowImageElement = new Image();\n            this._shadowImageElement.onload = this._onLoad;\n            this._shadowImageElement.onerror = this._onError;\n        }\n        return this._shadowImageElement;\n    }\n    get _shadowImgError() {\n        if (!this._shadowImg.complete)\n            return false;\n        if (this._shadowImg.src.slice(-4) === '.svg')\n            return false;\n        return this._shadowImg.naturalHeight <= 0;\n    }\n    _onLoad() {\n        this.syncImage();\n        this._onReadyState(true);\n        this.updateContainerClasses();\n    }\n    _onError() {\n        this._onReadyState(false);\n        this.updateContainerClasses();\n    }\n    _onMediaMatchChange() {\n        this.update();\n    }\n    _onReadyState(successful) {\n        if (this.ready)\n            return;\n        this.toggleAttribute('loaded', successful);\n        this.toggleAttribute('error', !successful);\n        this.toggleAttribute('ready', true);\n        this.$$fire(successful ? this.LOAD_EVENT : this.ERROR_EVENT, { bubbles: false });\n        this.$$fire(this.READY_EVENT, { bubbles: false });\n    }\n    updateContainerClasses() {\n        if (this.containerClass === null)\n            return;\n        const cls = this.containerClass || this.constructor.DEFAULT_CONTAINER_CLS;\n        const state = isLoadState(this.containerClassState) && this[this.containerClassState];\n        const targetEl = ESLTraversingQuery.first(this.containerClassTarget, this);\n        targetEl && CSSClassUtils.toggle(targetEl, cls, state);\n    }\n};\nESLImage.is = 'esl-image';\nESLImage.observedAttributes = ['alt', 'role', 'mode', 'aria-label', 'data-src', 'data-src-base', 'lazy-triggered'];\n/** Default container class value */\nESLImage.DEFAULT_CONTAINER_CLS = 'img-container-loaded';\nESLImage.STRATEGIES = STRATEGIES;\nESLImage.EMPTY_IMAGE = EMPTY_IMAGE;\n__decorate([\n    prop('ready')\n], ESLImage.prototype, \"READY_EVENT\", void 0);\n__decorate([\n    prop('load')\n], ESLImage.prototype, \"LOAD_EVENT\", void 0);\n__decorate([\n    prop('error')\n], ESLImage.prototype, \"ERROR_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLImage.prototype, \"alt\", void 0);\n__decorate([\n    attr({ defaultValue: 'save-ratio' })\n], ESLImage.prototype, \"mode\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"src\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"srcBase\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLImage.prototype, \"lazy\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"lazyTriggered\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"refreshOnUpdate\", void 0);\n__decorate([\n    attr({ defaultValue: 'inner-image' })\n], ESLImage.prototype, \"innerImageClass\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLImage.prototype, \"containerClass\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLImage.prototype, \"containerClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'ready' })\n], ESLImage.prototype, \"containerClassState\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"ready\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"loaded\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"error\", void 0);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onLoad\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onError\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onMediaMatchChange\", null);\nESLImage = ESLImage_1 = __decorate([\n    ExportNs('Image')\n], ESLImage);\nexport { ESLImage };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { isElement } from '../../esl-utils/dom/api';\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ENTER, SPACE, ESC } from '../../esl-utils/dom/keys';\nimport { attr, boolAttr, prop, listen, ready } from '../../esl-utils/decorators';\nimport { parseBoolean, parseNumber, toBooleanAttribute } from '../../esl-utils/misc/format';\nimport { ESLMediaQuery } from '../../esl-media-query/core';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { ESLToggleablePlaceholder } from '../../esl-toggleable/core';\nlet ESLTrigger = class ESLTrigger extends ESLBaseElement {\n    attributeChangedCallback(attrName) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target')\n            return this.updateTargetFromSelector();\n    }\n    /** Target observable Toggleable */\n    get $target() {\n        return this._$target;\n    }\n    set $target(newPopupInstance) {\n        this.$$off(this._onTargetStateChange);\n        this._$target = newPopupInstance;\n        this.$$on(this._onTargetStateChange);\n        this._onTargetStateChange();\n    }\n    /** Element target to setup aria attributes */\n    get $a11yTarget() {\n        return this.a11yTarget ? this.querySelector(this.a11yTarget) : this;\n    }\n    /** Value to setup aria-label */\n    get a11yLabel() {\n        if (!this.$target)\n            return null;\n        return (this.$target.open ? this.a11yLabelActive : this.a11yLabelInactive) || null;\n    }\n    /** Marker to allow track hover */\n    get allowHover() {\n        return DeviceDetector.hasHover && ESLMediaQuery.for(this.trackHover).matches;\n    }\n    /** Marker to allow track clicks */\n    get allowClick() {\n        return ESLMediaQuery.for(this.trackClick).matches;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.updateTargetFromSelector();\n        this.initA11y();\n    }\n    /** Update `$target` Toggleable  from `target` selector */\n    updateTargetFromSelector() {\n        if (!this.target)\n            return;\n        this.$target = ESLTraversingQuery.first(this.target, this);\n        if (this.$target instanceof ESLToggleablePlaceholder && this.$target.$origin) {\n            // change target if it is an instance of the placeholder element\n            this.$target = this.$target.$origin;\n        }\n    }\n    /** Check if the event target should be ignored */\n    isTargetIgnored(target) {\n        if (!target || !isElement(target) || !this.ignore)\n            return false;\n        const $ignore = target.closest(this.ignore);\n        // Ignore only inner elements (but do not ignore the trigger itself)\n        return !!$ignore && $ignore !== this && this.contains($ignore);\n    }\n    /** Merge params to pass to the toggleable */\n    mergeToggleableParams(...params) {\n        return Object.assign({\n            initiator: 'trigger',\n            activator: this\n        }, ...params);\n    }\n    /** Show target toggleable with passed params */\n    showTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.showDelay)\n        }, params);\n        if (this.$target && typeof this.$target.show === 'function') {\n            this.$target.show(actionParams);\n        }\n    }\n    /** Hide target toggleable with passed params */\n    hideTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.hideDelay)\n        }, params);\n        if (this.$target && typeof this.$target.hide === 'function') {\n            this.$target.hide(actionParams);\n        }\n    }\n    /** Toggles target toggleable with passed params */\n    toggleTarget(params = {}, state = !this.active) {\n        state ? this.showTarget(params) : this.hideTarget(params);\n    }\n    /**\n     * Updates trigger state according to toggleable state\n     * Does not produce `esl:change:active` event\n     */\n    updateState() {\n        var _a;\n        const isActive = !!((_a = this.$target) === null || _a === void 0 ? void 0 : _a.open);\n        const wasActive = this.active;\n        this.toggleAttribute('active', isActive);\n        const clsTarget = ESLTraversingQuery.first(this.activeClassTarget, this);\n        clsTarget && CSSClassUtils.toggle(clsTarget, this.activeClass, isActive);\n        this.updateA11y();\n        return isActive !== wasActive;\n    }\n    /** Handles ESLToggleable state change */\n    _onTargetStateChange(originalEvent) {\n        if (!this.updateState())\n            return;\n        const detail = { active: this.active, originalEvent };\n        this.$$fire(this.CHANGE_EVENT, { detail });\n    }\n    /** Handles `click` event */\n    _onClick(event) {\n        if (!this.allowClick || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        this._onPrimaryEvent(event);\n    }\n    /** Handles `keydown` event */\n    _onKeydown(event) {\n        if (![ENTER, SPACE, ESC].includes(event.key) || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        if (event.key === ESC) {\n            if (this.ignoreEsc)\n                return;\n            this.hideTarget({ event });\n        }\n        else {\n            this._onPrimaryEvent(event);\n        }\n    }\n    /** Handles target primary (observed) event */\n    _onPrimaryEvent(event) {\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles hover `mouseenter` event */\n    _onMouseEnter(event) {\n        if (!this.allowHover)\n            return;\n        const delay = parseNumber(this.hoverShowDelay);\n        this.toggleTarget({ event, delay }, this.mode !== 'hide');\n        event.preventDefault();\n    }\n    /** Handles hover `mouseleave` event */\n    _onMouseLeave(event) {\n        if (!this.allowHover)\n            return;\n        if (this.mode === 'show' || this.mode === 'hide')\n            return;\n        const delay = parseNumber(this.hoverHideDelay);\n        this.hideTarget({ event, delay, trackHover: true });\n        event.preventDefault();\n    }\n    /** Set initial a11y attributes. Do nothing if trigger contains actionable element */\n    initA11y() {\n        if (this.$a11yTarget !== this)\n            return;\n        if (!this.hasAttribute('role'))\n            this.setAttribute('role', 'button');\n        if (this.getAttribute('role') === 'button' && !this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n    }\n    /** Update aria attributes */\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (this.a11yLabelActive !== null || this.a11yLabelInactive !== null) {\n            setAttr(target, 'aria-label', this.a11yLabel);\n        }\n        setAttr(target, 'aria-expanded', String(this.active));\n        if (this.$target && this.$target.id) {\n            setAttr(target, 'aria-controls', this.$target.id);\n        }\n    }\n};\nESLTrigger.is = 'esl-trigger';\nESLTrigger.observedAttributes = ['target'];\n__decorate([\n    prop('esl:change:active')\n], ESLTrigger.prototype, \"CHANGE_EVENT\", void 0);\n__decorate([\n    prop('esl:show esl:hide')\n], ESLTrigger.prototype, \"OBSERVED_EVENTS\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLTrigger.prototype, \"active\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'a[href]' })\n], ESLTrigger.prototype, \"ignore\", void 0);\n__decorate([\n    attr({ defaultValue: '::next' })\n], ESLTrigger.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'toggle' })\n], ESLTrigger.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'all' })\n], ESLTrigger.prototype, \"trackClick\", void 0);\n__decorate([\n    attr({ defaultValue: 'not all' })\n], ESLTrigger.prototype, \"trackHover\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"a11yTarget\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelActive\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelInactive\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"showDelay\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"hideDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverShowDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverHideDelay\", void 0);\n__decorate([\n    attr({ parser: parseBoolean, serializer: toBooleanAttribute })\n], ESLTrigger.prototype, \"ignoreEsc\", void 0);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"connectedCallback\", null);\n__decorate([\n    listen({\n        event: (that) => that.OBSERVED_EVENTS,\n        target: (that) => that.$target\n    })\n], ESLTrigger.prototype, \"_onTargetStateChange\", null);\n__decorate([\n    listen('click')\n], ESLTrigger.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLTrigger.prototype, \"_onKeydown\", null);\n__decorate([\n    listen('mouseenter')\n], ESLTrigger.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen('mouseleave')\n], ESLTrigger.prototype, \"_onMouseLeave\", null);\nESLTrigger = __decorate([\n    ExportNs('Trigger')\n], ESLTrigger);\nexport { ESLTrigger };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLAlert_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { attr, jsonAttr, prop, listen } from '../../esl-utils/decorators';\nimport { isMatches } from '../../esl-utils/dom/traversing';\nimport { ESLToggleable } from '../../esl-toggleable/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { createZIndexIframe } from '../../esl-utils/fixes/ie-fixes';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\n/**\n * ESLAlert component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLAlert is a component to show small notifications on your pages. ESLAlert can have multiple instances on the page.\n */\nlet ESLAlert = ESLAlert_1 = class ESLAlert extends ESLToggleable {\n    /** Creates global alert instance (using body element as a base) */\n    static init(options) {\n        let alert = document.querySelector(`body > ${ESLAlert_1.is}`);\n        if (!alert) {\n            alert = Object.assign(ESLAlert_1.create(), options || {});\n            document.body.appendChild(alert);\n        }\n        return alert;\n    }\n    mergeDefaultParams(params) {\n        const type = this.constructor;\n        return Object.assign({}, type.defaultConfig, this.defaultParams || {}, params || {});\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target') {\n            this.$target = ESLTraversingQuery.first(this.target);\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.setAttribute('role', this.getAttribute('role') || 'alert');\n        this.$content = document.createElement('div');\n        this.$content.className = 'esl-alert-content';\n        this.innerHTML = '';\n        this.appendChild(this.$content);\n        if (DeviceDetector.isIE)\n            this.appendChild(createZIndexIframe());\n        if (this.target) {\n            this.$target = ESLTraversingQuery.first(this.target, this);\n        }\n    }\n    /** Target element to listen to activation events */\n    get $target() {\n        return this._$target;\n    }\n    set $target($el) {\n        this._$target = $el;\n        this.$$on(this._onShowRequest);\n        this.$$on(this._onHideRequest);\n    }\n    onShow(params) {\n        if (this._clearTimeout)\n            window.clearTimeout(this._clearTimeout);\n        if (params.html || params.text) {\n            this.render(params);\n            super.onShow(params);\n        }\n        this.hide(params);\n    }\n    onHide(params) {\n        super.onHide(params);\n        this._clearTimeout = window.setTimeout(() => this.clear(), params.hideTime);\n    }\n    render({ text, html, cls }) {\n        CSSClassUtils.remove(this, this.activeCls);\n        CSSClassUtils.add(this, this.activeCls = cls);\n        if (html)\n            this.$content.innerHTML = html;\n        if (text)\n            this.$content.textContent = text;\n    }\n    clear() {\n        this.$content.innerHTML = '';\n        CSSClassUtils.remove(this, this.activeCls);\n    }\n    buildRequestParams(e) {\n        const detail = e.detail || {};\n        if (!isMatches(this, detail.match))\n            return null;\n        if (e.type === this.SHOW_REQUEST_EVENT)\n            return Object.assign({}, detail, { force: true });\n        if (e.type === this.HIDE_REQUEST_EVENT)\n            return Object.assign({ hideDelay: 0 }, detail, { force: true });\n        return null;\n    }\n    _onHideRequest(e) {\n        super._onHideRequest(e);\n        e.stopPropagation();\n    }\n    _onShowRequest(e) {\n        super._onShowRequest(e);\n        e.stopPropagation();\n    }\n};\nESLAlert.is = 'esl-alert';\nESLAlert.observedAttributes = ['target'];\n/** Default show/hide params for all ESLAlert instances */\nESLAlert.defaultConfig = {\n    hideTime: 300,\n    hideDelay: 2500\n};\n__decorate([\n    prop('esl:alert:show')\n], ESLAlert.prototype, \"SHOW_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:alert:hide')\n], ESLAlert.prototype, \"HIDE_REQUEST_EVENT\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLAlert.prototype, \"target\", void 0);\n__decorate([\n    jsonAttr()\n], ESLAlert.prototype, \"defaultParams\", void 0);\n__decorate([\n    listen({ inherit: true, target: (el) => el.$target })\n], ESLAlert.prototype, \"_onHideRequest\", null);\n__decorate([\n    listen({ inherit: true, target: (el) => el.$target })\n], ESLAlert.prototype, \"_onShowRequest\", null);\nESLAlert = ESLAlert_1 = __decorate([\n    ExportNs('Alert')\n], ESLAlert);\nexport { ESLAlert };\n","/** Fix IE browser to allow to display alert under iframe */\nexport function createZIndexIframe() {\n    const iframe = document.createElement('iframe');\n    iframe.className = 'ie-zindex-fix';\n    iframe.src = 'about:blank';\n    return iframe;\n}\n","/**\n * Abstract Observable implementation\n * @author Yuliya Adamskaya\n */\nexport class Observable {\n    constructor() {\n        this._listeners = new Set();\n    }\n    addListener(listener) {\n        this._listeners.add(listener);\n    }\n    removeListener(listener) {\n        this._listeners.delete(listener);\n    }\n    fire(...args) {\n        this._listeners.forEach((listener) => {\n            try {\n                listener.apply(this, args);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n}\n","import {Observable} from '@exadel/esl/modules/esl-utils/abstract/observable';\nimport {UIPPlugin} from './plugin';\nimport {UIPRoot} from './root';\n\n/** Type for function to change attribute's current value */\nexport type TransformSignature = (current: string | null) => string | boolean | null;\n\n/** Config for changing attribute's value */\nexport type ChangeAttrConfig = {\n  /** CSS query to find target elements */\n  target: string,\n  /** Attribute to change */\n  attribute: string,\n  /** Changes initiator */\n  modifier: UIPPlugin | UIPRoot\n} & ({\n  /** New {@link attribute} value */\n  value: string | boolean\n} | {\n  /**\n   * Function to transform(update)\n   * {@link attribute} value\n   */\n  transform: TransformSignature\n});\n\n/** Type for both <script> or <template> containers */\nexport type SnippetTemplate = HTMLTemplateElement | HTMLScriptElement;\n\n\n/**\n * State holder class to store current UIP markup state\n * Provides methods to modify the state\n * @extends Observable\n */\nexport class UIPStateModel extends Observable {\n  /** Current markup state */\n  private _html = new DOMParser().parseFromString('', 'text/html').body;\n  /** Last {@link UIPPlugin} element which changed markup */\n  private _lastModifier: UIPPlugin | UIPRoot;\n  /** Marker whether state changes were dispatched */\n  private _isFired = false;\n\n  /** Snippets {@link SnippetTemplate template-holders} */\n  private _snippets: SnippetTemplate[];\n  /** Current active {@link SnippetTemplate template-holder} */\n  private _activeSnippet: SnippetTemplate;\n\n  /**\n   * Sets current markup state to the passed one\n   * @param markup - new state\n   * @param modifier - plugin, that initiates the change\n   */\n  public setHtml(markup: string, modifier: UIPPlugin | UIPRoot) {\n    const root = new DOMParser().parseFromString(markup, 'text/html').body;\n    const indent = markup.match(/^\\s*/)?.[0];\n    indent && root.prepend(document.createTextNode(indent));\n\n    if (!root || root.innerHTML !== this.html) {\n      this._html = root;\n      this._lastModifier = modifier;\n      this.dispatchChange();\n    }\n  }\n\n  /** Current markup state getter */\n  public get html(): string {\n    return this._html ? this._html.innerHTML : '';\n  }\n\n  /** Last markup state modifier */\n  public get lastModifier(): UIPPlugin | UIPRoot {\n    return this._lastModifier;\n  }\n\n  /** Snippets template-holders getter */\n  public get snippets(): SnippetTemplate[] {\n    return this._snippets;\n  }\n\n  /** Sets snippets template-holders */\n  public set snippets(snippets: SnippetTemplate[]) {\n    this._snippets = snippets;\n  }\n\n  /** Current active {@link SnippetTemplate} getter */\n  public get activeSnippet(): SnippetTemplate {\n    if (!this._activeSnippet) {\n      this._activeSnippet = this.snippets\n        .find((snippet: SnippetTemplate) => snippet.hasAttribute('active')) || this.snippets[0];\n    }\n    return this._activeSnippet;\n  }\n\n  public set activeSnippet(snippet: SnippetTemplate) {\n    this._activeSnippet.removeAttribute('active');\n    snippet.setAttribute('active', '');\n    this._activeSnippet = snippet;\n  }\n\n  /** Changes current active snippet */\n  public applySnippet(snippet: SnippetTemplate, modifier: UIPPlugin | UIPRoot) {\n    if (!snippet) return;\n    this.activeSnippet = snippet;\n    this.setHtml(snippet.innerHTML, modifier);\n  }\n\n  /**\n   * Gets attribute values for the matched set of elements\n   * @param target - CSS sector to define target elements\n   * @param attr - attribute name\n   * @returns array of matched elements attribute value (uses the element placement order)\n   */\n  public getAttribute(target: string, attr: string): (string | null)[] {\n    return Array.from(this._html.querySelectorAll(target)).map(el => el.getAttribute(attr));\n  }\n\n  /** Applies change config to current markup */\n  public changeAttribute(cfg: ChangeAttrConfig) {\n    const {target, attribute, modifier} = cfg;\n    const elements = Array.from(this._html.querySelectorAll(target));\n    if (!elements.length) return;\n\n    UIPStateModel.setAttribute(elements, attribute, 'transform' in cfg ? cfg.transform : cfg.value);\n    this._lastModifier = modifier;\n    this.dispatchChange();\n  }\n\n  /** Plans microtask to dispatch model change event */\n  protected dispatchChange() {\n    if (!this._isFired) {\n      this._isFired = true;\n      Promise.resolve().then(() => {\n        this.fire();\n        this._isFired = false;\n      });\n    }\n  }\n\n  /**\n   * Changes element attribute according to `transform` argument\n   * @param elements - elements to apply changes\n   * @param attr - attribute name\n   * @param transform - value or function to change attribute value\n   */\n  protected static setAttribute(elements: Element[], attr: string, transform: TransformSignature | string | boolean): void {\n    elements.forEach(el => {\n      const transformed = typeof transform === 'function' ? transform(el.getAttribute(attr)) : transform;\n      if (typeof transformed === 'string') {\n        el.setAttribute(attr, transformed);\n      } else {\n        transformed ? el.setAttribute(attr, '') : el.removeAttribute(attr);\n      }\n    });\n  }\n}\n","import {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {boolAttr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport type {AnyToVoidFnSignature} from '@exadel/esl/modules/esl-utils/misc/functions';\n\nimport {SnippetTemplate, UIPStateModel} from './model';\n\n/**\n * UI Playground root custom element definition\n * Container element for {@link UIPPlugin} components\n * Defines the bounds of UI Playground instance\n * Shares the {@link UIPStateModel} instance between {@link UIPPlugin}-s\n */\nexport class UIPRoot extends ESLBaseElement {\n  public static is = 'uip-root';\n  static observedAttributes = ['dark-theme', 'settings-collapsed', 'editor-collapsed', 'rtl-direction'];\n\n  /** CSS query for snippets */\n  public static SNIPPET_SEL = '[uip-snippet]';\n\n  /** Indicates that the UIP components' theme is dark */\n  @boolAttr() public darkTheme: boolean;\n  /** Collapsed settings state marker */\n  @boolAttr() public settingsCollapsed: boolean;\n  /** Collapsed editor state marker */\n  @boolAttr() public editorCollapsed: boolean;\n  /** Indicates that the direction of the preview content is RTL direction */\n  @boolAttr() public rtlDirection: boolean;\n\n  /** {@link UIPStateModel} instance to store UI Playground state */\n  @memoize()\n  public get model(): UIPStateModel {\n    return new UIPStateModel();\n  }\n\n  /** Collects snippets template-holders */\n  public get $snippets(): SnippetTemplate[] {\n    return Array.from(this.querySelectorAll(UIPRoot.SNIPPET_SEL));\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.initSnippets();\n  }\n\n  /** Alias for {@link this.model.addListener} */\n  public addStateListener(listener: AnyToVoidFnSignature) {\n    this.model.addListener(listener);\n  }\n\n  /** Alias for {@link this.model.removeListener} */\n  public removeStateListener(listener: AnyToVoidFnSignature) {\n    this.model.removeListener(listener);\n  }\n\n  /** Initial initialization of snippets */\n  protected initSnippets(): void {\n    this.model.snippets = this.$snippets;\n    this.model.applySnippet(this.model.activeSnippet, this);\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string | null, newVal: string | null) {\n    if (oldVal === newVal) return;\n    if (['rtl-direction', 'dark-theme'].includes(attrName)) {\n      this.classList.toggle(attrName, newVal !== null);\n    }\n    // setTimeout to let other plugins init before dispatching\n    setTimeout(() => {\n      EventUtils.dispatch(this, 'uip:configchange', {\n        bubbles: false,\n        detail: {\n          attribute: attrName,\n          value: newVal\n        }\n      });\n    });\n  }\n}\n","const keys = Object.keys\nfunction identity(value) {\n  return value\n}\nfunction isBoolean(val) {\n  return typeof val === \"boolean\"\n}\nfunction isElement(val) {\n  return val && typeof val.nodeType === \"number\"\n}\nfunction isString(val) {\n  return typeof val === \"string\"\n}\nfunction isNumber(val) {\n  return typeof val === \"number\"\n}\nfunction isObject(val) {\n  return typeof val === \"object\" ? val !== null : isFunction(val)\n}\nfunction isFunction(val) {\n  return typeof val === \"function\"\n}\nfunction isArrayLike(obj) {\n  return isObject(obj) && typeof obj.length === \"number\" && typeof obj.nodeType !== \"number\"\n}\nfunction forEach(value, fn) {\n  if (!value) return\n\n  for (const key of keys(value)) {\n    fn(value[key], key)\n  }\n}\n\nfunction createRef() {\n  return Object.seal({\n    current: null,\n  })\n}\nfunction isRef(maybeRef) {\n  return isObject(maybeRef) && \"current\" in maybeRef\n}\nfunction useMemo(factory) {\n  return factory()\n}\n\nconst isUnitlessNumber = {\n  animationIterationCount: 0,\n  borderImageOutset: 0,\n  borderImageSlice: 0,\n  borderImageWidth: 0,\n  boxFlex: 0,\n  boxFlexGroup: 0,\n  boxOrdinalGroup: 0,\n  columnCount: 0,\n  columns: 0,\n  flex: 0,\n  flexGrow: 0,\n  flexPositive: 0,\n  flexShrink: 0,\n  flexNegative: 0,\n  flexOrder: 0,\n  gridArea: 0,\n  gridRow: 0,\n  gridRowEnd: 0,\n  gridRowSpan: 0,\n  gridRowStart: 0,\n  gridColumn: 0,\n  gridColumnEnd: 0,\n  gridColumnSpan: 0,\n  gridColumnStart: 0,\n  fontWeight: 0,\n  lineClamp: 0,\n  lineHeight: 0,\n  opacity: 0,\n  order: 0,\n  orphans: 0,\n  tabSize: 0,\n  widows: 0,\n  zIndex: 0,\n  zoom: 0,\n  fillOpacity: 0,\n  floodOpacity: 0,\n  stopOpacity: 0,\n  strokeDasharray: 0,\n  strokeDashoffset: 0,\n  strokeMiterlimit: 0,\n  strokeOpacity: 0,\n  strokeWidth: 0,\n}\n\nfunction prefixKey(prefix, key) {\n  return prefix + key.charAt(0).toUpperCase() + key.substring(1)\n}\n\nconst prefixes = [\"Webkit\", \"ms\", \"Moz\", \"O\"]\nkeys(isUnitlessNumber).forEach((prop) => {\n  prefixes.forEach((prefix) => {\n    isUnitlessNumber[prefixKey(prefix, prop)] = 0\n  })\n})\n\nconst SVGNamespace = \"http://www.w3.org/2000/svg\"\nconst XLinkNamespace = \"http://www.w3.org/1999/xlink\"\nconst XMLNamespace = \"http://www.w3.org/XML/1998/namespace\"\n\nfunction isVisibleChild(value) {\n  return !isBoolean(value) && value != null\n}\n\nfunction className(value) {\n  if (Array.isArray(value)) {\n    return value.map(className).filter(Boolean).join(\" \")\n  } else if (isObject(value)) {\n    return keys(value)\n      .filter((k) => value[k])\n      .join(\" \")\n  } else if (isVisibleChild(value)) {\n    return \"\" + value\n  } else {\n    return \"\"\n  }\n}\nconst svg = {\n  animate: 0,\n  circle: 0,\n  clipPath: 0,\n  defs: 0,\n  desc: 0,\n  ellipse: 0,\n  feBlend: 0,\n  feColorMatrix: 0,\n  feComponentTransfer: 0,\n  feComposite: 0,\n  feConvolveMatrix: 0,\n  feDiffuseLighting: 0,\n  feDisplacementMap: 0,\n  feDistantLight: 0,\n  feFlood: 0,\n  feFuncA: 0,\n  feFuncB: 0,\n  feFuncG: 0,\n  feFuncR: 0,\n  feGaussianBlur: 0,\n  feImage: 0,\n  feMerge: 0,\n  feMergeNode: 0,\n  feMorphology: 0,\n  feOffset: 0,\n  fePointLight: 0,\n  feSpecularLighting: 0,\n  feSpotLight: 0,\n  feTile: 0,\n  feTurbulence: 0,\n  filter: 0,\n  foreignObject: 0,\n  g: 0,\n  image: 0,\n  line: 0,\n  linearGradient: 0,\n  marker: 0,\n  mask: 0,\n  metadata: 0,\n  path: 0,\n  pattern: 0,\n  polygon: 0,\n  polyline: 0,\n  radialGradient: 0,\n  rect: 0,\n  stop: 0,\n  svg: 0,\n  switch: 0,\n  symbol: 0,\n  text: 0,\n  textPath: 0,\n  tspan: 0,\n  use: 0,\n  view: 0,\n}\nfunction createFactory(tag) {\n  return createElement.bind(null, tag)\n}\nfunction Fragment(attr) {\n  const fragment = document.createDocumentFragment()\n  appendChildren(attr.children, fragment)\n  return fragment\n}\nfunction createElement(tag, attr, ...children) {\n  if (isString(attr) || Array.isArray(attr)) {\n    children.unshift(attr)\n    attr = {}\n  }\n\n  attr = attr || {}\n\n  if (!attr.namespaceURI && svg[tag] === 0) {\n    attr = { ...attr, namespaceURI: SVGNamespace }\n  }\n\n  if (attr.children != null && !children.length) {\n    ;({ children, ...attr } = attr)\n  }\n\n  let node\n\n  if (isString(tag)) {\n    node = attr.namespaceURI\n      ? document.createElementNS(attr.namespaceURI, tag)\n      : document.createElement(tag)\n    attributes(attr, node)\n    appendChild(children, node)\n  } else if (isFunction(tag)) {\n    if (isObject(tag.defaultProps)) {\n      attr = { ...tag.defaultProps, ...attr }\n    }\n\n    node = tag({ ...attr, children })\n  }\n\n  if (isRef(attr.ref)) {\n    attr.ref.current = node\n  } else if (isFunction(attr.ref)) {\n    attr.ref(node)\n  }\n\n  return node\n}\n\nfunction appendChild(child, node) {\n  if (isArrayLike(child)) {\n    appendChildren(child, node)\n  } else if (isString(child) || isNumber(child)) {\n    appendChildToNode(document.createTextNode(child), node)\n  } else if (child === null) {\n    appendChildToNode(document.createComment(\"\"), node)\n  } else if (isElement(child)) {\n    appendChildToNode(child, node)\n  }\n}\n\nfunction appendChildren(children, node) {\n  for (const child of children) {\n    appendChild(child, node)\n  }\n\n  return node\n}\n\nfunction appendChildToNode(child, node) {\n  if (node instanceof window.HTMLTemplateElement) {\n    node.content.appendChild(child)\n  } else {\n    node.appendChild(child)\n  }\n}\n\nfunction normalizeAttribute(s) {\n  return s.replace(/[A-Z\\d]/g, (match) => \":\" + match.toLowerCase())\n}\n\nfunction attribute(key, value, node) {\n  switch (key) {\n    case \"xlinkActuate\":\n    case \"xlinkArcrole\":\n    case \"xlinkHref\":\n    case \"xlinkRole\":\n    case \"xlinkShow\":\n    case \"xlinkTitle\":\n    case \"xlinkType\":\n      attrNS(node, XLinkNamespace, normalizeAttribute(key), value)\n      return\n\n    case \"xmlnsXlink\":\n      attr(node, normalizeAttribute(key), value)\n      return\n\n    case \"xmlBase\":\n    case \"xmlLang\":\n    case \"xmlSpace\":\n      attrNS(node, XMLNamespace, normalizeAttribute(key), value)\n      return\n  }\n\n  switch (key) {\n    case \"htmlFor\":\n      attr(node, \"for\", value)\n      return\n\n    case \"dataset\":\n      forEach(value, (dataValue, dataKey) => {\n        if (dataValue != null) {\n          node.dataset[dataKey] = dataValue\n        }\n      })\n      return\n\n    case \"innerHTML\":\n    case \"innerText\":\n    case \"textContent\":\n      node[key] = value\n      return\n\n    case \"spellCheck\":\n      node.spellcheck = value\n      return\n\n    case \"class\":\n    case \"className\":\n      if (isFunction(value)) {\n        value(node)\n      } else {\n        attr(node, \"class\", className(value))\n      }\n\n      return\n\n    case \"ref\":\n    case \"namespaceURI\":\n      return\n\n    case \"style\":\n      if (isObject(value)) {\n        forEach(value, (val, key) => {\n          if (isNumber(val) && isUnitlessNumber[key] !== 0) {\n            node.style[key] = val + \"px\"\n          } else {\n            node.style[key] = val\n          }\n        })\n        return\n      }\n  }\n\n  if (isFunction(value)) {\n    if (key[0] === \"o\" && key[1] === \"n\") {\n      const attribute = key.toLowerCase()\n\n      if (node[attribute] == null) {\n        node[attribute] = value\n      } else {\n        node.addEventListener(key, value)\n      }\n    }\n  } else if (value === true) {\n    attr(node, key, \"\")\n  } else if (value !== false && value != null) {\n    attr(node, key, value)\n  }\n}\n\nfunction attr(node, key, value) {\n  node.setAttribute(key, value)\n}\n\nfunction attrNS(node, namespace, key, value) {\n  node.setAttributeNS(namespace, key, value)\n}\n\nfunction attributes(attr, node) {\n  for (const key of keys(attr)) {\n    attribute(key, attr[key], node)\n  }\n\n  return node\n}\n\nfunction useText(initialValue) {\n  const text = new Text()\n  Object.defineProperty(text, \"toString\", {\n    value() {\n      return this.textContent\n    },\n  })\n\n  function setText(value) {\n    text.textContent = value\n  }\n\n  if (initialValue != null) {\n    setText(initialValue)\n  }\n\n  return [text, setText]\n}\nfunction useClassList(initialValue) {\n  const div = document.createElement(\"div\")\n\n  if (initialValue != null) {\n    div.className = className(initialValue)\n  }\n\n  let list = div.classList\n\n  function ClassList(value) {\n    value.className = list.value\n    list = value.classList\n  }\n\n  Object.defineProperties(\n    ClassList,\n    Object.getOwnPropertyDescriptors({\n      get size() {\n        return list.length\n      },\n\n      get value() {\n        return list.value\n      },\n\n      add(...tokens) {\n        list.add(...tokens)\n      },\n\n      remove(...tokens) {\n        list.remove(...tokens)\n      },\n\n      toggle(token, force) {\n        list.toggle(token, force)\n      },\n\n      contains(token) {\n        return list.contains(token)\n      },\n    })\n  )\n  return ClassList\n}\n\nvar module = {\n  createElement,\n  Fragment,\n}\nfunction preventDefault(event) {\n  event.preventDefault()\n  return event\n}\nfunction stopPropagation(event) {\n  event.stopPropagation()\n  return event\n}\n\nexport default module\nexport {\n  Fragment,\n  SVGNamespace,\n  className,\n  createElement,\n  createFactory,\n  createRef,\n  createElement as h,\n  isRef,\n  createElement as jsx,\n  createElement as jsxs,\n  identity as memo,\n  preventDefault,\n  stopPropagation,\n  identity as useCallback,\n  useClassList,\n  useMemo,\n  createRef as useRef,\n  useText,\n}\n","import {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\n\nimport {UIPRoot} from './root';\nimport {UIPStateModel} from './model';\n\nimport * as React from 'jsx-dom';\n\n/**\n * Base class for UI Playground plugins\n * Implements basic relation and styles\n */\nexport abstract class UIPPlugin extends ESLBaseElement {\n  static observedAttributes = ['label'];\n\n  /** Visible label */\n  @attr() public label: string;\n\n  /** Closest playground {@link UIPRoot} element */\n  @memoize()\n  protected get root(): UIPRoot | null {\n    return this.closest(`${UIPRoot.is}`) as UIPRoot;\n  }\n\n  /** Returns {@link UIPStateModel} from root instance */\n  protected get model(): UIPStateModel | null {\n    return this.root ? this.root.model : null;\n  }\n\n  /** {@link UIPPlugin} section wrapper */\n  @memoize()\n  protected get $inner() {\n    const pluginType = this.constructor as typeof UIPPlugin;\n    return <div className={`${pluginType.is}-inner uip-plugin-inner`}></div> as HTMLDivElement;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.classList.add('uip-plugin');\n    this.root?.addStateListener(this._onRootStateChange);\n    this.root && this._onRootStateChange();\n  }\n\n  protected disconnectedCallback() {\n    this.root?.removeStateListener(this._onRootStateChange);\n    super.disconnectedCallback();\n    memoize.clear(this, 'root');\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (attrName === 'label') this.setAttribute('aria-label', newVal);\n  }\n\n  /** Handles {@link UIPRoot} state changes */\n  protected _onRootStateChange(): void {}\n}\n","import {bind} from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport {UIPPlugin} from '../base/plugin';\n\n/**\n * Preview {@link UIPPlugin} custom element definition\n * Element that displays active markup\n * @extends UIPPlugin\n */\nexport class UIPPreview extends UIPPlugin {\n  static is = 'uip-preview';\n  static observedAttributes: string[] = ['resizable'];\n\n  /** Changes preview markup from state changes */\n  @bind\n  protected _onRootStateChange(): void {\n    if (this.$inner.parentElement === this) this.removeChild(this.$inner);\n    this.$inner.innerHTML = this.model!.html;\n    this.appendChild(this.$inner);\n  }\n\n  protected disconnectedCallback() {\n    if (this.$inner.parentElement === this) this.removeChild(this.$inner);\n    super.disconnectedCallback();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string): void {\n    if (attrName === 'resizable' && newVal === null) {\n      this.clearInlineSize();\n      this.$inner.classList.remove('resizable');\n    } else {\n      this.$inner.classList.add('resizable');\n    }\n  }\n\n  /** Resets element both inline height and width properties */\n  protected clearInlineSize() {\n    this.$inner.style.removeProperty('height');\n    this.$inner.style.removeProperty('width');\n  }\n}\n","import React from 'jsx-dom';\n/**\n * Base class for icons\n */\nexport class UIPOptionIcons {\n  /** Default svg for theme icons */\n  public static themeSVG: HTMLElement = (\n    <>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"#4e4e4e\" stroke-width=\"1.25\" fill=\"none\">\n        <path xmlns=\"http://www.w3.org/2000/svg\" d=\"M2.25 8.5 C 5 17.5, 18.5 17.5, 21.25 8.5\" transform=\"rotate(45,12.5,12.5)\" stroke-linecap=\"round\"/>\n        <path xmlns=\"http://www.w3.org/2000/svg\" d=\"M2.25 8.5 C -1 26, 24.75 26, 21.25 8.5\" transform=\"rotate(45,12.5,12.5)\" stroke-linecap=\"round\"/>\n      </svg>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\">\n        {/* eslint-disable-next-line max-len */}\n        <path fill=\"#5F5F5F\" d=\"M12.445.302a.682.682 0 0 0-.072.018.581.581 0 0 0-.453.58v3.48a.583.583 0 0 0 .287.51.586.586 0 0 0 .585 0 .583.583 0 0 0 .288-.51V.9a.58.58 0 0 0-.634-.598ZM4.18 3.709a.576.576 0 0 0-.453.408.583.583 0 0 0 .163.59L6.355 7.17c.14.172.365.252.583.202a.583.583 0 0 0 .435-.435.583.583 0 0 0-.202-.582L4.706 3.89a.582.582 0 0 0-.471-.182H4.18Zm16.458 0a.583.583 0 0 0-.344.182l-2.465 2.465a.583.583 0 0 0-.202.582c.05.215.22.385.435.435.217.05.442-.03.582-.202l2.465-2.465a.58.58 0 0 0-.471-.997ZM12.445 6.7l-.054.018a.606.606 0 0 0-.109.018l-.018.018C9.187 6.886 6.7 9.392 6.7 12.5c0 3.192 2.608 5.8 5.8 5.8 3.192 0 5.8-2.608 5.8-5.8 0-3.097-2.468-5.594-5.528-5.746-.02 0-.034-.018-.055-.018a.561.561 0 0 0-.18-.036h-.092Zm.019 1.16h.09a4.64 4.64 0 1 1-.09 0ZM.737 11.92A.587.587 0 0 0 .9 13.08h3.48a.583.583 0 0 0 .51-.288.586.586 0 0 0 0-.584.583.583 0 0 0-.51-.288H.737Zm19.72 0a.587.587 0 0 0 .163 1.16h3.48a.584.584 0 0 0 .51-.288.586.586 0 0 0 0-.584.584.584 0 0 0-.51-.288h-3.643ZM6.7 17.648a.583.583 0 0 0-.345.18L3.89 20.295a.583.583 0 0 0-.201.582c.05.215.22.385.435.435.217.05.442-.03.582-.202l2.465-2.465a.578.578 0 0 0-.417-.996H6.7Zm11.419 0a.576.576 0 0 0-.454.407.583.583 0 0 0 .164.59l2.465 2.464a.582.582 0 0 0 1.017-.233.583.583 0 0 0-.202-.582l-2.465-2.465a.58.58 0 0 0-.417-.181h-.108Zm-5.674 2.374a.674.674 0 0 0-.072.018.581.581 0 0 0-.453.58v3.48a.584.584 0 0 0 .287.51.586.586 0 0 0 .585 0 .584.584 0 0 0 .288-.51v-3.48a.58.58 0 0 0-.634-.598Z\"/>\n      </svg>\n    </>) as HTMLElement;\n\n  /** Default svg for rtl direction icon */\n  public static rtlDirectionSVG: HTMLElement = (\n    <>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 35 17\" fill=\"#4e4e4e\">\n        {/* eslint-disable-next-line max-len */}\n        <path fill=\"#4e4e4e\" d=\"M10.202 14.5v1.686h-7.82V14.5h7.82ZM2.79.546v15.64H.717V.546H2.79Zm12.6 0v15.64h-2.04V.546h2.04Zm5.028 0v1.697H8.333V.546h12.085Zm2.32 0h5.178c1.174 0 2.166.179 2.976.537.816.358 1.436.888 1.858 1.59.43.695.645 1.55.645 2.567 0 .716-.147 1.372-.44 1.966a4.183 4.183 0 0 1-1.247 1.504c-.537.408-1.182.713-1.934.913l-.58.226h-4.866l-.021-1.687h3.674c.744 0 1.364-.129 1.858-.387.494-.265.866-.62 1.117-1.063a2.95 2.95 0 0 0 .376-1.472c0-.601-.118-1.128-.355-1.579-.236-.451-.608-.798-1.117-1.042-.501-.25-1.15-.376-1.944-.376h-3.105v13.944h-2.073V.545Zm9.142 15.64-3.803-7.09 2.16-.01 3.856 6.972v.128H31.88Z\"/>\n      </svg>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 37 17\" fill=\"#4e4e4e\">\n        {/* eslint-disable-next-line max-len */}\n        <path fill=\"#4e4e4e\" d=\"M0.716797 0.545898H5.89453C7.06901 0.545898 8.06087 0.724935 8.87012 1.08301C9.68652 1.44108 10.306 1.97103 10.7285 2.67285C11.1582 3.36751 11.373 4.22331 11.373 5.24023C11.373 5.95638 11.2262 6.61165 10.9326 7.20605C10.6462 7.79329 10.2308 8.2946 9.68652 8.70996C9.14941 9.11816 8.50488 9.42253 7.75293 9.62305L7.17285 9.84863H2.30664L2.28516 8.16211H5.95898C6.70378 8.16211 7.32324 8.0332 7.81738 7.77539C8.31152 7.51042 8.68392 7.15592 8.93457 6.71191C9.18522 6.2679 9.31055 5.77734 9.31055 5.24023C9.31055 4.63867 9.19238 4.1123 8.95605 3.66113C8.71973 3.20996 8.34733 2.86263 7.83887 2.61914C7.33757 2.36849 6.68945 2.24316 5.89453 2.24316H2.79004V16.1865H0.716797V0.545898ZM9.8584 16.1865L6.05566 9.09668L8.21484 9.08594L12.0713 16.0576V16.1865H9.8584ZM19.1934 0.545898V16.1865H17.1523V0.545898H19.1934ZM24.2207 0.545898V2.24316H12.1357V0.545898H24.2207ZM36.0264 14.5V16.1865H28.2061V14.5H36.0264ZM28.6143 0.545898V16.1865H26.541V0.545898H28.6143Z\"/>\n      </svg>\n    </>\n  ) as HTMLElement;\n\n  /** Default svg for collapsed settings icon */\n  public static settingsCollapsedSVG: HTMLElement = (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#1f1f1f\" stroke=\"#1f1f1f\" stroke-width=\".5\">\n      {/* eslint-disable-next-line max-len */}\n      <path d=\"m13.302.632.645 2.424.099.358.382.1a9.53 9.53 0 0 1 4.21 2.269l.278.263.382-.102 2.551-.684 1.305 2.115-1.915 1.734-.288.26.105.358c.218.766.326 1.53.326 2.273 0 .743-.108 1.507-.326 2.273l-.105.359.288.26 1.915 1.733-1.305 2.115-2.55-.684-.383-.102-.277.263a9.53 9.53 0 0 1-4.21 2.27l-.383.099-.099.358-.645 2.424h-2.604l-.645-2.424-.099-.358-.382-.1a9.53 9.53 0 0 1-4.21-2.269l-.278-.263-.382.102-2.551.684-1.305-2.115 1.915-1.734.288-.26-.105-.358A8.326 8.326 0 0 1 2.618 12c0-.743.108-1.507.326-2.273l.105-.359-.288-.26L.846 7.376 2.15 5.26l2.55.684.383.102.277-.263a9.53 9.53 0 0 1 4.21-2.27l.383-.099.099-.358.645-2.424h2.604ZM12 17.345c3.144 0 5.702-2.398 5.702-5.345 0-2.947-2.558-5.345-5.702-5.345S6.298 9.053 6.298 12c0 2.947 2.558 5.345 5.702 5.345ZM13.828 0h-3.656l-.776 2.901c-1.73.435-3.28 1.28-4.512 2.435l-3.056-.82L0 7.484l2.295 2.079A8.901 8.901 0 0 0 1.944 12c0 .845.126 1.658.35 2.438L0 16.515l1.828 2.968 3.056-.82c1.232 1.155 2.783 2 4.512 2.435L10.172 24h3.656l.776-2.901a10.23 10.23 0 0 0 4.512-2.434l3.056.819L24 16.516l-2.295-2.078c.221-.78.351-1.593.351-2.438 0-.842-.126-1.658-.35-2.434L24 7.486l-1.828-2.97-3.056.82A10.292 10.292 0 0 0 14.604 2.9L13.828 0ZM12 16.714c-2.775 0-5.028-2.112-5.028-4.714 0-2.602 2.253-4.714 5.028-4.714 2.775 0 5.028 2.112 5.028 4.714 0 2.602-2.253 4.714-5.028 4.714Z\"/>\n    </svg>\n  ) as HTMLElement;\n\n  /** Default svg for collapsed editor icon */\n  public static editorCollapsedSVG: HTMLElement = (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#1f1f1f\" viewBox=\"0 0 34 20\">\n      {/* eslint-disable-next-line max-len */}\n      <path d=\"m3.094 10.453 7.336 2.965v2.297L.844 11.273v-1.71l9.586-4.43V7.43l-7.336 3.023Zm11.191 9.012h-1.863L19.547.938h1.851l-7.113 18.527Zm17.133-9.082-7.746-3.035V5.12l10.008 4.43v1.71l-10.008 4.442v-2.25l7.746-3.07Z\"/>\n    </svg>\n  ) as HTMLElement;\n\n  /** Default svg for copy icon */\n  public static get copySVG() {\n    return <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"#5f5f5f\" stroke-width=\"1.25\">\n      <rect width=\"12\" height=\"15\" x=\"4\" y=\"3\" fill=\"#fff\" rx=\"2\"/>\n      <rect width=\"12\" height=\"15\" x=\"8\" y=\"7\" fill=\"#fff\" rx=\"2\"/>\n    </svg> as HTMLElement;\n  }\n\n  public static get snippetSVG() {\n    return <>\n      <svg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='black' viewBox='0 0 16 9' xmlSpace='preserve'>\n        <polyline points='0,0 8,8 16,0' stroke-width='2'></polyline>\n      </svg>\n    </> as HTMLElement;\n  }\n}\n","import {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPPlugin} from '../../../core/base/plugin';\nimport {SnippetTemplate} from '../../../core/base/model';\nimport {UIPOptionIcons} from '../options/OptionIcons';\n\nimport * as React from 'jsx-dom';\n\n/**\n * Snippets {@link UIPPlugin} custom element definition\n * Container class for snippets (component's templates)\n * @extends UIPPlugin\n */\nexport class UIPSnippets extends UIPPlugin {\n  public static is = 'uip-snippets';\n  /** CSS Class for snippets list item */\n  public static LIST_ITEM = 'snippets-list-item';\n  /** CSS Class added to active snippet */\n  public static ACTIVE_ITEM = 'active';\n  /** Index of current snippet list item */\n  public currentIndex: number;\n\n  /** Active snippet title */\n  @memoize()\n  protected get $title() {\n    return <span className=\"snippets-title\"></span>;\n  }\n\n  /** Snippets list from dropdown element*/\n  @memoize()\n  public get $items(): HTMLElement[] {\n    const items = this.querySelectorAll(`.${UIPSnippets.LIST_ITEM}`);\n    return Array.from(items) as HTMLElement[];\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.render();\n    // Initial update\n    setTimeout(() => this.$active = this.$active || this.$items[0]);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles `mouseup` event to\n   * manage dropdown open state\n   */\n  @listen({event: 'mouseup', target: document.body})\n  protected onOutsideAction(e: Event) {\n    if (!this.classList.contains('dropdown-open')) return;\n    const target = e.target as HTMLElement;\n    if (this.contains(target)) return false;\n    this.toggleDropdown();\n  }\n\n  /** Active snippet element */\n  public get $active(): HTMLElement | null {\n    return this.$items.find(item => item.classList.contains(UIPSnippets.ACTIVE_ITEM)) || null;\n  }\n  /** Sets active snippet element */\n  public set $active(snippet: HTMLElement | null) {\n    this.$items.forEach((item) => item.classList.toggle(UIPSnippets.ACTIVE_ITEM, snippet === item));\n    this.updateTitleText();\n  }\n\n  /** Initializes snippets layout */\n  protected render(): void {\n    const snippets = this.model!.snippets;\n    if (!snippets.length) return;\n\n    snippets.length > 1\n      ?this.appendChild(this.$innerContent(snippets))\n      :this.appendChild(this.$title);\n  }\n\n  /** Renders dropdown element for a case with multiple snippets */\n  protected $innerContent(snippets: SnippetTemplate[]) {\n\n    return <>\n      <div className=\"snippets-dropdown-control\">\n        {UIPOptionIcons.snippetSVG.cloneNode(true) as HTMLElement}\n        {this.$title}\n      </div>\n      <div className=\"snippets-dropdown\">\n        <div className=\"snippets-dropdown-wrapper\">\n          <div className=\"snippets-list esl-scrollable-content\">\n            {snippets.map((snippet: SnippetTemplate) => this.buildListItem(snippet))}\n          </div>\n          <esl-scrollbar target=\"::prev\"></esl-scrollbar>\n        </div>\n      </div>\n    </>;\n  }\n\n  /** Builds snippets list item */\n  protected buildListItem(snippet: SnippetTemplate) {\n    const label = snippet.getAttribute('label');\n    if (!label) return;\n\n    let className = UIPSnippets.LIST_ITEM;\n    if (snippet === this.model?.activeSnippet) {\n      className = className.concat(' ', UIPSnippets.ACTIVE_ITEM);\n    }\n    return <li className={className}>{label}</li>;\n  }\n\n  /** Updates dropdown title with the name of active snippet */\n  protected updateTitleText(): void {\n    if (this.model) {\n      this.$title.textContent = `${this.model.activeSnippet.getAttribute('label')}`;\n    }\n  }\n\n  /** Handles `click` event to manage active snippet */\n  @listen({event: 'click', selector: '.snippets-list-item'})\n  protected _onItemClick(event: Event) {\n    const target = event.target as HTMLElement;\n    const index = this.$items.indexOf(target);\n    if (index < 0) return;\n\n    this.toggleDropdown();\n\n    if (this.currentIndex !== index && this.model) {\n      this.model.applySnippet(this.model.snippets[index], this);\n      this.$active = target;\n      this.currentIndex = index;\n    }\n  }\n\n  /**\n   * Handles dropdown control `click` event to\n   * manage dropdown open state\n   */\n  @listen({event: 'click', selector: '.snippets-dropdown-control'})\n  protected _onDropdownClick() {\n    this.toggleDropdown();\n  }\n\n  /** Toggles dropdown open state */\n  public toggleDropdown(): void {\n    this.classList.toggle('dropdown-open');\n  }\n}\n","import {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {ENTER, SPACE} from '@exadel/esl/modules/esl-utils/dom/keys';\n\nimport type {UIPOptions} from '../options';\nimport {UIPRoot} from '../../../../core/base/root';\n\nimport * as React from 'jsx-dom';\n\n/** Config used to create options */\nexport type OptionConfig = {\n  /** Attribute name used as absence marker of option icon */\n  attrName: string;\n  /** Controlled attribute to toggle on root */\n  optionValue: string;\n  /** Callback to indicate if option should be rendered */\n  canActivate?: (scope: UIPOptions) => boolean;\n  svg: HTMLElement;\n};\n\n/** Custom element to toggle {@link UIPRoot} attributes */\nexport class UIPOption extends ESLBaseElement {\n  public static is = 'uip-option';\n\n  /** {@link UIPRoot's} attribute which is changed by option */\n  @attr() public attribute: string;\n\n  /** Closest playground {@link UIPRoot} element */\n  protected $root: UIPRoot;\n  protected config: OptionConfig;\n\n  /** Builds option element from {@link OptionConfig} */\n  static createEl(optionConfig: OptionConfig) {\n    const option = document.createElement('uip-option') as UIPOption;\n    option.setAttribute('attribute', optionConfig.optionValue);\n    option.append(optionConfig.svg.cloneNode(true));\n    option.config = optionConfig;\n    return option;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.$root = this.closest('.uip-root') as UIPRoot;\n    this.classList.add(`${this.attribute}-option`);\n    this.tabIndex = 0;\n    this.active = this.$root.hasAttribute(this.config.optionValue);\n  }\n\n  /** Checks whether option is in its active state */\n  public get active(): boolean {\n    return this.$$cls('active');\n  }\n\n  /** Setter for `active` class */\n  public set active(val: boolean) {\n    this.$$cls('active', val);\n  }\n\n  /** Handles option `click` event */\n  @listen('click')\n  protected _onClick() {\n    this.toggleState();\n    this.$$fire('uip:option:changed');\n  }\n\n  /** Handles option `keydown` event */\n  @listen('keydown')\n  protected _onKeydown(e: KeyboardEvent) {\n    if (ENTER !== e.key && SPACE !== e.key) return;\n    this.toggleState();\n    this.$$fire('uip:option:changed');\n  }\n\n  /** Toggles option active state */\n  public toggleState(force?: boolean) {\n    this.active = force === undefined ? !this.active : force;\n  }\n}\n","import {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPPlugin} from '../../../core/base/plugin';\nimport {OptionConfig, UIPOption} from './option/option';\nimport {UIPOptionIcons} from './OptionIcons';\n\n/**\n * Options {@link UIPPlugin} custom element definition\n * Custom element to provide controls for changing UIP visual appearance.\n * @extends UIPPlugin\n */\nexport class UIPOptions extends UIPPlugin {\n  public static is = 'uip-options';\n  public static observedAttributes = ['hide-theme', 'hide-direction', 'hide-settings', 'hide-editor'];\n\n  /** Map that stores {@link UIPOption} instances */\n  public options = new Map<string, UIPOption>();\n\n  /** List of configs to create options */\n  protected static UIPOptionsConfig: OptionConfig[] = [\n    {\n      attrName: 'hide-theme',\n      optionValue: 'dark-theme',\n      canActivate: (component) => !component.hasAttribute('hide-theme'),\n      svg: UIPOptionIcons.themeSVG\n    },\n    {\n      attrName: 'hide-direction',\n      optionValue: 'rtl-direction',\n      canActivate: (component) => !component.hasAttribute('hide-direction'),\n      svg: UIPOptionIcons.rtlDirectionSVG\n    },\n    {\n      attrName: 'hide-settings',\n      optionValue: 'settings-collapsed',\n      canActivate: (component) => !component.hasAttribute('hide-settings') &&\n        !!component.root?.querySelector('uip-settings'),\n      svg: UIPOptionIcons.settingsCollapsedSVG\n    },\n    {\n      attrName: 'hide-editor',\n      optionValue: 'editor-collapsed',\n      canActivate: (component) => !component.hasAttribute('hide-editor') &&\n        !!component.root?.querySelector('uip-editor'),\n      svg: UIPOptionIcons.editorCollapsedSVG\n    }\n  ];\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.render();\n  }\n\n  protected disconnectedCallback() {\n    this.innerHTML = '';\n    super.disconnectedCallback();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string | null, newVal: string | null) {\n    if (oldVal === newVal || !this.options) return;\n\n    const config = UIPOptions.UIPOptionsConfig.find(elem => elem.attrName === attrName);\n    if (!config) return;\n\n    if (newVal === null) this.render([config]); // case to add option icon\n    if (newVal !== null) { // case to remove option icon\n      const option = this.options.get(config.optionValue);\n      if (!option) return;\n      this.options.delete(config.optionValue);\n      option.remove();\n    }\n  }\n\n  /**\n   * Renders options from passed configs array or\n   * by default from {@link UIPOptions.UIPOptionsConfig}\n   */\n  protected render(optionsCfg = UIPOptions.UIPOptionsConfig) {\n    optionsCfg = optionsCfg.filter(option => !option.canActivate || option.canActivate(this));\n    optionsCfg.forEach((option) => this.options.set(option.optionValue, UIPOption.createEl(option)));\n    this.options.forEach(option => this.append(option));\n  }\n\n  /**\n   * Handles {@link UIPRoot} `uip:configchange` event to\n   * manage {@link UIPOption} active state\n   */\n  @listen({event: 'uip:configchange', target: '::parent(.uip-root)'})\n  protected _onRootConfigChange(e: CustomEvent) {\n    const option = this.options.get(e.detail.attribute);\n    option?.toggleState(e.detail.value !== null);\n  }\n\n  /**\n   * Handles {@link UIPOption} `click` event\n   * to manage {@link UIPRoot} options attributes\n   */\n  @listen({event: 'click', selector: '.uip-option'})\n  protected _onOptionClick(e: Event) {\n    const option = e.target as UIPOption;\n    this.root?.toggleAttribute(option.attribute, option.active);\n  }\n\n  public static register(tagName?: string) {\n    UIPOption.register();\n    UIPOption.registered.then(() => super.register.call(this, tagName));\n  }\n}\n","import {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {UIPPlugin} from '../../core/base/plugin';\nimport {UIPOptionIcons, UIPOptions, UIPSnippets} from '../registration';\n\nimport * as React from 'jsx-dom';\n\n/**\n * Header {@link UIPPlugin} custom element definition\n * Container for {@link UIPSnippets} and {@link UIPOptions} elements\n * @extends UIPPlugin\n */\nexport class UIPHeader extends UIPPlugin {\n  static is = 'uip-header';\n\n  protected connectedCallback(): void {\n    super.connectedCallback();\n    this.childElementCount || this.autofill();\n  }\n\n  /** Default configuration rendering */\n  protected autofill(): void {\n    this.renderSnippets();\n    this.renderOptions();\n    this.renderCopy();\n  }\n\n  /** Renders {@link UIPSnippets} element */\n  protected renderSnippets(): void {\n    if (this.model?.snippets.length) {\n      const snippetsEl = document.createElement(UIPSnippets.is);\n      this.prepend(snippetsEl);\n    }\n  }\n\n  /** Renders {@link UIPOptions} element */\n  protected renderOptions(): void {\n    const optionsEl = document.createElement(UIPOptions.is);\n    this.append(optionsEl);\n  }\n\n  /** Renders copy icon */\n  protected renderCopy(): void {\n    const icon = <button title=\"copy markup\" className=\"copy-icon\">{UIPOptionIcons.copySVG.cloneNode(true) as HTMLElement}</button>;\n    this.append(icon);\n  }\n\n  /** Handles copy icon click */\n  @listen({event: 'click', selector: '.copy-icon'})\n  protected _onCopyClick() {\n    navigator.clipboard.writeText(this.model!.html).then(() => {\n      EventUtils.dispatch(this, 'esl:alert:show', {\n        detail: {\n          text: 'Markup copied',\n          cls: 'uip-alert-info'\n        }\n      });\n    });\n  }\n}\n","const globalWindow = window;\nexport function CodeJar(editor, highlight, opt = {}) {\n    const options = {\n        tab: '\\t',\n        indentOn: /[({\\[]$/,\n        moveToNewLine: /^[)}\\]]/,\n        spellcheck: false,\n        catchTab: true,\n        preserveIdent: true,\n        addClosing: true,\n        history: true,\n        window: globalWindow,\n        ...opt,\n    };\n    const window = options.window;\n    const document = window.document;\n    const listeners = [];\n    const history = [];\n    let at = -1;\n    let focus = false;\n    let onUpdate = () => void 0;\n    let prev; // code content prior keydown event\n    editor.setAttribute('contenteditable', 'plaintext-only');\n    editor.setAttribute('spellcheck', options.spellcheck ? 'true' : 'false');\n    editor.style.outline = 'none';\n    editor.style.overflowWrap = 'break-word';\n    editor.style.overflowY = 'auto';\n    editor.style.whiteSpace = 'pre-wrap';\n    const doHighlight = (editor, pos) => {\n        highlight(editor, pos);\n    };\n    let isLegacy = false; // true if plaintext-only is not supported\n    if (editor.contentEditable !== 'plaintext-only')\n        isLegacy = true;\n    if (isLegacy)\n        editor.setAttribute('contenteditable', 'true');\n    const debounceHighlight = debounce(() => {\n        const pos = save();\n        doHighlight(editor, pos);\n        restore(pos);\n    }, 30);\n    let recording = false;\n    const shouldRecord = (event) => {\n        return !isUndo(event) && !isRedo(event)\n            && event.key !== 'Meta'\n            && event.key !== 'Control'\n            && event.key !== 'Alt'\n            && !event.key.startsWith('Arrow');\n    };\n    const debounceRecordHistory = debounce((event) => {\n        if (shouldRecord(event)) {\n            recordHistory();\n            recording = false;\n        }\n    }, 300);\n    const on = (type, fn) => {\n        listeners.push([type, fn]);\n        editor.addEventListener(type, fn);\n    };\n    on('keydown', event => {\n        if (event.defaultPrevented)\n            return;\n        prev = toString();\n        if (options.preserveIdent)\n            handleNewLine(event);\n        else\n            legacyNewLineFix(event);\n        if (options.catchTab)\n            handleTabCharacters(event);\n        if (options.addClosing)\n            handleSelfClosingCharacters(event);\n        if (options.history) {\n            handleUndoRedo(event);\n            if (shouldRecord(event) && !recording) {\n                recordHistory();\n                recording = true;\n            }\n        }\n        if (isLegacy && !isCopy(event))\n            restore(save());\n    });\n    on('keyup', event => {\n        if (event.defaultPrevented)\n            return;\n        if (event.isComposing)\n            return;\n        if (prev !== toString())\n            debounceHighlight();\n        debounceRecordHistory(event);\n        onUpdate(toString());\n    });\n    on('focus', _event => {\n        focus = true;\n    });\n    on('blur', _event => {\n        focus = false;\n    });\n    on('paste', event => {\n        recordHistory();\n        handlePaste(event);\n        recordHistory();\n        onUpdate(toString());\n    });\n    on('cut', event => {\n        recordHistory();\n        handleCut(event);\n        recordHistory();\n        onUpdate(toString());\n    });\n    function save() {\n        const s = getSelection();\n        const pos = { start: 0, end: 0, dir: undefined };\n        let { anchorNode, anchorOffset, focusNode, focusOffset } = s;\n        if (!anchorNode || !focusNode)\n            throw 'error1';\n        // If the anchor and focus are the editor element, return either a full\n        // highlight or a start/end cursor position depending on the selection\n        if (anchorNode === editor && focusNode === editor) {\n            pos.start = (anchorOffset > 0 && editor.textContent) ? editor.textContent.length : 0;\n            pos.end = (focusOffset > 0 && editor.textContent) ? editor.textContent.length : 0;\n            pos.dir = (focusOffset >= anchorOffset) ? '->' : '<-';\n            return pos;\n        }\n        // Selection anchor and focus are expected to be text nodes,\n        // so normalize them.\n        if (anchorNode.nodeType === Node.ELEMENT_NODE) {\n            const node = document.createTextNode('');\n            anchorNode.insertBefore(node, anchorNode.childNodes[anchorOffset]);\n            anchorNode = node;\n            anchorOffset = 0;\n        }\n        if (focusNode.nodeType === Node.ELEMENT_NODE) {\n            const node = document.createTextNode('');\n            focusNode.insertBefore(node, focusNode.childNodes[focusOffset]);\n            focusNode = node;\n            focusOffset = 0;\n        }\n        visit(editor, el => {\n            if (el === anchorNode && el === focusNode) {\n                pos.start += anchorOffset;\n                pos.end += focusOffset;\n                pos.dir = anchorOffset <= focusOffset ? '->' : '<-';\n                return 'stop';\n            }\n            if (el === anchorNode) {\n                pos.start += anchorOffset;\n                if (!pos.dir) {\n                    pos.dir = '->';\n                }\n                else {\n                    return 'stop';\n                }\n            }\n            else if (el === focusNode) {\n                pos.end += focusOffset;\n                if (!pos.dir) {\n                    pos.dir = '<-';\n                }\n                else {\n                    return 'stop';\n                }\n            }\n            if (el.nodeType === Node.TEXT_NODE) {\n                if (pos.dir != '->')\n                    pos.start += el.nodeValue.length;\n                if (pos.dir != '<-')\n                    pos.end += el.nodeValue.length;\n            }\n        });\n        editor.normalize(); // collapse empty text nodes\n        return pos;\n    }\n    function restore(pos) {\n        const s = getSelection();\n        let startNode, startOffset = 0;\n        let endNode, endOffset = 0;\n        if (!pos.dir)\n            pos.dir = '->';\n        if (pos.start < 0)\n            pos.start = 0;\n        if (pos.end < 0)\n            pos.end = 0;\n        // Flip start and end if the direction reversed\n        if (pos.dir == '<-') {\n            const { start, end } = pos;\n            pos.start = end;\n            pos.end = start;\n        }\n        let current = 0;\n        visit(editor, el => {\n            if (el.nodeType !== Node.TEXT_NODE)\n                return;\n            const len = (el.nodeValue || '').length;\n            if (current + len > pos.start) {\n                if (!startNode) {\n                    startNode = el;\n                    startOffset = pos.start - current;\n                }\n                if (current + len > pos.end) {\n                    endNode = el;\n                    endOffset = pos.end - current;\n                    return 'stop';\n                }\n            }\n            current += len;\n        });\n        if (!startNode)\n            startNode = editor, startOffset = editor.childNodes.length;\n        if (!endNode)\n            endNode = editor, endOffset = editor.childNodes.length;\n        // Flip back the selection\n        if (pos.dir == '<-') {\n            [startNode, startOffset, endNode, endOffset] = [endNode, endOffset, startNode, startOffset];\n        }\n        {\n            // If nodes not editable, create a text node.\n            const startEl = uneditable(startNode);\n            if (startEl) {\n                const node = document.createTextNode('');\n                startEl.parentNode?.insertBefore(node, startEl);\n                startNode = node;\n                startOffset = 0;\n            }\n            const endEl = uneditable(endNode);\n            if (endEl) {\n                const node = document.createTextNode('');\n                endEl.parentNode?.insertBefore(node, endEl);\n                endNode = node;\n                endOffset = 0;\n            }\n        }\n        s.setBaseAndExtent(startNode, startOffset, endNode, endOffset);\n        editor.normalize(); // collapse empty text nodes\n    }\n    function uneditable(node) {\n        while (node && node !== editor) {\n            if (node.nodeType === Node.ELEMENT_NODE) {\n                const el = node;\n                if (el.getAttribute('contenteditable') == 'false') {\n                    return el;\n                }\n            }\n            node = node.parentNode;\n        }\n    }\n    function beforeCursor() {\n        const s = getSelection();\n        const r0 = s.getRangeAt(0);\n        const r = document.createRange();\n        r.selectNodeContents(editor);\n        r.setEnd(r0.startContainer, r0.startOffset);\n        return r.toString();\n    }\n    function afterCursor() {\n        const s = getSelection();\n        const r0 = s.getRangeAt(0);\n        const r = document.createRange();\n        r.selectNodeContents(editor);\n        r.setStart(r0.endContainer, r0.endOffset);\n        return r.toString();\n    }\n    function handleNewLine(event) {\n        if (event.key === 'Enter') {\n            const before = beforeCursor();\n            const after = afterCursor();\n            let [padding] = findPadding(before);\n            let newLinePadding = padding;\n            // If last symbol is \"{\" ident new line\n            if (options.indentOn.test(before)) {\n                newLinePadding += options.tab;\n            }\n            // Preserve padding\n            if (newLinePadding.length > 0) {\n                preventDefault(event);\n                event.stopPropagation();\n                insert('\\n' + newLinePadding);\n            }\n            else {\n                legacyNewLineFix(event);\n            }\n            // Place adjacent \"}\" on next line\n            if (newLinePadding !== padding && options.moveToNewLine.test(after)) {\n                const pos = save();\n                insert('\\n' + padding);\n                restore(pos);\n            }\n        }\n    }\n    function legacyNewLineFix(event) {\n        // Firefox does not support plaintext-only mode\n        // and puts <div><br></div> on Enter. Let's help.\n        if (isLegacy && event.key === 'Enter') {\n            preventDefault(event);\n            event.stopPropagation();\n            if (afterCursor() == '') {\n                insert('\\n ');\n                const pos = save();\n                pos.start = --pos.end;\n                restore(pos);\n            }\n            else {\n                insert('\\n');\n            }\n        }\n    }\n    function handleSelfClosingCharacters(event) {\n        const open = `([{'\"`;\n        const close = `)]}'\"`;\n        if (open.includes(event.key)) {\n            preventDefault(event);\n            const pos = save();\n            const wrapText = pos.start == pos.end ? '' : getSelection().toString();\n            const text = event.key + wrapText + close[open.indexOf(event.key)];\n            insert(text);\n            pos.start++;\n            pos.end++;\n            restore(pos);\n        }\n    }\n    function handleTabCharacters(event) {\n        if (event.key === 'Tab') {\n            preventDefault(event);\n            if (event.shiftKey) {\n                const before = beforeCursor();\n                let [padding, start] = findPadding(before);\n                if (padding.length > 0) {\n                    const pos = save();\n                    // Remove full length tab or just remaining padding\n                    const len = Math.min(options.tab.length, padding.length);\n                    restore({ start, end: start + len });\n                    document.execCommand('delete');\n                    pos.start -= len;\n                    pos.end -= len;\n                    restore(pos);\n                }\n            }\n            else {\n                insert(options.tab);\n            }\n        }\n    }\n    function handleUndoRedo(event) {\n        if (isUndo(event)) {\n            preventDefault(event);\n            at--;\n            const record = history[at];\n            if (record) {\n                editor.innerHTML = record.html;\n                restore(record.pos);\n            }\n            if (at < 0)\n                at = 0;\n        }\n        if (isRedo(event)) {\n            preventDefault(event);\n            at++;\n            const record = history[at];\n            if (record) {\n                editor.innerHTML = record.html;\n                restore(record.pos);\n            }\n            if (at >= history.length)\n                at--;\n        }\n    }\n    function recordHistory() {\n        if (!focus)\n            return;\n        const html = editor.innerHTML;\n        const pos = save();\n        const lastRecord = history[at];\n        if (lastRecord) {\n            if (lastRecord.html === html\n                && lastRecord.pos.start === pos.start\n                && lastRecord.pos.end === pos.end)\n                return;\n        }\n        at++;\n        history[at] = { html, pos };\n        history.splice(at + 1);\n        const maxHistory = 300;\n        if (at > maxHistory) {\n            at = maxHistory;\n            history.splice(0, 1);\n        }\n    }\n    function handlePaste(event) {\n        if (event.defaultPrevented)\n            return;\n        preventDefault(event);\n        const originalEvent = event.originalEvent ?? event;\n        const text = originalEvent.clipboardData.getData('text/plain').replace(/\\r\\n?/g, '\\n');\n        const pos = save();\n        insert(text);\n        doHighlight(editor);\n        restore({\n            start: Math.min(pos.start, pos.end) + text.length,\n            end: Math.min(pos.start, pos.end) + text.length,\n            dir: '<-',\n        });\n    }\n    function handleCut(event) {\n        const pos = save();\n        const selection = getSelection();\n        const originalEvent = event.originalEvent ?? event;\n        originalEvent.clipboardData.setData('text/plain', selection.toString());\n        document.execCommand('delete');\n        doHighlight(editor);\n        restore({\n            start: Math.min(pos.start, pos.end),\n            end: Math.min(pos.start, pos.end),\n            dir: '<-',\n        });\n        preventDefault(event);\n    }\n    function visit(editor, visitor) {\n        const queue = [];\n        if (editor.firstChild)\n            queue.push(editor.firstChild);\n        let el = queue.pop();\n        while (el) {\n            if (visitor(el) === 'stop')\n                break;\n            if (el.nextSibling)\n                queue.push(el.nextSibling);\n            if (el.firstChild)\n                queue.push(el.firstChild);\n            el = queue.pop();\n        }\n    }\n    function isCtrl(event) {\n        return event.metaKey || event.ctrlKey;\n    }\n    function isUndo(event) {\n        return isCtrl(event) && !event.shiftKey && getKeyCode(event) === 'Z';\n    }\n    function isRedo(event) {\n        return isCtrl(event) && event.shiftKey && getKeyCode(event) === 'Z';\n    }\n    function isCopy(event) {\n        return isCtrl(event) && getKeyCode(event) === 'C';\n    }\n    function getKeyCode(event) {\n        let key = event.key || event.keyCode || event.which;\n        if (!key)\n            return undefined;\n        return (typeof key === 'string' ? key : String.fromCharCode(key)).toUpperCase();\n    }\n    function insert(text) {\n        text = text\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#039;');\n        document.execCommand('insertHTML', false, text);\n    }\n    function debounce(cb, wait) {\n        let timeout = 0;\n        return (...args) => {\n            clearTimeout(timeout);\n            timeout = window.setTimeout(() => cb(...args), wait);\n        };\n    }\n    function findPadding(text) {\n        // Find beginning of previous line.\n        let i = text.length - 1;\n        while (i >= 0 && text[i] !== '\\n')\n            i--;\n        i++;\n        // Find padding of the line.\n        let j = i;\n        while (j < text.length && /[ \\t]/.test(text[j]))\n            j++;\n        return [text.substring(i, j) || '', i, j];\n    }\n    function toString() {\n        return editor.textContent || '';\n    }\n    function preventDefault(event) {\n        event.preventDefault();\n    }\n    function getSelection() {\n        if (editor.parentNode?.nodeType == Node.DOCUMENT_FRAGMENT_NODE) {\n            return editor.parentNode.getSelection();\n        }\n        return window.getSelection();\n    }\n    return {\n        updateOptions(newOptions) {\n            Object.assign(options, newOptions);\n        },\n        updateCode(code) {\n            editor.textContent = code;\n            doHighlight(editor);\n            onUpdate(code);\n        },\n        onUpdate(callback) {\n            onUpdate = callback;\n        },\n        toString,\n        save,\n        restore,\n        recordHistory,\n        destroy() {\n            for (let [type, fn] of listeners) {\n                editor.removeEventListener(type, fn);\n            }\n        },\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { memoize } from '../../decorators/memoize';\n/** Deferred object that represents promise with its resolve/reject methods */\nexport class Deferred {\n    constructor() {\n        this._status = 'pending';\n    }\n    /** @returns promise based on {@link Deferred} state*/\n    get promise() {\n        if (this._status === 'resolved')\n            return Promise.resolve(this._value);\n        if (this._status === 'rejected')\n            return Promise.reject(this._value);\n        return new Promise((res, rej) => {\n            this._callbacks = [res, rej];\n        });\n    }\n    /** Resolves deferred promise */\n    resolve(arg) {\n        if (this._status === 'pending') {\n            this._value = arg;\n            this._status = 'resolved';\n            this._callbacks && this._callbacks[0](arg);\n        }\n        return this;\n    }\n    /** Rejects deferred promise */\n    reject(arg) {\n        if (this._status === 'pending') {\n            this._value = arg;\n            this._status = 'rejected';\n            this._callbacks && this._callbacks[1](arg);\n        }\n        return this;\n    }\n}\n__decorate([\n    memoize()\n], Deferred.prototype, \"promise\", null);\n/** Creates Deferred Object that wraps promise and its resolve and reject callbacks */\nexport function createDeferred() {\n    return new Deferred();\n}\n","// Prevent Prism from auto-highlighting\nwindow.Prism = window.Prism || {};\nif (typeof Prism.manual === 'undefined') Prism.manual = true;\n\nimport React from 'jsx-dom';\nimport Prism from 'prismjs';\nimport 'prismjs/plugins/normalize-whitespace/prism-normalize-whitespace';\n\nimport {CodeJar} from 'codejar';\n\nimport {debounce} from '@exadel/esl/modules/esl-utils/async/debounce';\nimport {bind, decorate, memoize, jsonAttr} from '@exadel/esl/modules/esl-utils/decorators';\n\nimport {UIPPlugin} from '../../core/base/plugin';\n\nexport interface UIPEditorConfig {\n  wrap?: number;\n}\n\n/**\n * Editor {@link UIPPlugin} custom element definition\n * Uses Codejar code editor to provide an ability to modify UIP state markup\n * @extends UIPPlugin\n */\nexport class UIPEditor extends UIPPlugin {\n  public static override is = 'uip-editor';\n\n  /** Highlight method declaration  */\n  public static highlight: (editor: HTMLElement) => void = Prism.highlightElement;\n\n  /** Editor's {@link UIPEditorConfig} passed through attribute */\n  @jsonAttr({defaultValue: {wrap: 60}})\n  private editorConfig: Partial<UIPEditorConfig>;\n\n  /** Wrapped {@link https://medv.io/codejar/ Codejar} editor instance */\n  @memoize()\n  protected get editor(): CodeJar {\n    return CodeJar(this.$code, UIPEditor.highlight, { tab: '\\t' });\n  }\n\n  @memoize()\n  protected get $code(): HTMLElement {\n    return (<pre class='language-html editor-content'><code/></pre>) as HTMLElement;\n  }\n\n  /** @returns editor's content */\n  public get value(): string {\n    return this.editor.toString();\n  }\n\n  /** Preformat and set editor's content */\n  public set value(value: string) {\n    this.editor.updateCode(this.normalizeValue(value));\n  }\n\n  protected override connectedCallback() {\n    super.connectedCallback();\n    this.innerHTML = '';\n\n    // Prefill content\n    this.appendChild(this.$inner);\n    this.$inner.classList.add('esl-scrollable-content');\n    this.$inner.append(<esl-scrollbar target=\"::parent\"/>);\n    this.$inner.append(this.$code);\n\n    // Initial update\n    this._onChange();\n    this.editor.onUpdate(this._onChange);\n    this._onRootStateChange();\n  }\n\n  protected override disconnectedCallback(): void {\n    this.editor?.destroy();\n    memoize.clear(this, 'editor');\n    super.disconnectedCallback();\n  }\n\n  /** Preformat value, calls before setting to editor */\n  protected normalizeValue(value: string): string {\n    const {wrap} = this.editorConfig;\n    const settings: Record<string, any> = {};\n    if (wrap) settings['break-lines'] = wrap;\n    return Prism.plugins.NormalizeWhitespace.normalize(value, settings);\n  }\n\n  /** Callback to call on editor's content changes */\n  @decorate(debounce, 1000)\n  protected _onChange() {\n    this.model!.setHtml(this.value, this);\n  }\n\n  /** Change editor's markup from markup state changes */\n  @bind\n  protected _onRootStateChange(): void {\n    if (this.model!.lastModifier === this) return;\n    const markup = this.model!.html;\n    setTimeout(() => {\n      this.value = markup;\n    });\n  }\n}\n","import { createDeferred } from './promise/defered';\n/**\n * Creates a debounced function that implements {@link Debounced}.\n * Debounced function delays invoking func until after wait milliseconds have elapsed\n * since the last time the debounced function was invoked.\n * The func is invoked with the last arguments provided to the debounced function.\n * @param fn - function to decorate\n * @param wait - time to debounce\n * @param thisArg - optional context to call original function, use debounced method call context if not defined\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function debounce(fn, wait = 10, thisArg) {\n    let timeout = null;\n    let deferred = null;\n    function debouncedSubject(...args) {\n        deferred = deferred || createDeferred();\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = window.setTimeout(() => {\n            timeout = null;\n            // fn.apply to save call context\n            deferred.resolve(fn.apply(thisArg || this, args));\n            deferred = null;\n        }, wait);\n    }\n    function cancel() {\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = null;\n        deferred === null || deferred === void 0 ? void 0 : deferred.reject();\n        deferred = null;\n    }\n    Object.defineProperty(debouncedSubject, 'promise', {\n        get: () => deferred ? deferred.promise : Promise.resolve()\n    });\n    Object.defineProperty(debouncedSubject, 'cancel', {\n        writable: false,\n        enumerable: false,\n        value: cancel\n    });\n    return debouncedSubject;\n}\n","/**\n * Object with messages used to indicate\n * the type of warning\n */\nexport const WARNING_MSG = {\n  inconsistent: 'Inconsistent value',\n  multiple: 'Multiple values',\n  invalid: 'Invalid setting value',\n  noTarget: 'No setting target',\n  noMatch: 'No select match'\n};\n","import {attr, ESLBaseElement} from '@exadel/esl/modules/esl-base-element/core';\nimport {EventUtils} from '@exadel/esl/modules/esl-utils/dom/events';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport {UIPSettings} from './settings';\nimport {WARNING_MSG} from '../../utils/warning-msg';\nimport {getAttr, setAttr} from '@exadel/esl/modules/esl-utils/dom/attr';\n\n/**\n * Custom element for manipulating with elements attributes\n * Custom settings should extend this class\n * to become connected with {@link UIPSettings}\n */\nexport abstract class UIPSetting extends ESLBaseElement {\n  static is = 'uip-setting';\n\n  /** {@link target} attribute which is changed by setting */\n  @attr() public attribute: string;\n  /** Target to which setting's changes are attached */\n  public get target(): string {\n    return getAttr(this, 'target', this.$settings.target);\n  }\n  /** Sets target to which setting's changes are attached */\n  public set target(target: string) {\n    setAttr(this, 'target', target);\n  }\n\n  /** Closest {@link UIPSettings} element */\n  @memoize()\n  public get $settings() {\n    return this.closest(UIPSettings.is) as UIPSettings;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.classList.add(UIPSetting.is);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles setting value change and\n   * dispatches `uip:change` event\n   */\n  @listen('change')\n  protected _onChange(e: Event): void {\n    e.preventDefault();\n    EventUtils.dispatch(this, 'uip:change');\n  }\n\n  /**\n   * Changes markup in {@link UIPStateModel}\n   * with setting's value\n   */\n  public applyTo(model: UIPStateModel): void {\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      value: this.getDisplayedValue(),\n      modifier: this.$settings\n    };\n    this.isValid() ? model.changeAttribute(cfg) : this.setInconsistency(WARNING_MSG.invalid);\n  }\n\n  /**\n   * Updates setting's value with\n   * active markup from {@link UIPStateModel}\n   */\n  public updateFrom(model: UIPStateModel): void {\n    this.disabled = false;\n    const values = model.getAttribute(this.target, this.attribute);\n\n    if (!values.length) {\n      this.disabled = true;\n      this.setInconsistency(WARNING_MSG.noTarget);\n    } else if (values.some(value => value !== values[0])) {\n      this.setInconsistency(WARNING_MSG.multiple);\n    } else {\n      this.setValue(values[0]);\n    }\n  }\n\n  /**\n   * Checks whether setting's value is valid or not\n   * Use for custom validation\n   */\n  protected isValid(): boolean {\n    return true;\n  }\n\n  /**\n   * Indicates setting's incorrect state\n   * (e.g. multiple attribute values or no target provided)\n   */\n  protected setInconsistency(msg: string = WARNING_MSG.inconsistent): void {\n    return;\n  }\n\n  /**\n   * Disable setting\n   * By default is used when there are no setting's targets\n   */\n  set disabled(force: boolean) {\n    return;\n  }\n\n  /**\n   * Gets setting's value\n   * to update markup in {@link UIPStateModel}\n   */\n  protected abstract getDisplayedValue(): string | boolean;\n\n  /**\n   * Sets setting's value\n   * after processing markup in {@link UIPStateModel}\n   */\n  protected abstract setValue(value: string | null): void;\n}\n","import {bind} from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPPlugin} from '../../core/base/plugin';\nimport {UIPSetting} from './setting';\n\nimport * as React from 'jsx-dom';\n\n/**\n * Settings {@link UIPPlugin} custom element definition\n * Container for {@link UIPSetting}\n * @extends UIPPlugin\n */\nexport class UIPSettings extends UIPPlugin {\n  public static is = 'uip-settings';\n\n  /**\n   * Attribute to set all inner {@link UIPSetting settings'}\n   * {@link UIPSetting#target targets}\n   */\n  @attr() public target: string;\n  @attr({defaultValue: 'Settings'}) public label: string;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.updateInner();\n  }\n\n  /** Initializes settings layout */\n  protected updateInner() {\n    const $content = <div className=\"settings-list esl-scrollable-content\">\n      <esl-scrollbar target=\"::prev(.settings-list)\"></esl-scrollbar>\n    </div>;\n    $content.append(...this.childNodes);\n    this.$inner.appendChild($content);\n    this.appendChild(this.$inner);\n  }\n\n  protected disconnectedCallback(): void {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Handles `uip:change` event to\n   * apply changes to the state\n   */\n  @listen('uip:change')\n  protected _onSettingChanged(e: any) {\n    e.stopPropagation();\n    if (!this.model) return;\n    (e.target as UIPSetting).applyTo(this.model);\n  }\n\n  /** Collects all {@link UIPSetting} items */\n  protected get settings(): UIPSetting[] {\n    return Array.from(this.getElementsByClassName(UIPSetting.is)) as UIPSetting[];\n  }\n\n  /** Updates {@link UIPSetting} values */\n  @bind\n  protected _onRootStateChange(): void {\n    this.settings.forEach(setting => setting.updateFrom(this.model!));\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\nimport * as React from 'jsx-dom';\n\n/**\n * Custom setting for inputting attribute's value\n * @extends UIPSetting\n */\nexport class UIPTextSetting extends UIPSetting {\n  public static is = 'uip-text-setting';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n\n  /** Text input to change setting's value */\n  @memoize()\n  protected get $field() {\n    return <input type=\"text\" name={this.label}/> as HTMLInputElement;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.innerHTML = '';\n\n    const $inner = <label>\n      {this.label}\n      {this.$field}\n    </label>;\n\n    this.appendChild($inner);\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.value;\n  }\n\n  protected setValue(value: string | null): void {\n    this.$field.value = value || '';\n    this.$field.placeholder = '';\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.value = '';\n    this.$field.placeholder = msg;\n  }\n\n  set disabled(force: boolean) {\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","/** Class for processing attribute's tokens */\nexport default class TokenListUtils {\n\n  /**\n   * Divides string by whitespace regexp\n   * @return array of items or empty array\n   */\n  static split(str: string | null): string[] {\n    return str?.split(/\\s+/) || [];\n  }\n\n  /** Creates new string by concatenating all passed elements */\n  static join(values: any[]): string {\n    return values.join(' ');\n  }\n\n  /** Checks if all array elements are equal */\n  static hasSameElements(values: any[]): boolean {\n    return values.every(val => val === values[0]);\n  }\n\n  /** Checks whether two arrays have same elements or not */\n  static equals<T>(arr1: T[], arr2: T[]): boolean {\n    return TokenListUtils.contains(arr1, arr2) && TokenListUtils.contains(arr2, arr1);\n  }\n\n  /** Checks if array contains all elements from subArray */\n  static contains<T>(array: T[], subArray: T[]): boolean {\n    const set = new Set(array);\n    return subArray.every(val => set.has(val));\n  }\n\n  /** Gets array which contains only common elements from arrays */\n  static intersection<T>(...rest: T[][]): T[];\n  static intersection<T>(a: T[], b: T[], ...rest: T[][]): T[] {\n    if (rest.length) return TokenListUtils.intersection(a, TokenListUtils.intersection(b, ...rest));\n    return b ? a.filter(Set.prototype.has, new Set(b)) : a;\n  }\n\n  /** Removes all element appearances from array */\n  static remove<T>(array: T[], element: T): T[] {\n    return array.filter(el => el !== element);\n  }\n}\n","import {attr, boolAttr, listen} from '@exadel/esl/modules/esl-base-element/core';\nimport {randUID} from '@exadel/esl/modules/esl-utils/misc/uid';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport type {ESLSelect} from '@exadel/esl/modules/esl-forms/esl-select/core';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport TokenListUtils from '../../utils/token-list-utils';\nimport {WARNING_MSG} from '../../utils/warning-msg';\nimport {UIPRoot} from '../../registration';\n\n\n/**\n * Custom setting for selecting attribute's value\n * @extends UIPSetting\n */\nexport class UIPSelectSetting extends UIPSetting {\n  public static is = 'uip-select-setting';\n  /** Option displayed when setting has inconsistent state */\n  public static inconsistentValue = 'inconsistent';\n  /** CSS selector for dropdown element */\n  private static dropdownClass = 'uip-select-dropdown';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n  /**\n   * Attribute to set mode for setting\n   * `replace` - replacing [attribute's]{@link UIPSetting#attribute} value with setting's value\n   * `append` - appending [attribute's]{@link UIPSetting#attribute} value to attribute's value\n   */\n  @attr({defaultValue: 'replace'}) public mode: 'replace' | 'append';\n  /** Indicates whether setting supports multiple values selected or not */\n  @boolAttr() public multiple: boolean;\n  /** Select field to change setting's value */\n  @memoize()\n  protected get $field(): ESLSelect {\n    const $field = document.createElement('esl-select');\n    $field.name = this.label;\n    $field.dropdownClass = UIPSelectSetting.dropdownClass;\n    $field.$select = this.select;\n    $field.append(this.select);\n    return $field;\n  }\n\n  /** Label element for input */\n  @memoize()\n  protected get $label(): HTMLLabelElement {\n    const $label = document.createElement('label');\n    $label.innerText = this.label;\n    return $label;\n  }\n\n  /** Collects all options' values */\n  protected get settingOptions(): string[] {\n    return this.$field.options.map(opt => opt.value);\n  }\n\n  /** Initialization of {@link ESLSelect} */\n  @memoize()\n  protected get select(): HTMLSelectElement {\n    const select = document.createElement('select');\n    select.setAttribute('esl-select-target', '');\n    select.multiple = this.multiple;\n    select.id = `${UIPSelectSetting.is}-${randUID()}`;\n    this.querySelectorAll('option').forEach(option => select.add(option));\n    return select;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.$label.htmlFor = this.$field.$select.id;\n\n    this.innerHTML = '';\n    this.appendChild(this.$label);\n    this.appendChild(this.$field);\n  }\n\n  applyTo(model: UIPStateModel) {\n    if (this.mode === 'replace') return super.applyTo(model);\n\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      modifier: this.$settings,\n      transform: this.transformValue.bind(this, this.getDisplayedValue())\n    };\n\n    model.changeAttribute(cfg);\n  }\n\n  /** Function to transform(update) attribute value */\n  transformValue(value: string, attrValue: string | null ) {\n    if (!attrValue) return value || null;\n\n    const attrTokens = this.settingOptions.reduce((tokens, option) =>\n      TokenListUtils.remove(tokens, option), TokenListUtils.split(attrValue));\n    value && attrTokens.push(value);\n\n    return TokenListUtils.join(attrTokens);\n  }\n\n  updateFrom(model: UIPStateModel) {\n    this.reset();\n    const attrValues = model.getAttribute(this.target, this.attribute);\n\n    if (!attrValues.length) {\n      this.disabled = true;\n      return this.setInconsistency(WARNING_MSG.noTarget);\n    }\n\n    this.mode === 'replace' ? this.replaceFrom(attrValues) : this.appendFrom(attrValues);\n  }\n\n  /** Updates setting's value for replace {@link mode} */\n  protected replaceFrom(attrValues: (string | null)[]): void {\n    if (!TokenListUtils.hasSameElements(attrValues)) return this.setInconsistency(WARNING_MSG.multiple);\n\n    if (attrValues[0] !== null &&\n      TokenListUtils.contains(this.settingOptions, TokenListUtils.split(attrValues[0]))) {\n      return this.setValue(attrValues[0]);\n    }\n\n    return this.multiple ? this.setValue('') : this.setInconsistency(WARNING_MSG.noMatch);\n  }\n\n  /** Updates setting's value for {@link mode} = \"append\" */\n  protected appendFrom(attrValues: (string | null)[]): void {\n    // array of each attribute's value intersection with select options\n    const valuesOptions = attrValues.map(val => TokenListUtils.intersection(this.settingOptions, TokenListUtils.split(val)));\n\n    // make empty option active if no options intersections among attribute values\n    if (this.settingOptions.includes('') && valuesOptions.every(inter => !inter.length)) {\n      return this.setValue('');\n    }\n\n    // common options among all attribute values\n    const commonOptions = TokenListUtils.intersection(...valuesOptions);\n\n    if (this.multiple || commonOptions.length) return this.setValue(TokenListUtils.join(commonOptions));\n\n    return this.setInconsistency(TokenListUtils.hasSameElements(attrValues) ?\n      WARNING_MSG.noMatch : WARNING_MSG.multiple);\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.values.join(' ');\n  }\n\n  protected setValue(value: string): void {\n    this.$$off(this._onChange);\n    value.split(' ').forEach(opt => this.$field.setSelected(opt, true));\n    this.$$on(this._onChange);\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    const inconsistentOption = new Option(msg, UIPSelectSetting.inconsistentValue,\n      false, true);\n    inconsistentOption.disabled = true;\n\n    this.$field.$select.add(inconsistentOption, 0);\n    this.$field.update();\n  }\n\n  /** Handles setting `change` event to clear inconsistent value */\n  @listen('change')\n  protected clearInconsistency(): void {\n    this.select.remove(this.settingOptions.indexOf(UIPSelectSetting.inconsistentValue));\n  }\n\n\n  /**\n   * Handles {@link UIPRoot} `uip:configchange` event to\n   * manage dropdown theme\n   */\n  @listen({event: 'uip:configchange', target: `::parent(.${UIPRoot.is})`})\n  protected onRootThemeChange(e: CustomEvent): void {\n    if (e.detail.attribute !== 'dark-theme') return;\n    let dropdownClass = UIPSelectSetting.dropdownClass;\n    if (e.detail.value !== null) dropdownClass += ' uip-dark-dropdown';\n    this.$field.dropdownClass = dropdownClass;\n  }\n\n  set disabled(force: boolean) {\n    this.$field.toggleAttribute('disabled', force);\n  }\n\n  /** Resets {@link $field} value. */\n  protected reset(): void {\n    this.disabled = false;\n    this.$field.options.forEach(opt => opt.selected = false);\n    this.$field.$select.remove(this.settingOptions.indexOf(UIPSelectSetting.inconsistentValue));\n  }\n\n  public static register() {\n    customElements.whenDefined('esl-select').then(() => super.register());\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {ChangeAttrConfig, UIPStateModel} from '../../core/base/model';\nimport TokenListUtils from '../../utils/token-list-utils';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\nimport * as React from 'jsx-dom';\n\n/**\n * Custom setting to add/remove attributes or append values to attribute\n * @extends UIPSetting\n */\nexport class UIPBoolSetting extends UIPSetting {\n  public static is = 'uip-bool-setting';\n\n  /** Setting's visible name */\n  @attr({defaultValue: ''}) public label: string;\n  /**\n   * Value for updating [attribute's]{@link UIPSetting#attribute} value\n   * If it's unset, setting adds/removes [attribute]{@link UIPSetting#attribute}\n   */\n  @attr({defaultValue: ''}) public value: string;\n  /**\n   * Attribute to set mode for setting\n   * `replace` - replacing [attribute's]{@link UIPSetting#attribute} value with setting's value\n   * `append` - appending [attribute's]{@link UIPSetting#attribute} value to attribute's value\n   */\n  @attr({defaultValue: 'replace'}) public mode: 'replace' | 'append';\n\n  /** Checkbox field to change setting's value */\n  @memoize()\n  protected get $field(): HTMLInputElement {\n    const $field = document.createElement('input');\n    $field.type = 'checkbox';\n    $field.name = this.label;\n    return $field;\n  }\n\n  /** Container element for displaying inconsistency message */\n  @memoize()\n  protected get $inconsistencyMarker() {\n    return <div className=\"inconsistency-marker\"/> as HTMLDivElement;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.innerHTML = '';\n\n    const $inner = <label>\n      {this.label}\n      {this.$field}\n    </label>;\n    this.insertBefore($inner, this.firstChild);\n  }\n\n  applyTo(model: UIPStateModel): void {\n    if (this.mode === 'replace') return super.applyTo(model);\n\n    const cfg: ChangeAttrConfig = {\n      target: this.target,\n      attribute: this.attribute,\n      modifier: this.$settings,\n      transform: this.transform.bind(this, this.getDisplayedValue()),\n    };\n\n    model.changeAttribute(cfg);\n  }\n\n  /** Function to transform(update) attribute value */\n  transform(value: string | false,  attrValue: string | null): string | null {\n    if (!attrValue) return value || null;\n\n    const attrTokens = TokenListUtils.remove(TokenListUtils.split(attrValue), this.value);\n    value && attrTokens.push(this.value);\n\n    return TokenListUtils.join(attrTokens);\n  }\n\n  updateFrom(model: UIPStateModel): void {\n    this.disabled = false;\n    const attrValues = model.getAttribute(this.target, this.attribute);\n\n    if (!attrValues.length) {\n      this.disabled = true;\n      return this.setInconsistency(WARNING_MSG.noTarget);\n    }\n\n    this.mode === 'replace' ? this.updateReplace(attrValues) : this.updateAppend(attrValues);\n  }\n\n  /** Updates setting's value for replace {@link mode} */\n  protected updateReplace(attrValues: (string | null)[]): void {\n    if (!TokenListUtils.hasSameElements(attrValues)) {\n      return this.setInconsistency(WARNING_MSG.multiple);\n    }\n\n    return this.setValue((this.value && attrValues[0] !== this.value) ? null : attrValues[0]);\n  }\n\n  /** Updates setting's value for append {@link mode} */\n  protected updateAppend(attrValues: (string | null)[]): void {\n    const containsFunction = (val: string | null) =>\n      TokenListUtils.contains(TokenListUtils.split(val), [this.value]);\n\n    if (attrValues.every(containsFunction)) return this.setValue(this.value);\n    if (!attrValues.some(containsFunction)) return this.setValue(null);\n\n    return this.setInconsistency(WARNING_MSG.multiple);\n  }\n\n  protected getDisplayedValue(): string | false {\n    if (this.value) {\n      return this.$field.checked ? this.value : false;\n    }\n\n    return this.$field.checked ? '' : false;\n  }\n\n  protected setValue(value: string | null): void {\n    if (this.value) {\n      this.$field.checked = value === this.value;\n    } else {\n      this.$field.checked = value !== null;\n    }\n    this.$inconsistencyMarker.remove();\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.checked = false;\n    this.$inconsistencyMarker.innerText = msg;\n    this.append(this.$inconsistencyMarker);\n  }\n\n  set disabled(force: boolean) {\n    this.$inconsistencyMarker.classList.toggle('disabled', force);\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","import {attr} from '@exadel/esl/modules/esl-base-element/core';\nimport {memoize} from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport {listen} from '@exadel/esl/modules/esl-utils/decorators/listen';\n\nimport {UIPSetting} from '../../plugins/settings/setting';\nimport {WARNING_MSG} from '../../utils/warning-msg';\n\nimport * as React from 'jsx-dom';\n\nexport class UIPSliderSetting extends UIPSetting {\n  public static is = 'uip-slider-setting';\n\n  /** Setting's visible name. */\n  @attr({defaultValue: ''}) public label: string;\n  /** Minimum range value. */\n  @attr({defaultValue: '0'}) public min: string;\n  /** Maximum range value. */\n  @attr({defaultValue: '0'}) public max: string;\n  /** Step for range. */\n  @attr({defaultValue: '0'}) public step: string;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    const $inner =\n      <>\n        <label>\n          <span>{this.label}</span>\n          {this.$field}\n        </label>\n        {this.$fieldValue}\n      </>;\n\n    this.append($inner);\n  }\n\n  protected disconnectedCallback() {\n    this.innerHTML = '';\n    super.disconnectedCallback();\n  }\n\n  /** Range input to change setting's value */\n  @memoize()\n  protected get $field() {\n    return <input type=\"range\" min={this.min} max={this.max} step={this.step}/> as HTMLInputElement;\n  }\n\n  /** Container for current value */\n  @memoize()\n  protected get $fieldValue() {\n    return <div className=\"slider-value\"></div>;\n  }\n\n  /** Handles `input` event to display its current value */\n  @listen('input')\n  protected updateSliderValue() {\n    this.$fieldValue.textContent = `Value: ${this.$field.value}`;\n  }\n\n  protected getDisplayedValue(): string {\n    return this.$field.value;\n  }\n\n  protected setValue(value: string | null): void {\n    this.$field.value = value || this.min;\n    this.updateSliderValue();\n  }\n\n  protected setInconsistency(msg = WARNING_MSG.inconsistent): void {\n    this.$field.value = this.min;\n    this.$fieldValue.textContent = msg;\n  }\n\n  set disabled(force: boolean) {\n    this.$fieldValue.classList.toggle('disabled', force);\n    this.$field.toggleAttribute('disabled', force);\n  }\n}\n","import {ESLSelect} from '@exadel/esl/modules/esl-forms/esl-select/core';\nimport {ESLImage} from '@exadel/esl/modules/esl-image/core';\nimport {ESLScrollbar} from '@exadel/esl/modules/esl-scrollbar/core';\nimport {ESLTrigger} from '@exadel/esl/modules/esl-trigger/core';\nimport {ESLToggleable} from '@exadel/esl/modules/esl-toggleable/core';\nimport {ESLAlert} from '@exadel/esl/modules/esl-alert/core';\n\nimport {init} from '../../src/registration';\n\nESLSelect.register();\nESLImage.register();\nESLScrollbar.register();\nESLTrigger.register();\nESLToggleable.register();\nESLAlert.register();\nESLAlert.init();\ninit();\n","import {UIPRoot} from './base/root';\nimport {UIPStateModel, ChangeAttrConfig} from './base/model';\nimport {UIPPlugin} from './base/plugin';\n\nimport {UIPPreview} from './preview/preview';\n\nexport {UIPRoot, UIPPlugin, UIPStateModel, UIPPreview, ChangeAttrConfig};\n\nexport const registerCore = () => {\n  UIPRoot.register();\n  UIPPreview.register();\n};\n","import {UIPHeader} from './header/header';\nimport {UIPOptions} from './header/options/options';\nimport {UIPOptionIcons} from './header/options/OptionIcons';\nimport {UIPSnippets} from './header/snippets/snippets';\nimport {UIPEditor} from './editor/editor';\nimport {UIPSettings} from './settings/settings';\nimport {registeredSettings} from '../registration';\n\nexport {UIPOptions, UIPOptionIcons, UIPEditor, UIPSettings, UIPSnippets, UIPHeader};\n\nexport const registerPlugins = () => {\n  UIPHeader.register();\n  UIPOptions.register();\n  UIPSnippets.register();\n  UIPEditor.register();\n  registeredSettings().then(() => UIPSettings.register());\n};\n","import {UIPSetting} from '../plugins/settings/setting';\nimport {UIPTextSetting} from './text-setting/text-setting';\nimport {UIPSelectSetting} from './select-setting/select-setting';\nimport {UIPBoolSetting} from './bool-setting/bool-setting';\nimport {UIPSliderSetting} from './slider-setting/slider-setting';\n\nexport {UIPSetting, UIPTextSetting, UIPBoolSetting, UIPSelectSetting, UIPSliderSetting};\n\nexport const registerSettings = () => {\n  UIPBoolSetting.register();\n  UIPTextSetting.register();\n  UIPSelectSetting.register();\n  UIPSliderSetting.register();\n};\n\nexport const registeredSettings = () => {\n  return Promise.all([\n  UIPBoolSetting.registered,\n  UIPTextSetting.registered,\n  UIPSelectSetting.registered,\n  UIPSliderSetting.registered,\n  ]);\n};\n"],"names":["Prism","assign","Object","obj1","obj2","name","hasOwnProperty","settingsConfig","NormalizeWhitespace","prototype","setDefaults","defaults","this","normalize","input","settings","methodName","replace","match","firstChar","toUpperCase","call","leftTrim","rightTrim","tabsToSpaces","spaces","Array","join","spacesToTabs","RegExp","removeTrailing","removeInitialLineFeed","removeIndent","indents","length","sort","a","b","indent","tabs","breakLines","characters","lines","split","i","tabLen","line","len","j","tl","module","exports","plugins","hooks","add","env","Normalizer","util","isActive","element","parentNode","code","pre","nodeName","toLowerCase","key","settingType","hasAttribute","value","JSON","parse","getAttribute","_error","children","childNodes","before","after","codeFound","node","nodeValue","removeChild","KeepMarkup","html","innerHTML","textContent","str","res","charCodeAt","_self","lang","uniqueId","plainTextGrammar","_","manual","disableWorkerMessageHandler","encode","tokens","Token","type","content","alias","isArray","map","o","toString","slice","objId","obj","defineProperty","clone","deepClone","visited","id","forEach","v","getLanguage","m","exec","className","parentElement","setLanguage","language","classList","currentScript","document","Error","err","src","stack","scripts","getElementsByTagName","defaultActivation","no","contains","languages","plain","plaintext","text","txt","extend","redef","insertBefore","inside","insert","root","grammar","ret","token","newToken","old","DFS","callback","property","propertyType","highlightAll","async","highlightAllUnder","container","selector","run","elements","apply","querySelectorAll","highlightElement","parent","insertHighlightedCode","highlightedCode","setAttribute","Worker","worker","filename","onmessage","evt","data","postMessage","stringify","immediateClose","highlight","tokenize","rest","tokenList","LinkedList","addAfter","head","matchGrammar","list","array","next","tail","push","toArray","all","callbacks","matchedStr","matchPattern","pattern","pos","lookbehind","lastIndex","lookbehindLength","index","startNode","startPos","rematch","patterns","cause","patternObj","greedy","global","flags","source","currentNode","reach","removeCount","from","to","p","k","matchStr","removeFrom","prev","removeRange","nestedRematch","newNode","count","s","e","tag","classes","attributes","aliases","addEventListener","message","close","script","highlightAutomaticallyCallback","readyState","defer","window","requestAnimationFrame","setTimeout","WorkerGlobalScope","self","g","markup","tagName","includedCdataInside","def","attrName","mathml","svg","xml","ssml","atom","rss","string","css","addInlined","addAttribute","clike","javascript","regex","js","Element","matches","msMatchesSelector","webkitMatchesSelector","EXTENSIONS","STATUS_ATTR","STATUS_LOADING","STATUS_LOADED","SELECTOR","appendChild","createElement","extension","autoloader","loadLanguages","success","error","xhr","XMLHttpRequest","open","onreadystatechange","status","responseText","range","start","Number","comma","end","undefined","parseRange","Math","max","min","String","statusText","send","loadFile","fileHighlight","logged","console","warn","arguments","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","definition","enumerable","get","globalThis","Function","prop","identity","arg","resolveProperty","val","origin","isObject","toKeyDef","parseKeysPath","path","parts","substring","isIndex","floor","defaultValue","result","parseKeys","reduce","curr","getByPath","toKebabCase","unwrapParenthesis","trim","toBooleanAttribute","parseString","parseBoolean","parseNumber","nanValue","NaN","isNaN","evaluate","DEF_FORMAT_MATCHER","isElement","el","nodeType","proto","getPrototypeOf","isPlainObject","getNodeName","Window","getParentNode","ShadowRoot","host","assignedSlot","ownerDocument","documentElement","getDocument","resolveDomTarget","$host","hasAttr","$el","every","getAttr","fallback","setAttr","removeAttribute","attr","config","target","propName","dataAttr","buildAttrName","parser","readonly","set","serializer","buildConditionalDescriptor","readOnly","boolAttr","ExportNs","exportNs","declare","isMouseEvent","event","MouseEvent","isTouchEvent","TouchEvent","PASSIVE_EVENTS","isPassiveByDefault","includes","getTouchPoint","changedTouches","x","pageX","y","pageY","overrideEvent","provider","configurable","wrap","arr","uniq","Set","item","filler","isEqual","is","keys1","keys","keys2","some","isSimilar","mask","deep","arrObj","arrMask","comparer","itm","memoizeFn","fn","hashFn","defaultArgsHashFn","memo","args","cache","has","Map","clear","defined","params","param","getPropertyDescriptor","desc","getOwnPropertyDescriptor","memoize","descriptor","TypeError","originalMethod","locks","defineOwnKeySafe","memoizeGetter","memoizeMethod","WeakMap","writable","delete","Rect","static","rect","left","top","width","height","rect1","rect2","bottom","right","constructor","cx","cy","grow","incrementX","incrementY","shrink","decrementX","decrementY","area","getWindowRect","wnd","scrollX","pageXOffset","scrollY","pageYOffset","innerWidth","clientWidth","innerHeight","clientHeight","getListScrollParents","_a","scrollParent","getScrollParent","isBody","body","isScrollable","updatedList","concat","indexOf","overflow","overflowX","overflowY","getComputedStyle","test","isMatches","matcher","isRelativeNode","nodeA","nodeB","createSequenceFinder","includeSelf","base","predicate","findNext","nextElementSibling","findPrev","previousElementSibling","findParent","findClosest","findHost","getRootNode","findAll","sel","findChildren","filter","findClosestBy","skipSelf","current","firstElementChild","lastElementChild","TraversingUtils","isRelative","closestBy","isHiddenPredicate","visibility","isTransparentPredicate","opacity","ESLTraversingQuery_1","ESLTraversingQuery","PROCESSORS_REGEX","ELEMENT_PROCESSORS","COLLECTION_PROCESSORS","selString","els","collection","processors","findFirst","processor","isCollectionProcessor","processedItem","processCollection","traverseChain","processElement","resultCollection","last","query","scope","found","part","splitQueries","traverseQuery","term","rootSel","shift","baseCollection","initial","acc","traverse","options","getClientRects","viewport","wndIntersection","intersect","getBoundingClientRect","isInViewport","isVisible","decorators","c","r","Reflect","decorate","__decorate","LISTENERS","Symbol","ESLEventListener","handler","capture","passive","$targets","delegate","handleEvent","handlerBound","bind","handlerFull","once","unsubscribe","handleDelegation","currentTarget","$delegate","closest","subscribe","removeEventListener","remove","criteria","listeners","listener","instance","eventDesc","createOrResolve","eventString","events","terms","deduplicate","splitEvents","subscribed","DESCRIPTORS","getOwnDescriptorsKeys","isEventDescriptor","getAutoDescriptors","store","getDescriptorsKeysFor","auto","ESLEventUtils","mergedDesc","dispatch","eventName","eventInit","init","bubbles","composed","cancelable","dispatchEvent","CustomEvent","descriptors","initDescriptor","inherit","superDesc","ReferenceError","addDescriptorKey","EventUtils","listen","propertyKey","lockStore","locker","elLocks","classLocks","lock","size","unlock","CSSClassUtils","tokenString","cls","splitTokens","state","ENTER","ESC","SPACE","ARROW_UP","ARROW_DOWN","SYSTEM_KEYS","prototypeConfig","finalize","ESLBaseElement","HTMLElement","super","_connected","baseTagName","connectedCallback","disconnectedCallback","attributeChangedCallback","oldValue","newValue","connected","$$on","$$off","condition","$$cls","toggle","$$attr","prevValue","$$fire","DOMException","customElements","define","registered","whenDefined","ESLSelectWrapper","_mutationObserver","MutationObserver","_onTargetMutation","$select","_$select","select","_onTargetChange","disconnect","_onChange","_onListChange","newTarget","oldTarget","observe","observationConfig","changes","change","addedNodes","removedNodes","_onReset","form","multiple","selectedOptions","selected","getOption","find","setSelected","option","isSelected","opt","hasSelected","isAllSelected","disabled","setAllSelected","values","required","validity","validationMessage","willValidate","checkValidity","reportValidity","setCustomValidity","subtree","attributeFilter","childList","characterData","rafDecorator","lastArgs","decorator","originalFn","getBound","decoratedFn","ESLSelectRenderer","$container","$text","$rest","$remove","owner","Promise","resolve","then","render","hasValue","toggleAttribute","applyItems","items","limit","format","moreLabelFormat","scrollWidth","_onClear","stopPropagation","preventDefault","_onResize","jsonAttr","buildJsonAttrDescriptor","ready","SEQUENCE_KEY","ns","sequences","userAgent","vendor","platform","navigator","isTrident","isIE","isEdgeHTML","isBlinkEdge","isEdge","isGecko","isFirefox","isOpera","isChrome","isWebkit","isSafari","isBlink","isBot","isAndroid","isMobileIOS13","maxTouchPoints","isMobileIOS","isLegacyMobile","isMobile","isMobileSafari","isTouchDevice","navApi","msMaxTouchPoints","Touch","hasHover","matchMedia","TOUCH_EVENTS","START","MOVE","END","DeviceDetector","DelayedTask","_fn","_timeout","put","task","delay","cancel","clearTimeout","activators","ESLToggleable","_open","_task","_trackHover","noAutoId","prefix","uid","sequentialUID","initiallyOpened","setInitialState","oldVal","newVal","isOpen","initiator","showDelay","hideDelay","GROUP_CHANGED_EVENT","detail","oldGroupName","newGroupName","initialParams","bindOutsideEventTracking","track","_onOutsideAction","bindHoverStateTracking","_trackHoverDelay","_onMouseEnter","_onMouseLeave","mergeDefaultParams","defaultParams","copy","show","hide","showTask","closeOnOutsideAction","trackHover","hideTask","force","silent","BEFORE_SHOW_EVENT","activator","onShow","SHOW_EVENT","BEFORE_HIDE_EVENT","onHide","HIDE_EVENT","activeClass","bodyClass","containerActiveClass","containerActiveClassTarget","updateA11y","REFRESH_EVENT","$a11yTarget","querySelector","targetEl","isOutsideAction","KeyboardEvent","_onCloseClick","_onKeyboardEvent","closeOnEsc","baseParams","trackHoverParams","buildRequestParams","_onShowRequest","_onHideRequest","observedAttributes","closeTrigger","SHOW_REQUEST_EVENT","HIDE_REQUEST_EVENT","isRTL","direction","RTLScroll","scrollType","createTextNode","dir","style","position","fontSize","createDummyScroll","scrollLeft","testRTLScrollType","normalizeScrollLeft","isRtl","RTLUtils","isMajorAxisHorizontal","calcPopupPositionByMinorAxis","cfg","centerPosition","dimensionName","arrow","marginArrow","calcUsableSizeForArrow","offsetArrowRatio","adjustAlignmentBySide","elCoord","outerCoord","arrowCoord","arrowLimit","isStartingSide","arrowAdjust","newCoord","calcArrowPosition","ESLToggleablePlaceholder","$placeholder","$origin","copyAttributesFromOrigin","allowedAttrs","ESLPopupPlaceholder","scrollOptions","ESLPopup","_deferredUpdatePosition","_updatePosition","_intersectionRatio","$arrow","arrowClass","appendArrow","first","_containerEl","containerRect","moveToBody","_isMajorAxisHorizontal","_isMajorAxisVertical","_offsetArrowRatio","ratio","rawValue","parsePercent","offsetArrow","replaceChild","behavior","disableActivatorObservation","containerEl","_offsetTrigger","offsetTrigger","_offsetContainer","offsetContainer","_intersectionMargin","intersectionMargin","afterOnShow","beforeOnHide","_stopUpdateLoop","_removeActivatorObserver","_addActivatorObserver","_startUpdateLoop","_checkIntersectionForAdjacentAxis","isAdjacentAxis","intersectionRatio","onActivatorIntersection","entries","observer","entry","isIntersecting","intersectionRect","boundingClientRect","onActivatorScroll","_updateLoopID","scrollParents","_activatorObserver","unsubscribers","$root","rootMargin","threshold","IntersectionObserver","_b","cb","same","lastRect","updateLoop","newRect","cancelAnimationFrame","triggerRect","popupRect","arrowRect","trigger","innerMargin","inner","outer","placedAt","popup","calcPopupBasicRect","isMirrored","fitOnMajorAxis","isHorizontal","dimension","coordAdjust","fitOnMinorAxis","calcPopupPosition","ESLScrollbar","_deferredDrag","_onPointerDrag","_deferredRefresh","refresh","_scrollTimer","_resizeObserver","ResizeObserver","rec","updateContentObserve","findTarget","unbindTargetEvents","$target","_$target","bindTargetEvents","$scrollbarTrack","trackClass","$scrollbarThumb","thumbClass","_onScrollOrResize","recs","contentChanges","unobserve","scrollableSize","horizontal","scrollHeight","trackOffset","offsetWidth","offsetHeight","thumbOffset","thumbSize","areaSize","scrollSize","scrollOffset","scrollTop","scrollTargetTo","normalizePosition","update","relativePosition","scrollTo","dragging","thumbPosition","updateMarkers","toPosition","point","offset","props","getOffsetPoint","_onPointerDown","_initialPosition","_pointerPosition","_initialMousePosition","_onThumbPointerDown","_onPointerDownTick","_onPointerUp","allowedOffset","noContinuousScroll","setProperty","_onBodyClick","_onPointerMove","positionChange","scrollableAreaHeight","absChange","removeProperty","stopImmediatePropagation","_onRefresh","ESLSelectItem_1","ESLSelectItem","tabIndex","original","create","ESLSelectList","register","$list","$scroll","$selectAll","_updateDisabled","bindSelect","HTMLSelectElement","_renderItems","$items","build","pinSelected","_renderGroup","_updateSelectAll","selectAllLabel","_onClick","_onKeydown","activeElement","increment","focus","ESLSelectDropdown","_disposeTimeout","$owner","dropdownClass","$focusable","preventScroll","_onTabKey","$els","$first","$last","shiftKey","ESLSelect","$renderer","$dropdown","_prepare","_updateMarkers","_dispose","valueChanged","emptyText","placeholder","hasValueClass","focusEl","hasFocus","hasFocusClass","_onFocusOut","click","_onPopupStateChange","deepMerge","objects","SyntheticEventTarget","getEventListeners","hasEventListener","minCount","DEFAULT_EVENT","validateEventListenerType","srcElement","defaultPrevented","addListener","removeListener","ESLScreenDPR_1","ESLScreenDPR","dpr","toFixed","VALUE_REGEXP","parseFloat","ignoreBotsDpr","toDPI","ESLScreenBreakpoints_1","registry","ESLScreenBreakpoints","minWidth","maxWidth","BP_NAME_REGEXP","ESLScreenBreakpoint","names","sign","bp","BP_REGEXP","shortcut","mediaQueryGE","mediaQueryLE","mediaQuery","shortcuts","ESLEnvShortcuts","_shortcuts","MediaQueryConstCondition","_matches","optimize","eq","ALL","NOT_ALL","ESLMediaChangeEvent","Event","media","MediaQueryCondition","inverted","_inverted","_mq","MediaQueryContainer","MediaQueryConjunction","optimizedItems","MediaQueryDisjunction","pretty","ESLMediaQuery_1","ESLMediaQuery","preprocessor","_preprocessors","unshift","conjunctions","conditions","parseSimpleQuery","SHORTCUT_PATTERN","replacer","process","queryInverted","processedQuery","preprocess","sanitizedQuery","invert","use","ESLMediaRule","payload","for","payloadValue","lex","ESLMediaRuleList_1","ESLMediaRuleListEvent","previous","iObserver","ESLMediaRuleList","common","pop","parseTuple","parseQuery","rules","rule","queries","valueList","validRules","_rules","_onMatchChanged","_value","computedValue","active","activeValue","activeValues","curValue","getIObserver","handleViewport","image","triggerLoad","STRING_PARSER","OBJECT_PARSER","sanitizeElAttributes","isDangerousAttribute","removeDangerousAttributes","EMPTY_IMAGE","isEmptyImage","STRATEGIES","img","shadowImg","isEmpty","backgroundImage","paddingTop","innerImg","attachInnerImage","removeInnerImage","devicePixelRatio","request","allowedTopLevelTags","DOMParser","parseFromString","removeScripts","filterElements","sanitize","ESLImage_1","ESLImage","alt","srcRules","lazyObservable","_detachLazyTrigger","clearImage","_srcRules","_onMediaMatchChange","changeMode","lazyTriggered","currentSrc","_currentSrc","empty","canUpdate","lazy","originalWidth","_shadowImageElement","originalHeight","mode","loaded","syncImage","getPath","_shadowImg","refreshOnUpdate","complete","_shadowImgError","_onError","_onLoad","role","innerImage","srcBase","updateContainerClasses","strategy","_strategy","_innerImg","innerImageClass","cloneNode","Image","onload","onerror","naturalHeight","_onReadyState","successful","LOAD_EVENT","ERROR_EVENT","READY_EVENT","containerClass","DEFAULT_CONTAINER_CLS","isLoadState","containerClassState","containerClassTarget","ESLTrigger","updateTargetFromSelector","newPopupInstance","_onTargetStateChange","a11yTarget","a11yLabel","a11yLabelActive","a11yLabelInactive","allowHover","allowClick","trackClick","initA11y","isTargetIgnored","ignore","$ignore","mergeToggleableParams","showTarget","actionParams","hideTarget","toggleTarget","updateState","wasActive","clsTarget","activeClassTarget","originalEvent","CHANGE_EVENT","_onPrimaryEvent","ignoreEsc","hoverShowDelay","hoverHideDelay","that","OBSERVED_EVENTS","ESLAlert_1","ESLAlert","alert","defaultConfig","$content","iframe","createZIndexIframe","_clearTimeout","hideTime","activeCls","Observable","_listeners","fire","UIPStateModel","_html","_isFired","setHtml","modifier","prepend","_lastModifier","dispatchChange","lastModifier","snippets","_snippets","activeSnippet","_activeSnippet","snippet","applySnippet","changeAttribute","attribute","transform","transformed","UIPRoot","model","$snippets","SNIPPET_SEL","initSnippets","addStateListener","removeStateListener","isString","isNumber","isFunction","isUnitlessNumber","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","prefixes","charAt","prefixKey","XLinkNamespace","XMLNamespace","Boolean","isVisibleChild","animate","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","marker","metadata","polygon","polyline","radialGradient","stop","switch","symbol","textPath","tspan","view","Fragment","fragment","createDocumentFragment","appendChildren","maybeRef","namespaceURI","createElementNS","defaultProps","ref","child","appendChildToNode","createComment","HTMLTemplateElement","normalizeAttribute","attrNS","dataValue","dataKey","dataset","spellcheck","namespace","setAttributeNS","UIPPlugin","$inner","_onRootStateChange","UIPPreview","clearInlineSize","UIPOptionIcons","copySVG","xmlns","fill","stroke","rx","snippetSVG","viewBox","xmlSpace","points","themeSVG","rtlDirectionSVG","settingsCollapsedSVG","editorCollapsedSVG","UIPSnippets","$title","LIST_ITEM","$active","onOutsideAction","toggleDropdown","ACTIVE_ITEM","updateTitleText","$innerContent","buildListItem","label","_onItemClick","currentIndex","_onDropdownClick","UIPOption","optionConfig","optionValue","append","toggleState","UIPOptions","UIPOptionsConfig","elem","optionsCfg","canActivate","createEl","_onRootConfigChange","_onOptionClick","component","UIPHeader","childElementCount","autofill","renderSnippets","renderOptions","renderCopy","snippetsEl","optionsEl","icon","title","_onCopyClick","clipboard","writeText","globalWindow","Deferred","_status","promise","reject","rej","_callbacks","UIPEditor","editor","tab","indentOn","moveToNewLine","catchTab","preserveIdent","addClosing","history","at","onUpdate","outline","overflowWrap","whiteSpace","doHighlight","isLegacy","contentEditable","debounceHighlight","debounce","save","restore","recording","shouldRecord","isUndo","isRedo","startsWith","debounceRecordHistory","recordHistory","on","getSelection","anchorNode","anchorOffset","focusNode","focusOffset","Node","ELEMENT_NODE","visit","TEXT_NODE","endNode","startOffset","endOffset","startEl","uneditable","endEl","setBaseAndExtent","beforeCursor","r0","getRangeAt","createRange","selectNodeContents","setEnd","startContainer","afterCursor","setStart","endContainer","legacyNewLineFix","lastRecord","splice","visitor","queue","firstChild","nextSibling","isCtrl","metaKey","ctrlKey","getKeyCode","keyCode","which","fromCharCode","execCommand","wait","timeout","findPadding","DOCUMENT_FRAGMENT_NODE","padding","newLinePadding","handleNewLine","handleTabCharacters","wrapText","handleSelfClosingCharacters","record","handleUndoRedo","isCopy","isComposing","_event","clipboardData","getData","handlePaste","selection","setData","handleCut","updateOptions","newOptions","updateCode","destroy","CodeJar","$code","class","normalizeValue","editorConfig","thisArg","deferred","debouncedSubject","WARNING_MSG","UIPSetting","$settings","UIPSettings","applyTo","getDisplayedValue","isValid","setInconsistency","updateFrom","setValue","msg","updateInner","_onSettingChanged","getElementsByClassName","setting","UIPTextSetting","$field","TokenListUtils","arr1","arr2","subArray","intersection","UIPSelectSetting","$label","innerText","settingOptions","Date","now","round","random","randUID","htmlFor","transformValue","attrValue","attrTokens","reset","attrValues","replaceFrom","appendFrom","hasSameElements","valuesOptions","inter","commonOptions","inconsistentOption","Option","inconsistentValue","clearInconsistency","onRootThemeChange","UIPBoolSetting","$inconsistencyMarker","updateReplace","updateAppend","containsFunction","checked","UIPSliderSetting","$fieldValue","step","updateSliderValue"],"sourceRoot":""}